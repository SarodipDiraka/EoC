"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "src_App_tsx";
exports.ids = ["src_App_tsx"];
exports.modules = {

/***/ "./src/App.tsx":
/*!*********************!*\
  !*** ./src/App.tsx ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ App)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _game_phaser_game_wrapper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./game/phaser-game-wrapper */ \"./src/game/phaser-game-wrapper.tsx\");\n\n\n\nfunction App() {\n    const phaserRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        id: \"app\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_game_phaser_game_wrapper__WEBPACK_IMPORTED_MODULE_2__.PhaserGame, {\n            ref: phaserRef\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Acaride\\\\Desktop\\\\LaDiplomaNext\\\\EoC\\\\src\\\\App.tsx\",\n            lineNumber: 9,\n            columnNumber: 13\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Acaride\\\\Desktop\\\\LaDiplomaNext\\\\EoC\\\\src\\\\App.tsx\",\n        lineNumber: 8,\n        columnNumber: 9\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvQXBwLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQStCO0FBQ3lDO0FBRXpELFNBQVNFO0lBQ3BCLE1BQU1DLFlBQVlILDZDQUFNQSxDQUF3QjtJQUVoRCxxQkFDSSw4REFBQ0k7UUFBSUMsSUFBRztrQkFDSiw0RUFBQ0osaUVBQVVBO1lBQUNLLEtBQUtIOzs7Ozs7Ozs7OztBQUc3QiIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvQXBwLnRzeD8xMTZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IElSZWZQaGFzZXJHYW1lLCBQaGFzZXJHYW1lIH0gZnJvbSAnLi9nYW1lL3BoYXNlci1nYW1lLXdyYXBwZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBcHAoKSB7XG4gICAgY29uc3QgcGhhc2VyUmVmID0gdXNlUmVmPElSZWZQaGFzZXJHYW1lIHwgbnVsbD4obnVsbCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGlkPVwiYXBwXCI+XG4gICAgICAgICAgICA8UGhhc2VyR2FtZSByZWY9e3BoYXNlclJlZn0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgKVxufVxuIl0sIm5hbWVzIjpbInVzZVJlZiIsIlBoYXNlckdhbWUiLCJBcHAiLCJwaGFzZXJSZWYiLCJkaXYiLCJpZCIsInJlZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/App.tsx\n");

/***/ }),

/***/ "./src/game/components/collider/collider-component.ts":
/*!************************************************************!*\
  !*** ./src/game/components/collider/collider-component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ColliderComponent: () => (/* binding */ ColliderComponent)\n/* harmony export */ });\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n\nclass ColliderComponent {\n    constructor(healthComponent, eventBusComponent){\n        this.healthComponent = healthComponent;\n        this.eventBusComponent = eventBusComponent;\n    }\n    collideWithEnemyShip() {\n        if (this.healthComponent.isDead) {\n            return;\n        }\n        this.healthComponent.die();\n    }\n    collideWithEnemyProjectile(damage = 1) {\n        if (this.healthComponent.isDead) return;\n        this.healthComponent.hit(damage);\n        this.eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.SHIP_HIT);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL2NvbGxpZGVyL2NvbGxpZGVyLWNvbXBvbmVudC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUUyRDtBQUVwRCxNQUFNQztJQUlYQyxZQUFZQyxlQUFnQyxFQUFFQyxpQkFBb0MsQ0FBRTtRQUNsRixJQUFJLENBQUNELGVBQWUsR0FBR0E7UUFDdkIsSUFBSSxDQUFDQyxpQkFBaUIsR0FBR0E7SUFDM0I7SUFFQUMsdUJBQTZCO1FBQzNCLElBQUksSUFBSSxDQUFDRixlQUFlLENBQUNHLE1BQU0sRUFBRTtZQUMvQjtRQUNGO1FBQ0EsSUFBSSxDQUFDSCxlQUFlLENBQUNJLEdBQUc7SUFDMUI7SUFFQUMsMkJBQTJCQyxTQUFTLENBQUMsRUFBUTtRQUMzQyxJQUFJLElBQUksQ0FBQ04sZUFBZSxDQUFDRyxNQUFNLEVBQUU7UUFDakMsSUFBSSxDQUFDSCxlQUFlLENBQUNPLEdBQUcsQ0FBQ0Q7UUFDekIsSUFBSSxDQUFDTCxpQkFBaUIsQ0FBQ08sSUFBSSxDQUFDWCxvRUFBYUEsQ0FBQ1ksUUFBUTtJQUNwRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2NvbXBvbmVudHMvY29sbGlkZXIvY29sbGlkZXItY29tcG9uZW50LnRzP2RkODkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSGVhbHRoQ29tcG9uZW50IH0gZnJvbSAnLi4vaGVhbHRoL2hlYWx0aC1jb21wb25lbnQnOyAgXG5pbXBvcnQgeyBFdmVudEJ1c0NvbXBvbmVudCB9IGZyb20gJy4uL2V2ZW50cy9ldmVudC1idXMtY29tcG9uZW50JztcbmltcG9ydCB7IENVU1RPTV9FVkVOVFMgfSBmcm9tICdAL2dhbWUvdHlwZXMvY3VzdG9tLWV2ZW50cyc7XG5cbmV4cG9ydCBjbGFzcyBDb2xsaWRlckNvbXBvbmVudCB7ICBcbiAgcHJpdmF0ZSBoZWFsdGhDb21wb25lbnQ6IEhlYWx0aENvbXBvbmVudDsgIFxuICBwcml2YXRlIGV2ZW50QnVzQ29tcG9uZW50OiBFdmVudEJ1c0NvbXBvbmVudDsgIFxuXG4gIGNvbnN0cnVjdG9yKGhlYWx0aENvbXBvbmVudDogSGVhbHRoQ29tcG9uZW50LCBldmVudEJ1c0NvbXBvbmVudDogRXZlbnRCdXNDb21wb25lbnQpIHsgIFxuICAgIHRoaXMuaGVhbHRoQ29tcG9uZW50ID0gaGVhbHRoQ29tcG9uZW50OyAgXG4gICAgdGhpcy5ldmVudEJ1c0NvbXBvbmVudCA9IGV2ZW50QnVzQ29tcG9uZW50OyAgXG4gIH0gIFxuXG4gIGNvbGxpZGVXaXRoRW5lbXlTaGlwKCk6IHZvaWQgeyAgXG4gICAgaWYgKHRoaXMuaGVhbHRoQ29tcG9uZW50LmlzRGVhZCkgeyAgXG4gICAgICByZXR1cm47ICBcbiAgICB9ICBcbiAgICB0aGlzLmhlYWx0aENvbXBvbmVudC5kaWUoKTsgIFxuICB9ICBcblxuICBjb2xsaWRlV2l0aEVuZW15UHJvamVjdGlsZShkYW1hZ2UgPSAxKTogdm9pZCB7ICBcbiAgICBpZiAodGhpcy5oZWFsdGhDb21wb25lbnQuaXNEZWFkKSByZXR1cm47ICBcbiAgICB0aGlzLmhlYWx0aENvbXBvbmVudC5oaXQoZGFtYWdlKTsgIFxuICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQuZW1pdChDVVNUT01fRVZFTlRTLlNISVBfSElUKTsgIFxuICB9ICAgIFxufSAgXG4iXSwibmFtZXMiOlsiQ1VTVE9NX0VWRU5UUyIsIkNvbGxpZGVyQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJoZWFsdGhDb21wb25lbnQiLCJldmVudEJ1c0NvbXBvbmVudCIsImNvbGxpZGVXaXRoRW5lbXlTaGlwIiwiaXNEZWFkIiwiZGllIiwiY29sbGlkZVdpdGhFbmVteVByb2plY3RpbGUiLCJkYW1hZ2UiLCJoaXQiLCJlbWl0IiwiU0hJUF9ISVQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/components/collider/collider-component.ts\n");

/***/ }),

/***/ "./src/game/components/health/health-component.ts":
/*!********************************************************!*\
  !*** ./src/game/components/health/health-component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HealthComponent: () => (/* binding */ HealthComponent)\n/* harmony export */ });\nclass HealthComponent {\n    constructor(life){\n        this.startingLife = life;\n        this.currentLife = life;\n        this.isDeadFlag = false;\n    }\n    get life() {\n        return this.currentLife;\n    }\n    get isDead() {\n        return this.isDeadFlag;\n    }\n    setLife(value) {\n        this.currentLife = value;\n    }\n    reset() {\n        this.currentLife = this.startingLife;\n        this.isDeadFlag = false;\n    }\n    hit(damage) {\n        if (this.isDeadFlag) {\n            return;\n        }\n        this.currentLife = this.currentLife - damage;\n        if (this.currentLife <= 0) {\n            this.isDeadFlag = true;\n        }\n    }\n    die() {\n        if (this.isDeadFlag) return;\n        this.currentLife = 0;\n        this.isDeadFlag = true;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL2hlYWx0aC9oZWFsdGgtY29tcG9uZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQTtJQUtYQyxZQUFZQyxJQUFZLENBQUU7UUFDeEIsSUFBSSxDQUFDQyxZQUFZLEdBQUdEO1FBQ3BCLElBQUksQ0FBQ0UsV0FBVyxHQUFHRjtRQUNuQixJQUFJLENBQUNHLFVBQVUsR0FBRztJQUNwQjtJQUVBLElBQUlILE9BQWU7UUFDakIsT0FBTyxJQUFJLENBQUNFLFdBQVc7SUFDekI7SUFFQSxJQUFJRSxTQUFrQjtRQUNwQixPQUFPLElBQUksQ0FBQ0QsVUFBVTtJQUN4QjtJQUVBRSxRQUFRQyxLQUFhLEVBQVE7UUFDM0IsSUFBSSxDQUFDSixXQUFXLEdBQUdJO0lBQ3JCO0lBRUFDLFFBQWM7UUFDWixJQUFJLENBQUNMLFdBQVcsR0FBRyxJQUFJLENBQUNELFlBQVk7UUFDcEMsSUFBSSxDQUFDRSxVQUFVLEdBQUc7SUFDcEI7SUFFQUssSUFBSUMsTUFBYyxFQUFRO1FBQ3hCLElBQUksSUFBSSxDQUFDTixVQUFVLEVBQUU7WUFDbkI7UUFDRjtRQUVBLElBQUksQ0FBQ0QsV0FBVyxHQUFHLElBQUksQ0FBQ0EsV0FBVyxHQUFHTztRQUN0QyxJQUFJLElBQUksQ0FBQ1AsV0FBVyxJQUFJLEdBQUc7WUFDekIsSUFBSSxDQUFDQyxVQUFVLEdBQUc7UUFDcEI7SUFDRjtJQUVBTyxNQUFZO1FBQ1YsSUFBSSxJQUFJLENBQUNQLFVBQVUsRUFBRTtRQUVyQixJQUFJLENBQUNELFdBQVcsR0FBRztRQUNuQixJQUFJLENBQUNDLFVBQVUsR0FBRztJQUNwQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2NvbXBvbmVudHMvaGVhbHRoL2hlYWx0aC1jb21wb25lbnQudHM/NDkzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgSGVhbHRoQ29tcG9uZW50IHtcbiAgcHJpdmF0ZSBzdGFydGluZ0xpZmU6IG51bWJlcjtcbiAgcHJpdmF0ZSBjdXJyZW50TGlmZTogbnVtYmVyO1xuICBwcml2YXRlIGlzRGVhZEZsYWc6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IobGlmZTogbnVtYmVyKSB7XG4gICAgdGhpcy5zdGFydGluZ0xpZmUgPSBsaWZlO1xuICAgIHRoaXMuY3VycmVudExpZmUgPSBsaWZlO1xuICAgIHRoaXMuaXNEZWFkRmxhZyA9IGZhbHNlO1xuICB9XG5cbiAgZ2V0IGxpZmUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50TGlmZTtcbiAgfVxuXG4gIGdldCBpc0RlYWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNEZWFkRmxhZztcbiAgfVxuXG4gIHNldExpZmUodmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudExpZmUgPSB2YWx1ZTtcbiAgfVxuXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudExpZmUgPSB0aGlzLnN0YXJ0aW5nTGlmZTtcbiAgICB0aGlzLmlzRGVhZEZsYWcgPSBmYWxzZTtcbiAgfVxuXG4gIGhpdChkYW1hZ2U6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzRGVhZEZsYWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnRMaWZlID0gdGhpcy5jdXJyZW50TGlmZSAtIGRhbWFnZTtcbiAgICBpZiAodGhpcy5jdXJyZW50TGlmZSA8PSAwKSB7XG4gICAgICB0aGlzLmlzRGVhZEZsYWcgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGRpZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc0RlYWRGbGFnKSByZXR1cm47XG4gICAgXG4gICAgdGhpcy5jdXJyZW50TGlmZSA9IDA7XG4gICAgdGhpcy5pc0RlYWRGbGFnID0gdHJ1ZTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkhlYWx0aENvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwibGlmZSIsInN0YXJ0aW5nTGlmZSIsImN1cnJlbnRMaWZlIiwiaXNEZWFkRmxhZyIsImlzRGVhZCIsInNldExpZmUiLCJ2YWx1ZSIsInJlc2V0IiwiaGl0IiwiZGFtYWdlIiwiZGllIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/components/health/health-component.ts\n");

/***/ }),

/***/ "./src/game/components/input/ai/common/bot-fighter-input-component.ts":
/*!****************************************************************************!*\
  !*** ./src/game/components/input/ai/common/bot-fighter-input-component.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BotFighterInputComponent: () => (/* binding */ BotFighterInputComponent)\n/* harmony export */ });\n/* harmony import */ var _input_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../input-component */ \"./src/game/components/input/input-component.ts\");\n\nclass BotFighterInputComponent extends _input_component__WEBPACK_IMPORTED_MODULE_0__.InputComponent {\n    constructor(){\n        super();\n        this.pressDown();\n    }\n    update() {}\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL2lucHV0L2FpL2NvbW1vbi9ib3QtZmlnaHRlci1pbnB1dC1jb21wb25lbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBdUQ7QUFFaEQsTUFBTUMsaUNBQWlDRCw0REFBY0E7SUFDeERFLGFBQWM7UUFDVixLQUFLO1FBQ0wsSUFBSSxDQUFDQyxTQUFTO0lBQ2xCO0lBRUFDLFNBQWUsQ0FFZjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2NvbXBvbmVudHMvaW5wdXQvYWkvY29tbW9uL2JvdC1maWdodGVyLWlucHV0LWNvbXBvbmVudC50cz9jYWY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElucHV0Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4vaW5wdXQtY29tcG9uZW50JztcblxuZXhwb3J0IGNsYXNzIEJvdEZpZ2h0ZXJJbnB1dENvbXBvbmVudCBleHRlbmRzIElucHV0Q29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wcmVzc0Rvd24oKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoKTogdm9pZCB7XG5cbiAgICB9XG59XG4iXSwibmFtZXMiOlsiSW5wdXRDb21wb25lbnQiLCJCb3RGaWdodGVySW5wdXRDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByZXNzRG93biIsInVwZGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/components/input/ai/common/bot-fighter-input-component.ts\n");

/***/ }),

/***/ "./src/game/components/input/ai/common/bot-scout-input-component.ts":
/*!**************************************************************************!*\
  !*** ./src/game/components/input/ai/common/bot-scout-input-component.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BotScoutInputComponent: () => (/* binding */ BotScoutInputComponent)\n/* harmony export */ });\n/* harmony import */ var _input_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../input-component */ \"./src/game/components/input/input-component.ts\");\n/* harmony import */ var _configs_game_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../configs/game-config */ \"./src/game/configs/game-config.ts\");\n\n\nclass BotScoutInputComponent extends _input_component__WEBPACK_IMPORTED_MODULE_0__.InputComponent {\n    constructor(gameObject){\n        super();\n        this.gameObject = gameObject;\n        this.startX = gameObject.x;\n        this.maxXMovement = _configs_game_config__WEBPACK_IMPORTED_MODULE_1__.ENEMY_SCOUT_MOVEMENT_MAX_X;\n        this.pressRight();\n        this.pressDown();\n        this.releaseLeft();\n    }\n    setStartX(val) {\n        this.startX = val;\n    }\n    update() {\n        const currentX = this.gameObject.x;\n        if (currentX > this.startX + this.maxXMovement) {\n            this.pressLeft();\n            this.releaseRight();\n        } else if (currentX < this.startX - this.maxXMovement) {\n            this.releaseLeft();\n            this.pressRight();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL2lucHV0L2FpL2NvbW1vbi9ib3Qtc2NvdXQtaW5wdXQtY29tcG9uZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1RDtBQUNHO0FBR25ELE1BQU1FLCtCQUErQkYsNERBQWNBO0lBS3RERyxZQUFZQyxVQUFxQyxDQUFFO1FBQy9DLEtBQUs7UUFDTCxJQUFJLENBQUNBLFVBQVUsR0FBR0E7UUFDbEIsSUFBSSxDQUFDQyxNQUFNLEdBQUdELFdBQVdFLENBQUM7UUFDMUIsSUFBSSxDQUFDQyxZQUFZLEdBQUdOLDRFQUFpQztRQUVyRCxJQUFJLENBQUNRLFVBQVU7UUFDZixJQUFJLENBQUNDLFNBQVM7UUFDZCxJQUFJLENBQUNDLFdBQVc7SUFDcEI7SUFFQUMsVUFBVUMsR0FBVyxFQUFRO1FBQ3pCLElBQUksQ0FBQ1IsTUFBTSxHQUFHUTtJQUNsQjtJQUVBQyxTQUFlO1FBQ1gsTUFBTUMsV0FBVyxJQUFJLENBQUNYLFVBQVUsQ0FBQ0UsQ0FBQztRQUVsQyxJQUFJUyxXQUFXLElBQUksQ0FBQ1YsTUFBTSxHQUFHLElBQUksQ0FBQ0UsWUFBWSxFQUFFO1lBQzVDLElBQUksQ0FBQ1MsU0FBUztZQUNkLElBQUksQ0FBQ0MsWUFBWTtRQUNyQixPQUFPLElBQUlGLFdBQVcsSUFBSSxDQUFDVixNQUFNLEdBQUcsSUFBSSxDQUFDRSxZQUFZLEVBQUU7WUFDbkQsSUFBSSxDQUFDSSxXQUFXO1lBQ2hCLElBQUksQ0FBQ0YsVUFBVTtRQUNuQjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvY29tcG9uZW50cy9pbnB1dC9haS9jb21tb24vYm90LXNjb3V0LWlucHV0LWNvbXBvbmVudC50cz9kMDE2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElucHV0Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4vaW5wdXQtY29tcG9uZW50JztcbmltcG9ydCAqIGFzIENPTkZJRyBmcm9tICcuLi8uLi8uLi8uLi9jb25maWdzL2dhbWUtY29uZmlnJztcbmltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcblxuZXhwb3J0IGNsYXNzIEJvdFNjb3V0SW5wdXRDb21wb25lbnQgZXh0ZW5kcyBJbnB1dENvbXBvbmVudCB7XG4gICAgcHJpdmF0ZSBnYW1lT2JqZWN0OiBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlO1xuICAgIHByaXZhdGUgc3RhcnRYOiBudW1iZXI7XG4gICAgcHJpdmF0ZSByZWFkb25seSBtYXhYTW92ZW1lbnQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKGdhbWVPYmplY3Q6IFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0ID0gZ2FtZU9iamVjdDtcbiAgICAgICAgdGhpcy5zdGFydFggPSBnYW1lT2JqZWN0Lng7XG4gICAgICAgIHRoaXMubWF4WE1vdmVtZW50ID0gQ09ORklHLkVORU1ZX1NDT1VUX01PVkVNRU5UX01BWF9YO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5wcmVzc1JpZ2h0KCk7XG4gICAgICAgIHRoaXMucHJlc3NEb3duKCk7XG4gICAgICAgIHRoaXMucmVsZWFzZUxlZnQoKTtcbiAgICB9XG5cbiAgICBzZXRTdGFydFgodmFsOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdGFydFggPSB2YWw7XG4gICAgfVxuXG4gICAgdXBkYXRlKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBjdXJyZW50WCA9IHRoaXMuZ2FtZU9iamVjdC54O1xuICAgICAgICBcbiAgICAgICAgaWYgKGN1cnJlbnRYID4gdGhpcy5zdGFydFggKyB0aGlzLm1heFhNb3ZlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcmVzc0xlZnQoKTtcbiAgICAgICAgICAgIHRoaXMucmVsZWFzZVJpZ2h0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFggPCB0aGlzLnN0YXJ0WCAtIHRoaXMubWF4WE1vdmVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnJlbGVhc2VMZWZ0KCk7XG4gICAgICAgICAgICB0aGlzLnByZXNzUmlnaHQoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJJbnB1dENvbXBvbmVudCIsIkNPTkZJRyIsIkJvdFNjb3V0SW5wdXRDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsImdhbWVPYmplY3QiLCJzdGFydFgiLCJ4IiwibWF4WE1vdmVtZW50IiwiRU5FTVlfU0NPVVRfTU9WRU1FTlRfTUFYX1giLCJwcmVzc1JpZ2h0IiwicHJlc3NEb3duIiwicmVsZWFzZUxlZnQiLCJzZXRTdGFydFgiLCJ2YWwiLCJ1cGRhdGUiLCJjdXJyZW50WCIsInByZXNzTGVmdCIsInJlbGVhc2VSaWdodCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/components/input/ai/common/bot-scout-input-component.ts\n");

/***/ }),

/***/ "./src/game/components/input/ai/common/circular-fighter-input-component.ts":
/*!*********************************************************************************!*\
  !*** ./src/game/components/input/ai/common/circular-fighter-input-component.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CircularFighterInputComponent: () => (/* binding */ CircularFighterInputComponent)\n/* harmony export */ });\n/* harmony import */ var _input_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../input-component */ \"./src/game/components/input/input-component.ts\");\n\nclass CircularFighterInputComponent extends _input_component__WEBPACK_IMPORTED_MODULE_0__.InputComponent {\n    constructor(){\n        super();\n        this._movementAngle = Math.PI / 2;\n        this._shouldShoot = false;\n        this._shootAngle = 0;\n        this.updateMovement();\n    }\n    setMovementAngle(angle) {\n        this._movementAngle = angle;\n        this.updateMovement();\n    }\n    setShootTarget(angle, shouldShoot) {\n        this._shootAngle = angle;\n        this._shouldShoot = shouldShoot;\n    }\n    update(time, delta) {\n        if (this._shouldShoot) {\n            this.pressPrimaryAction();\n        } else {\n            this.releasePrimaryAction();\n        }\n    }\n    updateMovement() {\n        this.resetMovement();\n        const cos = Math.cos(this._movementAngle);\n        const sin = Math.sin(this._movementAngle);\n        if (cos > 0) this.pressRight();\n        else if (cos < 0) this.pressLeft();\n        if (sin > 0) this.pressDown();\n        else if (sin < 0) this.pressUp();\n    }\n    resetMovement() {\n        this.releaseUp();\n        this.releaseDown();\n        this.releaseLeft();\n        this.releaseRight();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL2lucHV0L2FpL2NvbW1vbi9jaXJjdWxhci1maWdodGVyLWlucHV0LWNvbXBvbmVudC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUF1RDtBQUVoRCxNQUFNQyxzQ0FBc0NELDREQUFjQTtJQUs3REUsYUFBYztRQUNWLEtBQUs7YUFMREMsaUJBQXlCQyxLQUFLQyxFQUFFLEdBQUM7YUFDakNDLGVBQXdCO2FBQ3hCQyxjQUFzQjtRQUkxQixJQUFJLENBQUNDLGNBQWM7SUFDdkI7SUFFQUMsaUJBQWlCQyxLQUFhLEVBQVE7UUFDbEMsSUFBSSxDQUFDUCxjQUFjLEdBQUdPO1FBQ3RCLElBQUksQ0FBQ0YsY0FBYztJQUN2QjtJQUVBRyxlQUFlRCxLQUFhLEVBQUVFLFdBQW9CLEVBQVE7UUFDdEQsSUFBSSxDQUFDTCxXQUFXLEdBQUdHO1FBQ25CLElBQUksQ0FBQ0osWUFBWSxHQUFHTTtJQUN4QjtJQUVBQyxPQUFPQyxJQUFZLEVBQUVDLEtBQWEsRUFBUTtRQUN0QyxJQUFJLElBQUksQ0FBQ1QsWUFBWSxFQUFFO1lBQ25CLElBQUksQ0FBQ1Usa0JBQWtCO1FBQzNCLE9BQU87WUFDSCxJQUFJLENBQUNDLG9CQUFvQjtRQUM3QjtJQUNKO0lBRVFULGlCQUF1QjtRQUMzQixJQUFJLENBQUNVLGFBQWE7UUFDbEIsTUFBTUMsTUFBTWYsS0FBS2UsR0FBRyxDQUFDLElBQUksQ0FBQ2hCLGNBQWM7UUFDeEMsTUFBTWlCLE1BQU1oQixLQUFLZ0IsR0FBRyxDQUFDLElBQUksQ0FBQ2pCLGNBQWM7UUFFeEMsSUFBSWdCLE1BQU0sR0FBRyxJQUFJLENBQUNFLFVBQVU7YUFDdkIsSUFBSUYsTUFBTSxHQUFHLElBQUksQ0FBQ0csU0FBUztRQUVoQyxJQUFJRixNQUFNLEdBQUcsSUFBSSxDQUFDRyxTQUFTO2FBQ3RCLElBQUlILE1BQU0sR0FBRyxJQUFJLENBQUNJLE9BQU87SUFDbEM7SUFFT04sZ0JBQXNCO1FBQ3pCLElBQUksQ0FBQ08sU0FBUztRQUNkLElBQUksQ0FBQ0MsV0FBVztRQUNoQixJQUFJLENBQUNDLFdBQVc7UUFDaEIsSUFBSSxDQUFDQyxZQUFZO0lBQ3JCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvY29tcG9uZW50cy9pbnB1dC9haS9jb21tb24vY2lyY3VsYXItZmlnaHRlci1pbnB1dC1jb21wb25lbnQudHM/ZGJmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnB1dENvbXBvbmVudCB9IGZyb20gXCIuLi8uLi9pbnB1dC1jb21wb25lbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDaXJjdWxhckZpZ2h0ZXJJbnB1dENvbXBvbmVudCBleHRlbmRzIElucHV0Q29tcG9uZW50IHtcclxuICAgIHByaXZhdGUgX21vdmVtZW50QW5nbGU6IG51bWJlciA9IE1hdGguUEkvMjtcclxuICAgIHByaXZhdGUgX3Nob3VsZFNob290OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9zaG9vdEFuZ2xlOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVNb3ZlbWVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE1vdmVtZW50QW5nbGUoYW5nbGU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX21vdmVtZW50QW5nbGUgPSBhbmdsZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZU1vdmVtZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U2hvb3RUYXJnZXQoYW5nbGU6IG51bWJlciwgc2hvdWxkU2hvb3Q6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9zaG9vdEFuZ2xlID0gYW5nbGU7XHJcbiAgICAgICAgdGhpcy5fc2hvdWxkU2hvb3QgPSBzaG91bGRTaG9vdDtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUodGltZTogbnVtYmVyLCBkZWx0YTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3Nob3VsZFNob290KSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJlc3NQcmltYXJ5QWN0aW9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZWxlYXNlUHJpbWFyeUFjdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZU1vdmVtZW50KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmVzZXRNb3ZlbWVudCgpO1xyXG4gICAgICAgIGNvbnN0IGNvcyA9IE1hdGguY29zKHRoaXMuX21vdmVtZW50QW5nbGUpO1xyXG4gICAgICAgIGNvbnN0IHNpbiA9IE1hdGguc2luKHRoaXMuX21vdmVtZW50QW5nbGUpO1xyXG5cclxuICAgICAgICBpZiAoY29zID4gMCkgdGhpcy5wcmVzc1JpZ2h0KCk7XHJcbiAgICAgICAgZWxzZSBpZiAoY29zIDwgMCkgdGhpcy5wcmVzc0xlZnQoKTtcclxuXHJcbiAgICAgICAgaWYgKHNpbiA+IDApIHRoaXMucHJlc3NEb3duKCk7XHJcbiAgICAgICAgZWxzZSBpZiAoc2luIDwgMCkgdGhpcy5wcmVzc1VwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlc2V0TW92ZW1lbnQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZWxlYXNlVXAoKTtcclxuICAgICAgICB0aGlzLnJlbGVhc2VEb3duKCk7XHJcbiAgICAgICAgdGhpcy5yZWxlYXNlTGVmdCgpO1xyXG4gICAgICAgIHRoaXMucmVsZWFzZVJpZ2h0KCk7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiSW5wdXRDb21wb25lbnQiLCJDaXJjdWxhckZpZ2h0ZXJJbnB1dENvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwiX21vdmVtZW50QW5nbGUiLCJNYXRoIiwiUEkiLCJfc2hvdWxkU2hvb3QiLCJfc2hvb3RBbmdsZSIsInVwZGF0ZU1vdmVtZW50Iiwic2V0TW92ZW1lbnRBbmdsZSIsImFuZ2xlIiwic2V0U2hvb3RUYXJnZXQiLCJzaG91bGRTaG9vdCIsInVwZGF0ZSIsInRpbWUiLCJkZWx0YSIsInByZXNzUHJpbWFyeUFjdGlvbiIsInJlbGVhc2VQcmltYXJ5QWN0aW9uIiwicmVzZXRNb3ZlbWVudCIsImNvcyIsInNpbiIsInByZXNzUmlnaHQiLCJwcmVzc0xlZnQiLCJwcmVzc0Rvd24iLCJwcmVzc1VwIiwicmVsZWFzZVVwIiwicmVsZWFzZURvd24iLCJyZWxlYXNlTGVmdCIsInJlbGVhc2VSaWdodCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/components/input/ai/common/circular-fighter-input-component.ts\n");

/***/ }),

/***/ "./src/game/components/input/human/keyboard-input-component.ts":
/*!*********************************************************************!*\
  !*** ./src/game/components/input/human/keyboard-input-component.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KeyboardInputComponent: () => (/* binding */ KeyboardInputComponent)\n/* harmony export */ });\n/* harmony import */ var _input_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../input-component */ \"./src/game/components/input/input-component.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass KeyboardInputComponent extends _input_component__WEBPACK_IMPORTED_MODULE_0__.InputComponent {\n    constructor(scene){\n        super();\n        this.cursorKeys = scene.input.keyboard.createCursorKeys();\n        this.shootKeyZ = scene.input.keyboard.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.Z);\n        this.shootKeyX = scene.input.keyboard.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.X);\n        this.shootKeyC = scene.input.keyboard.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.C);\n        this.focusKeyShift = scene.input.keyboard.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.SHIFT);\n        this.inputLocked = false;\n    }\n    set lockInput(val) {\n        this.inputLocked = val;\n    }\n    update() {\n        if (this.inputLocked) {\n            this.reset();\n            return;\n        }\n        // Используем методы родительского класса вместо прямого доступа к полям\n        this.cursorKeys.up.isDown ? this.pressUp() : this.releaseUp();\n        this.cursorKeys.down.isDown ? this.pressDown() : this.releaseDown();\n        this.cursorKeys.left.isDown ? this.pressLeft() : this.releaseLeft();\n        this.cursorKeys.right.isDown ? this.pressRight() : this.releaseRight();\n        this.cursorKeys.space.isDown || this.shootKeyZ.isDown ? this.pressPrimaryAction() : this.releasePrimaryAction();\n        // Вторичное действие (X)\n        this.shootKeyX.isDown ? this.pressSecondaryAction() : this.releaseSecondaryAction();\n        // Третичное действие (C)\n        this.shootKeyC.isDown ? this.pressThirdAction() : this.releaseThirdAction();\n        // Фокусировка/Торможение (Shift)\n        this.focusKeyShift.isDown ? this.pressFocus() : this.releaseFocus();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL2lucHV0L2h1bWFuL2tleWJvYXJkLWlucHV0LWNvbXBvbmVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW9EO0FBQ3hCO0FBRXJCLE1BQU1FLCtCQUErQkYsNERBQWNBO0lBUXRERyxZQUFZQyxLQUFtQixDQUFFO1FBQzdCLEtBQUs7UUFDTCxJQUFJLENBQUNDLFVBQVUsR0FBR0QsTUFBTUUsS0FBSyxDQUFDQyxRQUFRLENBQUVDLGdCQUFnQjtRQUN4RCxJQUFJLENBQUNDLFNBQVMsR0FBR0wsTUFBTUUsS0FBSyxDQUFDQyxRQUFRLENBQUVHLE1BQU0sQ0FBQ1QscURBQVksQ0FBQ1csUUFBUSxDQUFDQyxRQUFRLENBQUNDLENBQUM7UUFDOUUsSUFBSSxDQUFDQyxTQUFTLEdBQUdYLE1BQU1FLEtBQUssQ0FBQ0MsUUFBUSxDQUFFRyxNQUFNLENBQUNULHFEQUFZLENBQUNXLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDRyxDQUFDO1FBQzlFLElBQUksQ0FBQ0MsU0FBUyxHQUFHYixNQUFNRSxLQUFLLENBQUNDLFFBQVEsQ0FBRUcsTUFBTSxDQUFDVCxxREFBWSxDQUFDVyxRQUFRLENBQUNDLFFBQVEsQ0FBQ0ssQ0FBQztRQUM5RSxJQUFJLENBQUNDLGFBQWEsR0FBR2YsTUFBTUUsS0FBSyxDQUFDQyxRQUFRLENBQUVHLE1BQU0sQ0FBQ1QscURBQVksQ0FBQ1csUUFBUSxDQUFDQyxRQUFRLENBQUNPLEtBQUs7UUFDdEYsSUFBSSxDQUFDQyxXQUFXLEdBQUc7SUFDdkI7SUFFQSxJQUFJQyxVQUFVQyxHQUFZLEVBQUU7UUFDeEIsSUFBSSxDQUFDRixXQUFXLEdBQUdFO0lBQ3ZCO0lBRUFDLFNBQWU7UUFDWCxJQUFJLElBQUksQ0FBQ0gsV0FBVyxFQUFFO1lBQ2xCLElBQUksQ0FBQ0ksS0FBSztZQUNWO1FBQ0o7UUFFQSx3RUFBd0U7UUFDeEUsSUFBSSxDQUFDcEIsVUFBVSxDQUFDcUIsRUFBRSxDQUFDQyxNQUFNLEdBQUcsSUFBSSxDQUFDQyxPQUFPLEtBQUssSUFBSSxDQUFDQyxTQUFTO1FBQzNELElBQUksQ0FBQ3hCLFVBQVUsQ0FBQ3lCLElBQUksQ0FBQ0gsTUFBTSxHQUFHLElBQUksQ0FBQ0ksU0FBUyxLQUFLLElBQUksQ0FBQ0MsV0FBVztRQUNqRSxJQUFJLENBQUMzQixVQUFVLENBQUM0QixJQUFJLENBQUNOLE1BQU0sR0FBRyxJQUFJLENBQUNPLFNBQVMsS0FBSyxJQUFJLENBQUNDLFdBQVc7UUFDakUsSUFBSSxDQUFDOUIsVUFBVSxDQUFDK0IsS0FBSyxDQUFDVCxNQUFNLEdBQUcsSUFBSSxDQUFDVSxVQUFVLEtBQUssSUFBSSxDQUFDQyxZQUFZO1FBQ3BFLElBQUksQ0FBQ2pDLFVBQVUsQ0FBQ2tDLEtBQUssQ0FBQ1osTUFBTSxJQUFJLElBQUksQ0FBQ2xCLFNBQVMsQ0FBQ2tCLE1BQU0sR0FDL0MsSUFBSSxDQUFDYSxrQkFBa0IsS0FDdkIsSUFBSSxDQUFDQyxvQkFBb0I7UUFFL0IseUJBQXlCO1FBQ3pCLElBQUksQ0FBQzFCLFNBQVMsQ0FBQ1ksTUFBTSxHQUNmLElBQUksQ0FBQ2Usb0JBQW9CLEtBQ3pCLElBQUksQ0FBQ0Msc0JBQXNCO1FBRWpDLHlCQUF5QjtRQUN6QixJQUFJLENBQUMxQixTQUFTLENBQUNVLE1BQU0sR0FDZixJQUFJLENBQUNpQixnQkFBZ0IsS0FDckIsSUFBSSxDQUFDQyxrQkFBa0I7UUFFN0IsaUNBQWlDO1FBQ2pDLElBQUksQ0FBQzFCLGFBQWEsQ0FBQ1EsTUFBTSxHQUNuQixJQUFJLENBQUNtQixVQUFVLEtBQ2YsSUFBSSxDQUFDQyxZQUFZO0lBQzNCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvY29tcG9uZW50cy9pbnB1dC9odW1hbi9rZXlib2FyZC1pbnB1dC1jb21wb25lbnQudHM/OWYwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnB1dENvbXBvbmVudCB9IGZyb20gJy4uL2lucHV0LWNvbXBvbmVudCc7XG5pbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XG5cbmV4cG9ydCBjbGFzcyBLZXlib2FyZElucHV0Q29tcG9uZW50IGV4dGVuZHMgSW5wdXRDb21wb25lbnQge1xuICAgIHByaXZhdGUgY3Vyc29yS2V5czogUGhhc2VyLlR5cGVzLklucHV0LktleWJvYXJkLkN1cnNvcktleXM7XG4gICAgcHJpdmF0ZSBzaG9vdEtleVo6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXk7XG4gICAgcHJpdmF0ZSBzaG9vdEtleVg6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXk7XG4gICAgcHJpdmF0ZSBzaG9vdEtleUM6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXk7XG4gICAgcHJpdmF0ZSBmb2N1c0tleVNoaWZ0OiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5O1xuICAgIHByaXZhdGUgaW5wdXRMb2NrZWQ6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogUGhhc2VyLlNjZW5lKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY3Vyc29yS2V5cyA9IHNjZW5lLmlucHV0LmtleWJvYXJkIS5jcmVhdGVDdXJzb3JLZXlzKCk7XG4gICAgICAgIHRoaXMuc2hvb3RLZXlaID0gc2NlbmUuaW5wdXQua2V5Ym9hcmQhLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuWik7XG4gICAgICAgIHRoaXMuc2hvb3RLZXlYID0gc2NlbmUuaW5wdXQua2V5Ym9hcmQhLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuWCk7XG4gICAgICAgIHRoaXMuc2hvb3RLZXlDID0gc2NlbmUuaW5wdXQua2V5Ym9hcmQhLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuQyk7XG4gICAgICAgIHRoaXMuZm9jdXNLZXlTaGlmdCA9IHNjZW5lLmlucHV0LmtleWJvYXJkIS5hZGRLZXkoUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLlNISUZUKTtcbiAgICAgICAgdGhpcy5pbnB1dExvY2tlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHNldCBsb2NrSW5wdXQodmFsOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuaW5wdXRMb2NrZWQgPSB2YWw7XG4gICAgfVxuXG4gICAgdXBkYXRlKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pbnB1dExvY2tlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0LzQtdGC0L7QtNGLINGA0L7QtNC40YLQtdC70YzRgdC60L7Qs9C+INC60LvQsNGB0YHQsCDQstC80LXRgdGC0L4g0L/RgNGP0LzQvtCz0L4g0LTQvtGB0YLRg9C/0LAg0Log0L/QvtC70Y/QvFxuICAgICAgICB0aGlzLmN1cnNvcktleXMudXAuaXNEb3duID8gdGhpcy5wcmVzc1VwKCkgOiB0aGlzLnJlbGVhc2VVcCgpO1xuICAgICAgICB0aGlzLmN1cnNvcktleXMuZG93bi5pc0Rvd24gPyB0aGlzLnByZXNzRG93bigpIDogdGhpcy5yZWxlYXNlRG93bigpO1xuICAgICAgICB0aGlzLmN1cnNvcktleXMubGVmdC5pc0Rvd24gPyB0aGlzLnByZXNzTGVmdCgpIDogdGhpcy5yZWxlYXNlTGVmdCgpO1xuICAgICAgICB0aGlzLmN1cnNvcktleXMucmlnaHQuaXNEb3duID8gdGhpcy5wcmVzc1JpZ2h0KCkgOiB0aGlzLnJlbGVhc2VSaWdodCgpO1xuICAgICAgICB0aGlzLmN1cnNvcktleXMuc3BhY2UuaXNEb3duIHx8IHRoaXMuc2hvb3RLZXlaLmlzRG93biBcbiAgICAgICAgICAgID8gdGhpcy5wcmVzc1ByaW1hcnlBY3Rpb24oKSBcbiAgICAgICAgICAgIDogdGhpcy5yZWxlYXNlUHJpbWFyeUFjdGlvbigpO1xuICAgICAgICBcbiAgICAgICAgLy8g0JLRgtC+0YDQuNGH0L3QvtC1INC00LXQudGB0YLQstC40LUgKFgpXG4gICAgICAgIHRoaXMuc2hvb3RLZXlYLmlzRG93biBcbiAgICAgICAgICAgID8gdGhpcy5wcmVzc1NlY29uZGFyeUFjdGlvbigpIFxuICAgICAgICAgICAgOiB0aGlzLnJlbGVhc2VTZWNvbmRhcnlBY3Rpb24oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAvLyDQotGA0LXRgtC40YfQvdC+0LUg0LTQtdC50YHRgtCy0LjQtSAoQylcbiAgICAgICAgdGhpcy5zaG9vdEtleUMuaXNEb3duIFxuICAgICAgICAgICAgPyB0aGlzLnByZXNzVGhpcmRBY3Rpb24oKSBcbiAgICAgICAgICAgIDogdGhpcy5yZWxlYXNlVGhpcmRBY3Rpb24oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAvLyDQpNC+0LrRg9GB0LjRgNC+0LLQutCwL9Ci0L7RgNC80L7QttC10L3QuNC1IChTaGlmdClcbiAgICAgICAgdGhpcy5mb2N1c0tleVNoaWZ0LmlzRG93biBcbiAgICAgICAgICAgID8gdGhpcy5wcmVzc0ZvY3VzKCkgXG4gICAgICAgICAgICA6IHRoaXMucmVsZWFzZUZvY3VzKCk7XG4gICAgfVxufSJdLCJuYW1lcyI6WyJJbnB1dENvbXBvbmVudCIsIlBoYXNlciIsIktleWJvYXJkSW5wdXRDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwiY3Vyc29yS2V5cyIsImlucHV0Iiwia2V5Ym9hcmQiLCJjcmVhdGVDdXJzb3JLZXlzIiwic2hvb3RLZXlaIiwiYWRkS2V5IiwiSW5wdXQiLCJLZXlib2FyZCIsIktleUNvZGVzIiwiWiIsInNob290S2V5WCIsIlgiLCJzaG9vdEtleUMiLCJDIiwiZm9jdXNLZXlTaGlmdCIsIlNISUZUIiwiaW5wdXRMb2NrZWQiLCJsb2NrSW5wdXQiLCJ2YWwiLCJ1cGRhdGUiLCJyZXNldCIsInVwIiwiaXNEb3duIiwicHJlc3NVcCIsInJlbGVhc2VVcCIsImRvd24iLCJwcmVzc0Rvd24iLCJyZWxlYXNlRG93biIsImxlZnQiLCJwcmVzc0xlZnQiLCJyZWxlYXNlTGVmdCIsInJpZ2h0IiwicHJlc3NSaWdodCIsInJlbGVhc2VSaWdodCIsInNwYWNlIiwicHJlc3NQcmltYXJ5QWN0aW9uIiwicmVsZWFzZVByaW1hcnlBY3Rpb24iLCJwcmVzc1NlY29uZGFyeUFjdGlvbiIsInJlbGVhc2VTZWNvbmRhcnlBY3Rpb24iLCJwcmVzc1RoaXJkQWN0aW9uIiwicmVsZWFzZVRoaXJkQWN0aW9uIiwicHJlc3NGb2N1cyIsInJlbGVhc2VGb2N1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/components/input/human/keyboard-input-component.ts\n");

/***/ }),

/***/ "./src/game/components/input/human/menu-input-component.ts":
/*!*****************************************************************!*\
  !*** ./src/game/components/input/human/menu-input-component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MenuInputComponent: () => (/* binding */ MenuInputComponent)\n/* harmony export */ });\n/* harmony import */ var _input_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../input-component */ \"./src/game/components/input/input-component.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass MenuInputComponent extends _input_component__WEBPACK_IMPORTED_MODULE_0__.InputComponent {\n    constructor(scene){\n        super();\n        this.scene = scene;\n        const kb = scene.input.keyboard;\n        this.keys = {\n            up: kb.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.UP),\n            down: kb.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.DOWN),\n            left: kb.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.LEFT),\n            right: kb.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.RIGHT),\n            primary: [\n                kb.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.ENTER),\n                kb.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.SPACE),\n                kb.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.Z)\n            ],\n            secondary: [\n                kb.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.ESC),\n                kb.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.X)\n            ],\n            third: [\n                kb.addKey((phaser__WEBPACK_IMPORTED_MODULE_1___default().Input).Keyboard.KeyCodes.R)\n            ]\n        };\n    }\n    update() {\n        // Движение\n        this.keys.up.isDown ? this.pressUp() : this.releaseUp();\n        this.keys.down.isDown ? this.pressDown() : this.releaseDown();\n        this.keys.left.isDown ? this.pressLeft() : this.releaseLeft();\n        this.keys.right.isDown ? this.pressRight() : this.releaseRight();\n        // Действия\n        this.keys.primary.some((key)=>phaser__WEBPACK_IMPORTED_MODULE_1___default().Input.Keyboard.JustDown(key)) ? this.pressPrimaryAction() : this.releasePrimaryAction();\n        this.keys.secondary.some((key)=>phaser__WEBPACK_IMPORTED_MODULE_1___default().Input.Keyboard.JustDown(key)) ? this.pressSecondaryAction() : this.releaseSecondaryAction();\n        this.keys.third.some((key)=>phaser__WEBPACK_IMPORTED_MODULE_1___default().Input.Keyboard.JustDown(key)) ? this.pressThirdAction() : this.releaseThirdAction();\n    }\n    cleanup() {\n        const kb = this.scene.input.keyboard;\n        if (!kb) return;\n        // Удаляем все кастомные клавиши\n        this.keys.primary.forEach((key)=>kb.removeKey(key.keyCode));\n        this.keys.secondary.forEach((key)=>kb.removeKey(key.keyCode));\n        this.keys.third.forEach((key)=>kb.removeKey(key.keyCode));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL2lucHV0L2h1bWFuL21lbnUtaW5wdXQtY29tcG9uZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBb0Q7QUFDeEI7QUFFckIsTUFBTUUsMkJBQTJCRiw0REFBY0E7SUFZbERHLFlBQVlDLEtBQW1CLENBQUU7UUFDN0IsS0FBSztRQUNMLElBQUksQ0FBQ0EsS0FBSyxHQUFHQTtRQUNiLE1BQU1DLEtBQUtELE1BQU1FLEtBQUssQ0FBQ0MsUUFBUTtRQUUvQixJQUFJLENBQUNDLElBQUksR0FBRztZQUNSQyxJQUFJSixHQUFHSyxNQUFNLENBQUNULHFEQUFZLENBQUNXLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDQyxFQUFFO1lBQy9DQyxNQUFNVixHQUFHSyxNQUFNLENBQUNULHFEQUFZLENBQUNXLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDRyxJQUFJO1lBQ25EQyxNQUFNWixHQUFHSyxNQUFNLENBQUNULHFEQUFZLENBQUNXLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDSyxJQUFJO1lBQ25EQyxPQUFPZCxHQUFHSyxNQUFNLENBQUNULHFEQUFZLENBQUNXLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDTyxLQUFLO1lBQ3JEQyxTQUFTO2dCQUNMaEIsR0FBR0ssTUFBTSxDQUFDVCxxREFBWSxDQUFDVyxRQUFRLENBQUNDLFFBQVEsQ0FBQ1MsS0FBSztnQkFDOUNqQixHQUFHSyxNQUFNLENBQUNULHFEQUFZLENBQUNXLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDVSxLQUFLO2dCQUM5Q2xCLEdBQUdLLE1BQU0sQ0FBQ1QscURBQVksQ0FBQ1csUUFBUSxDQUFDQyxRQUFRLENBQUNXLENBQUM7YUFDN0M7WUFDREMsV0FBVztnQkFDUHBCLEdBQUdLLE1BQU0sQ0FBQ1QscURBQVksQ0FBQ1csUUFBUSxDQUFDQyxRQUFRLENBQUNhLEdBQUc7Z0JBQzVDckIsR0FBR0ssTUFBTSxDQUFDVCxxREFBWSxDQUFDVyxRQUFRLENBQUNDLFFBQVEsQ0FBQ2MsQ0FBQzthQUM3QztZQUNEQyxPQUFPO2dCQUFDdkIsR0FBR0ssTUFBTSxDQUFDVCxxREFBWSxDQUFDVyxRQUFRLENBQUNDLFFBQVEsQ0FBQ2dCLENBQUM7YUFBRTtRQUN4RDtJQUNKO0lBRUFDLFNBQWU7UUFFWCxXQUFXO1FBQ1gsSUFBSSxDQUFDdEIsSUFBSSxDQUFDQyxFQUFFLENBQUNzQixNQUFNLEdBQUcsSUFBSSxDQUFDQyxPQUFPLEtBQUssSUFBSSxDQUFDQyxTQUFTO1FBQ3JELElBQUksQ0FBQ3pCLElBQUksQ0FBQ08sSUFBSSxDQUFDZ0IsTUFBTSxHQUFHLElBQUksQ0FBQ0csU0FBUyxLQUFLLElBQUksQ0FBQ0MsV0FBVztRQUMzRCxJQUFJLENBQUMzQixJQUFJLENBQUNTLElBQUksQ0FBQ2MsTUFBTSxHQUFHLElBQUksQ0FBQ0ssU0FBUyxLQUFLLElBQUksQ0FBQ0MsV0FBVztRQUMzRCxJQUFJLENBQUM3QixJQUFJLENBQUNXLEtBQUssQ0FBQ1ksTUFBTSxHQUFHLElBQUksQ0FBQ08sVUFBVSxLQUFLLElBQUksQ0FBQ0MsWUFBWTtRQUU5RCxXQUFXO1FBQ1gsSUFBSSxDQUFDL0IsSUFBSSxDQUFDYSxPQUFPLENBQUNtQixJQUFJLENBQUNDLENBQUFBLE1BQU94QyxtREFBWSxDQUFDVyxRQUFRLENBQUM4QixRQUFRLENBQUNELFFBQ3ZELElBQUksQ0FBQ0Usa0JBQWtCLEtBQ3ZCLElBQUksQ0FBQ0Msb0JBQW9CO1FBRS9CLElBQUksQ0FBQ3BDLElBQUksQ0FBQ2lCLFNBQVMsQ0FBQ2UsSUFBSSxDQUFDQyxDQUFBQSxNQUFPeEMsbURBQVksQ0FBQ1csUUFBUSxDQUFDOEIsUUFBUSxDQUFDRCxRQUN6RCxJQUFJLENBQUNJLG9CQUFvQixLQUN6QixJQUFJLENBQUNDLHNCQUFzQjtRQUVqQyxJQUFJLENBQUN0QyxJQUFJLENBQUNvQixLQUFLLENBQUNZLElBQUksQ0FBQ0MsQ0FBQUEsTUFBT3hDLG1EQUFZLENBQUNXLFFBQVEsQ0FBQzhCLFFBQVEsQ0FBQ0QsUUFDckQsSUFBSSxDQUFDTSxnQkFBZ0IsS0FDckIsSUFBSSxDQUFDQyxrQkFBa0I7SUFFakM7SUFFQUMsVUFBZ0I7UUFDWixNQUFNNUMsS0FBSyxJQUFJLENBQUNELEtBQUssQ0FBQ0UsS0FBSyxDQUFDQyxRQUFRO1FBQ3BDLElBQUksQ0FBQ0YsSUFBSTtRQUVULGdDQUFnQztRQUNoQyxJQUFJLENBQUNHLElBQUksQ0FBQ2EsT0FBTyxDQUFDNkIsT0FBTyxDQUFDVCxDQUFBQSxNQUFPcEMsR0FBRzhDLFNBQVMsQ0FBQ1YsSUFBSVcsT0FBTztRQUN6RCxJQUFJLENBQUM1QyxJQUFJLENBQUNpQixTQUFTLENBQUN5QixPQUFPLENBQUNULENBQUFBLE1BQU9wQyxHQUFHOEMsU0FBUyxDQUFDVixJQUFJVyxPQUFPO1FBQzNELElBQUksQ0FBQzVDLElBQUksQ0FBQ29CLEtBQUssQ0FBQ3NCLE9BQU8sQ0FBQ1QsQ0FBQUEsTUFBT3BDLEdBQUc4QyxTQUFTLENBQUNWLElBQUlXLE9BQU87SUFDM0Q7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9jb21wb25lbnRzL2lucHV0L2h1bWFuL21lbnUtaW5wdXQtY29tcG9uZW50LnRzP2FmZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5wdXRDb21wb25lbnQgfSBmcm9tICcuLi9pbnB1dC1jb21wb25lbnQnO1xyXG5pbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgTWVudUlucHV0Q29tcG9uZW50IGV4dGVuZHMgSW5wdXRDb21wb25lbnQge1xyXG4gICAgcHJpdmF0ZSBzY2VuZTogUGhhc2VyLlNjZW5lO1xyXG4gICAgcHJpdmF0ZSBrZXlzOiB7XHJcbiAgICAgICAgdXA6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXksXHJcbiAgICAgICAgZG93bjogUGhhc2VyLklucHV0LktleWJvYXJkLktleSxcclxuICAgICAgICBsZWZ0OiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5LFxyXG4gICAgICAgIHJpZ2h0OiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5LFxyXG4gICAgICAgIHByaW1hcnk6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlbXSxcclxuICAgICAgICBzZWNvbmRhcnk6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlbXSxcclxuICAgICAgICB0aGlyZDogUGhhc2VyLklucHV0LktleWJvYXJkLktleVtdXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBQaGFzZXIuU2NlbmUpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICBjb25zdCBrYiA9IHNjZW5lLmlucHV0LmtleWJvYXJkITtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmtleXMgPSB7XHJcbiAgICAgICAgICAgIHVwOiBrYi5hZGRLZXkoUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLlVQKSxcclxuICAgICAgICAgICAgZG93bjoga2IuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5ET1dOKSxcclxuICAgICAgICAgICAgbGVmdDoga2IuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5MRUZUKSxcclxuICAgICAgICAgICAgcmlnaHQ6IGtiLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuUklHSFQpLFxyXG4gICAgICAgICAgICBwcmltYXJ5OiBbXHJcbiAgICAgICAgICAgICAgICBrYi5hZGRLZXkoUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLkVOVEVSKSxcclxuICAgICAgICAgICAgICAgIGtiLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuU1BBQ0UpLFxyXG4gICAgICAgICAgICAgICAga2IuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5aKVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBzZWNvbmRhcnk6IFtcclxuICAgICAgICAgICAgICAgIGtiLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuRVNDKSxcclxuICAgICAgICAgICAgICAgIGtiLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuWClcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgdGhpcmQ6IFtrYi5hZGRLZXkoUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLlIpXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCU0LLQuNC20LXQvdC40LVcclxuICAgICAgICB0aGlzLmtleXMudXAuaXNEb3duID8gdGhpcy5wcmVzc1VwKCkgOiB0aGlzLnJlbGVhc2VVcCgpO1xyXG4gICAgICAgIHRoaXMua2V5cy5kb3duLmlzRG93biA/IHRoaXMucHJlc3NEb3duKCkgOiB0aGlzLnJlbGVhc2VEb3duKCk7XHJcbiAgICAgICAgdGhpcy5rZXlzLmxlZnQuaXNEb3duID8gdGhpcy5wcmVzc0xlZnQoKSA6IHRoaXMucmVsZWFzZUxlZnQoKTtcclxuICAgICAgICB0aGlzLmtleXMucmlnaHQuaXNEb3duID8gdGhpcy5wcmVzc1JpZ2h0KCkgOiB0aGlzLnJlbGVhc2VSaWdodCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCU0LXQudGB0YLQstC40Y9cclxuICAgICAgICB0aGlzLmtleXMucHJpbWFyeS5zb21lKGtleSA9PiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuSnVzdERvd24oa2V5KSkgXHJcbiAgICAgICAgICAgID8gdGhpcy5wcmVzc1ByaW1hcnlBY3Rpb24oKSBcclxuICAgICAgICAgICAgOiB0aGlzLnJlbGVhc2VQcmltYXJ5QWN0aW9uKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIHRoaXMua2V5cy5zZWNvbmRhcnkuc29tZShrZXkgPT4gUGhhc2VyLklucHV0LktleWJvYXJkLkp1c3REb3duKGtleSkpXHJcbiAgICAgICAgICAgID8gdGhpcy5wcmVzc1NlY29uZGFyeUFjdGlvbigpXHJcbiAgICAgICAgICAgIDogdGhpcy5yZWxlYXNlU2Vjb25kYXJ5QWN0aW9uKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIHRoaXMua2V5cy50aGlyZC5zb21lKGtleSA9PiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuSnVzdERvd24oa2V5KSlcclxuICAgICAgICAgICAgPyB0aGlzLnByZXNzVGhpcmRBY3Rpb24oKVxyXG4gICAgICAgICAgICA6IHRoaXMucmVsZWFzZVRoaXJkQWN0aW9uKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFudXAoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qga2IgPSB0aGlzLnNjZW5lLmlucHV0LmtleWJvYXJkO1xyXG4gICAgICAgIGlmICgha2IpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQo9C00LDQu9GP0LXQvCDQstGB0LUg0LrQsNGB0YLQvtC80L3Ri9C1INC60LvQsNCy0LjRiNC4XHJcbiAgICAgICAgdGhpcy5rZXlzLnByaW1hcnkuZm9yRWFjaChrZXkgPT4ga2IucmVtb3ZlS2V5KGtleS5rZXlDb2RlKSk7XHJcbiAgICAgICAgdGhpcy5rZXlzLnNlY29uZGFyeS5mb3JFYWNoKGtleSA9PiBrYi5yZW1vdmVLZXkoa2V5LmtleUNvZGUpKTtcclxuICAgICAgICB0aGlzLmtleXMudGhpcmQuZm9yRWFjaChrZXkgPT4ga2IucmVtb3ZlS2V5KGtleS5rZXlDb2RlKSk7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiSW5wdXRDb21wb25lbnQiLCJQaGFzZXIiLCJNZW51SW5wdXRDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwia2IiLCJpbnB1dCIsImtleWJvYXJkIiwia2V5cyIsInVwIiwiYWRkS2V5IiwiSW5wdXQiLCJLZXlib2FyZCIsIktleUNvZGVzIiwiVVAiLCJkb3duIiwiRE9XTiIsImxlZnQiLCJMRUZUIiwicmlnaHQiLCJSSUdIVCIsInByaW1hcnkiLCJFTlRFUiIsIlNQQUNFIiwiWiIsInNlY29uZGFyeSIsIkVTQyIsIlgiLCJ0aGlyZCIsIlIiLCJ1cGRhdGUiLCJpc0Rvd24iLCJwcmVzc1VwIiwicmVsZWFzZVVwIiwicHJlc3NEb3duIiwicmVsZWFzZURvd24iLCJwcmVzc0xlZnQiLCJyZWxlYXNlTGVmdCIsInByZXNzUmlnaHQiLCJyZWxlYXNlUmlnaHQiLCJzb21lIiwia2V5IiwiSnVzdERvd24iLCJwcmVzc1ByaW1hcnlBY3Rpb24iLCJyZWxlYXNlUHJpbWFyeUFjdGlvbiIsInByZXNzU2Vjb25kYXJ5QWN0aW9uIiwicmVsZWFzZVNlY29uZGFyeUFjdGlvbiIsInByZXNzVGhpcmRBY3Rpb24iLCJyZWxlYXNlVGhpcmRBY3Rpb24iLCJjbGVhbnVwIiwiZm9yRWFjaCIsInJlbW92ZUtleSIsImtleUNvZGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/components/input/human/menu-input-component.ts\n");

/***/ }),

/***/ "./src/game/components/input/input-component.ts":
/*!******************************************************!*\
  !*** ./src/game/components/input/input-component.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InputComponent: () => (/* binding */ InputComponent)\n/* harmony export */ });\nclass InputComponent {\n    constructor(){\n        this._primaryAction = false;\n        this._secondaryAction = false;\n        this._thirdAction = false;\n        this.reset();\n    }\n    // Геттеры\n    get upIsDown() {\n        return this._up;\n    }\n    get downIsDown() {\n        return this._down;\n    }\n    get leftIsDown() {\n        return this._left;\n    }\n    get rightIsDown() {\n        return this._right;\n    }\n    get focusIsDown() {\n        return this._focus;\n    }\n    get primaryActionIsDown() {\n        return this._primaryAction;\n    }\n    get secondaryActionIsDown() {\n        return this._secondaryAction;\n    }\n    get thirdActionIsDown() {\n        return this._thirdAction;\n    }\n    // Методы управления состоянием\n    pressUp() {\n        this._up = true;\n    }\n    pressDown() {\n        this._down = true;\n    }\n    pressLeft() {\n        this._left = true;\n    }\n    pressRight() {\n        this._right = true;\n    }\n    pressFocus() {\n        this._focus = true;\n    }\n    pressPrimaryAction() {\n        this._primaryAction = true;\n    }\n    pressSecondaryAction() {\n        this._secondaryAction = true;\n    }\n    pressThirdAction() {\n        this._thirdAction = true;\n    }\n    releaseUp() {\n        this._up = false;\n    }\n    releaseDown() {\n        this._down = false;\n    }\n    releaseLeft() {\n        this._left = false;\n    }\n    releaseRight() {\n        this._right = false;\n    }\n    releaseFocus() {\n        this._focus = false;\n    }\n    releasePrimaryAction() {\n        this._primaryAction = false;\n    }\n    releaseSecondaryAction() {\n        this._secondaryAction = false;\n    }\n    releaseThirdAction() {\n        this._thirdAction = false;\n    }\n    reset() {\n        this._up = false;\n        this._down = false;\n        this._left = false;\n        this._right = false;\n        this._focus = false;\n        this._primaryAction = false;\n        this._secondaryAction = false;\n        this._thirdAction = false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL2lucHV0L2lucHV0LWNvbXBvbmVudC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sTUFBTUE7SUFXVEMsYUFBYzthQUpOQyxpQkFBMEI7YUFDMUJDLG1CQUE0QjthQUM1QkMsZUFBd0I7UUFHNUIsSUFBSSxDQUFDQyxLQUFLO0lBQ2Q7SUFFQSxVQUFVO0lBQ1YsSUFBSUMsV0FBb0I7UUFBRSxPQUFPLElBQUksQ0FBQ0MsR0FBRztJQUFFO0lBQzNDLElBQUlDLGFBQXNCO1FBQUUsT0FBTyxJQUFJLENBQUNDLEtBQUs7SUFBRTtJQUMvQyxJQUFJQyxhQUFzQjtRQUFFLE9BQU8sSUFBSSxDQUFDQyxLQUFLO0lBQUU7SUFDL0MsSUFBSUMsY0FBdUI7UUFBRSxPQUFPLElBQUksQ0FBQ0MsTUFBTTtJQUFFO0lBQ2pELElBQUlDLGNBQXVCO1FBQUUsT0FBTyxJQUFJLENBQUNDLE1BQU07SUFBRTtJQUNqRCxJQUFJQyxzQkFBK0I7UUFBRSxPQUFPLElBQUksQ0FBQ2QsY0FBYztJQUFFO0lBQ2pFLElBQUllLHdCQUFpQztRQUFFLE9BQU8sSUFBSSxDQUFDZCxnQkFBZ0I7SUFBRTtJQUNyRSxJQUFJZSxvQkFBNkI7UUFBRSxPQUFPLElBQUksQ0FBQ2QsWUFBWTtJQUFFO0lBRTdELCtCQUErQjtJQUMvQmUsVUFBZ0I7UUFBRSxJQUFJLENBQUNaLEdBQUcsR0FBRztJQUFNO0lBQ25DYSxZQUFrQjtRQUFFLElBQUksQ0FBQ1gsS0FBSyxHQUFHO0lBQU07SUFDdkNZLFlBQWtCO1FBQUUsSUFBSSxDQUFDVixLQUFLLEdBQUc7SUFBTTtJQUN2Q1csYUFBbUI7UUFBRSxJQUFJLENBQUNULE1BQU0sR0FBRztJQUFNO0lBQ3pDVSxhQUFtQjtRQUFFLElBQUksQ0FBQ1IsTUFBTSxHQUFHO0lBQU07SUFDekNTLHFCQUEyQjtRQUFFLElBQUksQ0FBQ3RCLGNBQWMsR0FBRztJQUFNO0lBQ3pEdUIsdUJBQTZCO1FBQUUsSUFBSSxDQUFDdEIsZ0JBQWdCLEdBQUc7SUFBTTtJQUM3RHVCLG1CQUF5QjtRQUFFLElBQUksQ0FBQ3RCLFlBQVksR0FBRztJQUFNO0lBRXJEdUIsWUFBa0I7UUFBRSxJQUFJLENBQUNwQixHQUFHLEdBQUc7SUFBTztJQUN0Q3FCLGNBQW9CO1FBQUUsSUFBSSxDQUFDbkIsS0FBSyxHQUFHO0lBQU87SUFDMUNvQixjQUFvQjtRQUFFLElBQUksQ0FBQ2xCLEtBQUssR0FBRztJQUFPO0lBQzFDbUIsZUFBcUI7UUFBRSxJQUFJLENBQUNqQixNQUFNLEdBQUc7SUFBTztJQUM1Q2tCLGVBQXFCO1FBQUUsSUFBSSxDQUFDaEIsTUFBTSxHQUFHO0lBQU87SUFDNUNpQix1QkFBNkI7UUFBRSxJQUFJLENBQUM5QixjQUFjLEdBQUc7SUFBTztJQUM1RCtCLHlCQUErQjtRQUFFLElBQUksQ0FBQzlCLGdCQUFnQixHQUFHO0lBQU87SUFDaEUrQixxQkFBMkI7UUFBRSxJQUFJLENBQUM5QixZQUFZLEdBQUc7SUFBTztJQUV4REMsUUFBYztRQUNWLElBQUksQ0FBQ0UsR0FBRyxHQUFHO1FBQ1gsSUFBSSxDQUFDRSxLQUFLLEdBQUc7UUFDYixJQUFJLENBQUNFLEtBQUssR0FBRztRQUNiLElBQUksQ0FBQ0UsTUFBTSxHQUFHO1FBQ2QsSUFBSSxDQUFDRSxNQUFNLEdBQUc7UUFDZCxJQUFJLENBQUNiLGNBQWMsR0FBRztRQUN0QixJQUFJLENBQUNDLGdCQUFnQixHQUFHO1FBQ3hCLElBQUksQ0FBQ0MsWUFBWSxHQUFHO0lBQ3hCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvY29tcG9uZW50cy9pbnB1dC9pbnB1dC1jb21wb25lbnQudHM/ZjViYyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgSW5wdXRDb21wb25lbnQge1xuICAgIHByaXZhdGUgX3VwOiBib29sZWFuO1xuICAgIHByaXZhdGUgX2Rvd246IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfbGVmdDogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9yaWdodDogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9mb2N1czogYm9vbGVhbjtcblxuICAgIHByaXZhdGUgX3ByaW1hcnlBY3Rpb246IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIF9zZWNvbmRhcnlBY3Rpb246IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIF90aGlyZEFjdGlvbjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG5cbiAgICAvLyDQk9C10YLRgtC10YDRi1xuICAgIGdldCB1cElzRG93bigpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMuX3VwOyB9XG4gICAgZ2V0IGRvd25Jc0Rvd24oKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl9kb3duOyB9XG4gICAgZ2V0IGxlZnRJc0Rvd24oKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl9sZWZ0OyB9XG4gICAgZ2V0IHJpZ2h0SXNEb3duKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5fcmlnaHQ7IH1cbiAgICBnZXQgZm9jdXNJc0Rvd24oKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl9mb2N1czsgfVxuICAgIGdldCBwcmltYXJ5QWN0aW9uSXNEb3duKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5fcHJpbWFyeUFjdGlvbjsgfVxuICAgIGdldCBzZWNvbmRhcnlBY3Rpb25Jc0Rvd24oKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl9zZWNvbmRhcnlBY3Rpb247IH1cbiAgICBnZXQgdGhpcmRBY3Rpb25Jc0Rvd24oKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl90aGlyZEFjdGlvbjsgfVxuXG4gICAgLy8g0JzQtdGC0L7QtNGLINGD0L/RgNCw0LLQu9C10L3QuNGPINGB0L7RgdGC0L7Rj9C90LjQtdC8XG4gICAgcHJlc3NVcCgpOiB2b2lkIHsgdGhpcy5fdXAgPSB0cnVlOyB9XG4gICAgcHJlc3NEb3duKCk6IHZvaWQgeyB0aGlzLl9kb3duID0gdHJ1ZTsgfVxuICAgIHByZXNzTGVmdCgpOiB2b2lkIHsgdGhpcy5fbGVmdCA9IHRydWU7IH1cbiAgICBwcmVzc1JpZ2h0KCk6IHZvaWQgeyB0aGlzLl9yaWdodCA9IHRydWU7IH1cbiAgICBwcmVzc0ZvY3VzKCk6IHZvaWQgeyB0aGlzLl9mb2N1cyA9IHRydWU7IH1cbiAgICBwcmVzc1ByaW1hcnlBY3Rpb24oKTogdm9pZCB7IHRoaXMuX3ByaW1hcnlBY3Rpb24gPSB0cnVlOyB9XG4gICAgcHJlc3NTZWNvbmRhcnlBY3Rpb24oKTogdm9pZCB7IHRoaXMuX3NlY29uZGFyeUFjdGlvbiA9IHRydWU7IH1cbiAgICBwcmVzc1RoaXJkQWN0aW9uKCk6IHZvaWQgeyB0aGlzLl90aGlyZEFjdGlvbiA9IHRydWU7IH1cblxuICAgIHJlbGVhc2VVcCgpOiB2b2lkIHsgdGhpcy5fdXAgPSBmYWxzZTsgfVxuICAgIHJlbGVhc2VEb3duKCk6IHZvaWQgeyB0aGlzLl9kb3duID0gZmFsc2U7IH1cbiAgICByZWxlYXNlTGVmdCgpOiB2b2lkIHsgdGhpcy5fbGVmdCA9IGZhbHNlOyB9XG4gICAgcmVsZWFzZVJpZ2h0KCk6IHZvaWQgeyB0aGlzLl9yaWdodCA9IGZhbHNlOyB9XG4gICAgcmVsZWFzZUZvY3VzKCk6IHZvaWQgeyB0aGlzLl9mb2N1cyA9IGZhbHNlOyB9XG4gICAgcmVsZWFzZVByaW1hcnlBY3Rpb24oKTogdm9pZCB7IHRoaXMuX3ByaW1hcnlBY3Rpb24gPSBmYWxzZTsgfVxuICAgIHJlbGVhc2VTZWNvbmRhcnlBY3Rpb24oKTogdm9pZCB7IHRoaXMuX3NlY29uZGFyeUFjdGlvbiA9IGZhbHNlOyB9XG4gICAgcmVsZWFzZVRoaXJkQWN0aW9uKCk6IHZvaWQgeyB0aGlzLl90aGlyZEFjdGlvbiA9IGZhbHNlOyB9XG5cbiAgICByZXNldCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fdXAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZG93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9sZWZ0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3JpZ2h0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2ZvY3VzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3ByaW1hcnlBY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc2Vjb25kYXJ5QWN0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3RoaXJkQWN0aW9uID0gZmFsc2U7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIklucHV0Q29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJfcHJpbWFyeUFjdGlvbiIsIl9zZWNvbmRhcnlBY3Rpb24iLCJfdGhpcmRBY3Rpb24iLCJyZXNldCIsInVwSXNEb3duIiwiX3VwIiwiZG93bklzRG93biIsIl9kb3duIiwibGVmdElzRG93biIsIl9sZWZ0IiwicmlnaHRJc0Rvd24iLCJfcmlnaHQiLCJmb2N1c0lzRG93biIsIl9mb2N1cyIsInByaW1hcnlBY3Rpb25Jc0Rvd24iLCJzZWNvbmRhcnlBY3Rpb25Jc0Rvd24iLCJ0aGlyZEFjdGlvbklzRG93biIsInByZXNzVXAiLCJwcmVzc0Rvd24iLCJwcmVzc0xlZnQiLCJwcmVzc1JpZ2h0IiwicHJlc3NGb2N1cyIsInByZXNzUHJpbWFyeUFjdGlvbiIsInByZXNzU2Vjb25kYXJ5QWN0aW9uIiwicHJlc3NUaGlyZEFjdGlvbiIsInJlbGVhc2VVcCIsInJlbGVhc2VEb3duIiwicmVsZWFzZUxlZnQiLCJyZWxlYXNlUmlnaHQiLCJyZWxlYXNlRm9jdXMiLCJyZWxlYXNlUHJpbWFyeUFjdGlvbiIsInJlbGVhc2VTZWNvbmRhcnlBY3Rpb24iLCJyZWxlYXNlVGhpcmRBY3Rpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/components/input/input-component.ts\n");

/***/ }),

/***/ "./src/game/components/movement/horizontal-movement-component.ts":
/*!***********************************************************************!*\
  !*** ./src/game/components/movement/horizontal-movement-component.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HorizontalMovementComponent: () => (/* binding */ HorizontalMovementComponent)\n/* harmony export */ });\nclass HorizontalMovementComponent {\n    constructor(gameObject, inputComponent, velocity){\n        this.gameObject = gameObject;\n        this.inputComponent = inputComponent;\n        this.velocity = velocity;\n        // Проверка наличия физического тела\n        if (!this.gameObject.body) {\n            throw new Error(\"GameObject must have Arcade Physics body enabled\");\n        }\n    }\n    reset() {\n        if (!this.gameObject.body) return;\n        const body = this.gameObject.body;\n        body.setVelocityX(0);\n    }\n    update() {\n        if (!this.gameObject.body) return;\n        const body = this.gameObject.body;\n        const speedModifier = this.inputComponent.focusIsDown ? 0.5 : 1;\n        // Проверяем, есть ли одновременное вертикальное движение\n        const isDiagonalMove = (this.inputComponent.upIsDown || this.inputComponent.downIsDown) && (this.inputComponent.leftIsDown || this.inputComponent.rightIsDown);\n        // Коэффициент для диагонального движения (1/√2 ≈ 0.707)\n        const diagonalFactor = isDiagonalMove ? 0.707 : 1;\n        const effectiveVelocity = this.velocity * diagonalFactor * speedModifier;\n        if (this.inputComponent.leftIsDown) {\n            body.setVelocityX(-effectiveVelocity);\n        } else if (this.inputComponent.rightIsDown) {\n            body.setVelocityX(effectiveVelocity);\n        } else {\n            body.setVelocityX(0);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL21vdmVtZW50L2hvcml6b250YWwtbW92ZW1lbnQtY29tcG9uZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFHTyxNQUFNQTtJQUtUQyxZQUNJQyxVQUF3QyxFQUN4Q0MsY0FBOEIsRUFDOUJDLFFBQWdCLENBQ2xCO1FBQ0UsSUFBSSxDQUFDRixVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsY0FBYyxHQUFHQTtRQUN0QixJQUFJLENBQUNDLFFBQVEsR0FBR0E7UUFFaEIsb0NBQW9DO1FBQ3BDLElBQUksQ0FBQyxJQUFJLENBQUNGLFVBQVUsQ0FBQ0csSUFBSSxFQUFFO1lBQ3ZCLE1BQU0sSUFBSUMsTUFBTTtRQUNwQjtJQUNKO0lBRUFDLFFBQWM7UUFDVixJQUFJLENBQUMsSUFBSSxDQUFDTCxVQUFVLENBQUNHLElBQUksRUFBRTtRQUMzQixNQUFNQSxPQUFPLElBQUksQ0FBQ0gsVUFBVSxDQUFDRyxJQUFJO1FBQ2pDQSxLQUFLRyxZQUFZLENBQUM7SUFDdEI7SUFFQUMsU0FBZTtRQUNYLElBQUksQ0FBQyxJQUFJLENBQUNQLFVBQVUsQ0FBQ0csSUFBSSxFQUFFO1FBQzNCLE1BQU1BLE9BQU8sSUFBSSxDQUFDSCxVQUFVLENBQUNHLElBQUk7UUFFakMsTUFBTUssZ0JBQWdCLElBQUksQ0FBQ1AsY0FBYyxDQUFDUSxXQUFXLEdBQUcsTUFBTTtRQUU5RCx5REFBeUQ7UUFDekQsTUFBTUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDVCxjQUFjLENBQUNVLFFBQVEsSUFBSSxJQUFJLENBQUNWLGNBQWMsQ0FBQ1csVUFBVSxLQUMvRCxLQUFJLENBQUNYLGNBQWMsQ0FBQ1ksVUFBVSxJQUFJLElBQUksQ0FBQ1osY0FBYyxDQUFDYSxXQUFXO1FBRXhGLHdEQUF3RDtRQUN4RCxNQUFNQyxpQkFBaUJMLGlCQUFpQixRQUFRO1FBQ2hELE1BQU1NLG9CQUFvQixJQUFJLENBQUNkLFFBQVEsR0FBR2EsaUJBQWlCUDtRQUczRCxJQUFJLElBQUksQ0FBQ1AsY0FBYyxDQUFDWSxVQUFVLEVBQUU7WUFDaENWLEtBQUtHLFlBQVksQ0FBQyxDQUFDVTtRQUN2QixPQUFPLElBQUksSUFBSSxDQUFDZixjQUFjLENBQUNhLFdBQVcsRUFBRTtZQUN4Q1gsS0FBS0csWUFBWSxDQUFDVTtRQUN0QixPQUFPO1lBQ0hiLEtBQUtHLFlBQVksQ0FBQztRQUN0QjtJQUNKO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvY29tcG9uZW50cy9tb3ZlbWVudC9ob3Jpem9udGFsLW1vdmVtZW50LWNvbXBvbmVudC50cz82ZTZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IElucHV0Q29tcG9uZW50IH0gZnJvbSAnLi4vaW5wdXQvaW5wdXQtY29tcG9uZW50JztcblxuZXhwb3J0IGNsYXNzIEhvcml6b250YWxNb3ZlbWVudENvbXBvbmVudCB7XG4gICAgcHJpdmF0ZSBnYW1lT2JqZWN0OiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuU3ByaXRlO1xuICAgIHByaXZhdGUgaW5wdXRDb21wb25lbnQ6IElucHV0Q29tcG9uZW50O1xuICAgIHByaXZhdGUgdmVsb2NpdHk6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBnYW1lT2JqZWN0OiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuU3ByaXRlLFxuICAgICAgICBpbnB1dENvbXBvbmVudDogSW5wdXRDb21wb25lbnQsXG4gICAgICAgIHZlbG9jaXR5OiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0ID0gZ2FtZU9iamVjdDtcbiAgICAgICAgdGhpcy5pbnB1dENvbXBvbmVudCA9IGlucHV0Q29tcG9uZW50O1xuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gdmVsb2NpdHk7XG5cbiAgICAgICAgLy8g0J/RgNC+0LLQtdGA0LrQsCDQvdCw0LvQuNGH0LjRjyDRhNC40LfQuNGH0LXRgdC60L7Qs9C+INGC0LXQu9CwXG4gICAgICAgIGlmICghdGhpcy5nYW1lT2JqZWN0LmJvZHkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignR2FtZU9iamVjdCBtdXN0IGhhdmUgQXJjYWRlIFBoeXNpY3MgYm9keSBlbmFibGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNldCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmdhbWVPYmplY3QuYm9keSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBib2R5ID0gdGhpcy5nYW1lT2JqZWN0LmJvZHkgYXMgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkJvZHk7XG4gICAgICAgIGJvZHkuc2V0VmVsb2NpdHlYKDApO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmdhbWVPYmplY3QuYm9keSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBib2R5ID0gdGhpcy5nYW1lT2JqZWN0LmJvZHkgYXMgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkJvZHk7XG5cbiAgICAgICAgY29uc3Qgc3BlZWRNb2RpZmllciA9IHRoaXMuaW5wdXRDb21wb25lbnQuZm9jdXNJc0Rvd24gPyAwLjUgOiAxO1xuXG4gICAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0LXRgdGC0Ywg0LvQuCDQvtC00L3QvtCy0YDQtdC80LXQvdC90L7QtSDQstC10YDRgtC40LrQsNC70YzQvdC+0LUg0LTQstC40LbQtdC90LjQtVxuICAgICAgICBjb25zdCBpc0RpYWdvbmFsTW92ZSA9ICh0aGlzLmlucHV0Q29tcG9uZW50LnVwSXNEb3duIHx8IHRoaXMuaW5wdXRDb21wb25lbnQuZG93bklzRG93bikgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pbnB1dENvbXBvbmVudC5sZWZ0SXNEb3duIHx8IHRoaXMuaW5wdXRDb21wb25lbnQucmlnaHRJc0Rvd24pO1xuICAgICAgICBcbiAgICAgICAgLy8g0JrQvtGN0YTRhNC40YbQuNC10L3RgiDQtNC70Y8g0LTQuNCw0LPQvtC90LDQu9GM0L3QvtCz0L4g0LTQstC40LbQtdC90LjRjyAoMS/iiJoyIOKJiCAwLjcwNylcbiAgICAgICAgY29uc3QgZGlhZ29uYWxGYWN0b3IgPSBpc0RpYWdvbmFsTW92ZSA/IDAuNzA3IDogMTtcbiAgICAgICAgY29uc3QgZWZmZWN0aXZlVmVsb2NpdHkgPSB0aGlzLnZlbG9jaXR5ICogZGlhZ29uYWxGYWN0b3IgKiBzcGVlZE1vZGlmaWVyO1xuICAgICAgICBcblxuICAgICAgICBpZiAodGhpcy5pbnB1dENvbXBvbmVudC5sZWZ0SXNEb3duKSB7XG4gICAgICAgICAgICBib2R5LnNldFZlbG9jaXR5WCgtZWZmZWN0aXZlVmVsb2NpdHkpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaW5wdXRDb21wb25lbnQucmlnaHRJc0Rvd24pIHtcbiAgICAgICAgICAgIGJvZHkuc2V0VmVsb2NpdHlYKGVmZmVjdGl2ZVZlbG9jaXR5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJvZHkuc2V0VmVsb2NpdHlYKDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxufVxuIl0sIm5hbWVzIjpbIkhvcml6b250YWxNb3ZlbWVudENvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwiZ2FtZU9iamVjdCIsImlucHV0Q29tcG9uZW50IiwidmVsb2NpdHkiLCJib2R5IiwiRXJyb3IiLCJyZXNldCIsInNldFZlbG9jaXR5WCIsInVwZGF0ZSIsInNwZWVkTW9kaWZpZXIiLCJmb2N1c0lzRG93biIsImlzRGlhZ29uYWxNb3ZlIiwidXBJc0Rvd24iLCJkb3duSXNEb3duIiwibGVmdElzRG93biIsInJpZ2h0SXNEb3duIiwiZGlhZ29uYWxGYWN0b3IiLCJlZmZlY3RpdmVWZWxvY2l0eSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/components/movement/horizontal-movement-component.ts\n");

/***/ }),

/***/ "./src/game/components/movement/vertical-movement-component.ts":
/*!*********************************************************************!*\
  !*** ./src/game/components/movement/vertical-movement-component.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VerticalMovementComponent: () => (/* binding */ VerticalMovementComponent)\n/* harmony export */ });\nclass VerticalMovementComponent {\n    constructor(gameObject, inputComponent, velocity){\n        if (!gameObject.body) {\n            throw new Error(\"GameObject must have Arcade Physics body enabled\");\n        }\n        this.gameObject = gameObject;\n        this.inputComponent = inputComponent;\n        this.velocity = velocity;\n    }\n    reset() {\n        if (!this.gameObject.body) return;\n        const body = this.gameObject.body;\n        body.setVelocityY(0);\n    }\n    update() {\n        if (!this.gameObject.body) return;\n        const body = this.gameObject.body;\n        const speedModifier = this.inputComponent.focusIsDown ? 0.5 : 1;\n        // Проверяем, есть ли одновременное горизонтальное движение\n        const isDiagonalMove = (this.inputComponent.leftIsDown || this.inputComponent.rightIsDown) && (this.inputComponent.upIsDown || this.inputComponent.downIsDown);\n        // Коэффициент для диагонального движения (1/√2 ≈ 0.707)\n        const diagonalFactor = isDiagonalMove ? 0.707 : 1;\n        const effectiveVelocity = this.velocity * diagonalFactor * speedModifier;\n        if (this.inputComponent.downIsDown) {\n            body.setVelocityY(effectiveVelocity);\n        } else if (this.inputComponent.upIsDown) {\n            body.setVelocityY(-effectiveVelocity);\n        } else {\n            body.setVelocityY(0);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL21vdmVtZW50L3ZlcnRpY2FsLW1vdmVtZW50LWNvbXBvbmVudC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBR08sTUFBTUE7SUFLVEMsWUFDSUMsVUFBd0MsRUFDeENDLGNBQThCLEVBQzlCQyxRQUFnQixDQUNsQjtRQUNFLElBQUksQ0FBQ0YsV0FBV0csSUFBSSxFQUFFO1lBQ2xCLE1BQU0sSUFBSUMsTUFBTTtRQUNwQjtRQUVBLElBQUksQ0FBQ0osVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNDLGNBQWMsR0FBR0E7UUFDdEIsSUFBSSxDQUFDQyxRQUFRLEdBQUdBO0lBQ3BCO0lBRUFHLFFBQWM7UUFDVixJQUFJLENBQUMsSUFBSSxDQUFDTCxVQUFVLENBQUNHLElBQUksRUFBRTtRQUMzQixNQUFNQSxPQUFPLElBQUksQ0FBQ0gsVUFBVSxDQUFDRyxJQUFJO1FBQ2pDQSxLQUFLRyxZQUFZLENBQUM7SUFDdEI7SUFFQUMsU0FBZTtRQUNYLElBQUksQ0FBQyxJQUFJLENBQUNQLFVBQVUsQ0FBQ0csSUFBSSxFQUFFO1FBQzNCLE1BQU1BLE9BQU8sSUFBSSxDQUFDSCxVQUFVLENBQUNHLElBQUk7UUFFakMsTUFBTUssZ0JBQWdCLElBQUksQ0FBQ1AsY0FBYyxDQUFDUSxXQUFXLEdBQUcsTUFBTTtRQUU5RCwyREFBMkQ7UUFDM0QsTUFBTUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDVCxjQUFjLENBQUNVLFVBQVUsSUFBSSxJQUFJLENBQUNWLGNBQWMsQ0FBQ1csV0FBVyxLQUNsRSxLQUFJLENBQUNYLGNBQWMsQ0FBQ1ksUUFBUSxJQUFJLElBQUksQ0FBQ1osY0FBYyxDQUFDYSxVQUFVO1FBRXJGLHdEQUF3RDtRQUN4RCxNQUFNQyxpQkFBaUJMLGlCQUFpQixRQUFRO1FBQ2hELE1BQU1NLG9CQUFvQixJQUFJLENBQUNkLFFBQVEsR0FBR2EsaUJBQWlCUDtRQUUzRCxJQUFJLElBQUksQ0FBQ1AsY0FBYyxDQUFDYSxVQUFVLEVBQUU7WUFDaENYLEtBQUtHLFlBQVksQ0FBQ1U7UUFDdEIsT0FBTyxJQUFJLElBQUksQ0FBQ2YsY0FBYyxDQUFDWSxRQUFRLEVBQUU7WUFDckNWLEtBQUtHLFlBQVksQ0FBQyxDQUFDVTtRQUN2QixPQUFPO1lBQ0hiLEtBQUtHLFlBQVksQ0FBQztRQUN0QjtJQUNKO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvY29tcG9uZW50cy9tb3ZlbWVudC92ZXJ0aWNhbC1tb3ZlbWVudC1jb21wb25lbnQudHM/N2Q5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XG5pbXBvcnQgeyBJbnB1dENvbXBvbmVudCB9IGZyb20gJy4uL2lucHV0L2lucHV0LWNvbXBvbmVudCc7XG5cbmV4cG9ydCBjbGFzcyBWZXJ0aWNhbE1vdmVtZW50Q29tcG9uZW50IHtcbiAgICBwcml2YXRlIGdhbWVPYmplY3Q6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGU7XG4gICAgcHJpdmF0ZSBpbnB1dENvbXBvbmVudDogSW5wdXRDb21wb25lbnQ7XG4gICAgcHJpdmF0ZSB2ZWxvY2l0eTogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGdhbWVPYmplY3Q6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGUsXG4gICAgICAgIGlucHV0Q29tcG9uZW50OiBJbnB1dENvbXBvbmVudCxcbiAgICAgICAgdmVsb2NpdHk6IG51bWJlclxuICAgICkge1xuICAgICAgICBpZiAoIWdhbWVPYmplY3QuYm9keSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHYW1lT2JqZWN0IG11c3QgaGF2ZSBBcmNhZGUgUGh5c2ljcyBib2R5IGVuYWJsZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdCA9IGdhbWVPYmplY3Q7XG4gICAgICAgIHRoaXMuaW5wdXRDb21wb25lbnQgPSBpbnB1dENvbXBvbmVudDtcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IHZlbG9jaXR5O1xuICAgIH1cblxuICAgIHJlc2V0KCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuZ2FtZU9iamVjdC5ib2R5KSByZXR1cm47XG4gICAgICAgIGNvbnN0IGJvZHkgPSB0aGlzLmdhbWVPYmplY3QuYm9keSBhcyBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuQm9keTtcbiAgICAgICAgYm9keS5zZXRWZWxvY2l0eVkoMCk7XG4gICAgfVxuXG4gICAgdXBkYXRlKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuZ2FtZU9iamVjdC5ib2R5KSByZXR1cm47XG4gICAgICAgIGNvbnN0IGJvZHkgPSB0aGlzLmdhbWVPYmplY3QuYm9keSBhcyBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuQm9keTtcblxuICAgICAgICBjb25zdCBzcGVlZE1vZGlmaWVyID0gdGhpcy5pbnB1dENvbXBvbmVudC5mb2N1c0lzRG93biA/IDAuNSA6IDE7XG5cbiAgICAgICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDQtdGB0YLRjCDQu9C4INC+0LTQvdC+0LLRgNC10LzQtdC90L3QvtC1INCz0L7RgNC40LfQvtC90YLQsNC70YzQvdC+0LUg0LTQstC40LbQtdC90LjQtVxuICAgICAgICBjb25zdCBpc0RpYWdvbmFsTW92ZSA9ICh0aGlzLmlucHV0Q29tcG9uZW50LmxlZnRJc0Rvd24gfHwgdGhpcy5pbnB1dENvbXBvbmVudC5yaWdodElzRG93bikgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pbnB1dENvbXBvbmVudC51cElzRG93biB8fCB0aGlzLmlucHV0Q29tcG9uZW50LmRvd25Jc0Rvd24pO1xuICAgICAgICBcbiAgICAgICAgLy8g0JrQvtGN0YTRhNC40YbQuNC10L3RgiDQtNC70Y8g0LTQuNCw0LPQvtC90LDQu9GM0L3QvtCz0L4g0LTQstC40LbQtdC90LjRjyAoMS/iiJoyIOKJiCAwLjcwNylcbiAgICAgICAgY29uc3QgZGlhZ29uYWxGYWN0b3IgPSBpc0RpYWdvbmFsTW92ZSA/IDAuNzA3IDogMTtcbiAgICAgICAgY29uc3QgZWZmZWN0aXZlVmVsb2NpdHkgPSB0aGlzLnZlbG9jaXR5ICogZGlhZ29uYWxGYWN0b3IgKiBzcGVlZE1vZGlmaWVyO1xuXG4gICAgICAgIGlmICh0aGlzLmlucHV0Q29tcG9uZW50LmRvd25Jc0Rvd24pIHtcbiAgICAgICAgICAgIGJvZHkuc2V0VmVsb2NpdHlZKGVmZmVjdGl2ZVZlbG9jaXR5KTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlucHV0Q29tcG9uZW50LnVwSXNEb3duKSB7XG4gICAgICAgICAgICBib2R5LnNldFZlbG9jaXR5WSgtZWZmZWN0aXZlVmVsb2NpdHkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYm9keS5zZXRWZWxvY2l0eVkoMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG59XG4iXSwibmFtZXMiOlsiVmVydGljYWxNb3ZlbWVudENvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwiZ2FtZU9iamVjdCIsImlucHV0Q29tcG9uZW50IiwidmVsb2NpdHkiLCJib2R5IiwiRXJyb3IiLCJyZXNldCIsInNldFZlbG9jaXR5WSIsInVwZGF0ZSIsInNwZWVkTW9kaWZpZXIiLCJmb2N1c0lzRG93biIsImlzRGlhZ29uYWxNb3ZlIiwibGVmdElzRG93biIsInJpZ2h0SXNEb3duIiwidXBJc0Rvd24iLCJkb3duSXNEb3duIiwiZGlhZ29uYWxGYWN0b3IiLCJlZmZlY3RpdmVWZWxvY2l0eSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/components/movement/vertical-movement-component.ts\n");

/***/ }),

/***/ "./src/game/components/spawners/enemy-destroyed-component.ts":
/*!*******************************************************************!*\
  !*** ./src/game/components/spawners/enemy-destroyed-component.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EnemyDestroyedComponent: () => (/* binding */ EnemyDestroyedComponent)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n\n\nclass EnemyDestroyedComponent {\n    constructor(scene, eventBusComponent){\n        this.scene = scene;\n        this.eventBusComponent = eventBusComponent;\n        this.group = this.scene.add.group({\n            name: `${this.constructor.name}-${phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.RND.uuid()}`,\n            classType: (phaser__WEBPACK_IMPORTED_MODULE_0___default().GameObjects).Sprite\n        });\n        this.eventBusComponent.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ENEMY_DESTROYED, (enemy)=>{\n            const gameObject = this.group.get(enemy.x, enemy.y, enemy.shipAssetKey);\n            if (gameObject) {\n                gameObject.play(enemy.shipDestroyedAnimationKey);\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL3NwYXduZXJzL2VuZW15LWRlc3Ryb3llZC1jb21wb25lbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE0QjtBQUUrQjtBQVNwRCxNQUFNRTtJQUtUQyxZQUFZQyxLQUFtQixFQUFFQyxpQkFBb0MsQ0FBRTtRQUNuRSxJQUFJLENBQUNELEtBQUssR0FBR0E7UUFDYixJQUFJLENBQUNDLGlCQUFpQixHQUFHQTtRQUV6QixJQUFJLENBQUNDLEtBQUssR0FBRyxJQUFJLENBQUNGLEtBQUssQ0FBQ0csR0FBRyxDQUFDRCxLQUFLLENBQUM7WUFDOUJFLE1BQU0sQ0FBQyxFQUFFLElBQUksQ0FBQ0wsV0FBVyxDQUFDSyxJQUFJLENBQUMsQ0FBQyxFQUFFUixrREFBVyxDQUFDVSxHQUFHLENBQUNDLElBQUksR0FBRyxDQUFDO1lBQzFEQyxXQUFXWiwyREFBa0IsQ0FBQ2MsTUFBTTtRQUN4QztRQUVBLElBQUksQ0FBQ1QsaUJBQWlCLENBQUNVLEVBQUUsQ0FDckJkLG9FQUFhQSxDQUFDZSxlQUFlLEVBQzdCLENBQUNDO1lBQ0csTUFBTUMsYUFBYSxJQUFJLENBQUNaLEtBQUssQ0FBQ2EsR0FBRyxDQUM3QkYsTUFBTUcsQ0FBQyxFQUNQSCxNQUFNSSxDQUFDLEVBQ1BKLE1BQU1LLFlBQVk7WUFHdEIsSUFBSUosWUFBWTtnQkFDWkEsV0FBV0ssSUFBSSxDQUFDTixNQUFNTyx5QkFBeUI7WUFDbkQ7UUFDSjtJQUVSO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvY29tcG9uZW50cy9zcGF3bmVycy9lbmVteS1kZXN0cm95ZWQtY29tcG9uZW50LnRzPzQxNTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xuaW1wb3J0IHsgRXZlbnRCdXNDb21wb25lbnQgfSBmcm9tICcuLi9ldmVudHMvZXZlbnQtYnVzLWNvbXBvbmVudCc7XG5pbXBvcnQgeyBDVVNUT01fRVZFTlRTIH0gZnJvbSAnQC9nYW1lL3R5cGVzL2N1c3RvbS1ldmVudHMnO1xuXG5pbnRlcmZhY2UgRW5lbXlEZXN0cm95ZWRQYXJhbXMge1xuICAgIHg6IG51bWJlcjtcbiAgICB5OiBudW1iZXI7XG4gICAgc2hpcEFzc2V0S2V5OiBzdHJpbmc7XG4gICAgc2hpcERlc3Ryb3llZEFuaW1hdGlvbktleTogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgRW5lbXlEZXN0cm95ZWRDb21wb25lbnQge1xuICAgIHByaXZhdGUgc2NlbmU6IFBoYXNlci5TY2VuZTtcbiAgICBwcml2YXRlIGdyb3VwOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JvdXA7XG4gICAgcHJpdmF0ZSBldmVudEJ1c0NvbXBvbmVudDogRXZlbnRCdXNDb21wb25lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogUGhhc2VyLlNjZW5lLCBldmVudEJ1c0NvbXBvbmVudDogRXZlbnRCdXNDb21wb25lbnQpIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgICAgICB0aGlzLmV2ZW50QnVzQ29tcG9uZW50ID0gZXZlbnRCdXNDb21wb25lbnQ7XG5cbiAgICAgICAgdGhpcy5ncm91cCA9IHRoaXMuc2NlbmUuYWRkLmdyb3VwKHtcbiAgICAgICAgICAgIG5hbWU6IGAke3RoaXMuY29uc3RydWN0b3IubmFtZX0tJHtQaGFzZXIuTWF0aC5STkQudXVpZCgpfWAsXG4gICAgICAgICAgICBjbGFzc1R5cGU6IFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5ldmVudEJ1c0NvbXBvbmVudC5vbihcbiAgICAgICAgICAgIENVU1RPTV9FVkVOVFMuRU5FTVlfREVTVFJPWUVELCBcbiAgICAgICAgICAgIChlbmVteTogRW5lbXlEZXN0cm95ZWRQYXJhbXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lT2JqZWN0ID0gdGhpcy5ncm91cC5nZXQoXG4gICAgICAgICAgICAgICAgICAgIGVuZW15LngsIFxuICAgICAgICAgICAgICAgICAgICBlbmVteS55LCBcbiAgICAgICAgICAgICAgICAgICAgZW5lbXkuc2hpcEFzc2V0S2V5XG4gICAgICAgICAgICAgICAgKSBhcyBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChnYW1lT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVPYmplY3QucGxheShlbmVteS5zaGlwRGVzdHJveWVkQW5pbWF0aW9uS2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlBoYXNlciIsIkNVU1RPTV9FVkVOVFMiLCJFbmVteURlc3Ryb3llZENvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwic2NlbmUiLCJldmVudEJ1c0NvbXBvbmVudCIsImdyb3VwIiwiYWRkIiwibmFtZSIsIk1hdGgiLCJSTkQiLCJ1dWlkIiwiY2xhc3NUeXBlIiwiR2FtZU9iamVjdHMiLCJTcHJpdGUiLCJvbiIsIkVORU1ZX0RFU1RST1lFRCIsImVuZW15IiwiZ2FtZU9iamVjdCIsImdldCIsIngiLCJ5Iiwic2hpcEFzc2V0S2V5IiwicGxheSIsInNoaXBEZXN0cm95ZWRBbmltYXRpb25LZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/components/spawners/enemy-destroyed-component.ts\n");

/***/ }),

/***/ "./src/game/components/spawners/enemy-spawner-component.ts":
/*!*****************************************************************!*\
  !*** ./src/game/components/spawners/enemy-spawner-component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EnemySpawnerComponent: () => (/* binding */ EnemySpawnerComponent)\n/* harmony export */ });\n/* harmony import */ var _game_managers_spawn_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/game/managers/spawn-manager */ \"./src/game/managers/spawn-manager.ts\");\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n\n\nclass EnemySpawnerComponent {\n    constructor(scene, enemyClass, eventBusComponent){\n        this.spawnCounter = 0;\n        this.isActive = false;\n        this.enemyClass = enemyClass;\n        this.scene = scene;\n        this.eventBus = eventBusComponent;\n        this.group = this.scene.physics.add.group({\n            classType: enemyClass,\n            runChildUpdate: true,\n            createCallback: (enemy)=>{\n                enemy.init(eventBusComponent);\n            }\n        });\n        this.setupEventListeners();\n        this.cleanupTimer = this.scene.time.addEvent({\n            delay: 1000,\n            callback: this.cleanupOffscreenEnemies,\n            callbackScope: this,\n            loop: true\n        });\n    }\n    setupEventListeners() {\n        this.eventBus.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.START_SPAWNER, this.handleStartSpawner, this);\n        this.eventBus.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.STOP_ALL_SPAWNERS, this.stopSpawning, this);\n        this.eventBus.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.GAME_OVER, this.handlePause, this);\n        this.eventBus.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.PAUSE_GAME, this.handlePause, this);\n        this.eventBus.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.RESUME_GAME, this.handleResume, this);\n        this.eventBus.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.RESET_ALL_SPAWNERS, this.resetSpawner, this);\n    }\n    handleStartSpawner(config) {\n        if (config.enemyType !== this.enemyClass.enemyType) {\n            return;\n        }\n        this.activeConfig = config;\n        this.spawnCounter = 0;\n        this.startSpawning();\n    }\n    startSpawning() {\n        this.stopSpawning();\n        this.isActive = true;\n        this.spawnTimer = this.scene.time.addEvent({\n            delay: this.activeConfig?.interval ?? 2000,\n            callback: this.spawnEnemy,\n            callbackScope: this,\n            loop: true\n        });\n        this.spawnEnemy();\n    }\n    spawnEnemy() {\n        if (!this.isActive || !this.activeConfig) return;\n        const groupSize = this.activeConfig.groupSize;\n        const remaining = this.activeConfig.count ? this.activeConfig.count - this.spawnCounter : Infinity;\n        if (remaining <= 0) {\n            this.stopSpawning();\n            return;\n        }\n        const currentGroupSize = Math.min(groupSize, remaining);\n        const positions = _game_managers_spawn_manager__WEBPACK_IMPORTED_MODULE_0__.SpawnManager.getSpawnPositions(this.activeConfig.patternType, this.activeConfig.patternParams.params, currentGroupSize);\n        for (const pos of positions){\n            let enemy = this.group.get(pos.x, pos.y);\n            if (!enemy) {\n                enemy = new this.enemyClass(this.scene, pos.x, pos.y);\n                this.group.add(enemy);\n                enemy.init(this.eventBus);\n            } else {\n                enemy.reset();\n            }\n            this.spawnCounter++;\n        }\n        if (this.activeConfig.count && this.spawnCounter >= this.activeConfig.count) {\n            this.stopSpawning();\n        }\n    }\n    resetSpawner() {\n        this.stopSpawning();\n        this.spawnCounter = 0;\n        this.activeConfig = undefined;\n    }\n    cleanupOffscreenEnemies() {\n        const worldBounds = this.scene.physics.world.bounds;\n        const margin = 100;\n        this.group.getChildren().forEach((enemy)=>{\n            const sprite = enemy;\n            if (sprite.y > worldBounds.height + margin || sprite.y < -margin || sprite.x < -margin || sprite.x > worldBounds.width + margin) {\n                sprite.destroy();\n            }\n        });\n    }\n    stopSpawning() {\n        if (this.spawnTimer) {\n            this.spawnTimer.destroy();\n            this.spawnTimer = undefined;\n        }\n        this.isActive = false;\n    }\n    handlePause() {\n        if (this.spawnTimer) {\n            this.spawnTimer.paused = true;\n        }\n    }\n    handleResume() {\n        if (this.spawnTimer) {\n            this.spawnTimer.paused = false;\n        }\n    }\n    cleanup() {\n        this.stopSpawning();\n        this.eventBus.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.START_SPAWNER, this.handleStartSpawner, this);\n        this.eventBus.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.STOP_ALL_SPAWNERS, this.stopSpawning, this);\n        this.eventBus.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.GAME_OVER, this.stopSpawning, this);\n        this.eventBus.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.PAUSE_GAME, this.handlePause, this);\n        this.eventBus.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.RESUME_GAME, this.handleResume, this);\n        this.cleanupTimer?.destroy();\n    }\n    get phaserGroup() {\n        return this.group;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL3NwYXduZXJzL2VuZW15LXNwYXduZXItY29tcG9uZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUU2RDtBQUVGO0FBRXBELE1BQU1FO0lBWVRDLFlBQ0lDLEtBQW1CLEVBQ25CQyxVQUFzQixFQUN0QkMsaUJBQW9DLENBQ3RDO2FBUk1DLGVBQWU7YUFDZkMsV0FBVztRQVFmLElBQUksQ0FBQ0gsVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNELEtBQUssR0FBR0E7UUFDYixJQUFJLENBQUNLLFFBQVEsR0FBR0g7UUFFaEIsSUFBSSxDQUFDSSxLQUFLLEdBQUcsSUFBSSxDQUFDTixLQUFLLENBQUNPLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixLQUFLLENBQUM7WUFDdENHLFdBQVdSO1lBQ1hTLGdCQUFnQjtZQUNoQkMsZ0JBQWdCLENBQUNDO2dCQUNaQSxNQUF5QkMsSUFBSSxDQUFDWDtZQUNuQztRQUNKO1FBRUEsSUFBSSxDQUFDWSxtQkFBbUI7UUFFeEIsSUFBSSxDQUFDQyxZQUFZLEdBQUcsSUFBSSxDQUFDZixLQUFLLENBQUNnQixJQUFJLENBQUNDLFFBQVEsQ0FBQztZQUN6Q0MsT0FBTztZQUNQQyxVQUFVLElBQUksQ0FBQ0MsdUJBQXVCO1lBQ3RDQyxlQUFlLElBQUk7WUFDbkJDLE1BQU07UUFDVjtJQUNKO0lBRVFSLHNCQUE0QjtRQUNoQyxJQUFJLENBQUNULFFBQVEsQ0FBQ2tCLEVBQUUsQ0FBQzFCLG9FQUFhQSxDQUFDMkIsYUFBYSxFQUFFLElBQUksQ0FBQ0Msa0JBQWtCLEVBQUUsSUFBSTtRQUMzRSxJQUFJLENBQUNwQixRQUFRLENBQUNrQixFQUFFLENBQUMxQixvRUFBYUEsQ0FBQzZCLGlCQUFpQixFQUFFLElBQUksQ0FBQ0MsWUFBWSxFQUFFLElBQUk7UUFDekUsSUFBSSxDQUFDdEIsUUFBUSxDQUFDa0IsRUFBRSxDQUFDMUIsb0VBQWFBLENBQUMrQixTQUFTLEVBQUUsSUFBSSxDQUFDQyxXQUFXLEVBQUUs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STtRQUMxRSxJQUFJLENBQUN0QixRQUFRLENBQUNtRSxHQUFHLENBQUMzRSxvRUFBYUEsQ0FBQytCLFNBQVMsRUFBRSxJQUFJLENBQUNELFlBQVksRUFBRSxJQUFJO1FBQ2xFLElBQUksQ0FBQ3RCLFFBQVEsQ0FBQ21FLEdBQUcsQ0FBQzNFLG9FQUFhQSxDQUFDaUMsVUFBVSxFQUFFLElBQUksQ0FBQ0QsV0FBVyxFQUFFLElBQUk7UUFDbEUsSUFBSSxDQUFDeEIsUUFBUSxDQUFDbUUsR0FBRyxDQUFDM0Usb0VBQWFBLENBQUNrQyxXQUFXLEVBQUUsSUFBSSxDQUFDQyxZQUFZLEVBQUUsSUFBSTtRQUNwRSxJQUFJLENBQUNqQixZQUFZLEVBQUVzRDtJQUN2QjtJQUVBLElBQUlJLGNBQTJDO1FBQzNDLE9BQU8sSUFBSSxDQUFDbkUsS0FBSztJQUNyQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2NvbXBvbmVudHMvc3Bhd25lcnMvZW5lbXktc3Bhd25lci1jb21wb25lbnQudHM/ZGU0NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XG5pbXBvcnQgeyBFdmVudEJ1c0NvbXBvbmVudCB9IGZyb20gJy4uL2V2ZW50cy9ldmVudC1idXMtY29tcG9uZW50JztcbmltcG9ydCB7IFNwYXduTWFuYWdlciB9IGZyb20gJ0AvZ2FtZS9tYW5hZ2Vycy9zcGF3bi1tYW5hZ2VyJztcbmltcG9ydCB7IFNwYXduZXJDb25maWcsIEVuZW15Q2xhc3MsIEVuZW15SW50ZXJmYWNlIH0gZnJvbSAnQC9nYW1lL3R5cGVzL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgQ1VTVE9NX0VWRU5UUyB9IGZyb20gJ0AvZ2FtZS90eXBlcy9jdXN0b20tZXZlbnRzJztcblxuZXhwb3J0IGNsYXNzIEVuZW15U3Bhd25lckNvbXBvbmVudCB7XG4gICAgcHJpdmF0ZSBzY2VuZTogUGhhc2VyLlNjZW5lO1xuICAgIHByaXZhdGUgZW5lbXlDbGFzczogRW5lbXlDbGFzcztcbiAgICBwcml2YXRlIGdyb3VwOiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuR3JvdXA7XG4gICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXNDb21wb25lbnQ7XG4gICAgXG4gICAgcHJpdmF0ZSBzcGF3blRpbWVyPzogUGhhc2VyLlRpbWUuVGltZXJFdmVudDtcbiAgICBwcml2YXRlIGFjdGl2ZUNvbmZpZz86IFNwYXduZXJDb25maWc7XG4gICAgcHJpdmF0ZSBzcGF3bkNvdW50ZXIgPSAwO1xuICAgIHByaXZhdGUgaXNBY3RpdmUgPSBmYWxzZTtcbiAgICBwcml2YXRlIGNsZWFudXBUaW1lcj86IFBoYXNlci5UaW1lLlRpbWVyRXZlbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgc2NlbmU6IFBoYXNlci5TY2VuZSxcbiAgICAgICAgZW5lbXlDbGFzczogRW5lbXlDbGFzcyxcbiAgICAgICAgZXZlbnRCdXNDb21wb25lbnQ6IEV2ZW50QnVzQ29tcG9uZW50LFxuICAgICkge1xuICAgICAgICB0aGlzLmVuZW15Q2xhc3MgPSBlbmVteUNsYXNzO1xuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMgPSBldmVudEJ1c0NvbXBvbmVudDtcblxuICAgICAgICB0aGlzLmdyb3VwID0gdGhpcy5zY2VuZS5waHlzaWNzLmFkZC5ncm91cCh7XG4gICAgICAgICAgICBjbGFzc1R5cGU6IGVuZW15Q2xhc3MsXG4gICAgICAgICAgICBydW5DaGlsZFVwZGF0ZTogdHJ1ZSxcbiAgICAgICAgICAgIGNyZWF0ZUNhbGxiYWNrOiAoZW5lbXk6IFBoYXNlci5HYW1lT2JqZWN0cy5HYW1lT2JqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgKGVuZW15IGFzIEVuZW15SW50ZXJmYWNlKS5pbml0KGV2ZW50QnVzQ29tcG9uZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkgYXMgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkdyb3VwO1xuXG4gICAgICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xuXG4gICAgICAgIHRoaXMuY2xlYW51cFRpbWVyID0gdGhpcy5zY2VuZS50aW1lLmFkZEV2ZW50KHtcbiAgICAgICAgICAgIGRlbGF5OiAxMDAwLFxuICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMuY2xlYW51cE9mZnNjcmVlbkVuZW1pZXMsXG4gICAgICAgICAgICBjYWxsYmFja1Njb3BlOiB0aGlzLFxuICAgICAgICAgICAgbG9vcDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwRXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oQ1VTVE9NX0VWRU5UUy5TVEFSVF9TUEFXTkVSLCB0aGlzLmhhbmRsZVN0YXJ0U3Bhd25lciwgdGhpcyk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oQ1VTVE9NX0VWRU5UUy5TVE9QX0FMTF9TUEFXTkVSUywgdGhpcy5zdG9wU3Bhd25pbmcsIHRoaXMpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKENVU1RPTV9FVkVOVFMuR0FNRV9PVkVSLCB0aGlzLmhhbmRsZVBhdXNlLCB0aGlzKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihDVVNUT01fRVZFTlRTLlBBVVNFX0dBTUUsIHRoaXMuaGFuZGxlUGF1c2UsIHRoaXMpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKENVU1RPTV9FVkVOVFMuUkVTVU1FX0dBTUUsIHRoaXMuaGFuZGxlUmVzdW1lLCB0aGlzKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihDVVNUT01fRVZFTlRTLlJFU0VUX0FMTF9TUEFXTkVSUywgdGhpcy5yZXNldFNwYXduZXIsIHRoaXMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlU3RhcnRTcGF3bmVyKGNvbmZpZzogU3Bhd25lckNvbmZpZyk6IHZvaWQge1xuICAgICAgICBpZiAoY29uZmlnLmVuZW15VHlwZSAhPT0gdGhpcy5lbmVteUNsYXNzLmVuZW15VHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hY3RpdmVDb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuc3Bhd25Db3VudGVyID0gMDtcbiAgICAgICAgdGhpcy5zdGFydFNwYXduaW5nKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGFydFNwYXduaW5nKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0b3BTcGF3bmluZygpO1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLnNwYXduVGltZXIgPSB0aGlzLnNjZW5lLnRpbWUuYWRkRXZlbnQoe1xuICAgICAgICAgICAgZGVsYXk6IHRoaXMuYWN0aXZlQ29uZmlnPy5pbnRlcnZhbCA/PyAyMDAwLFxuICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMuc3Bhd25FbmVteSxcbiAgICAgICAgICAgIGNhbGxiYWNrU2NvcGU6IHRoaXMsXG4gICAgICAgICAgICBsb29wOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc3Bhd25FbmVteSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3Bhd25FbmVteSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlIHx8ICF0aGlzLmFjdGl2ZUNvbmZpZykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGdyb3VwU2l6ZSA9IHRoaXMuYWN0aXZlQ29uZmlnLmdyb3VwU2l6ZTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nID0gdGhpcy5hY3RpdmVDb25maWcuY291bnQgPyB0aGlzLmFjdGl2ZUNvbmZpZy5jb3VudCAtIHRoaXMuc3Bhd25Db3VudGVyIDogSW5maW5pdHk7XG5cbiAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BTcGF3bmluZygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY3VycmVudEdyb3VwU2l6ZSA9IE1hdGgubWluKGdyb3VwU2l6ZSwgcmVtYWluaW5nKTtcbiAgICAgICAgY29uc3QgcG9zaXRpb25zID0gU3Bhd25NYW5hZ2VyLmdldFNwYXduUG9zaXRpb25zKFxuICAgICAgICAgICAgdGhpcy5hY3RpdmVDb25maWcucGF0dGVyblR5cGUsXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUNvbmZpZy5wYXR0ZXJuUGFyYW1zLnBhcmFtcyxcbiAgICAgICAgICAgIGN1cnJlbnRHcm91cFNpemVcbiAgICAgICAgKTtcblxuICAgICAgICBmb3IgKGNvbnN0IHBvcyBvZiBwb3NpdGlvbnMpIHtcbiAgICAgICAgICAgIGxldCBlbmVteSA9IHRoaXMuZ3JvdXAuZ2V0KHBvcy54LCBwb3MueSkgYXMgRW5lbXlJbnRlcmZhY2U7XG4gICAgICAgICAgICBpZiAoIWVuZW15KSB7XG4gICAgICAgICAgICAgICAgZW5lbXkgPSBuZXcgdGhpcy5lbmVteUNsYXNzKHRoaXMuc2NlbmUsIHBvcy54LCBwb3MueSkgYXMgRW5lbXlJbnRlcmZhY2U7XG4gICAgICAgICAgICAgICAgdGhpcy5ncm91cC5hZGQoZW5lbXkpO1xuICAgICAgICAgICAgICAgIGVuZW15LmluaXQodGhpcy5ldmVudEJ1cyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVuZW15LnJlc2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNwYXduQ291bnRlcisrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlQ29uZmlnLmNvdW50ICYmIHRoaXMuc3Bhd25Db3VudGVyID49IHRoaXMuYWN0aXZlQ29uZmlnLmNvdW50KSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BTcGF3bmluZygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXNldFNwYXduZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcFNwYXduaW5nKCk7XG4gICAgICAgIHRoaXMuc3Bhd25Db3VudGVyID0gMDtcbiAgICAgICAgdGhpcy5hY3RpdmVDb25maWcgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbGVhbnVwT2Zmc2NyZWVuRW5lbWllcygpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgd29ybGRCb3VuZHMgPSB0aGlzLnNjZW5lLnBoeXNpY3Mud29ybGQuYm91bmRzO1xuICAgICAgICBjb25zdCBtYXJnaW4gPSAxMDA7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmdyb3VwLmdldENoaWxkcmVuKCkuZm9yRWFjaCgoZW5lbXk6IFBoYXNlci5HYW1lT2JqZWN0cy5HYW1lT2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzcHJpdGUgPSBlbmVteSBhcyBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuU3ByaXRlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc3ByaXRlLnkgPiB3b3JsZEJvdW5kcy5oZWlnaHQgKyBtYXJnaW4gfHwgXG4gICAgICAgICAgICAgICAgc3ByaXRlLnkgPCAtbWFyZ2luIHx8XG4gICAgICAgICAgICAgICAgc3ByaXRlLnggPCAtbWFyZ2luIHx8IFxuICAgICAgICAgICAgICAgIHNwcml0ZS54ID4gd29ybGRCb3VuZHMud2lkdGggKyBtYXJnaW4pIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzcHJpdGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0b3BTcGF3bmluZygpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuc3Bhd25UaW1lcikge1xuICAgICAgICAgICAgdGhpcy5zcGF3blRpbWVyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuc3Bhd25UaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVQYXVzZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuc3Bhd25UaW1lcikge1xuICAgICAgICAgICAgdGhpcy5zcGF3blRpbWVyLnBhdXNlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZVJlc3VtZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuc3Bhd25UaW1lcikge1xuICAgICAgICAgICAgdGhpcy5zcGF3blRpbWVyLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGNsZWFudXAoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcFNwYXduaW5nKCk7XG5cbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5TVEFSVF9TUEFXTkVSLCB0aGlzLmhhbmRsZVN0YXJ0U3Bhd25lciwgdGhpcyk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub2ZmKENVU1RPTV9FVkVOVFMuU1RPUF9BTExfU1BBV05FUlMsIHRoaXMuc3RvcFNwYXduaW5nLCB0aGlzKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5HQU1FX09WRVIsIHRoaXMuc3RvcFNwYXduaW5nLCB0aGlzKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5QQVVTRV9HQU1FLCB0aGlzLmhhbmRsZVBhdXNlLCB0aGlzKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5SRVNVTUVfR0FNRSwgdGhpcy5oYW5kbGVSZXN1bWUsIHRoaXMpO1xuICAgICAgICB0aGlzLmNsZWFudXBUaW1lcj8uZGVzdHJveSgpO1xuICAgIH1cblxuICAgIGdldCBwaGFzZXJHcm91cCgpOiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuR3JvdXAge1xuICAgICAgICByZXR1cm4gdGhpcy5ncm91cDtcbiAgICB9XG59Il0sIm5hbWVzIjpbIlNwYXduTWFuYWdlciIsIkNVU1RPTV9FVkVOVFMiLCJFbmVteVNwYXduZXJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwiZW5lbXlDbGFzcyIsImV2ZW50QnVzQ29tcG9uZW50Iiwic3Bhd25Db3VudGVyIiwiaXNBY3RpdmUiLCJldmVudEJ1cyIsImdyb3VwIiwicGh5c2ljcyIsImFkZCIsImNsYXNzVHlwZSIsInJ1bkNoaWxkVXBkYXRlIiwiY3JlYXRlQ2FsbGJhY2siLCJlbmVteSIsImluaXQiLCJzZXR1cEV2ZW50TGlzdGVuZXJzIiwiY2xlYW51cFRpbWVyIiwidGltZSIsImFkZEV2ZW50IiwiZGVsYXkiLCJjYWxsYmFjayIsImNsZWFudXBPZmZzY3JlZW5FbmVtaWVzIiwiY2FsbGJhY2tTY29wZSIsImxvb3AiLCJvbiIsIlNUQVJUX1NQQVdORVIiLCJoYW5kbGVTdGFydFNwYXduZXIiLCJTVE9QX0FMTF9TUEFXTkVSUyIsInN0b3BTcGF3bmluZyIsIkdBTUVfT1ZFUiIsImhhbmRsZVBhdXNlIiwiUEFVU0VfR0FNRSIsIlJFU1VNRV9HQU1FIiwiaGFuZGxlUmVzdW1lIiwiUkVTRVRfQUxMX1NQQVdORVJTIiwicmVzZXRTcGF3bmVyIiwiY29uZmlnIiwiZW5lbXlUeXBlIiwiYWN0aXZlQ29uZmlnIiwic3RhcnRTcGF3bmluZyIsInNwYXduVGltZXIiLCJpbnRlcnZhbCIsInNwYXduRW5lbXkiLCJncm91cFNpemUiLCJyZW1haW5pbmciLCJjb3VudCIsIkluZmluaXR5IiwiY3VycmVudEdyb3VwU2l6ZSIsIk1hdGgiLCJtaW4iLCJwb3NpdGlvbnMiLCJnZXRTcGF3blBvc2l0aW9ucyIsInBhdHRlcm5UeXBlIiwicGF0dGVyblBhcmFtcyIsInBhcmFtcyIsInBvcyIsImdldCIsIngiLCJ5IiwicmVzZXQiLCJ1bmRlZmluZWQiLCJ3b3JsZEJvdW5kcyIsIndvcmxkIiwiYm91bmRzIiwibWFyZ2luIiwiZ2V0Q2hpbGRyZW4iLCJmb3JFYWNoIiwic3ByaXRlIiwiaGVpZ2h0Iiwid2lkdGgiLCJkZXN0cm95IiwicGF1c2VkIiwiY2xlYW51cCIsIm9mZiIsInBoYXNlckdyb3VwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/components/spawners/enemy-spawner-component.ts\n");

/***/ }),

/***/ "./src/game/components/weapon/bullet-spawner-component.ts":
/*!****************************************************************!*\
  !*** ./src/game/components/weapon/bullet-spawner-component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BulletSpawnerComponent: () => (/* binding */ BulletSpawnerComponent)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n\nclass BulletSpawnerComponent {\n    constructor(scene, owner, bulletTexture, maxCount = 2048){\n        this.debug = false;\n        this.owner = owner;\n        this.activeBullets = new Set();\n        this.bulletGroup = scene.physics.add.group({\n            name: `boss-bullets-${phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.RND.uuid()}`,\n            enable: false,\n            classType: (phaser__WEBPACK_IMPORTED_MODULE_0___default().Physics).Arcade.Sprite\n        });\n        this.bulletGroup.createMultiple({\n            key: bulletTexture,\n            quantity: maxCount,\n            active: false,\n            visible: false\n        });\n        this.bulletGroup.setDepth(6);\n        scene.events.on(\"update\", this.update, this);\n        owner.once((phaser__WEBPACK_IMPORTED_MODULE_0___default().GameObjects).Events.DESTROY, this.cleanup, this);\n    }\n    update(time, delta) {\n        this.activeBullets.forEach((bullet)=>{\n            if (!bullet.active) {\n                this.activeBullets.delete(bullet);\n                return;\n            }\n            const lifespan = bullet.getData(\"lifespan\");\n            const newLifespan = lifespan - delta;\n            bullet.setData(\"lifespan\", newLifespan);\n            if (this.debug && newLifespan <= 0) {\n                console.log(\"Disabling bullet via update\", bullet.body?.velocity);\n            }\n            if (newLifespan <= 0) {\n                bullet.disableBody(true, true);\n                this.activeBullets.delete(bullet);\n            }\n            // Применение поведения пуль\n            const behaviors = bullet.getData(\"behaviors\");\n            if (behaviors) {\n                behaviors.forEach((behavior)=>behavior.update(bullet, delta));\n            }\n        });\n    }\n    spawn(config) {\n        config.directions.forEach((direction)=>{\n            const bullet = this.bulletGroup.getFirstDead(false);\n            if (!bullet) {\n                if (this.debug) console.warn(\"No available bullets in pool!\");\n                return;\n            }\n            const spawnX = config.spawnPosition?.x ?? this.owner.x;\n            const spawnY = config.spawnPosition?.y ?? this.owner.y;\n            bullet.enableBody(true, spawnX, spawnY, true, true);\n            bullet.setData(\"lifespan\", config.lifespan);\n            bullet.setScale(config.scale ?? 1);\n            if (config.size) bullet.body?.setSize(config.size.width, config.size.height);\n            if (config.animationKey) bullet.play(config.animationKey);\n            if (config.flipY) bullet.setFlipY(true);\n            // Поведение пули\n            if (config.behaviors) {\n                bullet.setData(\"behaviors\", config.behaviors);\n            } else bullet.setData(\"behaviors\", null);\n            if (bullet.body) {\n                bullet.body.velocity.x = direction.x * config.speed;\n                bullet.body.velocity.y = direction.y * config.speed;\n            }\n            this.activeBullets.add(bullet);\n        });\n    }\n    destroyBullet(bullet) {\n        if (bullet.active) {\n            bullet.setData(\"behaviors\", null);\n            bullet.disableBody(true, true);\n            this.activeBullets.delete(bullet);\n        }\n    }\n    bulletClear() {\n        this.activeBullets.forEach((bullet)=>{\n            bullet.setData(\"behaviors\", null);\n            this.destroyBullet(bullet);\n        });\n    }\n    cleanup() {\n        this.activeBullets.clear();\n        this.bulletGroup.clear(true, true);\n        this.owner.scene?.events.off(\"update\", this.update, this);\n    }\n    getGroup() {\n        return this.bulletGroup;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL3dlYXBvbi9idWxsZXQtc3Bhd25lci1jb21wb25lbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRCO0FBa0JyQixNQUFNQztJQU1UQyxZQUFZQyxLQUFtQixFQUFFQyxLQUFnQyxFQUFFQyxhQUFxQixFQUFFQyxXQUFXLElBQUksQ0FBRTthQUZuR0MsUUFBaUI7UUFHckIsSUFBSSxDQUFDSCxLQUFLLEdBQUdBO1FBQ2IsSUFBSSxDQUFDSSxhQUFhLEdBQUcsSUFBSUM7UUFFekIsSUFBSSxDQUFDQyxXQUFXLEdBQUdQLE1BQU1RLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxLQUFLLENBQUM7WUFDdkNDLE1BQU0sQ0FBQyxhQUFhLEVBQUVkLGtEQUFXLENBQUNnQixHQUFHLENBQUNDLElBQUksR0FBRyxDQUFDO1lBQzlDQyxRQUFRO1lBQ1JDLFdBQVduQix1REFBYyxDQUFDcUIsTUFBTSxDQUFDQyxNQUFNO1FBQzNDO1FBRUEsSUFBSSxDQUFDWixXQUFXLENBQUNhLGNBQWMsQ0FBQztZQUM1QkMsS0FBS25CO1lBQ0xvQixVQUFVbkI7WUFDVm9CLFFBQVE7WUFDUkMsU0FBUztRQUNiO1FBRUEsSUFBSSxDQUFDakIsV0FBVyxDQUFDa0IsUUFBUSxDQUFDO1FBRTFCekIsTUFBTTBCLE1BQU0sQ0FBQ0MsRUFBRSxDQUFDLFVBQVUsSUFBSSxDQUFDQyxNQUFNLEVBQUUsSUFBSTtRQUMzQzNCLE1BQU00QixJQUFJLENBQUNoQywyREFBa0IsQ0FBQ2tDLE1BQU0sQ0FBQ0MsT0FBTyxFQUFFLElBQUksQ0FBQ0MsT0FBTyxFQUFFLElBQUk7SUFDcEU7SUFFUUwsT0FBT00sSUFBWSxFQUFFQyxLQUFhLEVBQVE7UUFDOUMsSUFBSSxDQUFDOUIsYUFBYSxDQUFDK0IsT0FBTyxDQUFDQyxDQUFBQTtZQUN2QixJQUFJLENBQUNBLE9BQU9kLE1BQU0sRUFBRTtnQkFDaEIsSUFBSSxDQUFDbEIsYUFBYSxDQUFDaUMsTUFBTSxDQUFDRDtnQkFDMUI7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SztRQUN4QixJQUFJLENBQUNwRSxXQUFXLENBQUNvRSxLQUFLLENBQUMsTUFBTTtRQUM3QixJQUFJLENBQUMxRSxLQUFLLENBQUNELEtBQUssRUFBRTBCLE9BQU9rRCxJQUFJLFVBQVUsSUFBSSxDQUFDaEQsTUFBTSxFQUFFLElBQUk7SUFDNUQ7SUFFQWlELFdBQXdDO1FBQ3BDLE9BQU8sSUFBSSxDQUFDdEUsV0FBVztJQUMzQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2NvbXBvbmVudHMvd2VhcG9uL2J1bGxldC1zcGF3bmVyLWNvbXBvbmVudC50cz9mODZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnVsbGV0QmVoYXZpb3Ige1xyXG4gICAgdXBkYXRlKGJ1bGxldDogUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZSwgZGVsdGE6IG51bWJlcik6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnVsbGV0U3Bhd25Db25maWcge1xyXG4gICAgZGlyZWN0aW9uczogUGhhc2VyLk1hdGguVmVjdG9yMltdO1xyXG4gICAgc3BlZWQ6IG51bWJlcjtcclxuICAgIGxpZmVzcGFuOiBudW1iZXI7XHJcbiAgICBzY2FsZT86IG51bWJlcjtcclxuICAgIHNpemU/OiB7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyIH07XHJcbiAgICBhbmltYXRpb25LZXk/OiBzdHJpbmc7XHJcbiAgICBmbGlwWT86IGJvb2xlYW47XHJcbiAgICBzcGF3blBvc2l0aW9uPzogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9O1xyXG4gICAgYmVoYXZpb3JzPzogQnVsbGV0QmVoYXZpb3JbXTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJ1bGxldFNwYXduZXJDb21wb25lbnQge1xyXG4gICAgcHJpdmF0ZSBvd25lcjogUGhhc2VyLkdhbWVPYmplY3RzLlNwcml0ZTtcclxuICAgIHByaXZhdGUgYnVsbGV0R3JvdXA6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Hcm91cDtcclxuICAgIHByaXZhdGUgYWN0aXZlQnVsbGV0czogU2V0PFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGU+O1xyXG4gICAgcHJpdmF0ZSBkZWJ1ZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBQaGFzZXIuU2NlbmUsIG93bmVyOiBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlLCBidWxsZXRUZXh0dXJlOiBzdHJpbmcsIG1heENvdW50ID0gMjA0OCkge1xyXG4gICAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcclxuICAgICAgICB0aGlzLmFjdGl2ZUJ1bGxldHMgPSBuZXcgU2V0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuYnVsbGV0R3JvdXAgPSBzY2VuZS5waHlzaWNzLmFkZC5ncm91cCh7XHJcbiAgICAgICAgICAgIG5hbWU6IGBib3NzLWJ1bGxldHMtJHtQaGFzZXIuTWF0aC5STkQudXVpZCgpfWAsXHJcbiAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGNsYXNzVHlwZTogUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmJ1bGxldEdyb3VwLmNyZWF0ZU11bHRpcGxlKHtcclxuICAgICAgICAgICAga2V5OiBidWxsZXRUZXh0dXJlLFxyXG4gICAgICAgICAgICBxdWFudGl0eTogbWF4Q291bnQsXHJcbiAgICAgICAgICAgIGFjdGl2ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYnVsbGV0R3JvdXAuc2V0RGVwdGgoNik7XHJcblxyXG4gICAgICAgIHNjZW5lLmV2ZW50cy5vbigndXBkYXRlJywgdGhpcy51cGRhdGUsIHRoaXMpO1xyXG4gICAgICAgIG93bmVyLm9uY2UoUGhhc2VyLkdhbWVPYmplY3RzLkV2ZW50cy5ERVNUUk9ZLCB0aGlzLmNsZWFudXAsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlKHRpbWU6IG51bWJlciwgZGVsdGE6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQnVsbGV0cy5mb3JFYWNoKGJ1bGxldCA9PiB7XHJcbiAgICAgICAgICAgIGlmICghYnVsbGV0LmFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVCdWxsZXRzLmRlbGV0ZShidWxsZXQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsaWZlc3BhbiA9IGJ1bGxldC5nZXREYXRhKCdsaWZlc3BhbicpIGFzIG51bWJlcjtcclxuICAgICAgICAgICAgY29uc3QgbmV3TGlmZXNwYW4gPSBsaWZlc3BhbiAtIGRlbHRhO1xyXG4gICAgICAgICAgICBidWxsZXQuc2V0RGF0YSgnbGlmZXNwYW4nLCBuZXdMaWZlc3Bhbik7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5kZWJ1ZyAmJiBuZXdMaWZlc3BhbiA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGlzYWJsaW5nIGJ1bGxldCB2aWEgdXBkYXRlJywgYnVsbGV0LmJvZHk/LnZlbG9jaXR5KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG5ld0xpZmVzcGFuIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIGJ1bGxldC5kaXNhYmxlQm9keSh0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQnVsbGV0cy5kZWxldGUoYnVsbGV0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g0J/RgNC40LzQtdC90LXQvdC40LUg0L/QvtCy0LXQtNC10L3QuNGPINC/0YPQu9GMXHJcbiAgICAgICAgICAgIGNvbnN0IGJlaGF2aW9ycyA9IGJ1bGxldC5nZXREYXRhKCdiZWhhdmlvcnMnKSBhcyBCdWxsZXRCZWhhdmlvcltdO1xyXG4gICAgICAgICAgICBpZiAoYmVoYXZpb3JzKSB7XHJcbiAgICAgICAgICAgICAgICBiZWhhdmlvcnMuZm9yRWFjaChiZWhhdmlvciA9PiBiZWhhdmlvci51cGRhdGUoYnVsbGV0LCBkZWx0YSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3Bhd24oY29uZmlnOiBCdWxsZXRTcGF3bkNvbmZpZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbmZpZy5kaXJlY3Rpb25zLmZvckVhY2goZGlyZWN0aW9uID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYnVsbGV0ID0gdGhpcy5idWxsZXRHcm91cC5nZXRGaXJzdERlYWQoZmFsc2UpO1xyXG4gICAgICAgICAgICBpZiAoIWJ1bGxldCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVidWcpIGNvbnNvbGUud2FybihcIk5vIGF2YWlsYWJsZSBidWxsZXRzIGluIHBvb2whXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzcGF3blggPSBjb25maWcuc3Bhd25Qb3NpdGlvbj8ueCA/PyB0aGlzLm93bmVyLng7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwYXduWSA9IGNvbmZpZy5zcGF3blBvc2l0aW9uPy55ID8/IHRoaXMub3duZXIueTtcclxuXHJcbiAgICAgICAgICAgIGJ1bGxldC5lbmFibGVCb2R5KHRydWUsIHNwYXduWCwgc3Bhd25ZLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgYnVsbGV0LnNldERhdGEoJ2xpZmVzcGFuJywgY29uZmlnLmxpZmVzcGFuKTtcclxuICAgICAgICAgICAgYnVsbGV0LnNldFNjYWxlKGNvbmZpZy5zY2FsZSA/PyAxKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChjb25maWcuc2l6ZSkgYnVsbGV0LmJvZHk/LnNldFNpemUoY29uZmlnLnNpemUud2lkdGgsIGNvbmZpZy5zaXplLmhlaWdodCk7XHJcbiAgICAgICAgICAgIGlmIChjb25maWcuYW5pbWF0aW9uS2V5KSBidWxsZXQucGxheShjb25maWcuYW5pbWF0aW9uS2V5KTtcclxuICAgICAgICAgICAgaWYgKGNvbmZpZy5mbGlwWSkgYnVsbGV0LnNldEZsaXBZKHRydWUpO1xyXG5cclxuICAgICAgICAgICAgLy8g0J/QvtCy0LXQtNC10L3QuNC1INC/0YPQu9C4XHJcbiAgICAgICAgICAgIGlmIChjb25maWcuYmVoYXZpb3JzKSB7XHJcbiAgICAgICAgICAgICAgICBidWxsZXQuc2V0RGF0YSgnYmVoYXZpb3JzJywgY29uZmlnLmJlaGF2aW9ycyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBidWxsZXQuc2V0RGF0YSgnYmVoYXZpb3JzJywgbnVsbCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoYnVsbGV0LmJvZHkpIHtcclxuICAgICAgICAgICAgICAgIGJ1bGxldC5ib2R5LnZlbG9jaXR5LnggPSBkaXJlY3Rpb24ueCAqIGNvbmZpZy5zcGVlZDtcclxuICAgICAgICAgICAgICAgIGJ1bGxldC5ib2R5LnZlbG9jaXR5LnkgPSBkaXJlY3Rpb24ueSAqIGNvbmZpZy5zcGVlZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVCdWxsZXRzLmFkZChidWxsZXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3lCdWxsZXQoYnVsbGV0OiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuU3ByaXRlKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGJ1bGxldC5hY3RpdmUpIHtcclxuICAgICAgICAgICAgYnVsbGV0LnNldERhdGEoJ2JlaGF2aW9ycycsIG51bGwpO1xyXG4gICAgICAgICAgICBidWxsZXQuZGlzYWJsZUJvZHkodHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlQnVsbGV0cy5kZWxldGUoYnVsbGV0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYnVsbGV0Q2xlYXIoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVCdWxsZXRzLmZvckVhY2goYnVsbGV0ID0+IHtcclxuICAgICAgICAgICAgYnVsbGV0LnNldERhdGEoJ2JlaGF2aW9ycycsIG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lCdWxsZXQoYnVsbGV0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhbnVwKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQnVsbGV0cy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuYnVsbGV0R3JvdXAuY2xlYXIodHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5vd25lci5zY2VuZT8uZXZlbnRzLm9mZigndXBkYXRlJywgdGhpcy51cGRhdGUsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEdyb3VwKCk6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Hcm91cCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVsbGV0R3JvdXA7XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlBoYXNlciIsIkJ1bGxldFNwYXduZXJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwib3duZXIiLCJidWxsZXRUZXh0dXJlIiwibWF4Q291bnQiLCJkZWJ1ZyIsImFjdGl2ZUJ1bGxldHMiLCJTZXQiLCJidWxsZXRHcm91cCIsInBoeXNpY3MiLCJhZGQiLCJncm91cCIsIm5hbWUiLCJNYXRoIiwiUk5EIiwidXVpZCIsImVuYWJsZSIsImNsYXNzVHlwZSIsIlBoeXNpY3MiLCJBcmNhZGUiLCJTcHJpdGUiLCJjcmVhdGVNdWx0aXBsZSIsImtleSIsInF1YW50aXR5IiwiYWN0aXZlIiwidmlzaWJsZSIsInNldERlcHRoIiwiZXZlbnRzIiwib24iLCJ1cGRhdGUiLCJvbmNlIiwiR2FtZU9iamVjdHMiLCJFdmVudHMiLCJERVNUUk9ZIiwiY2xlYW51cCIsInRpbWUiLCJkZWx0YSIsImZvckVhY2giLCJidWxsZXQiLCJkZWxldGUiLCJsaWZlc3BhbiIsImdldERhdGEiLCJuZXdMaWZlc3BhbiIsInNldERhdGEiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsInZlbG9jaXR5IiwiZGlzYWJsZUJvZHkiLCJiZWhhdmlvcnMiLCJiZWhhdmlvciIsInNwYXduIiwiY29uZmlnIiwiZGlyZWN0aW9ucyIsImRpcmVjdGlvbiIsImdldEZpcnN0RGVhZCIsIndhcm4iLCJzcGF3blgiLCJzcGF3blBvc2l0aW9uIiwieCIsInNwYXduWSIsInkiLCJlbmFibGVCb2R5Iiwic2V0U2NhbGUiLCJzY2FsZSIsInNpemUiLCJzZXRTaXplIiwid2lkdGgiLCJoZWlnaHQiLCJhbmltYXRpb25LZXkiLCJwbGF5IiwiZmxpcFkiLCJzZXRGbGlwWSIsInNwZWVkIiwiZGVzdHJveUJ1bGxldCIsImJ1bGxldENsZWFyIiwiY2xlYXIiLCJvZmYiLCJnZXRHcm91cCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/components/weapon/bullet-spawner-component.ts\n");

/***/ }),

/***/ "./src/game/components/weapon/weapon-component.ts":
/*!********************************************************!*\
  !*** ./src/game/components/weapon/weapon-component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WeaponComponent: () => (/* binding */ WeaponComponent)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/game/configs/game-config */ \"./src/game/configs/game-config.ts\");\n/* harmony import */ var _game_managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/game/managers/local-storage-manager */ \"./src/game/managers/local-storage-manager.ts\");\n\n\n\n\nclass WeaponComponent {\n    constructor(gameObject, inputComponent, eventBusComponent){\n        this.fireTimer = 0;\n        this.currentPower = 0;\n        this.maxPower = 300;\n        this.isDestroyed = false;\n        this.laserBeam = null;\n        this.laserActive = false;\n        this.laserWidth = 0;\n        this.laserHitArea = new (phaser__WEBPACK_IMPORTED_MODULE_0___default().Geom).Rectangle();\n        this.laserDamagePerTick = 0;\n        this.laserGlow = null;\n        this.isActive = true;\n        this.gameObject = gameObject;\n        this.inputComponent = inputComponent;\n        this.eventBusComponent = eventBusComponent;\n        this.bulletConfig = {\n            ..._game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.base\n        };\n        this.homingPrimaryConfig = {\n            ..._game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.homing.primary\n        };\n        const settings = _game_managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_3__.LocalStorageManager.loadSettings();\n        this.weaponType = this.mapWeaponType(settings.weaponType);\n        this.eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.WEAPON_CHANGED, {\n            weaponType: this.weaponType\n        });\n        if (this.bulletGroup) {\n            this.destroyGroup(this.bulletGroup);\n        }\n        if (this.homingBulletGroup) {\n            this.destroyGroup(this.homingBulletGroup);\n        }\n        this.bulletGroup = this.gameObject.scene.physics.add.group({\n            name: `player-bullets-${phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.RND.uuid()}`,\n            classType: (phaser__WEBPACK_IMPORTED_MODULE_0___default().Physics).Arcade.Sprite,\n            maxSize: 200,\n            runChildUpdate: false\n        });\n        this.bulletGroup.createMultiple({\n            key: this.bulletConfig.texture,\n            quantity: 200,\n            active: false,\n            visible: false\n        });\n        this.gameObject.scene.physics.world.on((phaser__WEBPACK_IMPORTED_MODULE_0___default().Physics).Arcade.Events.WORLD_STEP, this.worldStep, this);\n        this.gameObject.once((phaser__WEBPACK_IMPORTED_MODULE_0___default().GameObjects).Events.DESTROY, this.cleanup, this);\n        this.cleanupTimer = this.gameObject.scene.time.addEvent({\n            delay: 100,\n            callback: this.cleanupOffscreenBullets,\n            callbackScope: this,\n            loop: true\n        });\n        // Инициализация лазера\n        this.laserBeam = this.gameObject.scene.add.graphics();\n        this.laserGlow = this.gameObject.scene.add.graphics();\n        this.laserBeam.setDepth(1);\n        this.laserGlow.setDepth(0);\n        this.laserBeam.setVisible(false);\n        this.laserGlow.setVisible(false);\n        if (this.homingBulletGroup) {\n            this.destroyGroup(this.homingBulletGroup);\n        }\n        // Группа для наводящихся пуль\n        this.homingBulletGroup = this.gameObject.scene.physics.add.group({\n            name: `homing-bullets-${phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.RND.uuid()}`,\n            classType: (phaser__WEBPACK_IMPORTED_MODULE_0___default().Physics).Arcade.Sprite,\n            maxSize: 80,\n            runChildUpdate: false\n        });\n        // Предварительное создание пуль с правильной текстурой\n        const homingTexture = _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.homing.homing.texture;\n        this.homingBulletGroup.createMultiple({\n            key: homingTexture,\n            quantity: 80,\n            active: false,\n            visible: false\n        });\n        this.eventBusComponent.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ADD_POWER, (amount)=>{\n            this.addPower(amount);\n        });\n    }\n    mapWeaponType(type) {\n        switch(type){\n            case \"wide\":\n                return 1;\n            case \"laser\":\n                return 2;\n            case \"rockets\":\n                return 3;\n        }\n    }\n    update(delta) {\n        this.fireTimer -= delta;\n        // Обновление лазера\n        if (this.weaponType === 2 && this.inputComponent.primaryActionIsDown) {\n            this.updateLaser();\n        } else if (this.laserActive || !this.inputComponent.primaryActionIsDown) {\n            this.deactivateLaser();\n        }\n        if (this.fireTimer <= 0 && this.inputComponent.primaryActionIsDown) {\n            this.fire();\n            this.fireTimer = this.getFireRate();\n        }\n    }\n    activateLaser() {\n        if (!this.laserBeam || !this.gameObject.active) return;\n        const level = this.getPowerLevel();\n        this.laserDamagePerTick = _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.laser.damageLevels[level];\n        this.laserWidth = _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.laser.widthLevels[level];\n        this.laserActive = true;\n        this.laserBeam.setVisible(true);\n        this.eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.SHIP_SHOOT);\n    }\n    deactivateLaser() {\n        if (!this.laserBeam) return;\n        this.laserActive = false;\n        this.laserBeam.clear(); // Очищаем графику\n        this.laserGlow?.clear();\n        this.laserBeam.setVisible(false);\n    }\n    updateLaser() {\n        if (!this.laserActive || !this.laserBeam || !this.gameObject.active) return;\n        // Обновляем параметры лазера\n        const level = this.getPowerLevel();\n        this.laserDamagePerTick = _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.laser.damageLevels[level];\n        this.laserWidth = _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.laser.widthLevels[level];\n        this.drawLaser();\n    }\n    drawLaser() {\n        if (!this.laserBeam || !this.laserGlow) return;\n        const config = _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.laser;\n        const x = this.gameObject.x;\n        const y = this.gameObject.y - 20;\n        const height = this.gameObject.scene.cameras.main.height;\n        const halfWidth = this.laserWidth / 2;\n        const time = this.gameObject.scene.time.now;\n        // Очищаем и перерисовываем с новыми параметрами\n        this.laserBeam.clear();\n        this.laserGlow.clear();\n        // 1. Создаем мерцающее свечение (3 слоя)\n        const glowAlpha = 0.3 + 0.1 * Math.sin(time * 0.005);\n        this.laserGlow.fillStyle(config.colors.glow, glowAlpha);\n        // Большое свечение\n        this.laserGlow.fillRect(x - halfWidth * 1.8, y, this.laserWidth * 1.8, -height);\n        // Среднее свечение\n        this.laserGlow.fillStyle(config.colors.glow, glowAlpha * 0.7);\n        this.laserGlow.fillRect(x - halfWidth * 1.4, y, this.laserWidth * 1.4, -height);\n        // Малое свечение\n        this.laserGlow.fillStyle(config.colors.glow, glowAlpha * 0.4);\n        this.laserGlow.fillRect(x - halfWidth, y, this.laserWidth, -height);\n        // 2. Внешняя часть лазера (имитация градиента)\n        // Количество слоев для имитации градиента\n        const layers = 10;\n        const centerColor = phaser__WEBPACK_IMPORTED_MODULE_0___default().Display.Color.ValueToColor(0x00ffff);\n        const edgeColor = phaser__WEBPACK_IMPORTED_MODULE_0___default().Display.Color.ValueToColor(0x0066ff);\n        for(let i = 0; i < layers; i++){\n            const ratio = i / (layers - 1);\n            const color = phaser__WEBPACK_IMPORTED_MODULE_0___default().Display.Color.Interpolate.ColorWithColor(edgeColor, centerColor, layers, i);\n            const width = this.laserWidth * (1 - ratio * 0.6); // Сужаем к центру\n            const alpha = 0.3 + 0.7 * (1 - ratio); // Прозрачнее к краям\n            this.laserBeam.fillStyle(phaser__WEBPACK_IMPORTED_MODULE_0___default().Display.Color.GetColor(color.r, color.g, color.b), alpha);\n            this.laserBeam.fillRect(x - width / 2, y, width, -height);\n        }\n        // 3. Яркое ядро лазера с анимацией\n        const coreWidth = this.laserWidth * 0.4;\n        const coreAlpha = 0.9 + 0.1 * Math.sin(time * 0.01);\n        // Вертикальные полосы для эффекта энергии\n        const segmentHeight = 20;\n        const segments = Math.ceil(height / segmentHeight);\n        for(let i = 0; i < segments; i++){\n            const segmentY = y - i * segmentHeight;\n            const segmentAlpha = coreAlpha * (0.8 + 0.2 * Math.sin(time * 0.02 + i * 0.5));\n            this.laserBeam.fillStyle(config.colors.inner, segmentAlpha);\n            this.laserBeam.fillRect(x - coreWidth / 2, segmentY, coreWidth, -segmentHeight);\n        }\n        // 4. Эффект \"искр\" по краям\n        const sparkAlpha = 0.6 * (0.5 + 0.5 * Math.sin(time * 0.03));\n        this.laserBeam.fillStyle(0xffffff, sparkAlpha);\n        // Левый край\n        this.laserBeam.fillRect(x - halfWidth - 2, y, 4, -height * (0.7 + 0.3 * Math.sin(time * 0.02)));\n        // Правый край\n        this.laserBeam.fillRect(x + halfWidth - 2, y, 4, -height * (0.7 + 0.3 * Math.sin(time * 0.025)));\n        // Обновляем область поражения\n        this.laserHitArea.setTo(x - halfWidth, 0, this.laserWidth, y);\n    }\n    isLaserActive() {\n        return this.laserActive;\n    }\n    fire() {\n        switch(this.weaponType){\n            case 1:\n                this.fireWideWeapon();\n                break;\n            case 2:\n                if (!this.laserActive) this.activateLaser();\n                break;\n            case 3:\n                this.fireHomingWeapon();\n                break;\n        }\n    }\n    fireWideWeapon() {\n        const pattern = this.getCurrentPattern();\n        const baseX = this.gameObject.x;\n        const baseY = this.gameObject.y + pattern.yOffset;\n        const angles = this.calculateSpreadAngles(pattern.bulletCount, pattern.spread);\n        for(let i = 0; i < pattern.bulletCount; i++){\n            const bullet = this.bulletGroup.getFirstDead(false);\n            if (!bullet) continue;\n            const angle = angles[i];\n            const rad = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.DegToRad(angle);\n            this.setupBullet(bullet, baseX, baseY, rad);\n        }\n        this.eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.SHIP_SHOOT);\n    }\n    // Равномерное распределение углов\n    calculateSpreadAngles(count, spread) {\n        if (count === 1) return [\n            0\n        ];\n        const angles = [];\n        const step = spread * 2 / (count - 1);\n        for(let i = 0; i < count; i++){\n            angles.push(-spread + i * step);\n        }\n        return angles;\n    }\n    fireHomingWeapon() {\n        const level = this.getPowerLevel();\n        const primaryConfig = _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.homing.primary;\n        const homingConfig = _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.homing.homing;\n        // Обычные пули\n        this.firePrimaryHomingBullets(level, primaryConfig);\n        // Наводящиеся пули\n        this.fireHomingBullets(level, homingConfig);\n    }\n    firePrimaryHomingBullets(level, config) {\n        const bulletCount = config.bulletCount[level];\n        const spread = config.spread[level];\n        const angles = this.calculateSpreadAngles(bulletCount, spread);\n        for(let i = 0; i < bulletCount; i++){\n            const bullet = this.bulletGroup.getFirstDead(false);\n            if (!bullet) continue;\n            this.setupBullet(bullet, this.gameObject.x, this.gameObject.y + config.yOffset, phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.DegToRad(angles[i]), false, true);\n        }\n    }\n    fireHomingBullets(level, config) {\n        const bulletCount = config.bulletCount[level];\n        const angleStep = Math.PI * 2 / bulletCount;\n        const spreadRadius = 30;\n        for(let i = 0; i < bulletCount; i++){\n            const bullet = this.homingBulletGroup.getFirstDead(false);\n            if (!bullet) continue;\n            const angle = angleStep * i;\n            const offsetX = Math.cos(angle) * spreadRadius * phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.FloatBetween(0.8, 1.2);\n            const offsetY = Math.sin(angle) * (spreadRadius / 2) * phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.FloatBetween(0.8, 1.2);\n            this.setupBullet(bullet, this.gameObject.x + offsetX, this.gameObject.y + offsetY + 15, Math.PI + phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.FloatBetween(-0.2, 0.2), true);\n            bullet.setTexture(config.texture);\n            bullet.setData(\"homingData\", {\n                delay: config.delayBeforeHoming,\n                turnRate: config.turnRate * phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.FloatBetween(0.95, 1.05),\n                target: null,\n                speed: config.speed * phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.FloatBetween(0.95, 1.05)\n            });\n        }\n    }\n    getHomingBulletGroup(caller) {\n        if (!this.isActive || !this.homingBulletGroup || !this.gameObject.scene || this.homingBulletGroup.scene?.scene !== this.gameObject.scene.scene) {\n            return null;\n        }\n        return this.homingBulletGroup;\n    }\n    setupBullet(bullet, x, y, angle, isHoming = false, isHomingPrimary = false) {\n        if (!this.gameObject.scene) {\n            return;\n        }\n        bullet.enableBody(true, x, y, true, true);\n        bullet.setData(\"lifespan\", this.bulletConfig.lifespan);\n        bullet.setData(\"damage\", isHoming ? _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.homing.homing.damage : isHomingPrimary ? this.homingPrimaryConfig.damage : this.bulletConfig.damage);\n        bullet.setScale(this.bulletConfig.scale);\n        bullet.body?.setSize(this.bulletConfig.size.width, this.bulletConfig.size.height);\n        bullet.setRotation(angle);\n        const velocityX = Math.sin(angle) * this.bulletConfig.speed;\n        const velocityY = Math.cos(angle) * -this.bulletConfig.speed;\n        bullet.body.setVelocity(velocityX, velocityY);\n    }\n    getFireRate() {\n        switch(this.weaponType){\n            case 1:\n                return this.getCurrentPattern().fireRate;\n            case 2:\n                return 0;\n            case 3:\n                return _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.homing.primary.fireRate;\n            default:\n                return 300;\n        }\n    }\n    worldStep(delta) {\n        this.updateBulletsLifespan(this.bulletGroup, delta);\n        this.updateBulletsLifespan(this.homingBulletGroup, delta);\n    }\n    updateBulletsLifespan(group, delta) {\n        group.getChildren().forEach((bullet)=>{\n            const sprite = bullet;\n            if (!sprite.active) return;\n            const lifespan = sprite.getData(\"lifespan\") - delta;\n            sprite.setData(\"lifespan\", lifespan);\n            if (lifespan <= 0) {\n                sprite.disableBody(true, true);\n            }\n        });\n    }\n    destroyBullet(bullet) {\n        bullet.setData(\"lifespan\", 0);\n    }\n    getBulletGroup() {\n        if (!this.bulletGroup || !this.gameObject.scene || this.bulletGroup.scene?.scene !== this.gameObject.scene.scene) {\n            return null;\n        }\n        return this.bulletGroup;\n    }\n    cleanupOffscreenBullets() {\n        this.cleanupGroupOffscreen(this.bulletGroup);\n        this.cleanupGroupOffscreen(this.homingBulletGroup);\n    }\n    cleanupGroupOffscreen(group) {\n        const worldBounds = this.gameObject.scene.physics.world.bounds;\n        const margin = 60;\n        group.getChildren().forEach((bullet)=>{\n            const sprite = bullet;\n            if (sprite.active && (sprite.y < -margin || sprite.y > worldBounds.height + margin || sprite.x < -margin || sprite.x > worldBounds.width + margin)) {\n                sprite.disableBody(true, true);\n            }\n        });\n    }\n    addPower(amount) {\n        const oldLevel = this.getPowerLevel();\n        this.currentPower = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Clamp(this.currentPower + amount, 0, this.maxPower);\n        const newLevel = this.getPowerLevel();\n        // Отправляем событие об изменении павера\n        this.eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.POWER_CHANGED, this.currentPower);\n        if (oldLevel !== newLevel) {\n            this.eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.WEAPON_POWER_CHANGED, {\n                oldLevel,\n                newLevel,\n                homingGroup: this.homingBulletGroup\n            });\n        }\n    }\n    getPower() {\n        return this.currentPower;\n    }\n    getPowerLevel() {\n        if (this.currentPower >= 300) return 3;\n        if (this.currentPower >= 200) return 2;\n        if (this.currentPower >= 100) return 1;\n        return 0;\n    }\n    getCurrentPattern() {\n        const level = this.getPowerLevel();\n        return _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.powerLevels[level];\n    }\n    setWeaponType(type) {\n        // Деактивируем текущее оружие\n        if (this.weaponType === 2) {\n            this.deactivateLaser();\n        }\n        // Устанавливаем новый тип\n        this.weaponType = type;\n        if (this.weaponType === type) return;\n    }\n    getWeaponType() {\n        return this.weaponType;\n    }\n    destroyGroup(group) {\n        if (!group || !this.gameObject.scene) return;\n        try {\n            // Отключаем все тела от физического мира\n            group.getChildren().forEach((child)=>{\n                const sprite = child;\n                if (sprite.body) {\n                    this.gameObject.scene.physics.world.disableBody(sprite.body);\n                }\n            });\n            // Очищаем группу\n            group.clear(true, true);\n            // Уничтожаем группу\n            if (group.scene) {\n                group.destroy();\n            }\n        } catch (e) {\n            console.warn(\"Error destroying group:\", e);\n        }\n    }\n    cleanup() {\n        if (this.isDestroyed) return;\n        this.isActive = false;\n        this.isDestroyed = true;\n        // Уничтожение лазера\n        this.laserBeam?.destroy();\n        this.laserBeam = null;\n        this.laserGlow?.destroy();\n        this.laserGlow = null;\n        if (this.gameObject.scene) {\n            this.gameObject.scene.physics.world.off((phaser__WEBPACK_IMPORTED_MODULE_0___default().Physics).Arcade.Events.WORLD_STEP, this.worldStep, this);\n        }\n        this.destroyGroup(this.bulletGroup);\n        this.destroyGroup(this.homingBulletGroup);\n        this.cleanupTimer?.destroy();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb21wb25lbnRzL3dlYXBvbi93ZWFwb24tY29tcG9uZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE0QjtBQUcrQjtBQUNOO0FBRXVCO0FBRXJFLE1BQU1JO0lBMEJUQyxZQUNJQyxVQUF3QyxFQUN4Q0MsY0FBOEIsRUFDOUJDLGlCQUFvQyxDQUN0QzthQTFCTUMsWUFBWTthQUtaQyxlQUFlO2FBQ2ZDLFdBQVc7YUFFWEMsY0FBYzthQUVkQyxZQUFnRDthQUNoREMsY0FBdUI7YUFDdkJDLGFBQXFCO2FBQ3RCQyxlQUFzQyxJQUFJaEIsb0RBQVcsQ0FBQ2tCLFNBQVM7YUFDL0RDLHFCQUE2QjthQUM1QkMsWUFBZ0Q7YUFJaERDLFdBQVc7UUFRZixJQUFJLENBQUNmLFVBQVUsR0FBR0E7UUFDbEIsSUFBSSxDQUFDQyxjQUFjLEdBQUdBO1FBQ3RCLElBQUksQ0FBQ0MsaUJBQWlCLEdBQUdBO1FBQ3pCLElBQUksQ0FBQ2MsWUFBWSxHQUFHO1lBQUUsR0FBR3BCLDJFQUEyQixDQUFDc0IsSUFBSTtRQUFDO1FBQzFELElBQUksQ0FBQ0MsbUJBQW1CLEdBQUc7WUFBRSxHQUFHdkIsMkVBQTJCLENBQUN3QixNQUFNLENBQUNDLE9BQU87UUFBQztRQUUzRSxNQUFNQyxXQUFXekIscUZBQW1CQSxDQUFDMEIsWUFBWTtRQUNqRCxJQUFJLENBQUNDLFVBQVUsR0FBRyxJQUFJLENBQUNDLGFBQWEsQ0FBQ0gsU0FBU0UsVUFBVTtRQUN4RCxJQUFJLENBQUN0QixpQkFBaUIsQ0FBQ3dCLElBQUksQ0FBQy9CLG9FQUFhQSxDQUFDZ0MsY0FBYyxFQUFFO1lBQUVILFlBQVksSUFBSSxDQUFDQSxVQUFVO1FBQUM7UUFFeEYsSUFBSSxJQUFJLENBQUNJLFdBQVcsRUFBRTtZQUNsQixJQUFJLENBQUNDLFlBQVksQ0FBQyxJQUFJLENBQUNELFdBQVc7UUFDdEM7UUFFQSxJQUFJLElBQUksQ0FBQ0UsaUJBQWlCLEVBQUU7WUFDeEIsSUFBSSxDQUFDRCxZQUFZLENB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QUNKO0lBRUF6SixVQUFnQjtRQUNaLElBQUksSUFBSSxDQUFDckQsV0FBVyxFQUFFO1FBQ3RCLElBQUksQ0FBQ1MsUUFBUSxHQUFHO1FBQ2hCLElBQUksQ0FBQ1QsV0FBVyxHQUFHO1FBRW5CLHFCQUFxQjtRQUNyQixJQUFJLENBQUNDLFNBQVMsRUFBRTRNO1FBQ2hCLElBQUksQ0FBQzVNLFNBQVMsR0FBRztRQUNqQixJQUFJLENBQUNPLFNBQVMsRUFBRXFNO1FBQ2hCLElBQUksQ0FBQ3JNLFNBQVMsR0FBRztRQUVqQixJQUFJLElBQUksQ0FBQ2QsVUFBVSxDQUFDK0IsS0FBSyxFQUFFO1lBQ3ZCLElBQUksQ0FBQy9CLFVBQVUsQ0FBQytCLEtBQUssQ0FBQ0MsT0FBTyxDQUFDbUIsS0FBSyxDQUFDb0ssR0FBRyxDQUNuQzdOLHVEQUFjLENBQUMrQyxNQUFNLENBQUNZLE1BQU0sQ0FBQ0MsVUFBVSxFQUN2QyxJQUFJLENBQUNDLFNBQVMsRUFDZCxJQUFJO1FBRVo7UUFFQSxJQUFJLENBQUMxQixZQUFZLENBQUMsSUFBSSxDQUFDRCxXQUFXO1FBQ2xDLElBQUksQ0FBQ0MsWUFBWSxDQUFDLElBQUksQ0FBQ0MsaUJBQWlCO1FBRXhDLElBQUksQ0FBQzhCLFlBQVksRUFBRXVKO0lBQ3ZCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvY29tcG9uZW50cy93ZWFwb24vd2VhcG9uLWNvbXBvbmVudC50cz9lMzIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IEV2ZW50QnVzQ29tcG9uZW50IH0gZnJvbSAnLi4vZXZlbnRzL2V2ZW50LWJ1cy1jb21wb25lbnQnO1xuaW1wb3J0IHsgSW5wdXRDb21wb25lbnQgfSBmcm9tICcuLi9pbnB1dC9pbnB1dC1jb21wb25lbnQnO1xuaW1wb3J0IHsgQ1VTVE9NX0VWRU5UUyB9IGZyb20gJ0AvZ2FtZS90eXBlcy9jdXN0b20tZXZlbnRzJztcbmltcG9ydCAqIGFzIENPTkZJRyBmcm9tICdAL2dhbWUvY29uZmlncy9nYW1lLWNvbmZpZyc7XG5pbXBvcnQgeyBCdWxsZXRDb25maWcsIEhvbWluZ1ByaW1hcnlDb25maWcsIFdlYXBvblBhdHRlcm4gfSBmcm9tICdAL2dhbWUvdHlwZXMvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBMb2NhbFN0b3JhZ2VNYW5hZ2VyIH0gZnJvbSAnQC9nYW1lL21hbmFnZXJzL2xvY2FsLXN0b3JhZ2UtbWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBXZWFwb25Db21wb25lbnQge1xuICAgIHByaXZhdGUgZ2FtZU9iamVjdDogUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZTtcbiAgICBwcml2YXRlIGlucHV0Q29tcG9uZW50OiBJbnB1dENvbXBvbmVudDtcbiAgICBwcml2YXRlIGJ1bGxldEdyb3VwOiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuR3JvdXA7XG4gICAgcHJpdmF0ZSBmaXJlVGltZXIgPSAwO1xuICAgIHByaXZhdGUgZXZlbnRCdXNDb21wb25lbnQ6IEV2ZW50QnVzQ29tcG9uZW50O1xuICAgIFxuICAgIHByaXZhdGUgd2VhcG9uVHlwZTogMSB8IDIgfCAzO1xuICAgIHByaXZhdGUgYnVsbGV0Q29uZmlnOiBCdWxsZXRDb25maWc7XG4gICAgcHJpdmF0ZSBjdXJyZW50UG93ZXIgPSAwO1xuICAgIHByaXZhdGUgbWF4UG93ZXIgPSAzMDA7XG4gICAgcHJpdmF0ZSBjbGVhbnVwVGltZXI/OiBQaGFzZXIuVGltZS5UaW1lckV2ZW50O1xuICAgIHByaXZhdGUgaXNEZXN0cm95ZWQgPSBmYWxzZTtcblxuICAgIHByaXZhdGUgbGFzZXJCZWFtOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3MgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIGxhc2VyQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBsYXNlcldpZHRoOiBudW1iZXIgPSAwO1xuICAgIHB1YmxpYyBsYXNlckhpdEFyZWE6IFBoYXNlci5HZW9tLlJlY3RhbmdsZSA9IG5ldyBQaGFzZXIuR2VvbS5SZWN0YW5nbGUoKTtcbiAgICBwdWJsaWMgbGFzZXJEYW1hZ2VQZXJUaWNrOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgbGFzZXJHbG93OiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3MgfCBudWxsID0gbnVsbDtcblxuICAgIHByaXZhdGUgaG9taW5nQnVsbGV0R3JvdXA6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Hcm91cDtcblxuICAgIHByaXZhdGUgaXNBY3RpdmUgPSB0cnVlO1xuICAgIHByaXZhdGUgaG9taW5nUHJpbWFyeUNvbmZpZzogSG9taW5nUHJpbWFyeUNvbmZpZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBnYW1lT2JqZWN0OiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuU3ByaXRlLFxuICAgICAgICBpbnB1dENvbXBvbmVudDogSW5wdXRDb21wb25lbnQsXG4gICAgICAgIGV2ZW50QnVzQ29tcG9uZW50OiBFdmVudEJ1c0NvbXBvbmVudCxcbiAgICApIHtcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0ID0gZ2FtZU9iamVjdDtcbiAgICAgICAgdGhpcy5pbnB1dENvbXBvbmVudCA9IGlucHV0Q29tcG9uZW50O1xuICAgICAgICB0aGlzLmV2ZW50QnVzQ29tcG9uZW50ID0gZXZlbnRCdXNDb21wb25lbnQ7XG4gICAgICAgIHRoaXMuYnVsbGV0Q29uZmlnID0geyAuLi5DT05GSUcuUExBWUVSX1dFQVBPTl9DT05GSUcuYmFzZSB9O1xuICAgICAgICB0aGlzLmhvbWluZ1ByaW1hcnlDb25maWcgPSB7IC4uLkNPTkZJRy5QTEFZRVJfV0VBUE9OX0NPTkZJRy5ob21pbmcucHJpbWFyeSB9O1xuXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gTG9jYWxTdG9yYWdlTWFuYWdlci5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy53ZWFwb25UeXBlID0gdGhpcy5tYXBXZWFwb25UeXBlKHNldHRpbmdzLndlYXBvblR5cGUpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzQ29tcG9uZW50LmVtaXQoQ1VTVE9NX0VWRU5UUy5XRUFQT05fQ0hBTkdFRCwgeyB3ZWFwb25UeXBlOiB0aGlzLndlYXBvblR5cGUgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuYnVsbGV0R3JvdXApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUdyb3VwKHRoaXMuYnVsbGV0R3JvdXApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaG9taW5nQnVsbGV0R3JvdXApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUdyb3VwKHRoaXMuaG9taW5nQnVsbGV0R3JvdXApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5idWxsZXRHcm91cCA9IHRoaXMuZ2FtZU9iamVjdC5zY2VuZS5waHlzaWNzLmFkZC5ncm91cCh7XG4gICAgICAgICAgICBuYW1lOiBgcGxheWVyLWJ1bGxldHMtJHtQaGFzZXIuTWF0aC5STkQudXVpZCgpfWAsXG4gICAgICAgICAgICBjbGFzc1R5cGU6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGUsXG4gICAgICAgICAgICBtYXhTaXplOiAyMDAsXG4gICAgICAgICAgICBydW5DaGlsZFVwZGF0ZTogZmFsc2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5idWxsZXRHcm91cC5jcmVhdGVNdWx0aXBsZSh7XG4gICAgICAgICAgICBrZXk6IHRoaXMuYnVsbGV0Q29uZmlnLnRleHR1cmUsXG4gICAgICAgICAgICBxdWFudGl0eTogMjAwLFxuICAgICAgICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5zY2VuZS5waHlzaWNzLndvcmxkLm9uKFxuICAgICAgICAgICAgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkV2ZW50cy5XT1JMRF9TVEVQLFxuICAgICAgICAgICAgdGhpcy53b3JsZFN0ZXAsXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0Lm9uY2UoXG4gICAgICAgICAgICBQaGFzZXIuR2FtZU9iamVjdHMuRXZlbnRzLkRFU1RST1ksXG4gICAgICAgICAgICB0aGlzLmNsZWFudXAsXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5jbGVhbnVwVGltZXIgPSB0aGlzLmdhbWVPYmplY3Quc2NlbmUudGltZS5hZGRFdmVudCh7XG4gICAgICAgICAgICBkZWxheTogMTAwLFxuICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMuY2xlYW51cE9mZnNjcmVlbkJ1bGxldHMsXG4gICAgICAgICAgICBjYWxsYmFja1Njb3BlOiB0aGlzLFxuICAgICAgICAgICAgbG9vcDogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQu9Cw0LfQtdGA0LBcbiAgICAgICAgdGhpcy5sYXNlckJlYW0gPSB0aGlzLmdhbWVPYmplY3Quc2NlbmUuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHRoaXMubGFzZXJHbG93ID0gdGhpcy5nYW1lT2JqZWN0LnNjZW5lLmFkZC5ncmFwaGljcygpO1xuICAgICAgICB0aGlzLmxhc2VyQmVhbS5zZXREZXB0aCgxKTtcbiAgICAgICAgdGhpcy5sYXNlckdsb3cuc2V0RGVwdGgoMCk7XG4gICAgICAgIHRoaXMubGFzZXJCZWFtLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0aGlzLmxhc2VyR2xvdy5zZXRWaXNpYmxlKGZhbHNlKTtcblxuXG4gICAgICAgIGlmICh0aGlzLmhvbWluZ0J1bGxldEdyb3VwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lHcm91cCh0aGlzLmhvbWluZ0J1bGxldEdyb3VwKTtcbiAgICAgICAgfVxuICAgICAgICAvLyDQk9GA0YPQv9C/0LAg0LTQu9GPINC90LDQstC+0LTRj9GJ0LjRhdGB0Y8g0L/Rg9C70YxcbiAgICAgICAgdGhpcy5ob21pbmdCdWxsZXRHcm91cCA9IHRoaXMuZ2FtZU9iamVjdC5zY2VuZS5waHlzaWNzLmFkZC5ncm91cCh7XG4gICAgICAgICAgICBuYW1lOiBgaG9taW5nLWJ1bGxldHMtJHtQaGFzZXIuTWF0aC5STkQudXVpZCgpfWAsXG4gICAgICAgICAgICBjbGFzc1R5cGU6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGUsXG4gICAgICAgICAgICBtYXhTaXplOiA4MCxcbiAgICAgICAgICAgIHJ1bkNoaWxkVXBkYXRlOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDQn9GA0LXQtNCy0LDRgNC40YLQtdC70YzQvdC+0LUg0YHQvtC30LTQsNC90LjQtSDQv9GD0LvRjCDRgSDQv9GA0LDQstC40LvRjNC90L7QuSDRgtC10LrRgdGC0YPRgNC+0LlcbiAgICAgICAgY29uc3QgaG9taW5nVGV4dHVyZSA9IENPTkZJRy5QTEFZRVJfV0VBUE9OX0NPTkZJRy5ob21pbmcuaG9taW5nLnRleHR1cmU7XG4gICAgICAgIHRoaXMuaG9taW5nQnVsbGV0R3JvdXAuY3JlYXRlTXVsdGlwbGUoe1xuICAgICAgICAgICAga2V5OiBob21pbmdUZXh0dXJlLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDgwLFxuICAgICAgICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQub24oQ1VTVE9NX0VWRU5UUy5BRERfUE9XRVIsIChhbW91bnQ6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRQb3dlcihhbW91bnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1hcFdlYXBvblR5cGUodHlwZTogJ3dpZGUnIHwgJ2xhc2VyJyB8ICdyb2NrZXRzJyk6IDEgfCAyIHwgMyB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnd2lkZSc6IHJldHVybiAxO1xuICAgICAgICAgICAgY2FzZSAnbGFzZXInOiByZXR1cm4gMjtcbiAgICAgICAgICAgIGNhc2UgJ3JvY2tldHMnOiByZXR1cm4gMztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZShkZWx0YTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZmlyZVRpbWVyIC09IGRlbHRhO1xuICAgICAgICBcbiAgICAgICAgLy8g0J7QsdC90L7QstC70LXQvdC40LUg0LvQsNC30LXRgNCwXG4gICAgICAgIGlmICh0aGlzLndlYXBvblR5cGUgPT09IDIgJiYgdGhpcy5pbnB1dENvbXBvbmVudC5wcmltYXJ5QWN0aW9uSXNEb3duKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxhc2VyKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5sYXNlckFjdGl2ZSB8fCAhdGhpcy5pbnB1dENvbXBvbmVudC5wcmltYXJ5QWN0aW9uSXNEb3duKSB7XG4gICAgICAgICAgICB0aGlzLmRlYWN0aXZhdGVMYXNlcigpO1xuICAgICAgICB9IFxuXG4gICAgICAgIGlmICh0aGlzLmZpcmVUaW1lciA8PSAwICYmIHRoaXMuaW5wdXRDb21wb25lbnQucHJpbWFyeUFjdGlvbklzRG93bikge1xuICAgICAgICAgICAgdGhpcy5maXJlKCk7XG4gICAgICAgICAgICB0aGlzLmZpcmVUaW1lciA9IHRoaXMuZ2V0RmlyZVJhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhY3RpdmF0ZUxhc2VyKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMubGFzZXJCZWFtIHx8ICF0aGlzLmdhbWVPYmplY3QuYWN0aXZlKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBjb25zdCBsZXZlbCA9IHRoaXMuZ2V0UG93ZXJMZXZlbCgpO1xuICAgICAgICB0aGlzLmxhc2VyRGFtYWdlUGVyVGljayA9IENPTkZJRy5QTEFZRVJfV0VBUE9OX0NPTkZJRy5sYXNlci5kYW1hZ2VMZXZlbHNbbGV2ZWxdO1xuICAgICAgICB0aGlzLmxhc2VyV2lkdGggPSBDT05GSUcuUExBWUVSX1dFQVBPTl9DT05GSUcubGFzZXIud2lkdGhMZXZlbHNbbGV2ZWxdO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5sYXNlckFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMubGFzZXJCZWFtLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQuZW1pdChDVVNUT01fRVZFTlRTLlNISVBfU0hPT1QpO1xuICAgIH1cblxuICAgIHB1YmxpYyBkZWFjdGl2YXRlTGFzZXIoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5sYXNlckJlYW0pIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubGFzZXJBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sYXNlckJlYW0uY2xlYXIoKTsgLy8g0J7Rh9C40YnQsNC10Lwg0LPRgNCw0YTQuNC60YNcbiAgICAgICAgdGhpcy5sYXNlckdsb3c/LmNsZWFyKCk7XG4gICAgICAgIHRoaXMubGFzZXJCZWFtLnNldFZpc2libGUoZmFsc2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlTGFzZXIoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5sYXNlckFjdGl2ZSB8fCAhdGhpcy5sYXNlckJlYW0gfHwgIXRoaXMuZ2FtZU9iamVjdC5hY3RpdmUpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDQv9Cw0YDQsNC80LXRgtGA0Ysg0LvQsNC30LXRgNCwXG4gICAgICAgIGNvbnN0IGxldmVsID0gdGhpcy5nZXRQb3dlckxldmVsKCk7XG4gICAgICAgIHRoaXMubGFzZXJEYW1hZ2VQZXJUaWNrID0gQ09ORklHLlBMQVlFUl9XRUFQT05fQ09ORklHLmxhc2VyLmRhbWFnZUxldmVsc1tsZXZlbF07XG4gICAgICAgIHRoaXMubGFzZXJXaWR0aCA9IENPTkZJRy5QTEFZRVJfV0VBUE9OX0NPTkZJRy5sYXNlci53aWR0aExldmVsc1tsZXZlbF07XG4gICAgICAgIFxuICAgICAgICB0aGlzLmRyYXdMYXNlcigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZHJhd0xhc2VyKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMubGFzZXJCZWFtIHx8ICF0aGlzLmxhc2VyR2xvdykgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY29uZmlnID0gQ09ORklHLlBMQVlFUl9XRUFQT05fQ09ORklHLmxhc2VyO1xuICAgICAgICBjb25zdCB4ID0gdGhpcy5nYW1lT2JqZWN0Lng7XG4gICAgICAgIGNvbnN0IHkgPSB0aGlzLmdhbWVPYmplY3QueSAtIDIwO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmdhbWVPYmplY3Quc2NlbmUuY2FtZXJhcy5tYWluLmhlaWdodDtcbiAgICAgICAgY29uc3QgaGFsZldpZHRoID0gdGhpcy5sYXNlcldpZHRoIC8gMjtcbiAgICAgICAgY29uc3QgdGltZSA9IHRoaXMuZ2FtZU9iamVjdC5zY2VuZS50aW1lLm5vdztcbiAgICAgICAgXG4gICAgICAgIC8vINCe0YfQuNGJ0LDQtdC8INC4INC/0LXRgNC10YDQuNGB0L7QstGL0LLQsNC10Lwg0YEg0L3QvtCy0YvQvNC4INC/0LDRgNCw0LzQtdGC0YDQsNC80LhcbiAgICAgICAgdGhpcy5sYXNlckJlYW0uY2xlYXIoKTtcbiAgICAgICAgdGhpcy5sYXNlckdsb3cuY2xlYXIoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIDEuINCh0L7Qt9C00LDQtdC8INC80LXRgNGG0LDRjtGJ0LXQtSDRgdCy0LXRh9C10L3QuNC1ICgzINGB0LvQvtGPKVxuICAgICAgICBjb25zdCBnbG93QWxwaGEgPSAwLjMgKyAwLjEgKiBNYXRoLnNpbih0aW1lICogMC4wMDUpO1xuICAgICAgICB0aGlzLmxhc2VyR2xvdy5maWxsU3R5bGUoY29uZmlnLmNvbG9ycy5nbG93LCBnbG93QWxwaGEpO1xuICAgICAgICBcbiAgICAgICAgLy8g0JHQvtC70YzRiNC+0LUg0YHQstC10YfQtdC90LjQtVxuICAgICAgICB0aGlzLmxhc2VyR2xvdy5maWxsUmVjdChcbiAgICAgICAgICAgIHggLSBoYWxmV2lkdGggKiAxLjgsIFxuICAgICAgICAgICAgeSwgXG4gICAgICAgICAgICB0aGlzLmxhc2VyV2lkdGggKiAxLjgsIFxuICAgICAgICAgICAgLWhlaWdodFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8g0KHRgNC10LTQvdC10LUg0YHQstC10YfQtdC90LjQtVxuICAgICAgICB0aGlzLmxhc2VyR2xvdy5maWxsU3R5bGUoY29uZmlnLmNvbG9ycy5nbG93LCBnbG93QWxwaGEgKiAwLjcpO1xuICAgICAgICB0aGlzLmxhc2VyR2xvdy5maWxsUmVjdChcbiAgICAgICAgICAgIHggLSBoYWxmV2lkdGggKiAxLjQsIFxuICAgICAgICAgICAgeSwgXG4gICAgICAgICAgICB0aGlzLmxhc2VyV2lkdGggKiAxLjQsIFxuICAgICAgICAgICAgLWhlaWdodFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8g0JzQsNC70L7QtSDRgdCy0LXRh9C10L3QuNC1XG4gICAgICAgIHRoaXMubGFzZXJHbG93LmZpbGxTdHlsZShjb25maWcuY29sb3JzLmdsb3csIGdsb3dBbHBoYSAqIDAuNCk7XG4gICAgICAgIHRoaXMubGFzZXJHbG93LmZpbGxSZWN0KFxuICAgICAgICAgICAgeCAtIGhhbGZXaWR0aCwgXG4gICAgICAgICAgICB5LCBcbiAgICAgICAgICAgIHRoaXMubGFzZXJXaWR0aCwgXG4gICAgICAgICAgICAtaGVpZ2h0XG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyAyLiDQktC90LXRiNC90Y/RjyDRh9Cw0YHRgtGMINC70LDQt9C10YDQsCAo0LjQvNC40YLQsNGG0LjRjyDQs9GA0LDQtNC40LXQvdGC0LApXG4gICAgICAgIC8vINCa0L7Qu9C40YfQtdGB0YLQstC+INGB0LvQvtC10LIg0LTQu9GPINC40LzQuNGC0LDRhtC40Lgg0LPRgNCw0LTQuNC10L3RgtCwXG4gICAgICAgIGNvbnN0IGxheWVycyA9IDEwOyBcbiAgICAgICAgY29uc3QgY2VudGVyQ29sb3IgPSBQaGFzZXIuRGlzcGxheS5Db2xvci5WYWx1ZVRvQ29sb3IoMHgwMGZmZmYpO1xuICAgICAgICBjb25zdCBlZGdlQ29sb3IgPSBQaGFzZXIuRGlzcGxheS5Db2xvci5WYWx1ZVRvQ29sb3IoMHgwMDY2ZmYpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGF5ZXJzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJhdGlvID0gaSAvIChsYXllcnMgLSAxKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gUGhhc2VyLkRpc3BsYXkuQ29sb3IuSW50ZXJwb2xhdGUuQ29sb3JXaXRoQ29sb3IoXG4gICAgICAgICAgICAgICAgZWRnZUNvbG9yLFxuICAgICAgICAgICAgICAgIGNlbnRlckNvbG9yLFxuICAgICAgICAgICAgICAgIGxheWVycyxcbiAgICAgICAgICAgICAgICBpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMubGFzZXJXaWR0aCAqICgxIC0gcmF0aW8gKiAwLjYpOyAvLyDQodGD0LbQsNC10Lwg0Log0YbQtdC90YLRgNGDXG4gICAgICAgICAgICBjb25zdCBhbHBoYSA9IDAuMyArIDAuNyAqICgxIC0gcmF0aW8pOyAvLyDQn9GA0L7Qt9GA0LDRh9C90LXQtSDQuiDQutGA0LDRj9C8XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMubGFzZXJCZWFtLmZpbGxTdHlsZShcbiAgICAgICAgICAgICAgICBQaGFzZXIuRGlzcGxheS5Db2xvci5HZXRDb2xvcihjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iKSxcbiAgICAgICAgICAgICAgICBhbHBoYVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5sYXNlckJlYW0uZmlsbFJlY3QoXG4gICAgICAgICAgICAgICAgeCAtIHdpZHRoLzIsXG4gICAgICAgICAgICAgICAgeSxcbiAgICAgICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgICAgICAtaGVpZ2h0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAzLiDQr9GA0LrQvtC1INGP0LTRgNC+INC70LDQt9C10YDQsCDRgSDQsNC90LjQvNCw0YbQuNC10LlcbiAgICAgICAgY29uc3QgY29yZVdpZHRoID0gdGhpcy5sYXNlcldpZHRoICogMC40O1xuICAgICAgICBjb25zdCBjb3JlQWxwaGEgPSAwLjkgKyAwLjEgKiBNYXRoLnNpbih0aW1lICogMC4wMSk7XG4gICAgICAgIFxuICAgICAgICAvLyDQktC10YDRgtC40LrQsNC70YzQvdGL0LUg0L/QvtC70L7RgdGLINC00LvRjyDRjdGE0YTQtdC60YLQsCDRjdC90LXRgNCz0LjQuFxuICAgICAgICBjb25zdCBzZWdtZW50SGVpZ2h0ID0gMjA7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRzID0gTWF0aC5jZWlsKGhlaWdodCAvIHNlZ21lbnRIZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50czsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzZWdtZW50WSA9IHkgLSBpICogc2VnbWVudEhlaWdodDtcbiAgICAgICAgICAgIGNvbnN0IHNlZ21lbnRBbHBoYSA9IGNvcmVBbHBoYSAqICgwLjggKyAwLjIgKiBNYXRoLnNpbih0aW1lICogMC4wMiArIGkgKiAwLjUpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5sYXNlckJlYW0uZmlsbFN0eWxlKGNvbmZpZy5jb2xvcnMuaW5uZXIsIHNlZ21lbnRBbHBoYSk7XG4gICAgICAgICAgICB0aGlzLmxhc2VyQmVhbS5maWxsUmVjdChcbiAgICAgICAgICAgICAgICB4IC0gY29yZVdpZHRoLzIsIFxuICAgICAgICAgICAgICAgIHNlZ21lbnRZLCBcbiAgICAgICAgICAgICAgICBjb3JlV2lkdGgsIFxuICAgICAgICAgICAgICAgIC1zZWdtZW50SGVpZ2h0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyA0LiDQrdGE0YTQtdC60YIgXCLQuNGB0LrRgFwiINC/0L4g0LrRgNCw0Y/QvFxuICAgICAgICBjb25zdCBzcGFya0FscGhhID0gMC42ICogKDAuNSArIDAuNSAqIE1hdGguc2luKHRpbWUgKiAwLjAzKSk7XG4gICAgICAgIHRoaXMubGFzZXJCZWFtLmZpbGxTdHlsZSgweGZmZmZmZiwgc3BhcmtBbHBoYSk7XG4gICAgICAgIFxuICAgICAgICAvLyDQm9C10LLRi9C5INC60YDQsNC5XG4gICAgICAgIHRoaXMubGFzZXJCZWFtLmZpbGxSZWN0KFxuICAgICAgICAgICAgeCAtIGhhbGZXaWR0aCAtIDIsIFxuICAgICAgICAgICAgeSwgXG4gICAgICAgICAgICA0LCBcbiAgICAgICAgICAgIC1oZWlnaHQgKiAoMC43ICsgMC4zICogTWF0aC5zaW4odGltZSAqIDAuMDIpKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8g0J/RgNCw0LLRi9C5INC60YDQsNC5XG4gICAgICAgIHRoaXMubGFzZXJCZWFtLmZpbGxSZWN0KFxuICAgICAgICAgICAgeCArIGhhbGZXaWR0aCAtIDIsIFxuICAgICAgICAgICAgeSwgXG4gICAgICAgICAgICA0LCBcbiAgICAgICAgICAgIC1oZWlnaHQgKiAoMC43ICsgMC4zICogTWF0aC5zaW4odGltZSAqIDAuMDI1KSlcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDQvtCx0LvQsNGB0YLRjCDQv9C+0YDQsNC20LXQvdC40Y9cbiAgICAgICAgdGhpcy5sYXNlckhpdEFyZWEuc2V0VG8oXG4gICAgICAgICAgICB4IC0gaGFsZldpZHRoLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIHRoaXMubGFzZXJXaWR0aCxcbiAgICAgICAgICAgIHlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNMYXNlckFjdGl2ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzZXJBY3RpdmU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaXJlKCk6IHZvaWQge1xuICAgICAgICBzd2l0Y2ggKHRoaXMud2VhcG9uVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAxOiAvLyDQqNC40YDQvtC60LjQuSDRgtC40L8g0YHRgtGA0LXQu9GM0LHRi1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyZVdpZGVXZWFwb24oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjogLy8g0JvQsNC30LXRgFxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5sYXNlckFjdGl2ZSkgdGhpcy5hY3RpdmF0ZUxhc2VyKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6IC8vIEhvbWluZ1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyZUhvbWluZ1dlYXBvbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaXJlV2lkZVdlYXBvbigpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF0dGVybiA9IHRoaXMuZ2V0Q3VycmVudFBhdHRlcm4oKTtcbiAgICAgICAgY29uc3QgYmFzZVggPSB0aGlzLmdhbWVPYmplY3QueDtcbiAgICAgICAgY29uc3QgYmFzZVkgPSB0aGlzLmdhbWVPYmplY3QueSArIHBhdHRlcm4ueU9mZnNldDtcblxuICAgICAgICBjb25zdCBhbmdsZXMgPSB0aGlzLmNhbGN1bGF0ZVNwcmVhZEFuZ2xlcyhwYXR0ZXJuLmJ1bGxldENvdW50LCBwYXR0ZXJuLnNwcmVhZCk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXR0ZXJuLmJ1bGxldENvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1bGxldCA9IHRoaXMuYnVsbGV0R3JvdXAuZ2V0Rmlyc3REZWFkKGZhbHNlKTtcbiAgICAgICAgICAgIGlmICghYnVsbGV0KSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBhbmdsZXNbaV07XG4gICAgICAgICAgICBjb25zdCByYWQgPSBQaGFzZXIuTWF0aC5EZWdUb1JhZChhbmdsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2V0dXBCdWxsZXQoYnVsbGV0LCBiYXNlWCwgYmFzZVksIHJhZCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQuZW1pdChDVVNUT01fRVZFTlRTLlNISVBfU0hPT1QpO1xuICAgIH1cblxuICAgIC8vINCg0LDQstC90L7QvNC10YDQvdC+0LUg0YDQsNGB0L/RgNC10LTQtdC70LXQvdC40LUg0YPQs9C70L7QslxuICAgIHByaXZhdGUgY2FsY3VsYXRlU3ByZWFkQW5nbGVzKGNvdW50OiBudW1iZXIsIHNwcmVhZDogbnVtYmVyKTogbnVtYmVyW10ge1xuICAgICAgICBpZiAoY291bnQgPT09IDEpIHJldHVybiBbMF07XG4gICAgICAgIGNvbnN0IGFuZ2xlcyA9IFtdO1xuICAgICAgICBjb25zdCBzdGVwID0gKHNwcmVhZCAqIDIpIC8gKGNvdW50IC0gMSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgYW5nbGVzLnB1c2goLXNwcmVhZCArIGkgKiBzdGVwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYW5nbGVzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmlyZUhvbWluZ1dlYXBvbigpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbGV2ZWwgPSB0aGlzLmdldFBvd2VyTGV2ZWwoKTtcbiAgICAgICAgY29uc3QgcHJpbWFyeUNvbmZpZyA9IENPTkZJRy5QTEFZRVJfV0VBUE9OX0NPTkZJRy5ob21pbmcucHJpbWFyeTtcbiAgICAgICAgY29uc3QgaG9taW5nQ29uZmlnID0gQ09ORklHLlBMQVlFUl9XRUFQT05fQ09ORklHLmhvbWluZy5ob21pbmc7XG4gICAgICAgIFxuICAgICAgICAvLyDQntCx0YvRh9C90YvQtSDQv9GD0LvQuFxuICAgICAgICB0aGlzLmZpcmVQcmltYXJ5SG9taW5nQnVsbGV0cyhsZXZlbCwgcHJpbWFyeUNvbmZpZyk7XG4gICAgICAgIFxuICAgICAgICAvLyDQndCw0LLQvtC00Y/RidC40LXRgdGPINC/0YPQu9C4XG4gICAgICAgIHRoaXMuZmlyZUhvbWluZ0J1bGxldHMobGV2ZWwsIGhvbWluZ0NvbmZpZyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaXJlUHJpbWFyeUhvbWluZ0J1bGxldHMobGV2ZWw6IG51bWJlciwgY29uZmlnOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYnVsbGV0Q291bnQgPSBjb25maWcuYnVsbGV0Q291bnRbbGV2ZWxdO1xuICAgICAgICBjb25zdCBzcHJlYWQgPSBjb25maWcuc3ByZWFkW2xldmVsXTtcbiAgICAgICAgY29uc3QgYW5nbGVzID0gdGhpcy5jYWxjdWxhdGVTcHJlYWRBbmdsZXMoYnVsbGV0Q291bnQsIHNwcmVhZCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1bGxldENvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1bGxldCA9IHRoaXMuYnVsbGV0R3JvdXAuZ2V0Rmlyc3REZWFkKGZhbHNlKTtcbiAgICAgICAgICAgIGlmICghYnVsbGV0KSBjb250aW51ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZXR1cEJ1bGxldChcbiAgICAgICAgICAgICAgICBidWxsZXQsXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lT2JqZWN0LngsXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lT2JqZWN0LnkgKyBjb25maWcueU9mZnNldCxcbiAgICAgICAgICAgICAgICBQaGFzZXIuTWF0aC5EZWdUb1JhZChhbmdsZXNbaV0pLFxuICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGZpcmVIb21pbmdCdWxsZXRzKGxldmVsOiBudW1iZXIsIGNvbmZpZzogYW55KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGJ1bGxldENvdW50ID0gY29uZmlnLmJ1bGxldENvdW50W2xldmVsXTtcbiAgICAgICAgY29uc3QgYW5nbGVTdGVwID0gKE1hdGguUEkgKiAyKSAvIGJ1bGxldENvdW50O1xuICAgICAgICBjb25zdCBzcHJlYWRSYWRpdXMgPSAzMDtcbiAgICAgICAgXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVsbGV0Q291bnQ7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgYnVsbGV0ID0gdGhpcy5ob21pbmdCdWxsZXRHcm91cC5nZXRGaXJzdERlYWQoZmFsc2UpO1xuICAgICAgICAgICAgaWYgKCFidWxsZXQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb25zdCBhbmdsZSA9IGFuZ2xlU3RlcCAqIGk7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXRYID0gTWF0aC5jb3MoYW5nbGUpICogc3ByZWFkUmFkaXVzICogUGhhc2VyLk1hdGguRmxvYXRCZXR3ZWVuKDAuOCwgMS4yKTtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldFkgPSBNYXRoLnNpbihhbmdsZSkgKiAoc3ByZWFkUmFkaXVzLzIpICogUGhhc2VyLk1hdGguRmxvYXRCZXR3ZWVuKDAuOCwgMS4yKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZXR1cEJ1bGxldChcbiAgICAgICAgICAgICAgICBidWxsZXQsXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lT2JqZWN0LnggKyBvZmZzZXRYLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU9iamVjdC55ICsgb2Zmc2V0WSArIDE1LFxuICAgICAgICAgICAgICAgIE1hdGguUEkgKyBQaGFzZXIuTWF0aC5GbG9hdEJldHdlZW4oLTAuMiwgMC4yKSxcbiAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBidWxsZXQuc2V0VGV4dHVyZShjb25maWcudGV4dHVyZSk7XG4gICAgICAgICAgICBidWxsZXQuc2V0RGF0YSgnaG9taW5nRGF0YScsIHtcbiAgICAgICAgICAgICAgICBkZWxheTogY29uZmlnLmRlbGF5QmVmb3JlSG9taW5nLFxuICAgICAgICAgICAgICAgIHR1cm5SYXRlOiBjb25maWcudHVyblJhdGUgKiBQaGFzZXIuTWF0aC5GbG9hdEJldHdlZW4oMC45NSwgMS4wNSksXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBudWxsLFxuICAgICAgICAgICAgICAgIHNwZWVkOiBjb25maWcuc3BlZWQgKiBQaGFzZXIuTWF0aC5GbG9hdEJldHdlZW4oMC45NSwgMS4wNSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0SG9taW5nQnVsbGV0R3JvdXAoY2FsbGVyPzogc3RyaW5nKTogUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkdyb3VwIHwgbnVsbCB7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUgfHwgIXRoaXMuaG9taW5nQnVsbGV0R3JvdXAgfHwgIXRoaXMuZ2FtZU9iamVjdC5zY2VuZSB8fCBcbiAgICAgICAgICAgIHRoaXMuaG9taW5nQnVsbGV0R3JvdXAuc2NlbmU/LnNjZW5lICE9PSB0aGlzLmdhbWVPYmplY3Quc2NlbmUuc2NlbmUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmhvbWluZ0J1bGxldEdyb3VwO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBCdWxsZXQoXG4gICAgICAgIGJ1bGxldDogUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZSxcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXIsXG4gICAgICAgIGFuZ2xlOiBudW1iZXIsXG4gICAgICAgIGlzSG9taW5nOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIGlzSG9taW5nUHJpbWFyeTogYm9vbGVhbiA9IGZhbHNlXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5nYW1lT2JqZWN0LnNjZW5lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYnVsbGV0LmVuYWJsZUJvZHkodHJ1ZSwgeCwgeSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIGJ1bGxldC5zZXREYXRhKCdsaWZlc3BhbicsIHRoaXMuYnVsbGV0Q29uZmlnLmxpZmVzcGFuKTtcbiAgICAgICAgYnVsbGV0LnNldERhdGEoJ2RhbWFnZScsIGlzSG9taW5nIFxuICAgICAgICAgICAgPyBDT05GSUcuUExBWUVSX1dFQVBPTl9DT05GSUcuaG9taW5nLmhvbWluZy5kYW1hZ2VcbiAgICAgICAgICAgIDogKGlzSG9taW5nUHJpbWFyeSA/IHRoaXMuaG9taW5nUHJpbWFyeUNvbmZpZy5kYW1hZ2UgOiB0aGlzLmJ1bGxldENvbmZpZy5kYW1hZ2UpXG4gICAgICAgICk7XG4gICAgICAgIGJ1bGxldC5zZXRTY2FsZSh0aGlzLmJ1bGxldENvbmZpZy5zY2FsZSk7XG4gICAgICAgIGJ1bGxldC5ib2R5Py5zZXRTaXplKHRoaXMuYnVsbGV0Q29uZmlnLnNpemUud2lkdGgsIHRoaXMuYnVsbGV0Q29uZmlnLnNpemUuaGVpZ2h0KTtcbiAgICAgICAgYnVsbGV0LnNldFJvdGF0aW9uKGFuZ2xlKTtcblxuICAgICAgICBjb25zdCB2ZWxvY2l0eVggPSBNYXRoLnNpbihhbmdsZSkgKiB0aGlzLmJ1bGxldENvbmZpZy5zcGVlZDtcbiAgICAgICAgY29uc3QgdmVsb2NpdHlZID0gTWF0aC5jb3MoYW5nbGUpICogLXRoaXMuYnVsbGV0Q29uZmlnLnNwZWVkO1xuICAgICAgICBcbiAgICAgICAgKGJ1bGxldC5ib2R5IGFzIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Cb2R5KS5zZXRWZWxvY2l0eSh2ZWxvY2l0eVgsIHZlbG9jaXR5WSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRGaXJlUmF0ZSgpOiBudW1iZXIge1xuICAgICAgICBzd2l0Y2ggKHRoaXMud2VhcG9uVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gdGhpcy5nZXRDdXJyZW50UGF0dGVybigpLmZpcmVSYXRlO1xuICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gMDtcbiAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIENPTkZJRy5QTEFZRVJfV0VBUE9OX0NPTkZJRy5ob21pbmcucHJpbWFyeS5maXJlUmF0ZTtcbiAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiAzMDA7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHByaXZhdGUgd29ybGRTdGVwKGRlbHRhOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy51cGRhdGVCdWxsZXRzTGlmZXNwYW4odGhpcy5idWxsZXRHcm91cCwgZGVsdGEpO1xuICAgICAgICB0aGlzLnVwZGF0ZUJ1bGxldHNMaWZlc3Bhbih0aGlzLmhvbWluZ0J1bGxldEdyb3VwLCBkZWx0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVCdWxsZXRzTGlmZXNwYW4oZ3JvdXA6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Hcm91cCwgZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBncm91cC5nZXRDaGlsZHJlbigpLmZvckVhY2goKGJ1bGxldCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3ByaXRlID0gYnVsbGV0IGFzIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGU7XG4gICAgICAgICAgICBpZiAoIXNwcml0ZS5hY3RpdmUpIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgbGlmZXNwYW4gPSAoc3ByaXRlLmdldERhdGEoJ2xpZmVzcGFuJykgYXMgbnVtYmVyKSAtIGRlbHRhO1xuICAgICAgICAgICAgc3ByaXRlLnNldERhdGEoJ2xpZmVzcGFuJywgbGlmZXNwYW4pO1xuXG4gICAgICAgICAgICBpZiAobGlmZXNwYW4gPD0gMCkge1xuICAgICAgICAgICAgICAgIHNwcml0ZS5kaXNhYmxlQm9keSh0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVzdHJveUJ1bGxldChidWxsZXQ6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGUpOiB2b2lkIHtcbiAgICAgICAgYnVsbGV0LnNldERhdGEoJ2xpZmVzcGFuJywgMCk7XG4gICAgfVxuXG4gICAgZ2V0QnVsbGV0R3JvdXAoKTogUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkdyb3VwIHwgbnVsbCB7XG4gICAgICAgIGlmICghdGhpcy5idWxsZXRHcm91cCB8fCAhdGhpcy5nYW1lT2JqZWN0LnNjZW5lIHx8IFxuICAgICAgICAgICAgdGhpcy5idWxsZXRHcm91cC5zY2VuZT8uc2NlbmUgIT09IHRoaXMuZ2FtZU9iamVjdC5zY2VuZS5zY2VuZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYnVsbGV0R3JvdXA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbGVhbnVwT2Zmc2NyZWVuQnVsbGV0cygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jbGVhbnVwR3JvdXBPZmZzY3JlZW4odGhpcy5idWxsZXRHcm91cCk7XG4gICAgICAgIHRoaXMuY2xlYW51cEdyb3VwT2Zmc2NyZWVuKHRoaXMuaG9taW5nQnVsbGV0R3JvdXApO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2xlYW51cEdyb3VwT2Zmc2NyZWVuKGdyb3VwOiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuR3JvdXApOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgd29ybGRCb3VuZHMgPSB0aGlzLmdhbWVPYmplY3Quc2NlbmUucGh5c2ljcy53b3JsZC5ib3VuZHM7XG4gICAgICAgIGNvbnN0IG1hcmdpbiA9IDYwO1xuICAgICAgICBcbiAgICAgICAgZ3JvdXAuZ2V0Q2hpbGRyZW4oKS5mb3JFYWNoKChidWxsZXQ6IFBoYXNlci5HYW1lT2JqZWN0cy5HYW1lT2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzcHJpdGUgPSBidWxsZXQgYXMgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHNwcml0ZS5hY3RpdmUgJiYgKFxuICAgICAgICAgICAgICAgIHNwcml0ZS55IDwgLW1hcmdpbiB8fCBcbiAgICAgICAgICAgICAgICBzcHJpdGUueSA+IHdvcmxkQm91bmRzLmhlaWdodCArIG1hcmdpbiB8fFxuICAgICAgICAgICAgICAgIHNwcml0ZS54IDwgLW1hcmdpbiB8fCBcbiAgICAgICAgICAgICAgICBzcHJpdGUueCA+IHdvcmxkQm91bmRzLndpZHRoICsgbWFyZ2luXG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgICAgc3ByaXRlLmRpc2FibGVCb2R5KHRydWUsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRQb3dlcihhbW91bnQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCBvbGRMZXZlbCA9IHRoaXMuZ2V0UG93ZXJMZXZlbCgpO1xuICAgICAgICB0aGlzLmN1cnJlbnRQb3dlciA9IFBoYXNlci5NYXRoLkNsYW1wKHRoaXMuY3VycmVudFBvd2VyICsgYW1vdW50LCAwLCB0aGlzLm1heFBvd2VyKTtcbiAgICAgICAgY29uc3QgbmV3TGV2ZWwgPSB0aGlzLmdldFBvd2VyTGV2ZWwoKTtcblxuICAgICAgICAvLyDQntGC0L/RgNCw0LLQu9GP0LXQvCDRgdC+0LHRi9GC0LjQtSDQvtCxINC40LfQvNC10L3QtdC90LjQuCDQv9Cw0LLQtdGA0LBcbiAgICAgICAgdGhpcy5ldmVudEJ1c0NvbXBvbmVudC5lbWl0KENVU1RPTV9FVkVOVFMuUE9XRVJfQ0hBTkdFRCwgdGhpcy5jdXJyZW50UG93ZXIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKG9sZExldmVsICE9PSBuZXdMZXZlbCkge1xuICAgICAgICAgICAgdGhpcy5ldmVudEJ1c0NvbXBvbmVudC5lbWl0KENVU1RPTV9FVkVOVFMuV0VBUE9OX1BPV0VSX0NIQU5HRUQsIHtcbiAgICAgICAgICAgICAgICBvbGRMZXZlbCxcbiAgICAgICAgICAgICAgICBuZXdMZXZlbCxcbiAgICAgICAgICAgICAgICBob21pbmdHcm91cDogdGhpcy5ob21pbmdCdWxsZXRHcm91cFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRQb3dlcigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UG93ZXI7XG4gICAgfVxuXG4gICAgZ2V0UG93ZXJMZXZlbCgpOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50UG93ZXIgPj0gMzAwKSByZXR1cm4gMztcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFBvd2VyID49IDIwMCkgcmV0dXJuIDI7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRQb3dlciA+PSAxMDApIHJldHVybiAxO1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEN1cnJlbnRQYXR0ZXJuKCk6IFdlYXBvblBhdHRlcm4ge1xuICAgICAgICBjb25zdCBsZXZlbCA9IHRoaXMuZ2V0UG93ZXJMZXZlbCgpO1xuICAgICAgICByZXR1cm4gQ09ORklHLlBMQVlFUl9XRUFQT05fQ09ORklHLnBvd2VyTGV2ZWxzW2xldmVsXTtcbiAgICB9XG5cbiAgICBzZXRXZWFwb25UeXBlKHR5cGU6IDEgfCAyIHwgMyk6IHZvaWQge1xuICAgICAgICAvLyDQlNC10LDQutGC0LjQstC40YDRg9C10Lwg0YLQtdC60YPRidC10LUg0L7RgNGD0LbQuNC1XG4gICAgICAgIGlmICh0aGlzLndlYXBvblR5cGUgPT09IDIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVhY3RpdmF0ZUxhc2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC90L7QstGL0Lkg0YLQuNC/XG4gICAgICAgIHRoaXMud2VhcG9uVHlwZSA9IHR5cGU7XG5cbiAgICAgICAgaWYgKHRoaXMud2VhcG9uVHlwZSA9PT0gdHlwZSkgcmV0dXJuO1xuICAgIH1cblxuICAgIGdldFdlYXBvblR5cGUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2VhcG9uVHlwZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlc3Ryb3lHcm91cChncm91cDogUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkdyb3VwIHwgbnVsbCk6IHZvaWQge1xuICAgICAgICBpZiAoIWdyb3VwIHx8ICF0aGlzLmdhbWVPYmplY3Quc2NlbmUpIHJldHVybjtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8g0J7RgtC60LvRjtGH0LDQtdC8INCy0YHQtSDRgtC10LvQsCDQvtGCINGE0LjQt9C40YfQtdGB0LrQvtCz0L4g0LzQuNGA0LBcbiAgICAgICAgICAgIGdyb3VwLmdldENoaWxkcmVuKCkuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ByaXRlID0gY2hpbGQgYXMgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZTtcbiAgICAgICAgICAgICAgICBpZiAoc3ByaXRlLmJvZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lT2JqZWN0LnNjZW5lLnBoeXNpY3Mud29ybGQuZGlzYWJsZUJvZHkoc3ByaXRlLmJvZHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyDQntGH0LjRidCw0LXQvCDQs9GA0YPQv9C/0YNcbiAgICAgICAgICAgIGdyb3VwLmNsZWFyKHRydWUsIHRydWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDQo9C90LjRh9GC0L7QttCw0LXQvCDQs9GA0YPQv9C/0YNcbiAgICAgICAgICAgIGlmIChncm91cC5zY2VuZSkge1xuICAgICAgICAgICAgICAgIGdyb3VwLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBkZXN0cm95aW5nIGdyb3VwOicsIGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIC8vINCj0L3QuNGH0YLQvtC20LXQvdC40LUg0LvQsNC30LXRgNCwXG4gICAgICAgIHRoaXMubGFzZXJCZWFtPy5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMubGFzZXJCZWFtID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXNlckdsb3c/LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5sYXNlckdsb3cgPSBudWxsO1xuXG4gICAgICAgIGlmICh0aGlzLmdhbWVPYmplY3Quc2NlbmUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZU9iamVjdC5zY2VuZS5waHlzaWNzLndvcmxkLm9mZihcbiAgICAgICAgICAgICAgICBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuRXZlbnRzLldPUkxEX1NURVAsXG4gICAgICAgICAgICAgICAgdGhpcy53b3JsZFN0ZXAsXG4gICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5kZXN0cm95R3JvdXAodGhpcy5idWxsZXRHcm91cCk7XG4gICAgICAgIHRoaXMuZGVzdHJveUdyb3VwKHRoaXMuaG9taW5nQnVsbGV0R3JvdXApO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jbGVhbnVwVGltZXI/LmRlc3Ryb3koKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUGhhc2VyIiwiQ1VTVE9NX0VWRU5UUyIsIkNPTkZJRyIsIkxvY2FsU3RvcmFnZU1hbmFnZXIiLCJXZWFwb25Db21wb25lbnQiLCJjb25zdHJ1Y3RvciIsImdhbWVPYmplY3QiLCJpbnB1dENvbXBvbmVudCIsImV2ZW50QnVzQ29tcG9uZW50IiwiZmlyZVRpbWVyIiwiY3VycmVudFBvd2VyIiwibWF4UG93ZXIiLCJpc0Rlc3Ryb3llZCIsImxhc2VyQmVhbSIsImxhc2VyQWN0aXZlIiwibGFzZXJXaWR0aCIsImxhc2VySGl0QXJlYSIsIkdlb20iLCJSZWN0YW5nbGUiLCJsYXNlckRhbWFnZVBlclRpY2siLCJsYXNlckdsb3ciLCJpc0FjdGl2ZSIsImJ1bGxldENvbmZpZyIsIlBMQVlFUl9XRUFQT05fQ09ORklHIiwiYmFzZSIsImhvbWluZ1ByaW1hcnlDb25maWciLCJob21pbmciLCJwcmltYXJ5Iiwic2V0dGluZ3MiLCJsb2FkU2V0dGluZ3MiLCJ3ZWFwb25UeXBlIiwibWFwV2VhcG9uVHlwZSIsImVtaXQiLCJXRUFQT05fQ0hBTkdFRCIsImJ1bGxldEdyb3VwIiwiZGVzdHJveUdyb3VwIiwiaG9taW5nQnVsbGV0R3JvdXAiLCJzY2VuZSIsInBoeXNpY3MiLCJhZGQiLCJncm91cCIsIm5hbWUiLCJNYXRoIiwiUk5EIiwidXVpZCIsImNsYXNzVHlwZSIsIlBoeXNpY3MiLCJBcmNhZGUiLCJTcHJpdGUiLCJtYXhTaXplIiwicnVuQ2hpbGRVcGRhdGUiLCJjcmVhdGVNdWx0aXBsZSIsImtleSIsInRleHR1cmUiLCJxdWFudGl0eSIsImFjdGl2ZSIsInZpc2libGUiLCJ3b3JsZCIsIm9uIiwiRXZlbnRzIiwiV09STERfU1RFUCIsIndvcmxkU3RlcCIsIm9uY2UiLCJHYW1lT2JqZWN0cyIsIkRFU1RST1kiLCJjbGVhbnVwIiwiY2xlYW51cFRpbWVyIiwidGltZSIsImFkZEV2ZW50IiwiZGVsYXkiLCJjYWxsYmFjayIsImNsZWFudXBPZmZzY3JlZW5CdWxsZXRzIiwiY2FsbGJhY2tTY29wZSIsImxvb3AiLCJncmFwaGljcyIsInNldERlcHRoIiwic2V0VmlzaWJsZSIsImhvbWluZ1RleHR1cmUiLCJBRERfUE9XRVIiLCJhbW91bnQiLCJhZGRQb3dlciIsInR5cGUiLCJ1cGRhdGUiLCJkZWx0YSIsInByaW1hcnlBY3Rpb25Jc0Rvd24iLCJ1cGRhdGVMYXNlciIsImRlYWN0aXZhdGVMYXNlciIsImZpcmUiLCJnZXRGaXJlUmF0ZSIsImFjdGl2YXRlTGFzZXIiLCJsZXZlbCIsImdldFBvd2VyTGV2ZWwiLCJsYXNlciIsImRhbWFnZUxldmVscyIsIndpZHRoTGV2ZWxzIiwiU0hJUF9TSE9PVCIsImNsZWFyIiwiZHJhd0xhc2VyIiwiY29uZmlnIiwieCIsInkiLCJoZWlnaHQiLCJjYW1lcmFzIiwibWFpbiIsImhhbGZXaWR0aCIsIm5vdyIsImdsb3dBbHBoYSIsInNpbiIsImZpbGxTdHlsZSIsImNvbG9ycyIsImdsb3ciLCJmaWxsUmVjdCIsImxheWVycyIsImNlbnRlckNvbG9yIiwiRGlzcGxheSIsIkNvbG9yIiwiVmFsdWVUb0NvbG9yIiwiZWRnZUNvbG9yIiwiaSIsInJhdGlvIiwiY29sb3IiLCJJbnRlcnBvbGF0ZSIsIkNvbG9yV2l0aENvbG9yIiwid2lkdGgiLCJhbHBoYSIsIkdldENvbG9yIiwiciIsImciLCJiIiwiY29yZVdpZHRoIiwiY29yZUFscGhhIiwic2VnbWVudEhlaWdodCIsInNlZ21lbnRzIiwiY2VpbCIsInNlZ21lbnRZIiwic2VnbWVudEFscGhhIiwiaW5uZXIiLCJzcGFya0FscGhhIiwic2V0VG8iLCJpc0xhc2VyQWN0aXZlIiwiZmlyZVdpZGVXZWFwb24iLCJmaXJlSG9taW5nV2VhcG9uIiwicGF0dGVybiIsImdldEN1cnJlbnRQYXR0ZXJuIiwiYmFzZVgiLCJiYXNlWSIsInlPZmZzZXQiLCJhbmdsZXMiLCJjYWxjdWxhdGVTcHJlYWRBbmdsZXMiLCJidWxsZXRDb3VudCIsInNwcmVhZCIsImJ1bGxldCIsImdldEZpcnN0RGVhZCIsImFuZ2xlIiwicmFkIiwiRGVnVG9SYWQiLCJzZXR1cEJ1bGxldCIsImNvdW50Iiwic3RlcCIsInB1c2giLCJwcmltYXJ5Q29uZmlnIiwiaG9taW5nQ29uZmlnIiwiZmlyZVByaW1hcnlIb21pbmdCdWxsZXRzIiwiZmlyZUhvbWluZ0J1bGxldHMiLCJhbmdsZVN0ZXAiLCJQSSIsInNwcmVhZFJhZGl1cyIsIm9mZnNldFgiLCJjb3MiLCJGbG9hdEJldHdlZW4iLCJvZmZzZXRZIiwic2V0VGV4dHVyZSIsInNldERhdGEiLCJkZWxheUJlZm9yZUhvbWluZyIsInR1cm5SYXRlIiwidGFyZ2V0Iiwic3BlZWQiLCJnZXRIb21pbmdCdWxsZXRHcm91cCIsImNhbGxlciIsImlzSG9taW5nIiwiaXNIb21pbmdQcmltYXJ5IiwiZW5hYmxlQm9keSIsImxpZmVzcGFuIiwiZGFtYWdlIiwic2V0U2NhbGUiLCJzY2FsZSIsImJvZHkiLCJzZXRTaXplIiwic2l6ZSIsInNldFJvdGF0aW9uIiwidmVsb2NpdHlYIiwidmVsb2NpdHlZIiwic2V0VmVsb2NpdHkiLCJmaXJlUmF0ZSIsInVwZGF0ZUJ1bGxldHNMaWZlc3BhbiIsImdldENoaWxkcmVuIiwiZm9yRWFjaCIsInNwcml0ZSIsImdldERhdGEiLCJkaXNhYmxlQm9keSIsImRlc3Ryb3lCdWxsZXQiLCJnZXRCdWxsZXRHcm91cCIsImNsZWFudXBHcm91cE9mZnNjcmVlbiIsIndvcmxkQm91bmRzIiwiYm91bmRzIiwibWFyZ2luIiwib2xkTGV2ZWwiLCJDbGFtcCIsIm5ld0xldmVsIiwiUE9XRVJfQ0hBTkdFRCIsIldFQVBPTl9QT1dFUl9DSEFOR0VEIiwiaG9taW5nR3JvdXAiLCJnZXRQb3dlciIsInBvd2VyTGV2ZWxzIiwic2V0V2VhcG9uVHlwZSIsImdldFdlYXBvblR5cGUiLCJjaGlsZCIsImRlc3Ryb3kiLCJlIiwiY29uc29sZSIsIndhcm4iLCJvZmYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/components/weapon/weapon-component.ts\n");

/***/ }),

/***/ "./src/game/configs/game-config.ts":
/*!*****************************************!*\
  !*** ./src/game/configs/game-config.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CIRCULAR_FIGHTER_BULLET_INTERVAL: () => (/* binding */ CIRCULAR_FIGHTER_BULLET_INTERVAL),\n/* harmony export */   CIRCULAR_FIGHTER_BULLET_LIFESPAN: () => (/* binding */ CIRCULAR_FIGHTER_BULLET_LIFESPAN),\n/* harmony export */   CIRCULAR_FIGHTER_BULLET_SPEED: () => (/* binding */ CIRCULAR_FIGHTER_BULLET_SPEED),\n/* harmony export */   CIRCULAR_FIGHTER_HEALTH: () => (/* binding */ CIRCULAR_FIGHTER_HEALTH),\n/* harmony export */   CIRCULAR_FIGHTER_MOVEMENT_VELOCITY: () => (/* binding */ CIRCULAR_FIGHTER_MOVEMENT_VELOCITY),\n/* harmony export */   CIRCULAR_FIGHTER_SCORE: () => (/* binding */ CIRCULAR_FIGHTER_SCORE),\n/* harmony export */   CIRCULAR_FIGHTER_SHOOT_CYCLES: () => (/* binding */ CIRCULAR_FIGHTER_SHOOT_CYCLES),\n/* harmony export */   CIRCULAR_FIGHTER_SHOOT_INTERVAL: () => (/* binding */ CIRCULAR_FIGHTER_SHOOT_INTERVAL),\n/* harmony export */   CIRCULAR_FIGHTER_STOP_DISTANCE: () => (/* binding */ CIRCULAR_FIGHTER_STOP_DISTANCE),\n/* harmony export */   ENEMY_FIGHTER_BULLET_INTERVAL: () => (/* binding */ ENEMY_FIGHTER_BULLET_INTERVAL),\n/* harmony export */   ENEMY_FIGHTER_BULLET_LIFESPAN: () => (/* binding */ ENEMY_FIGHTER_BULLET_LIFESPAN),\n/* harmony export */   ENEMY_FIGHTER_BULLET_MAX_COUNT: () => (/* binding */ ENEMY_FIGHTER_BULLET_MAX_COUNT),\n/* harmony export */   ENEMY_FIGHTER_BULLET_SPEED: () => (/* binding */ ENEMY_FIGHTER_BULLET_SPEED),\n/* harmony export */   ENEMY_FIGHTER_GROUP_SPAWN_INTERVAL: () => (/* binding */ ENEMY_FIGHTER_GROUP_SPAWN_INTERVAL),\n/* harmony export */   ENEMY_FIGHTER_GROUP_SPAWN_START: () => (/* binding */ ENEMY_FIGHTER_GROUP_SPAWN_START),\n/* harmony export */   ENEMY_FIGHTER_HEALTH: () => (/* binding */ ENEMY_FIGHTER_HEALTH),\n/* harmony export */   ENEMY_FIGHTER_MOVEMENT_VERTICAL_VELOCITY: () => (/* binding */ ENEMY_FIGHTER_MOVEMENT_VERTICAL_VELOCITY),\n/* harmony export */   ENEMY_FIGHTER_SCORE: () => (/* binding */ ENEMY_FIGHTER_SCORE),\n/* harmony export */   ENEMY_SCOUT_GROUP_SPAWN_INTERVAL: () => (/* binding */ ENEMY_SCOUT_GROUP_SPAWN_INTERVAL),\n/* harmony export */   ENEMY_SCOUT_GROUP_SPAWN_START: () => (/* binding */ ENEMY_SCOUT_GROUP_SPAWN_START),\n/* harmony export */   ENEMY_SCOUT_HEALTH: () => (/* binding */ ENEMY_SCOUT_HEALTH),\n/* harmony export */   ENEMY_SCOUT_MOVEMENT_HORIZONTAL_VELOCITY: () => (/* binding */ ENEMY_SCOUT_MOVEMENT_HORIZONTAL_VELOCITY),\n/* harmony export */   ENEMY_SCOUT_MOVEMENT_MAX_X: () => (/* binding */ ENEMY_SCOUT_MOVEMENT_MAX_X),\n/* harmony export */   ENEMY_SCOUT_MOVEMENT_VERTICAL_VELOCITY: () => (/* binding */ ENEMY_SCOUT_MOVEMENT_VERTICAL_VELOCITY),\n/* harmony export */   ENEMY_SCOUT_SCORE: () => (/* binding */ ENEMY_SCOUT_SCORE),\n/* harmony export */   LIFE_BONUS_VALUE: () => (/* binding */ LIFE_BONUS_VALUE),\n/* harmony export */   PLAYER_BOMB_CONFIG: () => (/* binding */ PLAYER_BOMB_CONFIG),\n/* harmony export */   PLAYER_HEALTH: () => (/* binding */ PLAYER_HEALTH),\n/* harmony export */   PLAYER_LIVES: () => (/* binding */ PLAYER_LIVES),\n/* harmony export */   PLAYER_MOVEMENT_VELOCITY: () => (/* binding */ PLAYER_MOVEMENT_VELOCITY),\n/* harmony export */   PLAYER_WEAPON_CONFIG: () => (/* binding */ PLAYER_WEAPON_CONFIG),\n/* harmony export */   levels: () => (/* binding */ levels)\n/* harmony export */ });\n/* harmony import */ var _levels_level_1_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./levels/level-1.config */ \"./src/game/configs/levels/level-1.config.ts\");\n/* harmony import */ var _levels_level_2_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./levels/level-2.config */ \"./src/game/configs/levels/level-2.config.ts\");\n\n\n// Настройки игрока\nconst PLAYER_LIVES = 1;\nconst PLAYER_HEALTH = 1;\nconst PLAYER_MOVEMENT_VELOCITY = 250;\nconst LIFE_BONUS_VALUE = 1000; // Бонус за каждую оставшуюся жизнь\n// Настройки врага-истребителя\nconst ENEMY_FIGHTER_SCORE = 200;\nconst ENEMY_FIGHTER_HEALTH = 250;\nconst ENEMY_FIGHTER_MOVEMENT_VERTICAL_VELOCITY = 200;\nconst ENEMY_FIGHTER_BULLET_SPEED = -280;\nconst ENEMY_FIGHTER_BULLET_INTERVAL = 2000;\nconst ENEMY_FIGHTER_BULLET_LIFESPAN = 30000;\nconst ENEMY_FIGHTER_BULLET_MAX_COUNT = 10;\nconst ENEMY_FIGHTER_GROUP_SPAWN_INTERVAL = 6000;\nconst ENEMY_FIGHTER_GROUP_SPAWN_START = 3000;\n// Настройки врага-разведчика\nconst ENEMY_SCOUT_SCORE = 100;\nconst ENEMY_SCOUT_HEALTH = 20;\nconst ENEMY_SCOUT_MOVEMENT_MAX_X = 40;\nconst ENEMY_SCOUT_MOVEMENT_VERTICAL_VELOCITY = 180;\nconst ENEMY_SCOUT_MOVEMENT_HORIZONTAL_VELOCITY = 110;\nconst ENEMY_SCOUT_GROUP_SPAWN_INTERVAL = 5000;\nconst ENEMY_SCOUT_GROUP_SPAWN_START = 1000;\n// circular-fighter-config.ts\nconst CIRCULAR_FIGHTER_SCORE = 300; // Больше очков за сложность\nconst CIRCULAR_FIGHTER_HEALTH = 300;\nconst CIRCULAR_FIGHTER_MOVEMENT_VELOCITY = 180; // Скорость движения\nconst CIRCULAR_FIGHTER_BULLET_SPEED = 350; // Пули летят быстрее\nconst CIRCULAR_FIGHTER_BULLET_INTERVAL = 250; // Интервал между выстрелами в серии\nconst CIRCULAR_FIGHTER_BULLET_LIFESPAN = 4000; // Время жизни пули\nconst CIRCULAR_FIGHTER_SHOOT_INTERVAL = 2000; // 10 сек между сменами цели\nconst CIRCULAR_FIGHTER_SHOOT_CYCLES = 25; // Количество циклов стрельбы\nconst CIRCULAR_FIGHTER_STOP_DISTANCE = 150; // Дистанция остановки от центра\nconst levels = [\n    _levels_level_1_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n    _levels_level_2_config__WEBPACK_IMPORTED_MODULE_1__[\"default\"]\n];\nconst PLAYER_WEAPON_CONFIG = {\n    base: {\n        speed: 600,\n        lifespan: 1000,\n        texture: \"bullet\",\n        scale: 0.8,\n        size: {\n            width: 14,\n            height: 18\n        },\n        damage: 20\n    },\n    powerLevels: {\n        0: {\n            bulletCount: 3,\n            spread: 15,\n            fireRate: 300,\n            yOffset: -20\n        },\n        1: {\n            bulletCount: 5,\n            spread: 25,\n            fireRate: 250,\n            yOffset: -20\n        },\n        2: {\n            bulletCount: 7,\n            spread: 35,\n            fireRate: 200,\n            yOffset: -20\n        },\n        3: {\n            bulletCount: 9,\n            spread: 45,\n            fireRate: 150,\n            yOffset: -20\n        }\n    },\n    laser: {\n        damageLevels: [\n            1,\n            2,\n            3,\n            4\n        ],\n        widthLevels: [\n            16,\n            22,\n            26,\n            30\n        ],\n        fireRate: 50,\n        colors: {\n            inner: 0x00ffff,\n            outer: 0x0066ff,\n            glow: 0x00aaff\n        },\n        alpha: 0.8\n    },\n    homing: {\n        primary: {\n            bulletCount: [\n                2,\n                2,\n                3,\n                3\n            ],\n            spread: [\n                2,\n                2,\n                15,\n                15\n            ],\n            fireRate: 300,\n            yOffset: -20,\n            damage: 5\n        },\n        homing: {\n            bulletCount: [\n                2,\n                4,\n                6,\n                8\n            ],\n            texture: \"rocket\",\n            speed: 300,\n            turnRate: 0.08,\n            delayBeforeHoming: 100,\n            lifespan: 5000,\n            damage: 7\n        }\n    }\n};\nconst PLAYER_BOMB_CONFIG = {\n    count: 3,\n    duration: 5000,\n    damageInterval: 50,\n    damage: 5,\n    cooldown: 1000 // Задержка после использования\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb25maWdzL2dhbWUtY29uZmlnLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDNkM7QUFDQTtBQUU3QyxtQkFBbUI7QUFDWixNQUFNRSxlQUF1QixFQUFFO0FBQy9CLE1BQU1DLGdCQUF3QixFQUFFO0FBQ2hDLE1BQU1DLDJCQUFtQyxJQUFJO0FBQzdDLE1BQU1DLG1CQUFtQixLQUFLLENBQUMsbUNBQW1DO0FBRXpFLDhCQUE4QjtBQUN2QixNQUFNQyxzQkFBOEIsSUFBSTtBQUN4QyxNQUFNQyx1QkFBK0IsSUFBSTtBQUN6QyxNQUFNQywyQ0FBbUQsSUFBSTtBQUM3RCxNQUFNQyw2QkFBcUMsQ0FBQyxJQUFJO0FBQ2hELE1BQU1DLGdDQUF3QyxLQUFLO0FBQ25ELE1BQU1DLGdDQUF3QyxNQUFNO0FBQ3BELE1BQU1DLGlDQUF5QyxHQUFHO0FBQ2xELE1BQU1DLHFDQUE2QyxLQUFLO0FBQ3hELE1BQU1DLGtDQUEwQyxLQUFLO0FBRTVELDZCQUE2QjtBQUN0QixNQUFNQyxvQkFBNEIsSUFBSTtBQUN0QyxNQUFNQyxxQkFBNkIsR0FBRztBQUN0QyxNQUFNQyw2QkFBcUMsR0FBRztBQUM5QyxNQUFNQyx5Q0FBaUQsSUFBSTtBQUMzRCxNQUFNQywyQ0FBbUQsSUFBSTtBQUM3RCxNQUFNQyxtQ0FBMkMsS0FBSztBQUN0RCxNQUFNQyxnQ0FBd0MsS0FBSztBQUUxRCw2QkFBNkI7QUFDdEIsTUFBTUMseUJBQWlDLElBQUksQ0FBQyw0QkFBNEI7QUFDeEUsTUFBTUMsMEJBQWtDLElBQUk7QUFDNUMsTUFBTUMscUNBQTZDLElBQUksQ0FBQyxvQkFBb0I7QUFDNUUsTUFBTUMsZ0NBQXdDLElBQUksQ0FBQyxxQkFBcUI7QUFDeEUsTUFBTUMsbUNBQTJDLElBQUksQ0FBQyxvQ0FBb0M7QUFDMUYsTUFBTUMsbUNBQTJDLEtBQUssQ0FBQyxtQkFBbUI7QUFDMUUsTUFBTUMsa0NBQTBDLEtBQUssQ0FBQyw0QkFBNEI7QUFDbEYsTUFBTUMsZ0NBQXdDLEdBQUcsQ0FBQyw2QkFBNkI7QUFDL0UsTUFBTUMsaUNBQXlDLElBQUksQ0FBQyxnQ0FBZ0M7QUFFcEYsTUFBTUMsU0FBUztJQUFDL0IsOERBQU1BO0lBQUVDLDhEQUFNQTtDQUFDLENBQUM7QUFFaEMsTUFBTStCLHVCQUEyQztJQUNwREMsTUFBTTtRQUNGQyxPQUFPO1FBQ1BDLFVBQVU7UUFDVkMsU0FBUztRQUNUQyxPQUFPO1FBQ1BDLE1BQU07WUFBRUMsT0FBTztZQUFJQyxRQUFRO1FBQUc7UUFDOUJDLFFBQVE7SUFDWjtJQUNBQyxhQUFhO1FBQ1QsR0FBRztZQUNDQyxhQUFhO1lBQ2JDLFFBQVE7WUFDUkMsVUFBVTtZQUNWQyxTQUFTLENBQUM7UUFDZDtRQUNBLEdBQUc7WUFDQ0gsYUFBYTtZQUNiQyxRQUFRO1lBQ1JDLFVBQVU7WUFDVkMsU0FBUyxDQUFDO1FBQ2Q7UUFDQSxHQUFHO1lBQ0NILGFBQWE7WUFDYkMsUUFBUTtZQUNSQyxVQUFVO1lBQ1ZDLFNBQVMsQ0FBQztRQUNkO1FBQ0EsR0FBRztZQUNDSCxhQUFhO1lBQ2JDLFFBQVE7WUFDUkMsVUFBVTtZQUNWQyxTQUFTLENBQUM7UUFDZDtJQUNKO0lBQ0FDLE9BQU87UUFDSEMsY0FBYztZQUFDO1lBQUc7WUFBRztZQUFHO1NBQUU7UUFDMUJDLGFBQWE7WUFBQztZQUFJO1lBQUk7WUFBSTtTQUFHO1FBQzdCSixVQUFVO1FBQ1ZLLFFBQVE7WUFDSkMsT0FBTztZQUNQQyxPQUFPO1lBQ1BDLE1BQU07UUFDVjtRQUNBQyxPQUFPO0lBQ1g7SUFDQUMsUUFBUTtRQUNKQyxTQUFTO1lBQ0xiLGFBQWE7Z0JBQUM7Z0JBQUc7Z0JBQUc7Z0JBQUc7YUFBRTtZQUN6QkMsUUFBUTtnQkFBQztnQkFBRztnQkFBRztnQkFBSTthQUFHO1lBQ3RCQyxVQUFVO1lBQ1ZDLFNBQVMsQ0FBQztZQUNWTCxRQUFRO1FBQ1o7UUFDQWMsUUFBUTtZQUNKWixhQUFhO2dCQUFDO2dCQUFHO2dCQUFHO2dCQUFHO2FBQUU7WUFDekJQLFNBQVM7WUFDVEYsT0FBTztZQUNQdUIsVUFBVTtZQUNWQyxtQkFBbUI7WUFDbkJ2QixVQUFVO1lBQ1ZNLFFBQVE7UUFDWjtJQUNKO0FBQ0osRUFBRTtBQUVLLE1BQU1rQixxQkFBcUI7SUFDOUJDLE9BQU87SUFDUEMsVUFBVTtJQUNWQyxnQkFBZ0I7SUFDaEJyQixRQUFRO0lBQ1JzQixVQUFVLEtBQUssK0JBQStCO0FBQ2xELEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvY29uZmlncy9nYW1lLWNvbmZpZy50cz9mZjk3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBsYXllcldlYXBvbkNvbmZpZyB9IGZyb20gXCIuLi90eXBlcy9pbnRlcmZhY2VzXCI7XG5pbXBvcnQgbGV2ZWwxIGZyb20gXCIuL2xldmVscy9sZXZlbC0xLmNvbmZpZ1wiO1xuaW1wb3J0IGxldmVsMiBmcm9tIFwiLi9sZXZlbHMvbGV2ZWwtMi5jb25maWdcIjtcblxuLy8g0J3QsNGB0YLRgNC+0LnQutC4INC40LPRgNC+0LrQsFxuZXhwb3J0IGNvbnN0IFBMQVlFUl9MSVZFUzogbnVtYmVyID0gMTtcbmV4cG9ydCBjb25zdCBQTEFZRVJfSEVBTFRIOiBudW1iZXIgPSAxO1xuZXhwb3J0IGNvbnN0IFBMQVlFUl9NT1ZFTUVOVF9WRUxPQ0lUWTogbnVtYmVyID0gMjUwO1xuZXhwb3J0IGNvbnN0IExJRkVfQk9OVVNfVkFMVUUgPSAxMDAwOyAvLyDQkdC+0L3Rg9GBINC30LAg0LrQsNC20LTRg9GOINC+0YHRgtCw0LLRiNGD0Y7RgdGPINC20LjQt9C90YxcblxuLy8g0J3QsNGB0YLRgNC+0LnQutC4INCy0YDQsNCz0LAt0LjRgdGC0YDQtdCx0LjRgtC10LvRj1xuZXhwb3J0IGNvbnN0IEVORU1ZX0ZJR0hURVJfU0NPUkU6IG51bWJlciA9IDIwMDtcbmV4cG9ydCBjb25zdCBFTkVNWV9GSUdIVEVSX0hFQUxUSDogbnVtYmVyID0gMjUwO1xuZXhwb3J0IGNvbnN0IEVORU1ZX0ZJR0hURVJfTU9WRU1FTlRfVkVSVElDQUxfVkVMT0NJVFk6IG51bWJlciA9IDIwMDtcbmV4cG9ydCBjb25zdCBFTkVNWV9GSUdIVEVSX0JVTExFVF9TUEVFRDogbnVtYmVyID0gLTI4MDtcbmV4cG9ydCBjb25zdCBFTkVNWV9GSUdIVEVSX0JVTExFVF9JTlRFUlZBTDogbnVtYmVyID0gMjAwMDtcbmV4cG9ydCBjb25zdCBFTkVNWV9GSUdIVEVSX0JVTExFVF9MSUZFU1BBTjogbnVtYmVyID0gMzAwMDA7XG5leHBvcnQgY29uc3QgRU5FTVlfRklHSFRFUl9CVUxMRVRfTUFYX0NPVU5UOiBudW1iZXIgPSAxMDtcbmV4cG9ydCBjb25zdCBFTkVNWV9GSUdIVEVSX0dST1VQX1NQQVdOX0lOVEVSVkFMOiBudW1iZXIgPSA2MDAwO1xuZXhwb3J0IGNvbnN0IEVORU1ZX0ZJR0hURVJfR1JPVVBfU1BBV05fU1RBUlQ6IG51bWJlciA9IDMwMDA7XG5cbi8vINCd0LDRgdGC0YDQvtC50LrQuCDQstGA0LDQs9CwLdGA0LDQt9Cy0LXQtNGH0LjQutCwXG5leHBvcnQgY29uc3QgRU5FTVlfU0NPVVRfU0NPUkU6IG51bWJlciA9IDEwMDtcbmV4cG9ydCBjb25zdCBFTkVNWV9TQ09VVF9IRUFMVEg6IG51bWJlciA9IDIwO1xuZXhwb3J0IGNvbnN0IEVORU1ZX1NDT1VUX01PVkVNRU5UX01BWF9YOiBudW1iZXIgPSA0MDtcbmV4cG9ydCBjb25zdCBFTkVNWV9TQ09VVF9NT1ZFTUVOVF9WRVJUSUNBTF9WRUxPQ0lUWTogbnVtYmVyID0gMTgwO1xuZXhwb3J0IGNvbnN0IEVORU1ZX1NDT1VUX01PVkVNRU5UX0hPUklaT05UQUxfVkVMT0NJVFk6IG51bWJlciA9IDExMDtcbmV4cG9ydCBjb25zdCBFTkVNWV9TQ09VVF9HUk9VUF9TUEFXTl9JTlRFUlZBTDogbnVtYmVyID0gNTAwMDtcbmV4cG9ydCBjb25zdCBFTkVNWV9TQ09VVF9HUk9VUF9TUEFXTl9TVEFSVDogbnVtYmVyID0gMTAwMDtcblxuLy8gY2lyY3VsYXItZmlnaHRlci1jb25maWcudHNcbmV4cG9ydCBjb25zdCBDSVJDVUxBUl9GSUdIVEVSX1NDT1JFOiBudW1iZXIgPSAzMDA7IC8vINCR0L7Qu9GM0YjQtSDQvtGH0LrQvtCyINC30LAg0YHQu9C+0LbQvdC+0YHRgtGMXG5leHBvcnQgY29uc3QgQ0lSQ1VMQVJfRklHSFRFUl9IRUFMVEg6IG51bWJlciA9IDMwMDsgXG5leHBvcnQgY29uc3QgQ0lSQ1VMQVJfRklHSFRFUl9NT1ZFTUVOVF9WRUxPQ0lUWTogbnVtYmVyID0gMTgwOyAvLyDQodC60L7RgNC+0YHRgtGMINC00LLQuNC20LXQvdC40Y9cbmV4cG9ydCBjb25zdCBDSVJDVUxBUl9GSUdIVEVSX0JVTExFVF9TUEVFRDogbnVtYmVyID0gMzUwOyAvLyDQn9GD0LvQuCDQu9C10YLRj9GCINCx0YvRgdGC0YDQtdC1XG5leHBvcnQgY29uc3QgQ0lSQ1VMQVJfRklHSFRFUl9CVUxMRVRfSU5URVJWQUw6IG51bWJlciA9IDI1MDsgLy8g0JjQvdGC0LXRgNCy0LDQuyDQvNC10LbQtNGDINCy0YvRgdGC0YDQtdC70LDQvNC4INCyINGB0LXRgNC40LhcbmV4cG9ydCBjb25zdCBDSVJDVUxBUl9GSUdIVEVSX0JVTExFVF9MSUZFU1BBTjogbnVtYmVyID0gNDAwMDsgLy8g0JLRgNC10LzRjyDQttC40LfQvdC4INC/0YPQu9C4XG5leHBvcnQgY29uc3QgQ0lSQ1VMQVJfRklHSFRFUl9TSE9PVF9JTlRFUlZBTDogbnVtYmVyID0gMjAwMDsgLy8gMTAg0YHQtdC6INC80LXQttC00YMg0YHQvNC10L3QsNC80Lgg0YbQtdC70LhcbmV4cG9ydCBjb25zdCBDSVJDVUxBUl9GSUdIVEVSX1NIT09UX0NZQ0xFUzogbnVtYmVyID0gMjU7IC8vINCa0L7Qu9C40YfQtdGB0YLQstC+INGG0LjQutC70L7QsiDRgdGC0YDQtdC70YzQsdGLXG5leHBvcnQgY29uc3QgQ0lSQ1VMQVJfRklHSFRFUl9TVE9QX0RJU1RBTkNFOiBudW1iZXIgPSAxNTA7IC8vINCU0LjRgdGC0LDQvdGG0LjRjyDQvtGB0YLQsNC90L7QstC60Lgg0L7RgiDRhtC10L3RgtGA0LBcblxuZXhwb3J0IGNvbnN0IGxldmVscyA9IFtsZXZlbDEsIGxldmVsMl07XG5cbmV4cG9ydCBjb25zdCBQTEFZRVJfV0VBUE9OX0NPTkZJRzogUGxheWVyV2VhcG9uQ29uZmlnID0ge1xuICAgIGJhc2U6IHtcbiAgICAgICAgc3BlZWQ6IDYwMCxcbiAgICAgICAgbGlmZXNwYW46IDEwMDAsXG4gICAgICAgIHRleHR1cmU6ICdidWxsZXQnLFxuICAgICAgICBzY2FsZTogMC44LFxuICAgICAgICBzaXplOiB7IHdpZHRoOiAxNCwgaGVpZ2h0OiAxOCB9LFxuICAgICAgICBkYW1hZ2U6IDIwXG4gICAgfSxcbiAgICBwb3dlckxldmVsczoge1xuICAgICAgICAwOiB7XG4gICAgICAgICAgICBidWxsZXRDb3VudDogMyxcbiAgICAgICAgICAgIHNwcmVhZDogMTUsXG4gICAgICAgICAgICBmaXJlUmF0ZTogMzAwLFxuICAgICAgICAgICAgeU9mZnNldDogLTIwXG4gICAgICAgIH0sXG4gICAgICAgIDE6IHtcbiAgICAgICAgICAgIGJ1bGxldENvdW50OiA1LFxuICAgICAgICAgICAgc3ByZWFkOiAyNSxcbiAgICAgICAgICAgIGZpcmVSYXRlOiAyNTAsXG4gICAgICAgICAgICB5T2Zmc2V0OiAtMjBcbiAgICAgICAgfSxcbiAgICAgICAgMjoge1xuICAgICAgICAgICAgYnVsbGV0Q291bnQ6IDcsXG4gICAgICAgICAgICBzcHJlYWQ6IDM1LFxuICAgICAgICAgICAgZmlyZVJhdGU6IDIwMCxcbiAgICAgICAgICAgIHlPZmZzZXQ6IC0yMFxuICAgICAgICB9LFxuICAgICAgICAzOiB7XG4gICAgICAgICAgICBidWxsZXRDb3VudDogOSxcbiAgICAgICAgICAgIHNwcmVhZDogNDUsXG4gICAgICAgICAgICBmaXJlUmF0ZTogMTUwLFxuICAgICAgICAgICAgeU9mZnNldDogLTIwXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGxhc2VyOiB7XG4gICAgICAgIGRhbWFnZUxldmVsczogWzEsIDIsIDMsIDRdLFxuICAgICAgICB3aWR0aExldmVsczogWzE2LCAyMiwgMjYsIDMwXSxcbiAgICAgICAgZmlyZVJhdGU6IDUwLFxuICAgICAgICBjb2xvcnM6IHtcbiAgICAgICAgICAgIGlubmVyOiAweDAwZmZmZixcbiAgICAgICAgICAgIG91dGVyOiAweDAwNjZmZixcbiAgICAgICAgICAgIGdsb3c6IDB4MDBhYWZmXG4gICAgICAgIH0sXG4gICAgICAgIGFscGhhOiAwLjhcbiAgICB9LFxuICAgIGhvbWluZzoge1xuICAgICAgICBwcmltYXJ5OiB7XG4gICAgICAgICAgICBidWxsZXRDb3VudDogWzIsIDIsIDMsIDNdLFxuICAgICAgICAgICAgc3ByZWFkOiBbMiwgMiwgMTUsIDE1XSxcbiAgICAgICAgICAgIGZpcmVSYXRlOiAzMDAsXG4gICAgICAgICAgICB5T2Zmc2V0OiAtMjAsXG4gICAgICAgICAgICBkYW1hZ2U6IDVcbiAgICAgICAgfSxcbiAgICAgICAgaG9taW5nOiB7XG4gICAgICAgICAgICBidWxsZXRDb3VudDogWzIsIDQsIDYsIDhdLCAvLyDQmtC+0LvQuNGH0LXRgdGC0LLQviDQvdCw0LLQvtC00Y/RidC40YXRgdGPINC/0YPQu9GMINC/0L4g0YPRgNC+0LLQvdGP0LxcbiAgICAgICAgICAgIHRleHR1cmU6ICdyb2NrZXQnLFxuICAgICAgICAgICAgc3BlZWQ6IDMwMCxcbiAgICAgICAgICAgIHR1cm5SYXRlOiAwLjA4LCAvLyDQodC60L7RgNC+0YHRgtGMINC/0L7QstC+0YDQvtGC0LAgKNGA0LDQtNC40LDQvdGLINC30LAg0LrQsNC00YApXG4gICAgICAgICAgICBkZWxheUJlZm9yZUhvbWluZzogMTAwLCAvLyDQndCw0YfQuNC90LDQtdGCINC90LDQstC+0LTQuNGC0YzRgdGPXG4gICAgICAgICAgICBsaWZlc3BhbjogNTAwMCxcbiAgICAgICAgICAgIGRhbWFnZTogN1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IFBMQVlFUl9CT01CX0NPTkZJRyA9IHtcbiAgICBjb3VudDogMywgLy8g0JHQvtC80LEg0L3QsCDQttC40LfQvdGMXG4gICAgZHVyYXRpb246IDUwMDAsIC8vINCU0LvQuNGC0LXQu9GM0L3QvtGB0YLRjCDRjdGE0YTQtdC60YLQsCAoNSDRgdC10LopXG4gICAgZGFtYWdlSW50ZXJ2YWw6IDUwLCAvLyDQmNC90YLQtdGA0LLQsNC7INC90LDQvdC10YHQtdC90LjRjyDRg9GA0L7QvdCwICjQvNGBKVxuICAgIGRhbWFnZTogNSwgLy8g0KPRgNC+0L0g0LfQsCDRgtC40LpcbiAgICBjb29sZG93bjogMTAwMCAvLyDQl9Cw0LTQtdGA0LbQutCwINC/0L7RgdC70LUg0LjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC40Y9cbn07Il0sIm5hbWVzIjpbImxldmVsMSIsImxldmVsMiIsIlBMQVlFUl9MSVZFUyIsIlBMQVlFUl9IRUFMVEgiLCJQTEFZRVJfTU9WRU1FTlRfVkVMT0NJVFkiLCJMSUZFX0JPTlVTX1ZBTFVFIiwiRU5FTVlfRklHSFRFUl9TQ09SRSIsIkVORU1ZX0ZJR0hURVJfSEVBTFRIIiwiRU5FTVlfRklHSFRFUl9NT1ZFTUVOVF9WRVJUSUNBTF9WRUxPQ0lUWSIsIkVORU1ZX0ZJR0hURVJfQlVMTEVUX1NQRUVEIiwiRU5FTVlfRklHSFRFUl9CVUxMRVRfSU5URVJWQUwiLCJFTkVNWV9GSUdIVEVSX0JVTExFVF9MSUZFU1BBTiIsIkVORU1ZX0ZJR0hURVJfQlVMTEVUX01BWF9DT1VOVCIsIkVORU1ZX0ZJR0hURVJfR1JPVVBfU1BBV05fSU5URVJWQUwiLCJFTkVNWV9GSUdIVEVSX0dST1VQX1NQQVdOX1NUQVJUIiwiRU5FTVlfU0NPVVRfU0NPUkUiLCJFTkVNWV9TQ09VVF9IRUFMVEgiLCJFTkVNWV9TQ09VVF9NT1ZFTUVOVF9NQVhfWCIsIkVORU1ZX1NDT1VUX01PVkVNRU5UX1ZFUlRJQ0FMX1ZFTE9DSVRZIiwiRU5FTVlfU0NPVVRfTU9WRU1FTlRfSE9SSVpPTlRBTF9WRUxPQ0lUWSIsIkVORU1ZX1NDT1VUX0dST1VQX1NQQVdOX0lOVEVSVkFMIiwiRU5FTVlfU0NPVVRfR1JPVVBfU1BBV05fU1RBUlQiLCJDSVJDVUxBUl9GSUdIVEVSX1NDT1JFIiwiQ0lSQ1VMQVJfRklHSFRFUl9IRUFMVEgiLCJDSVJDVUxBUl9GSUdIVEVSX01PVkVNRU5UX1ZFTE9DSVRZIiwiQ0lSQ1VMQVJfRklHSFRFUl9CVUxMRVRfU1BFRUQiLCJDSVJDVUxBUl9GSUdIVEVSX0JVTExFVF9JTlRFUlZBTCIsIkNJUkNVTEFSX0ZJR0hURVJfQlVMTEVUX0xJRkVTUEFOIiwiQ0lSQ1VMQVJfRklHSFRFUl9TSE9PVF9JTlRFUlZBTCIsIkNJUkNVTEFSX0ZJR0hURVJfU0hPT1RfQ1lDTEVTIiwiQ0lSQ1VMQVJfRklHSFRFUl9TVE9QX0RJU1RBTkNFIiwibGV2ZWxzIiwiUExBWUVSX1dFQVBPTl9DT05GSUciLCJiYXNlIiwic3BlZWQiLCJsaWZlc3BhbiIsInRleHR1cmUiLCJzY2FsZSIsInNpemUiLCJ3aWR0aCIsImhlaWdodCIsImRhbWFnZSIsInBvd2VyTGV2ZWxzIiwiYnVsbGV0Q291bnQiLCJzcHJlYWQiLCJmaXJlUmF0ZSIsInlPZmZzZXQiLCJsYXNlciIsImRhbWFnZUxldmVscyIsIndpZHRoTGV2ZWxzIiwiY29sb3JzIiwiaW5uZXIiLCJvdXRlciIsImdsb3ciLCJhbHBoYSIsImhvbWluZyIsInByaW1hcnkiLCJ0dXJuUmF0ZSIsImRlbGF5QmVmb3JlSG9taW5nIiwiUExBWUVSX0JPTUJfQ09ORklHIiwiY291bnQiLCJkdXJhdGlvbiIsImRhbWFnZUludGVydmFsIiwiY29vbGRvd24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/configs/game-config.ts\n");

/***/ }),

/***/ "./src/game/configs/items-config.ts":
/*!******************************************!*\
  !*** ./src/game/configs/items-config.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ITEMS_CONFIG: () => (/* binding */ ITEMS_CONFIG)\n/* harmony export */ });\nconst ITEMS_CONFIG = {\n    SCORE: {\n        texture: \"score_item\",\n        dropChance: 0.3,\n        minDropInterval: 3,\n        guaranteedDropEvery: 15\n    },\n    POWER: {\n        texture: \"power_item\",\n        dropChance: 0.15,\n        minDropInterval: 5,\n        guaranteedDropEvery: 20\n    },\n    HEALTH: {\n        texture: \"health_item\",\n        dropChance: 0.1,\n        minDropInterval: 8,\n        guaranteedDropEvery: 30\n    },\n    BOMB: {\n        texture: \"bomb_item\",\n        dropChance: 0.05,\n        minDropInterval: 10,\n        guaranteedDropEvery: 40\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb25maWdzL2l0ZW1zLWNvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBU08sTUFBTUEsZUFBNkM7SUFDdERDLE9BQU87UUFDSEMsU0FBUztRQUNUQyxZQUFZO1FBQ1pDLGlCQUFpQjtRQUNqQkMscUJBQXFCO0lBQ3pCO0lBQ0FDLE9BQU87UUFDSEosU0FBUztRQUNUQyxZQUFZO1FBQ1pDLGlCQUFpQjtRQUNqQkMscUJBQXFCO0lBQ3pCO0lBQ0FFLFFBQVE7UUFDSkwsU0FBUztRQUNUQyxZQUFZO1FBQ1pDLGlCQUFpQjtRQUNqQkMscUJBQXFCO0lBQ3pCO0lBQ0FHLE1BQU07UUFDRk4sU0FBUztRQUNUQyxZQUFZO1FBQ1pDLGlCQUFpQjtRQUNqQkMscUJBQXFCO0lBQ3pCO0FBQ0osRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9jb25maWdzL2l0ZW1zLWNvbmZpZy50cz8yMGUyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEl0ZW1UeXBlIH0gZnJvbSBcIi4uL3R5cGVzL2ludGVyZmFjZXNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSXRlbUNvbmZpZyB7XHJcbiAgICB0ZXh0dXJlOiBzdHJpbmc7XHJcbiAgICBkcm9wQ2hhbmNlOiBudW1iZXI7XHJcbiAgICBtaW5Ecm9wSW50ZXJ2YWw6IG51bWJlcjsgLy8g0JzQuNC90LjQvNCw0LvRjNC90L7QtSDQutC+0LvQuNGH0LXRgdGC0LLQviDQstGA0LDQs9C+0LIg0LzQtdC20LTRgyDQtNGA0L7Qv9C+0LxcclxuICAgIGd1YXJhbnRlZWREcm9wRXZlcnk6IG51bWJlcjsgLy8g0JPQsNGA0LDQvdGC0LjRgNC+0LLQsNC90L3Ri9C5INC00YDQvtC/INC60LDQttC00YvQtSBOINCy0YDQsNCz0L7QslxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgSVRFTVNfQ09ORklHOiBSZWNvcmQ8SXRlbVR5cGUsIEl0ZW1Db25maWc+ID0ge1xyXG4gICAgU0NPUkU6IHtcclxuICAgICAgICB0ZXh0dXJlOiAnc2NvcmVfaXRlbScsXHJcbiAgICAgICAgZHJvcENoYW5jZTogMC4zLFxyXG4gICAgICAgIG1pbkRyb3BJbnRlcnZhbDogMyxcclxuICAgICAgICBndWFyYW50ZWVkRHJvcEV2ZXJ5OiAxNVxyXG4gICAgfSxcclxuICAgIFBPV0VSOiB7XHJcbiAgICAgICAgdGV4dHVyZTogJ3Bvd2VyX2l0ZW0nLFxyXG4gICAgICAgIGRyb3BDaGFuY2U6IDAuMTUsXHJcbiAgICAgICAgbWluRHJvcEludGVydmFsOiA1LFxyXG4gICAgICAgIGd1YXJhbnRlZWREcm9wRXZlcnk6IDIwXHJcbiAgICB9LFxyXG4gICAgSEVBTFRIOiB7XHJcbiAgICAgICAgdGV4dHVyZTogJ2hlYWx0aF9pdGVtJyxcclxuICAgICAgICBkcm9wQ2hhbmNlOiAwLjEsXHJcbiAgICAgICAgbWluRHJvcEludGVydmFsOiA4LFxyXG4gICAgICAgIGd1YXJhbnRlZWREcm9wRXZlcnk6IDMwXHJcbiAgICB9LFxyXG4gICAgQk9NQjoge1xyXG4gICAgICAgIHRleHR1cmU6ICdib21iX2l0ZW0nLFxyXG4gICAgICAgIGRyb3BDaGFuY2U6IDAuMDUsXHJcbiAgICAgICAgbWluRHJvcEludGVydmFsOiAxMCxcclxuICAgICAgICBndWFyYW50ZWVkRHJvcEV2ZXJ5OiA0MFxyXG4gICAgfVxyXG59OyJdLCJuYW1lcyI6WyJJVEVNU19DT05GSUciLCJTQ09SRSIsInRleHR1cmUiLCJkcm9wQ2hhbmNlIiwibWluRHJvcEludGVydmFsIiwiZ3VhcmFudGVlZERyb3BFdmVyeSIsIlBPV0VSIiwiSEVBTFRIIiwiQk9NQiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/configs/items-config.ts\n");

/***/ }),

/***/ "./src/game/configs/levels/level-1.config.ts":
/*!***************************************************!*\
  !*** ./src/game/configs/levels/level-1.config.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst level1 = {\n    waves: [\n        {\n            duration: 20000,\n            delayAfter: 4000,\n            spawners: [\n                {\n                    enemyType: \"scout\",\n                    interval: 200,\n                    groupSize: 1,\n                    patternType: \"random\",\n                    patternParams: {\n                        type: \"random\",\n                        params: {\n                            minX: 30,\n                            maxX: 450,\n                            minY: -50,\n                            maxY: -20\n                        }\n                    }\n                }\n            ]\n        },\n        {\n            duration: 18000,\n            delayAfter: 1000,\n            spawners: [\n                {\n                    enemyType: \"fighter\",\n                    interval: 6000,\n                    groupSize: 8,\n                    count: 16,\n                    patternType: \"line\",\n                    patternParams: {\n                        type: \"line\",\n                        params: {\n                            startX: 30,\n                            startY: -20,\n                            stepX: 60,\n                            stepY: 0\n                        }\n                    }\n                }\n            ]\n        },\n        {\n            duration: 30000,\n            delayAfter: 5000,\n            spawners: [\n                {\n                    enemyType: \"circular_fighter\",\n                    interval: 100000,\n                    groupSize: 8,\n                    count: 8,\n                    patternType: \"circle\",\n                    patternParams: {\n                        type: \"circle\",\n                        params: {\n                            centerX: 240,\n                            centerY: 340,\n                            radius: 300,\n                            fullCircle: true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    boss: {\n        enemyType: \"firstBoss\"\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (level1);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb25maWdzL2xldmVscy9sZXZlbC0xLmNvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRUEsTUFBTUEsU0FBc0I7SUFDeEJDLE9BQU87UUFDSDtZQUNJQyxVQUFVO1lBQ1ZDLFlBQVk7WUFDWkMsVUFBVTtnQkFDTjtvQkFDSUMsV0FBVztvQkFDWEMsVUFBVTtvQkFDVkMsV0FBVztvQkFDWEMsYUFBYTtvQkFDYkMsZUFBZTt3QkFDWEMsTUFBTTt3QkFDTkMsUUFBUTs0QkFDSkMsTUFBTTs0QkFDTkMsTUFBTTs0QkFDTkMsTUFBTSxDQUFDOzRCQUNQQyxNQUFNLENBQUM7d0JBQ1g7b0JBQ0o7Z0JBQ0o7YUFDSDtRQUNMO1FBQ0E7WUFDSWIsVUFBVTtZQUNWQyxZQUFZO1lBQ1pDLFVBQVU7Z0JBQ047b0JBQ0lDLFdBQVc7b0JBQ1hDLFVBQVU7b0JBQ1ZDLFdBQVc7b0JBQ1hTLE9BQU87b0JBQ1BSLGFBQWE7b0JBQ2JDLGVBQWU7d0JBQ1hDLE1BQU07d0JBQ05DLFFBQVE7NEJBQ0pNLFFBQVE7NEJBQ1JDLFFBQVEsQ0FBQzs0QkFDVEMsT0FBTzs0QkFDUEMsT0FBTzt3QkFDWDtvQkFDSjtnQkFDSjthQUNIO1FBQ0w7UUFDQTtZQUNJbEIsVUFBVTtZQUNWQyxZQUFZO1lBQ1pDLFVBQVU7Z0JBQ047b0JBQ0lDLFdBQVc7b0JBQ1hDLFVBQVU7b0JBQ1ZDLFdBQVc7b0JBQ1hTLE9BQU87b0JBQ1BSLGFBQWE7b0JBQ2JDLGVBQWU7d0JBQ1hDLE1BQU07d0JBQ05DLFFBQVE7NEJBQ0pVLFNBQVM7NEJBQ1RDLFNBQVM7NEJBQ1RDLFFBQVE7NEJBQ1JDLFlBQVk7d0JBQ2hCO29CQUNKO2dCQUNKO2FBQ0g7UUFDTDtLQUNIO0lBQ0RDLE1BQU07UUFDRnBCLFdBQVc7SUFDZjtBQUNKO0FBRUEsaUVBQWVMLE1BQU1BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvY29uZmlncy9sZXZlbHMvbGV2ZWwtMS5jb25maWcudHM/M2ViOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMZXZlbENvbmZpZyB9IGZyb20gXCJAL2dhbWUvdHlwZXMvaW50ZXJmYWNlc1wiO1xyXG5cclxuY29uc3QgbGV2ZWwxOiBMZXZlbENvbmZpZyA9IHtcclxuICAgIHdhdmVzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkdXJhdGlvbjogMjAwMDAsXHJcbiAgICAgICAgICAgIGRlbGF5QWZ0ZXI6IDQwMDAsXHJcbiAgICAgICAgICAgIHNwYXduZXJzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5lbXlUeXBlOiAnc2NvdXQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOiAyMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBTaXplOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm5UeXBlOiAncmFuZG9tJyxcclxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuUGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyYW5kb20nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblg6IDMwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4WDogNDUwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWTogLTUwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4WTogLTIwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZHVyYXRpb246IDE4MDAwLFxyXG4gICAgICAgICAgICBkZWxheUFmdGVyOiAxMDAwLFxyXG4gICAgICAgICAgICBzcGF3bmVyczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZW15VHlwZTogXCJmaWdodGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWw6IDYwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBTaXplOiA4LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiAxNixcclxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuVHlwZTogXCJsaW5lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVyblBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImxpbmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFg6IDMwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRZOiAtMjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwWDogNjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwWTogMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAwMCxcclxuICAgICAgICAgICAgZGVsYXlBZnRlcjogNTAwMCxcclxuICAgICAgICAgICAgc3Bhd25lcnM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmVteVR5cGU6IFwiY2lyY3VsYXJfZmlnaHRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOiAxMDAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBTaXplOiA4LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiA4LFxyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm5UeXBlOiBcImNpcmNsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm5QYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjaXJjbGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJYOiAyNDAsIC8vINCm0LXQvdGC0YAg0LrRgNGD0LPQsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyWTogMzQwLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1czogMzAwLCAgLy8g0KDQsNC00LjRg9GBINC60YDRg9Cz0LBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxDaXJjbGU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH1cclxuICAgIF0sXHJcbiAgICBib3NzOiB7XHJcbiAgICAgICAgZW5lbXlUeXBlOiAnZmlyc3RCb3NzJ1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbGV2ZWwxO1xyXG4iXSwibmFtZXMiOlsibGV2ZWwxIiwid2F2ZXMiLCJkdXJhdGlvbiIsImRlbGF5QWZ0ZXIiLCJzcGF3bmVycyIsImVuZW15VHlwZSIsImludGVydmFsIiwiZ3JvdXBTaXplIiwicGF0dGVyblR5cGUiLCJwYXR0ZXJuUGFyYW1zIiwidHlwZSIsInBhcmFtcyIsIm1pblgiLCJtYXhYIiwibWluWSIsIm1heFkiLCJjb3VudCIsInN0YXJ0WCIsInN0YXJ0WSIsInN0ZXBYIiwic3RlcFkiLCJjZW50ZXJYIiwiY2VudGVyWSIsInJhZGl1cyIsImZ1bGxDaXJjbGUiLCJib3NzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/configs/levels/level-1.config.ts\n");

/***/ }),

/***/ "./src/game/configs/levels/level-2.config.ts":
/*!***************************************************!*\
  !*** ./src/game/configs/levels/level-2.config.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst level2 = {\n    waves: [\n        {\n            duration: 40000,\n            delayAfter: 4000,\n            initialDelay: 8000,\n            spawners: [\n                {\n                    enemyType: \"scout\",\n                    interval: 10000,\n                    groupSize: 20,\n                    patternType: \"spiral\",\n                    patternParams: {\n                        type: \"spiral\",\n                        params: {\n                            centerX: 250,\n                            centerY: -100,\n                            radiusStep: 15,\n                            angleStep: 0.3\n                        }\n                    }\n                }\n            ]\n        },\n        {\n            duration: 20000,\n            delayAfter: 4000,\n            spawners: [\n                {\n                    enemyType: \"scout\",\n                    interval: 3000,\n                    groupSize: 20,\n                    patternType: \"wave\",\n                    patternParams: {\n                        type: \"wave\",\n                        params: {\n                            startX: 50,\n                            startY: -50,\n                            amplitude: 100,\n                            wavelength: 60,\n                            direction: \"horizontal\"\n                        }\n                    }\n                }\n            ]\n        },\n        {\n            duration: 5000,\n            delayAfter: 4000,\n            spawners: [\n                {\n                    enemyType: \"fighter\",\n                    interval: 2000,\n                    groupSize: 3,\n                    count: 3,\n                    patternType: \"direct\",\n                    patternParams: {\n                        type: \"direct\",\n                        params: {\n                            positions: [\n                                {\n                                    x: 100,\n                                    y: -50\n                                },\n                                {\n                                    x: 200,\n                                    y: -50\n                                },\n                                {\n                                    x: 300,\n                                    y: -50\n                                }\n                            ]\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    boss: {\n        enemyType: \"firstBoss\"\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (level2);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9jb25maWdzL2xldmVscy9sZXZlbC0yLmNvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRUEsTUFBTUEsU0FBc0I7SUFDeEJDLE9BQU87UUFDSDtZQUNJQyxVQUFVO1lBQ1ZDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO2dCQUNOO29CQUNJQyxXQUFXO29CQUNYQyxVQUFVO29CQUNWQyxXQUFXO29CQUNYQyxhQUFhO29CQUNiQyxlQUFlO3dCQUNYQyxNQUFNO3dCQUNOQyxRQUFROzRCQUNKQyxTQUFTOzRCQUNUQyxTQUFTLENBQUM7NEJBQ1ZDLFlBQVk7NEJBQ1pDLFdBQVc7d0JBQ2Y7b0JBQ0o7Z0JBQ0o7YUFDSDtRQUNMO1FBQ0E7WUFDSWQsVUFBVTtZQUNWQyxZQUFZO1lBQ1pFLFVBQVU7Z0JBQ047b0JBQ0lDLFdBQVc7b0JBQ1hDLFVBQVU7b0JBQ1ZDLFdBQVc7b0JBQ1hDLGFBQWE7b0JBQ2JDLGVBQWU7d0JBQ1hDLE1BQU07d0JBQ05DLFFBQVE7NEJBQ0pLLFFBQVE7NEJBQ1JDLFFBQVEsQ0FBQzs0QkFDVEMsV0FBVzs0QkFDWEMsWUFBWTs0QkFDWkMsV0FBVzt3QkFDZjtvQkFDSjtnQkFDSjthQUNIO1FBQ0w7UUFDQTtZQUNJbkIsVUFBVTtZQUNWQyxZQUFZO1lBQ1pFLFVBQVU7Z0JBQ047b0JBQ0lDLFdBQVc7b0JBQ1hDLFVBQVU7b0JBQ1ZDLFdBQVc7b0JBQ1hjLE9BQU87b0JBQ1BiLGFBQWE7b0JBQ2JDLGVBQWU7d0JBQ1hDLE1BQU07d0JBQ05DLFFBQVE7NEJBQ0pXLFdBQVc7Z0NBQ1A7b0NBQUVDLEdBQUc7b0NBQUtDLEdBQUcsQ0FBQztnQ0FBRztnQ0FDakI7b0NBQUVELEdBQUc7b0NBQUtDLEdBQUcsQ0FBQztnQ0FBRztnQ0FDakI7b0NBQUVELEdBQUc7b0NBQUtDLEdBQUcsQ0FBQztnQ0FBRzs2QkFDcEI7d0JBQ0w7b0JBQ0o7Z0JBQ0o7YUFDSDtRQUNMO0tBQ0g7SUFDREMsTUFBTTtRQUNGcEIsV0FBVztJQUNmO0FBQ0o7QUFFQSxpRUFBZU4sTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9jb25maWdzL2xldmVscy9sZXZlbC0yLmNvbmZpZy50cz9jZmU3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExldmVsQ29uZmlnIH0gZnJvbSBcIkAvZ2FtZS90eXBlcy9pbnRlcmZhY2VzXCI7XHJcblxyXG5jb25zdCBsZXZlbDI6IExldmVsQ29uZmlnID0ge1xyXG4gICAgd2F2ZXM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiA0MDAwMCxcclxuICAgICAgICAgICAgZGVsYXlBZnRlcjogNDAwMCxcclxuICAgICAgICAgICAgaW5pdGlhbERlbGF5OiA4MDAwLFxyXG4gICAgICAgICAgICBzcGF3bmVyczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZW15VHlwZTogXCJzY291dFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOiAxMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICBncm91cFNpemU6IDIwLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm5UeXBlOiBcInNwaXJhbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm5QYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzcGlyYWxcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJYOiAyNTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJZOiAtMTAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFkaXVzU3RlcDogMTUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZVN0ZXA6IDAuM1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwMCxcclxuICAgICAgICAgICAgZGVsYXlBZnRlcjogNDAwMCxcclxuICAgICAgICAgICAgc3Bhd25lcnM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmVteVR5cGU6IFwic2NvdXRcIixcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbDogMzAwMCxcclxuICAgICAgICAgICAgICAgICAgICBncm91cFNpemU6IDIwLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm5UeXBlOiBcIndhdmVcIixcclxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuUGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwid2F2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0WDogNTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFk6IC01MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtcGxpdHVkZTogMTAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F2ZWxlbmd0aDogNjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246IFwiaG9yaXpvbnRhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZHVyYXRpb246IDUwMDAsXHJcbiAgICAgICAgICAgIGRlbGF5QWZ0ZXI6IDQwMDAsXHJcbiAgICAgICAgICAgIHNwYXduZXJzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5lbXlUeXBlOiAnZmlnaHRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWw6IDIwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBTaXplOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm5UeXBlOiAnZGlyZWN0JyxcclxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuUGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkaXJlY3QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgeDogMTAwLCB5OiAtNTAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHg6IDIwMCwgeTogLTUwIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB4OiAzMDAsIHk6IC01MCB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICBdLFxyXG4gICAgYm9zczoge1xyXG4gICAgICAgIGVuZW15VHlwZTogJ2ZpcnN0Qm9zcydcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGxldmVsMjsiXSwibmFtZXMiOlsibGV2ZWwyIiwid2F2ZXMiLCJkdXJhdGlvbiIsImRlbGF5QWZ0ZXIiLCJpbml0aWFsRGVsYXkiLCJzcGF3bmVycyIsImVuZW15VHlwZSIsImludGVydmFsIiwiZ3JvdXBTaXplIiwicGF0dGVyblR5cGUiLCJwYXR0ZXJuUGFyYW1zIiwidHlwZSIsInBhcmFtcyIsImNlbnRlclgiLCJjZW50ZXJZIiwicmFkaXVzU3RlcCIsImFuZ2xlU3RlcCIsInN0YXJ0WCIsInN0YXJ0WSIsImFtcGxpdHVkZSIsIndhdmVsZW5ndGgiLCJkaXJlY3Rpb24iLCJjb3VudCIsInBvc2l0aW9ucyIsIngiLCJ5IiwiYm9zcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/configs/levels/level-2.config.ts\n");

/***/ }),

/***/ "./src/game/entities/enemies/base-enemy.ts":
/*!*************************************************!*\
  !*** ./src/game/entities/enemies/base-enemy.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseEnemy: () => (/* binding */ BaseEnemy)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _game_components_collider_collider_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/game/components/collider/collider-component */ \"./src/game/components/collider/collider-component.ts\");\n/* harmony import */ var _game_components_health_health_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/game/components/health/health-component */ \"./src/game/components/health/health-component.ts\");\n\n\n\n\nclass BaseEnemy extends (phaser__WEBPACK_IMPORTED_MODULE_0___default().GameObjects).Container {\n    constructor(scene, x, y){\n        super(scene, x, y, []);\n        this._isInitialized = false;\n        this._bulletSpawner = null;\n        this._dropConfig = null;\n        this.initPhysics();\n        this.initSprites();\n        scene.events.on((phaser__WEBPACK_IMPORTED_MODULE_0___default().Scenes).Events.UPDATE, this.update, this);\n        this.setDepth(5);\n    }\n    initPhysics() {\n        this.scene.add.existing(this);\n        this.scene.physics.add.existing(this);\n        if (this.body instanceof (phaser__WEBPACK_IMPORTED_MODULE_0___default().Physics).Arcade.Body) {\n            this.body.setSize(24, 24).setOffset(-12, -12);\n        }\n    }\n    init(eventBus, ...args) {\n        if (!this.body) throw new Error(\"Physics body missing\");\n        this._eventBusComponent = eventBus;\n        this._healthComponent = new _game_components_health_health_component__WEBPACK_IMPORTED_MODULE_3__.HealthComponent(this.getInitialHealth());\n        this._colliderComponent = new _game_components_collider_collider_component__WEBPACK_IMPORTED_MODULE_2__.ColliderComponent(this._healthComponent, eventBus);\n        this._isInitialized = true;\n    }\n    reset() {\n        if (!this.body) return;\n        if (this.body && this.body instanceof (phaser__WEBPACK_IMPORTED_MODULE_0___default().Physics).Arcade.Body) {\n            this.body.enable = true;\n            this.body.checkCollision.none = false;\n            this.body.setVelocity(0);\n        }\n        this.setActive(true).setVisible(true);\n        this._healthComponent.reset();\n    }\n    update(time, delta) {\n        if (!this._isInitialized || !this.active || !this.body) return;\n        if (this._healthComponent.isDead) {\n            this.handleDeath();\n            return;\n        }\n        this.customUpdate(time, delta);\n    }\n    destroy(fromScene) {\n        this.bulletSpawner?.bulletClear();\n        this.scene.events.off((phaser__WEBPACK_IMPORTED_MODULE_0___default().Scenes).Events.UPDATE, this.update, this);\n        super.destroy(fromScene);\n    }\n    // Общие геттеры\n    get healthComponent() {\n        return this._healthComponent;\n    }\n    get colliderComponent() {\n        return this._colliderComponent;\n    }\n    // Добавляем геттер с проверкой\n    get bulletSpawner() {\n        return this._bulletSpawner ? this._bulletSpawner : null;\n    }\n    get dropConfig() {\n        return this._dropConfig;\n    }\n    handleDeath() {\n        this.bulletSpawner?.bulletClear();\n        this.setActive(false).setVisible(false);\n        if (this.body && this.body instanceof (phaser__WEBPACK_IMPORTED_MODULE_0___default().Physics).Arcade.Body) {\n            this.body.enable = false;\n            this.body.checkCollision.none = true;\n            this.body.stop();\n        }\n        this._eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ENEMY_DESTROYED, this);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQ2dDLFFBQVFDO0lBQ2xCO0lBT0EsZ0JBQWdCO0lBQ2hCLElBQUlJLGtCQUFtQztRQUFFLE9BQU8sSUFBSSxDQUFDckIsZ0JBQWdCO0lBQUU7SUFDdkUsSUFBSXNCLG9CQUF1QztRQUFFLE9BQU8sSUFBSSxDQUFDcEIsa0JBQWtCO0lBQUU7SUFDekUsK0JBQStCO0lBQ25DLElBQUlnQixnQkFBK0M7UUFDL0MsT0FBTyxJQUFJLENBQUMzQyxjQUFjLEdBQ3BCLElBQUksQ0FBQ0EsY0FBYyxHQUNuQjtJQUNWO0lBRUEsSUFBSWdELGFBQXFDO1FBQ3JDLE9BQU8sSUFBSSxDQUFDL0MsV0FBVztJQUMzQjtJQUVVc0MsY0FBb0I7UUFDMUIsSUFBSSxDQUFDSSxhQUFhLEVBQUVDO1FBQ3BCLElBQUksQ0FBQ1gsU0FBUyxDQUFDLE9BQU9DLFVBQVUsQ0FBQztRQUNqQyxJQUFJLElBQUksQ0FBQ3BCLElBQUksSUFBSSxJQUFJLENBQUNBLElBQUksWUFBWTFCLHVEQUFjLENBQUM0QixNQUFNLENBQUNDLElBQUksRUFBRTtZQUM5RCxJQUFJLENBQUNILElBQUksQ0FBQ2UsTUFBTSxHQUFHO1lBQ25CLElBQUksQ0FBQ2YsSUFBSSxDQUFDZ0IsY0FBYyxDQUFDQyxJQUFJLEdBQUc7WUFDaEMsSUFBSSxDQUFDakIsSUFBSSxDQUFDbUMsSUFBSTtRQUNsQjtRQUNBLElBQUksQ0FBQ3pCLGtCQUFrQixDQUFDMEIsSUFBSSxDQUFDN0Qsb0VBQWFBLENBQUM4RCxlQUFlLEVBQUUsSUFBSTtJQUNwRTtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2VudGl0aWVzL2VuZW1pZXMvYmFzZS1lbmVteS50cz84YmJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IHsgQ1VTVE9NX0VWRU5UUyB9IGZyb20gJ0AvZ2FtZS90eXBlcy9jdXN0b20tZXZlbnRzJztcclxuaW1wb3J0IHsgQ29sbGlkZXJDb21wb25lbnQgfSBmcm9tICdAL2dhbWUvY29tcG9uZW50cy9jb2xsaWRlci9jb2xsaWRlci1jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBFdmVudEJ1c0NvbXBvbmVudCB9IGZyb20gJ0AvZ2FtZS9jb21wb25lbnRzL2V2ZW50cy9ldmVudC1idXMtY29tcG9uZW50JztcclxuaW1wb3J0IHsgSGVhbHRoQ29tcG9uZW50IH0gZnJvbSAnQC9nYW1lL2NvbXBvbmVudHMvaGVhbHRoL2hlYWx0aC1jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBCdWxsZXRTcGF3bmVyQ29tcG9uZW50IH0gZnJvbSAnQC9nYW1lL2NvbXBvbmVudHMvd2VhcG9uL2J1bGxldC1zcGF3bmVyLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEVuZW15RHJvcENvbmZpZyB9IGZyb20gJ0AvZ2FtZS90eXBlcy9pbnRlcmZhY2VzJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlRW5lbXkgZXh0ZW5kcyBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyIHtcclxuICAgIHByb3RlY3RlZCBfaXNJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJvdGVjdGVkIF9oZWFsdGhDb21wb25lbnQhOiBIZWFsdGhDb21wb25lbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX2NvbGxpZGVyQ29tcG9uZW50ITogQ29sbGlkZXJDb21wb25lbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX2V2ZW50QnVzQ29tcG9uZW50ITogRXZlbnRCdXNDb21wb25lbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX2J1bGxldFNwYXduZXI6IEJ1bGxldFNwYXduZXJDb21wb25lbnQgfCBudWxsID0gbnVsbDtcclxuICAgIHByb3RlY3RlZCBfZHJvcENvbmZpZzogRW5lbXlEcm9wQ29uZmlnIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgc2NlbmU6IFBoYXNlci5TY2VuZSwgXHJcbiAgICAgICAgeDogbnVtYmVyLCBcclxuICAgICAgICB5OiBudW1iZXIsXHJcbiAgICApIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgW10pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuaW5pdFBoeXNpY3MoKTtcclxuICAgICAgICB0aGlzLmluaXRTcHJpdGVzKCk7XHJcbiAgICAgICAgc2NlbmUuZXZlbnRzLm9uKFBoYXNlci5TY2VuZXMuRXZlbnRzLlVQREFURSwgdGhpcy51cGRhdGUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2V0RGVwdGgoNSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGluaXRQaHlzaWNzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUucGh5c2ljcy5hZGQuZXhpc3RpbmcodGhpcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuYm9keSBpbnN0YW5jZW9mIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Cb2R5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYm9keS5zZXRTaXplKDI0LCAyNCkuc2V0T2Zmc2V0KC0xMiwgLTEyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdChldmVudEJ1czogRXZlbnRCdXNDb21wb25lbnQsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJvZHkpIHRocm93IG5ldyBFcnJvcignUGh5c2ljcyBib2R5IG1pc3NpbmcnKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9ldmVudEJ1c0NvbXBvbmVudCA9IGV2ZW50QnVzO1xyXG4gICAgICAgIHRoaXMuX2hlYWx0aENvbXBvbmVudCA9IG5ldyBIZWFsdGhDb21wb25lbnQodGhpcy5nZXRJbml0aWFsSGVhbHRoKCkpO1xyXG4gICAgICAgIHRoaXMuX2NvbGxpZGVyQ29tcG9uZW50ID0gbmV3IENvbGxpZGVyQ29tcG9uZW50KHRoaXMuX2hlYWx0aENvbXBvbmVudCwgZXZlbnRCdXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5ib2R5KSByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMuYm9keSAmJiB0aGlzLmJvZHkgaW5zdGFuY2VvZiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuQm9keSkge1xyXG4gICAgICAgICAgICB0aGlzLmJvZHkuZW5hYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5ib2R5LmNoZWNrQ29sbGlzaW9uLm5vbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5ib2R5LnNldFZlbG9jaXR5KDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNldEFjdGl2ZSh0cnVlKS5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIHRoaXMuX2hlYWx0aENvbXBvbmVudC5yZXNldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSh0aW1lOiBudW1iZXIsIGRlbHRhOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2lzSW5pdGlhbGl6ZWQgfHwgIXRoaXMuYWN0aXZlIHx8ICF0aGlzLmJvZHkpIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYWx0aENvbXBvbmVudC5pc0RlYWQpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVEZWF0aCgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmN1c3RvbVVwZGF0ZSh0aW1lLCBkZWx0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveShmcm9tU2NlbmU/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5idWxsZXRTcGF3bmVyPy5idWxsZXRDbGVhcigpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuZXZlbnRzLm9mZihQaGFzZXIuU2NlbmVzLkV2ZW50cy5VUERBVEUsIHRoaXMudXBkYXRlLCB0aGlzKTtcclxuICAgICAgICBzdXBlci5kZXN0cm95KGZyb21TY2VuZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0JDQsdGB0YLRgNCw0LrRgtC90YvQtSDQvNC10YLQvtC00Ysg0LTQu9GPINGA0LXQsNC70LjQt9Cw0YbQuNC4INCyINC00L7Rh9C10YDQvdC40YUg0LrQu9Cw0YHRgdCw0YVcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRJbml0aWFsSGVhbHRoKCk6IG51bWJlcjtcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjdXN0b21VcGRhdGUodGltZTogbnVtYmVyLCBkZWx0YTogbnVtYmVyKTogdm9pZDtcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBpbml0U3ByaXRlcygpOiB2b2lkXHJcblxyXG4gICAgLy8g0J7QsdGJ0LjQtSDQs9C10YLRgtC10YDRi1xyXG4gICAgZ2V0IGhlYWx0aENvbXBvbmVudCgpOiBIZWFsdGhDb21wb25lbnQgeyByZXR1cm4gdGhpcy5faGVhbHRoQ29tcG9uZW50OyB9XHJcbiAgICBnZXQgY29sbGlkZXJDb21wb25lbnQoKTogQ29sbGlkZXJDb21wb25lbnQgeyByZXR1cm4gdGhpcy5fY29sbGlkZXJDb21wb25lbnQ7IH1cclxuICAgICAgICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LPQtdGC0YLQtdGAINGBINC/0YDQvtCy0LXRgNC60L7QuVxyXG4gICAgZ2V0IGJ1bGxldFNwYXduZXIoKTogQnVsbGV0U3Bhd25lckNvbXBvbmVudCB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9idWxsZXRTcGF3bmVyXHJcbiAgICAgICAgICAgID8gdGhpcy5fYnVsbGV0U3Bhd25lciBcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkcm9wQ29uZmlnKCk6IEVuZW15RHJvcENvbmZpZyB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kcm9wQ29uZmlnO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBoYW5kbGVEZWF0aCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmJ1bGxldFNwYXduZXI/LmJ1bGxldENsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5zZXRBY3RpdmUoZmFsc2UpLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIGlmICh0aGlzLmJvZHkgJiYgdGhpcy5ib2R5IGluc3RhbmNlb2YgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkJvZHkpIHtcclxuICAgICAgICAgICAgdGhpcy5ib2R5LmVuYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmJvZHkuY2hlY2tDb2xsaXNpb24ubm9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuYm9keS5zdG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2V2ZW50QnVzQ29tcG9uZW50LmVtaXQoQ1VTVE9NX0VWRU5UUy5FTkVNWV9ERVNUUk9ZRUQsIHRoaXMpO1xyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIlBoYXNlciIsIkNVU1RPTV9FVkVOVFMiLCJDb2xsaWRlckNvbXBvbmVudCIsIkhlYWx0aENvbXBvbmVudCIsIkJhc2VFbmVteSIsIkdhbWVPYmplY3RzIiwiQ29udGFpbmVyIiwiY29uc3RydWN0b3IiLCJzY2VuZSIsIngiLCJ5IiwiX2lzSW5pdGlhbGl6ZWQiLCJfYnVsbGV0U3Bhd25lciIsIl9kcm9wQ29uZmlnIiwiaW5pdFBoeXNpY3MiLCJpbml0U3ByaXRlcyIsImV2ZW50cyIsIm9uIiwiU2NlbmVzIiwiRXZlbnRzIiwiVVBEQVRFIiwidXBkYXRlIiwic2V0RGVwdGgiLCJhZGQiLCJleGlzdGluZyIsInBoeXNpY3MiLCJib2R5IiwiUGh5c2ljcyIsIkFyY2FkZSIsIkJvZHkiLCJzZXRTaXplIiwic2V0T2Zmc2V0IiwiaW5pdCIsImV2ZW50QnVzIiwiYXJncyIsIkVycm9yIiwiX2V2ZW50QnVzQ29tcG9uZW50IiwiX2hlYWx0aENvbXBvbmVudCIsImdldEluaXRpYWxIZWFsdGgiLCJfY29sbGlkZXJDb21wb25lbnQiLCJyZXNldCIsImVuYWJsZSIsImNoZWNrQ29sbGlzaW9uIiwibm9uZSIsInNldFZlbG9jaXR5Iiwic2V0QWN0aXZlIiwic2V0VmlzaWJsZSIsInRpbWUiLCJkZWx0YSIsImFjdGl2ZSIsImlzRGVhZCIsImhhbmRsZURlYXRoIiwiY3VzdG9tVXBkYXRlIiwiZGVzdHJveSIsImZyb21TY2VuZSIsImJ1bGxldFNwYXduZXIiLCJidWxsZXRDbGVhciIsIm9mZiIsImhlYWx0aENvbXBvbmVudCIsImNvbGxpZGVyQ29tcG9uZW50IiwiZHJvcENvbmZpZyIsInN0b3AiLCJlbWl0IiwiRU5FTVlfREVTVFJPWUVEIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/entities/enemies/base-enemy.ts\n");

/***/ }),

/***/ "./src/game/entities/enemies/bosses/base-boss.ts":
/*!*******************************************************!*\
  !*** ./src/game/entities/enemies/bosses/base-boss.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BossEnemy: () => (/* binding */ BossEnemy)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _base_enemy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base-enemy */ \"./src/game/entities/enemies/base-enemy.ts\");\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n\n\n\nclass BossEnemy extends _base_enemy__WEBPACK_IMPORTED_MODULE_1__.BaseEnemy {\n    constructor(scene, x, y){\n        super(scene, x, y);\n        this._phases = [];\n        this._currentPhaseIndex = 0;\n        this._phaseTimeLeft = 0;\n        this._lastMovementChangeTime = 0;\n        this._movementChangeCooldown = 3000;\n        this._isInvulnerable = true;\n        this._isPhaseTransitioning = false;\n        this._spawnComplete = false;\n        this._verticalRange = {\n            min: 50,\n            max: 200\n        };\n        this._targetPosition = {\n            x: 0,\n            y: 100\n        };\n        this._movementSpeed = 100;\n        this._screenMargin = 20;\n        this._currentSection = 0;\n        this._sections = [];\n        this._movementState = \"waiting\";\n    }\n    init(eventBus, getPlayer) {\n        super.init(eventBus);\n        this._playerGetter = getPlayer;\n        this._phases = this.createPhases();\n        this._phaseTimeLeft = this._phases[0]?.duration ?? 0;\n        this._healthComponent.setLife(this._phases[0]?.health ?? 1);\n        this._isInvulnerable = true;\n        // Инициализация секций экрана\n        this.initScreenSections();\n        if (this.body) {\n            this.body.velocity.y = this._movementSpeed;\n            this._targetPosition = {\n                x: this.x,\n                y: this._verticalRange.min\n            };\n        }\n        eventBus.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.BOSS_SPAWNED, this);\n    }\n    initScreenSections() {\n        const screenWidth = this.scene.scale.width;\n        const sectionWidth = screenWidth / 5; // 5 равных секций\n        this._sections = Array.from({\n            length: 5\n        }, (_, i)=>({\n                min: i * sectionWidth,\n                max: (i + 1) * sectionWidth\n            }));\n    // Визуализация секций для отладки\n    // this.debugGraphics = this.scene.add.graphics();\n    // this.debugGraphics.lineStyle(2, 0xff0000, 0.5);\n    // this._sections.forEach((section, index) => {\n    //     this.debugGraphics?.strokeRect(\n    //         section.min,\n    //         50, // Верхняя граница\n    //         section.max - section.min,\n    //         this.scene.scale.height - 100 // Высота секции\n    //     );\n    // });\n    }\n    isInvulnerable() {\n        return this._isInvulnerable;\n    }\n    setInvulnerable(duration) {\n        this._isInvulnerable = true;\n        this.invulnerabilityTimer = this.scene.time.delayedCall(duration, ()=>{\n            this._isInvulnerable = false;\n        });\n    }\n    customUpdate(time, delta) {\n        if (!this._spawnComplete) {\n            this.handleSpawnMovement();\n            return;\n        }\n        const currentPhase = this._phases[this._currentPhaseIndex];\n        if (!currentPhase) return;\n        this._phaseTimeLeft -= delta;\n        if (this._phaseTimeLeft <= 0) {\n            this.handlePhaseTransition();\n        }\n        currentPhase.update(time, delta);\n        this.handleMovement(time, delta);\n    }\n    handleDeath() {\n        if (this._isPhaseTransitioning) return;\n        // Только если все фазы пройдены\n        if (this._currentPhaseIndex >= this._phases.length - 1) {\n            super.handleDeath();\n            this._eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.BOSS_DEFEATED, this);\n            this.bulletSpawner?.cleanup();\n        } else {\n            this._isPhaseTransitioning = true;\n            this.handlePhaseTransition();\n        }\n    }\n    handlePhaseTransition() {\n        const currentPhase = this._phases[this._currentPhaseIndex];\n        currentPhase.onExit?.();\n        this._currentPhaseIndex++;\n        if (this._currentPhaseIndex >= this._phases.length) {\n            this._healthComponent.die();\n            return;\n        }\n        const nextPhase = this._phases[this._currentPhaseIndex];\n        this._phaseTimeLeft = nextPhase.duration;\n        // Сбрасываем флаг смерти перед установкой нового здоровья\n        this._healthComponent.reset();\n        this._healthComponent.setLife(nextPhase.health);\n        this.setInvulnerable(2000);\n        this.bulletSpawner?.bulletClear();\n        this._eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.BOSS_PHASE_CHANGE, this);\n        this.scene.time.delayedCall(500, ()=>{\n            nextPhase.onEnter?.();\n            this._isPhaseTransitioning = false; // Разблокируем переходы\n        });\n    }\n    handleMovement(time, delta) {\n        if (!this.body) {\n            console.log(\"Movement skipped: no physics body\");\n            return;\n        }\n        const now = Date.now();\n        switch(this._movementState){\n            case \"waiting\":\n                // Проверяем, закончился ли cooldown\n                if (now - this._lastMovementChangeTime >= this._movementChangeCooldown) {\n                    // console.log('Cooldown finished, starting new movement');\n                    this.chooseNewTarget();\n                    this._movementState = \"moving\";\n                }\n                break;\n            case \"moving\":\n                // Проверяем достижение цели\n                const dx = this._targetPosition.x - this.x;\n                const dy = this._targetPosition.y - this.y;\n                const distance = Math.sqrt(dx * dx + dy * dy);\n                if (distance < 10) {\n                    // console.log('Target reached, stopping and starting cooldown');\n                    this.body.velocity.set(0, 0);\n                    this._lastMovementChangeTime = now;\n                    this._movementState = \"waiting\";\n                } else {\n                    // console.log(`Moving to target: ${distance.toFixed(1)}px left`);\n                    this.updateVelocity();\n                }\n                break;\n        }\n    }\n    chooseNewTarget() {\n        const player = this._playerGetter?.();\n        if (!player) return;\n        // Определение текущей секции\n        const currentSection = this.getCurrentSection();\n        const playerSection = this._sections.findIndex((s)=>player.x >= s.min && player.x < s.max);\n        // Логика выбора горизонтальной цели\n        let targetXSection = currentSection;\n        if (playerSection === currentSection) {\n            // Особый случай для крайних секций\n            if (currentSection === 0 || currentSection === 4) {\n                // Всегда уходим от края\n                targetXSection = currentSection === 0 ? 1 : 3;\n            } else {\n                // Стандартная логика для некрайних секций\n                const playerOffsetX = player.x - this.x;\n                targetXSection += Math.sign(playerOffsetX) || phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Between(-1, 1);\n            }\n        } else {\n            targetXSection += Math.sign(playerSection - currentSection);\n        }\n        // Ограничение секций\n        targetXSection = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Clamp(targetXSection, 0, 4);\n        const section = this._sections[targetXSection];\n        // Применение margin\n        this._targetPosition = {\n            x: phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Clamp(phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Between(section.min, section.max), this._screenMargin, this.scene.scale.width - this._screenMargin),\n            y: phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Between(this._verticalRange.min + this._screenMargin, this._verticalRange.max)\n        };\n    }\n    updateVelocity() {\n        if (!this.body) return;\n        const dx = this._targetPosition.x - this.x;\n        const dy = this._targetPosition.y - this.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        if (distance === 0) return;\n        const speed = this._movementSpeed;\n        const vx = dx / distance * speed;\n        const vy = dy / distance * speed;\n        // console.log(`Updating velocity: x=${vx.toFixed(1)}, y=${vy.toFixed(1)}`);\n        this.body.velocity.set(vx, vy);\n    }\n    getCurrentSection() {\n        return this._sections.findIndex((s)=>this.x >= s.min && this.x < s.max);\n    }\n    handleSpawnMovement() {\n        if (!this.body) return;\n        if (this.y >= this._verticalRange.min) {\n            this.body.velocity.set(0, 0);\n            this._spawnComplete = true;\n            this._isInvulnerable = false;\n            this.scene.time.delayedCall(1000, ()=>{\n                this._phases[0]?.onEnter?.();\n            });\n        }\n    }\n    reset() {\n        super.reset();\n        this._currentPhaseIndex = 0;\n        this._phases = this.createPhases();\n        this._phaseTimeLeft = this._phases[0]?.duration ?? 0;\n        this._healthComponent.setLife(this._phases[0]?.health ?? 1);\n        this._phases[0]?.onEnter?.();\n        this._spawnComplete = false;\n        this._isInvulnerable = true;\n    }\n    get currentPhaseIndex() {\n        return this._currentPhaseIndex;\n    }\n    get bulletSpawner() {\n        return this._bulletSpawner;\n    }\n    set bulletSpawner(value) {\n        this._bulletSpawner = value;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy9lbmVtaWVzL2Jvc3Nlcy9iYXNlLWJvc3MudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNEI7QUFDYztBQUVpQjtBQUlwRCxNQUFlRyxrQkFBa0JGLGtEQUFTQTtJQTRCN0NHLFlBQ0lDLEtBQW1CLEVBQ25CQyxDQUFTLEVBQ1RDLENBQVMsQ0FDWDtRQUNFLEtBQUssQ0FBQ0YsT0FBT0MsR0FBR0M7YUE5QlZDLFVBQXVCLEVBQUU7YUFDekJDLHFCQUFxQjthQUNyQkMsaUJBQWlCO2FBQ2pCQywwQkFBMEI7YUFDMUJDLDBCQUEwQjthQUUxQkMsa0JBQWtCO2FBR2xCQyx3QkFBd0I7YUFFeEJDLGlCQUFpQjthQUNqQkMsaUJBQWlCO1lBQUVDLEtBQUs7WUFBSUMsS0FBSztRQUFJO2FBQ3JDQyxrQkFBa0I7WUFBRWIsR0FBRztZQUFHQyxHQUFHO1FBQUk7YUFDakNhLGlCQUFpQjthQUNqQkMsZ0JBQWdCO2FBR2hCQyxrQkFBa0I7YUFDbEJDLFlBQTRDLEVBQUU7YUFFOUNDLGlCQUF1QztJQVVqRDtJQUVBQyxLQUFLQyxRQUEyQixFQUFFQyxTQUFzRCxFQUFRO1FBQzVGLEtBQUssQ0FBQ0YsS0FBS0M7UUFDWCxJQUFJLENBQUNFLGFBQWEsR0FBR0Q7UUFDckIsSUFBSSxDQUFDbkIsT0FBTyxHQUFHLElBQUksQ0FBQ3FCLFlBQVk7UUFDaEMsSUFBSSxDQUFDbkIsY0FBYyxHQUFHLElBQUksQ0FBQ0YsT0FBTyxDQUFDLEVBQUUsRUFBRXNCLFlBQVk7UUFDbkQsSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBQ0MsT0FBTyxDQUFDLElBQUksQ0FBQ3hCLE9BQU8sQ0FBQyxFQUFFLEVBQUV5QixVQUFVO1FBQ3pELElBQUksQ0FBQ3BCLGVBQWUsR0FBRztRQUV2Qiw4QkFBOEI7UUFDOUIsSUFBSSxDQUFDcUIsa0JBQWtCO1FBRXZCLElBQUksSUFBSSxDQUFDQyxJQUFJLEVBQUU7WUFDWCxJQUFJLENBQUNBLElBQUksQ0FBQ0MsUUFBUSxDQUFDN0Is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QUMvQyxPQUFPLElBQUksQ0FBQ3FDLGNBQWM7SUFDOUI7SUFDQSxJQUFXckMsY0FBY3NDLEtBQTZCLEVBQUU7UUFDcEQsSUFBSSxDQUFDRCxjQUFjLEdBQUdDO0lBQzFCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvZW50aXRpZXMvZW5lbWllcy9ib3NzZXMvYmFzZS1ib3NzLnRzPzU5YTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgeyBCYXNlRW5lbXkgfSBmcm9tICcuLi9iYXNlLWVuZW15JztcclxuaW1wb3J0IHsgRXZlbnRCdXNDb21wb25lbnQgfSBmcm9tICdAL2dhbWUvY29tcG9uZW50cy9ldmVudHMvZXZlbnQtYnVzLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IENVU1RPTV9FVkVOVFMgfSBmcm9tICdAL2dhbWUvdHlwZXMvY3VzdG9tLWV2ZW50cyc7XHJcbmltcG9ydCB7IEJ1bGxldFNwYXduZXJDb21wb25lbnQgfSBmcm9tICdAL2dhbWUvY29tcG9uZW50cy93ZWFwb24vYnVsbGV0LXNwYXduZXItY29tcG9uZW50JztcclxuaW1wb3J0IHsgQm9zc1BoYXNlIH0gZnJvbSAnQC9nYW1lL3R5cGVzL2ludGVyZmFjZXMnO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJvc3NFbmVteSBleHRlbmRzIEJhc2VFbmVteSB7XHJcbiAgICBwcm90ZWN0ZWQgX2J1bGxldFNwYXduZXIhOiBCdWxsZXRTcGF3bmVyQ29tcG9uZW50O1xyXG4gICAgXHJcbiAgICBwcm90ZWN0ZWQgX3BoYXNlczogQm9zc1BoYXNlW10gPSBbXTtcclxuICAgIHByb3RlY3RlZCBfY3VycmVudFBoYXNlSW5kZXggPSAwO1xyXG4gICAgcHJvdGVjdGVkIF9waGFzZVRpbWVMZWZ0ID0gMDtcclxuICAgIHByb3RlY3RlZCBfbGFzdE1vdmVtZW50Q2hhbmdlVGltZSA9IDA7XHJcbiAgICBwcm90ZWN0ZWQgX21vdmVtZW50Q2hhbmdlQ29vbGRvd24gPSAzMDAwO1xyXG5cclxuICAgIHByb3RlY3RlZCBfaXNJbnZ1bG5lcmFibGUgPSB0cnVlO1xyXG4gICAgcHJvdGVjdGVkIGludnVsbmVyYWJpbGl0eVRpbWVyPzogUGhhc2VyLlRpbWUuVGltZXJFdmVudDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgX2lzUGhhc2VUcmFuc2l0aW9uaW5nID0gZmFsc2U7XHJcblxyXG4gICAgcHJvdGVjdGVkIF9zcGF3bkNvbXBsZXRlID0gZmFsc2U7XHJcbiAgICBwcm90ZWN0ZWQgX3ZlcnRpY2FsUmFuZ2UgPSB7IG1pbjogNTAsIG1heDogMjAwIH07XHJcbiAgICBwcm90ZWN0ZWQgX3RhcmdldFBvc2l0aW9uID0geyB4OiAwLCB5OiAxMDAgfTtcclxuICAgIHByb3RlY3RlZCBfbW92ZW1lbnRTcGVlZCA9IDEwMDtcclxuICAgIHByb3RlY3RlZCBfc2NyZWVuTWFyZ2luID0gMjA7XHJcblxyXG4gICAgcHJvdGVjdGVkIF9wbGF5ZXJHZXR0ZXI6ICgpID0+IFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGUgfCB1bmRlZmluZWQ7XHJcbiAgICBwcm90ZWN0ZWQgX2N1cnJlbnRTZWN0aW9uID0gMDtcclxuICAgIHByb3RlY3RlZCBfc2VjdGlvbnM6IHsgbWluOiBudW1iZXI7IG1heDogbnVtYmVyIH1bXSA9IFtdO1xyXG5cclxuICAgIHByb3RlY3RlZCBfbW92ZW1lbnRTdGF0ZTogJ21vdmluZycgfCAnd2FpdGluZycgPSAnd2FpdGluZyc7XHJcblxyXG4gICAgcHJpdmF0ZSBkZWJ1Z0dyYXBoaWNzPzogUGhhc2VyLkdhbWVPYmplY3RzLkdyYXBoaWNzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHNjZW5lOiBQaGFzZXIuU2NlbmUsXHJcbiAgICAgICAgeDogbnVtYmVyLFxyXG4gICAgICAgIHk6IG51bWJlcixcclxuICAgICkge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KGV2ZW50QnVzOiBFdmVudEJ1c0NvbXBvbmVudCwgZ2V0UGxheWVyOiAoKSA9PiBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlIHwgdW5kZWZpbmVkKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuaW5pdChldmVudEJ1cyk7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyR2V0dGVyID0gZ2V0UGxheWVyO1xyXG4gICAgICAgIHRoaXMuX3BoYXNlcyA9IHRoaXMuY3JlYXRlUGhhc2VzKCk7XHJcbiAgICAgICAgdGhpcy5fcGhhc2VUaW1lTGVmdCA9IHRoaXMuX3BoYXNlc1swXT8uZHVyYXRpb24gPz8gMDtcclxuICAgICAgICB0aGlzLl9oZWFsdGhDb21wb25lbnQuc2V0TGlmZSh0aGlzLl9waGFzZXNbMF0/LmhlYWx0aCA/PyAxKTtcclxuICAgICAgICB0aGlzLl9pc0ludnVsbmVyYWJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINGB0LXQutGG0LjQuSDRjdC60YDQsNC90LBcclxuICAgICAgICB0aGlzLmluaXRTY3JlZW5TZWN0aW9ucygpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ib2R5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYm9keS52ZWxvY2l0eS55ID0gdGhpcy5fbW92ZW1lbnRTcGVlZDtcclxuICAgICAgICAgICAgdGhpcy5fdGFyZ2V0UG9zaXRpb24gPSB7IHg6IHRoaXMueCwgeTogdGhpcy5fdmVydGljYWxSYW5nZS5taW4gfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV2ZW50QnVzLmVtaXQoQ1VTVE9NX0VWRU5UUy5CT1NTX1NQQVdORUQsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbml0U2NyZWVuU2VjdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgc2NyZWVuV2lkdGggPSB0aGlzLnNjZW5lLnNjYWxlLndpZHRoO1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25XaWR0aCA9IHNjcmVlbldpZHRoIC8gNTsgLy8gNSDRgNCw0LLQvdGL0YUg0YHQtdC60YbQuNC5XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fc2VjdGlvbnMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA1IH0sIChfLCBpKSA9PiAoe1xyXG4gICAgICAgICAgICBtaW46IGkgKiBzZWN0aW9uV2lkdGgsXHJcbiAgICAgICAgICAgIG1heDogKGkgKyAxKSAqIHNlY3Rpb25XaWR0aFxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8g0JLQuNC30YPQsNC70LjQt9Cw0YbQuNGPINGB0LXQutGG0LjQuSDQtNC70Y8g0L7RgtC70LDQtNC60LhcclxuICAgICAgICAvLyB0aGlzLmRlYnVnR3JhcGhpY3MgPSB0aGlzLnNjZW5lLmFkZC5ncmFwaGljcygpO1xyXG4gICAgICAgIC8vIHRoaXMuZGVidWdHcmFwaGljcy5saW5lU3R5bGUoMiwgMHhmZjAwMDAsIDAuNSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gdGhpcy5fc2VjdGlvbnMuZm9yRWFjaCgoc2VjdGlvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAvLyAgICAgdGhpcy5kZWJ1Z0dyYXBoaWNzPy5zdHJva2VSZWN0KFxyXG4gICAgICAgIC8vICAgICAgICAgc2VjdGlvbi5taW4sXHJcbiAgICAgICAgLy8gICAgICAgICA1MCwgLy8g0JLQtdGA0YXQvdGP0Y8g0LPRgNCw0L3QuNGG0LBcclxuICAgICAgICAvLyAgICAgICAgIHNlY3Rpb24ubWF4IC0gc2VjdGlvbi5taW4sXHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLnNjZW5lLnNjYWxlLmhlaWdodCAtIDEwMCAvLyDQktGL0YHQvtGC0LAg0YHQtdC60YbQuNC4XHJcbiAgICAgICAgLy8gICAgICk7XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzSW52dWxuZXJhYmxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc0ludnVsbmVyYWJsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0SW52dWxuZXJhYmxlKGR1cmF0aW9uOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0ludnVsbmVyYWJsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pbnZ1bG5lcmFiaWxpdHlUaW1lciA9IHRoaXMuc2NlbmUudGltZS5kZWxheWVkQ2FsbChkdXJhdGlvbiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9pc0ludnVsbmVyYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjcmVhdGVQaGFzZXMoKTogQm9zc1BoYXNlW107XHJcblxyXG4gICAgcHJvdGVjdGVkIGN1c3RvbVVwZGF0ZSh0aW1lOiBudW1iZXIsIGRlbHRhOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3NwYXduQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVTcGF3bk1vdmVtZW50KCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRQaGFzZSA9IHRoaXMuX3BoYXNlc1t0aGlzLl9jdXJyZW50UGhhc2VJbmRleF07XHJcbiAgICAgICAgaWYgKCFjdXJyZW50UGhhc2UpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5fcGhhc2VUaW1lTGVmdCAtPSBkZWx0YTtcclxuICAgICAgICBpZiAodGhpcy5fcGhhc2VUaW1lTGVmdCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUGhhc2VUcmFuc2l0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdXJyZW50UGhhc2UudXBkYXRlKHRpbWUsIGRlbHRhKTtcclxuICAgICAgICB0aGlzLmhhbmRsZU1vdmVtZW50KHRpbWUsIGRlbHRhKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaGFuZGxlRGVhdGgoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzUGhhc2VUcmFuc2l0aW9uaW5nKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0KLQvtC70YzQutC+INC10YHQu9C4INCy0YHQtSDRhNCw0LfRiyDQv9GA0L7QudC00LXQvdGLXHJcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRQaGFzZUluZGV4ID49IHRoaXMuX3BoYXNlcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmhhbmRsZURlYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50QnVzQ29tcG9uZW50LmVtaXQoQ1VTVE9NX0VWRU5UUy5CT1NTX0RFRkVBVEVELCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5idWxsZXRTcGF3bmVyPy5jbGVhbnVwKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faXNQaGFzZVRyYW5zaXRpb25pbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBoYXNlVHJhbnNpdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaGFuZGxlUGhhc2VUcmFuc2l0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRQaGFzZSA9IHRoaXMuX3BoYXNlc1t0aGlzLl9jdXJyZW50UGhhc2VJbmRleF07XHJcbiAgICAgICAgY3VycmVudFBoYXNlLm9uRXhpdD8uKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fY3VycmVudFBoYXNlSW5kZXgrKztcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5fY3VycmVudFBoYXNlSW5kZXggPj0gdGhpcy5fcGhhc2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFsdGhDb21wb25lbnQuZGllKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5leHRQaGFzZSA9IHRoaXMuX3BoYXNlc1t0aGlzLl9jdXJyZW50UGhhc2VJbmRleF07XHJcbiAgICAgICAgdGhpcy5fcGhhc2VUaW1lTGVmdCA9IG5leHRQaGFzZS5kdXJhdGlvbjtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQodCx0YDQsNGB0YvQstCw0LXQvCDRhNC70LDQsyDRgdC80LXRgNGC0Lgg0L/QtdGA0LXQtCDRg9GB0YLQsNC90L7QstC60L7QuSDQvdC+0LLQvtCz0L4g0LfQtNC+0YDQvtCy0YzRj1xyXG4gICAgICAgIHRoaXMuX2hlYWx0aENvbXBvbmVudC5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMuX2hlYWx0aENvbXBvbmVudC5zZXRMaWZlKG5leHRQaGFzZS5oZWFsdGgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2V0SW52dWxuZXJhYmxlKDIwMDApO1xyXG4gICAgICAgIHRoaXMuYnVsbGV0U3Bhd25lcj8uYnVsbGV0Q2xlYXIoKTtcclxuICAgICAgICB0aGlzLl9ldmVudEJ1c0NvbXBvbmVudC5lbWl0KENVU1RPTV9FVkVOVFMuQk9TU19QSEFTRV9DSEFOR0UsIHRoaXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2NlbmUudGltZS5kZWxheWVkQ2FsbCg1MDAsICgpID0+IHtcclxuICAgICAgICAgICAgbmV4dFBoYXNlLm9uRW50ZXI/LigpO1xyXG4gICAgICAgICAgICB0aGlzLl9pc1BoYXNlVHJhbnNpdGlvbmluZyA9IGZhbHNlOyAvLyDQoNCw0LfQsdC70L7QutC40YDRg9C10Lwg0L/QtdGA0LXRhdC+0LTRi1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBoYW5kbGVNb3ZlbWVudCh0aW1lOiBudW1iZXIsIGRlbHRhOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuYm9keSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTW92ZW1lbnQgc2tpcHBlZDogbm8gcGh5c2ljcyBib2R5Jyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLl9tb3ZlbWVudFN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3dhaXRpbmcnOlxyXG4gICAgICAgICAgICAgICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDQt9Cw0LrQvtC90YfQuNC70YHRjyDQu9C4IGNvb2xkb3duXHJcbiAgICAgICAgICAgICAgICBpZiAobm93IC0gdGhpcy5fbGFzdE1vdmVtZW50Q2hhbmdlVGltZSA+PSB0aGlzLl9tb3ZlbWVudENoYW5nZUNvb2xkb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0Nvb2xkb3duIGZpbmlzaGVkLCBzdGFydGluZyBuZXcgbW92ZW1lbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNob29zZU5ld1RhcmdldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVtZW50U3RhdGUgPSAnbW92aW5nJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgJ21vdmluZyc6XHJcbiAgICAgICAgICAgICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0LTQvtGB0YLQuNC20LXQvdC40LUg0YbQtdC70LhcclxuICAgICAgICAgICAgICAgIGNvbnN0IGR4ID0gdGhpcy5fdGFyZ2V0UG9zaXRpb24ueCAtIHRoaXMueDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGR5ID0gdGhpcy5fdGFyZ2V0UG9zaXRpb24ueSAtIHRoaXMueTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgMTApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnVGFyZ2V0IHJlYWNoZWQsIHN0b3BwaW5nIGFuZCBzdGFydGluZyBjb29sZG93bicpO1xyXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmJvZHkudmVsb2NpdHkgYXMgUGhhc2VyLk1hdGguVmVjdG9yMikuc2V0KDAsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RNb3ZlbWVudENoYW5nZVRpbWUgPSBub3c7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZW1lbnRTdGF0ZSA9ICd3YWl0aW5nJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYE1vdmluZyB0byB0YXJnZXQ6ICR7ZGlzdGFuY2UudG9GaXhlZCgxKX1weCBsZWZ0YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWZWxvY2l0eSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjaG9vc2VOZXdUYXJnZXQoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcGxheWVyID0gdGhpcy5fcGxheWVyR2V0dGVyPy4oKTtcclxuICAgICAgICBpZiAoIXBsYXllcikgcmV0dXJuO1xyXG4gICAgXHJcbiAgICAgICAgLy8g0J7Qv9GA0LXQtNC10LvQtdC90LjQtSDRgtC10LrRg9GJ0LXQuSDRgdC10LrRhtC40LhcclxuICAgICAgICBjb25zdCBjdXJyZW50U2VjdGlvbiA9IHRoaXMuZ2V0Q3VycmVudFNlY3Rpb24oKTtcclxuICAgICAgICBjb25zdCBwbGF5ZXJTZWN0aW9uID0gdGhpcy5fc2VjdGlvbnMuZmluZEluZGV4KHMgPT4gXHJcbiAgICAgICAgICAgIHBsYXllci54ID49IHMubWluICYmIHBsYXllci54IDwgcy5tYXhcclxuICAgICAgICApO1xyXG4gICAgXHJcbiAgICAgICAgLy8g0JvQvtCz0LjQutCwINCy0YvQsdC+0YDQsCDQs9C+0YDQuNC30L7QvdGC0LDQu9GM0L3QvtC5INGG0LXQu9C4XHJcbiAgICAgICAgbGV0IHRhcmdldFhTZWN0aW9uID0gY3VycmVudFNlY3Rpb247XHJcbiAgICAgICAgaWYgKHBsYXllclNlY3Rpb24gPT09IGN1cnJlbnRTZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vINCe0YHQvtCx0YvQuSDRgdC70YPRh9Cw0Lkg0LTQu9GPINC60YDQsNC50L3QuNGFINGB0LXQutGG0LjQuVxyXG4gICAgICAgICAgICBpZiAoY3VycmVudFNlY3Rpb24gPT09IDAgfHwgY3VycmVudFNlY3Rpb24gPT09IDQpIHtcclxuICAgICAgICAgICAgICAgIC8vINCS0YHQtdCz0LTQsCDRg9GF0L7QtNC40Lwg0L7RgiDQutGA0LDRj1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0WFNlY3Rpb24gPSBjdXJyZW50U2VjdGlvbiA9PT0gMCA/IDEgOiAzO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vINCh0YLQsNC90LTQsNGA0YLQvdCw0Y8g0LvQvtCz0LjQutCwINC00LvRjyDQvdC10LrRgNCw0LnQvdC40YUg0YHQtdC60YbQuNC5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXJPZmZzZXRYID0gcGxheWVyLnggLSB0aGlzLng7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRYU2VjdGlvbiArPSBNYXRoLnNpZ24ocGxheWVyT2Zmc2V0WCkgfHwgUGhhc2VyLk1hdGguQmV0d2VlbigtMSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0YXJnZXRYU2VjdGlvbiArPSBNYXRoLnNpZ24ocGxheWVyU2VjdGlvbiAtIGN1cnJlbnRTZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvLyDQntCz0YDQsNC90LjRh9C10L3QuNC1INGB0LXQutGG0LjQuVxyXG4gICAgICAgIHRhcmdldFhTZWN0aW9uID0gUGhhc2VyLk1hdGguQ2xhbXAodGFyZ2V0WFNlY3Rpb24sIDAsIDQpO1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLl9zZWN0aW9uc1t0YXJnZXRYU2VjdGlvbl07XHJcbiAgICBcclxuICAgICAgICAvLyDQn9GA0LjQvNC10L3QtdC90LjQtSBtYXJnaW5cclxuICAgICAgICB0aGlzLl90YXJnZXRQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgeDogUGhhc2VyLk1hdGguQ2xhbXAoXHJcbiAgICAgICAgICAgICAgICBQaGFzZXIuTWF0aC5CZXR3ZWVuKHNlY3Rpb24ubWluLCBzZWN0aW9uLm1heCksXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5NYXJnaW4sXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnNjYWxlLndpZHRoIC0gdGhpcy5fc2NyZWVuTWFyZ2luXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHk6IFBoYXNlci5NYXRoLkJldHdlZW4odGhpcy5fdmVydGljYWxSYW5nZS5taW4gKyB0aGlzLl9zY3JlZW5NYXJnaW4sIHRoaXMuX3ZlcnRpY2FsUmFuZ2UubWF4KVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHVwZGF0ZVZlbG9jaXR5KCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5ib2R5KSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGR4ID0gdGhpcy5fdGFyZ2V0UG9zaXRpb24ueCAtIHRoaXMueDtcclxuICAgICAgICBjb25zdCBkeSA9IHRoaXMuX3RhcmdldFBvc2l0aW9uLnkgLSB0aGlzLnk7XHJcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChkaXN0YW5jZSA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBzcGVlZCA9IHRoaXMuX21vdmVtZW50U3BlZWQ7XHJcbiAgICAgICAgY29uc3QgdnggPSAoZHggLyBkaXN0YW5jZSkgKiBzcGVlZDtcclxuICAgICAgICBjb25zdCB2eSA9IChkeSAvIGRpc3RhbmNlKSAqIHNwZWVkO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgVXBkYXRpbmcgdmVsb2NpdHk6IHg9JHt2eC50b0ZpeGVkKDEpfSwgeT0ke3Z5LnRvRml4ZWQoMSl9YCk7XHJcbiAgICAgICAgKHRoaXMuYm9keS52ZWxvY2l0eSBhcyBQaGFzZXIuTWF0aC5WZWN0b3IyKS5zZXQodngsIHZ5KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0Q3VycmVudFNlY3Rpb24oKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VjdGlvbnMuZmluZEluZGV4KHMgPT4gXHJcbiAgICAgICAgICAgIHRoaXMueCA+PSBzLm1pbiAmJiB0aGlzLnggPCBzLm1heFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGhhbmRsZVNwYXduTW92ZW1lbnQoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJvZHkpIHJldHVybjtcclxuICAgIFxyXG4gICAgICAgIGlmICh0aGlzLnkgPj0gdGhpcy5fdmVydGljYWxSYW5nZS5taW4pIHtcclxuICAgICAgICAgICAgKHRoaXMuYm9keS52ZWxvY2l0eSBhcyBQaGFzZXIuTWF0aC5WZWN0b3IyKS5zZXQoMCwgMCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NwYXduQ29tcGxldGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9pc0ludnVsbmVyYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnRpbWUuZGVsYXllZENhbGwoMTAwMCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGhhc2VzWzBdPy5vbkVudGVyPy4oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnJlc2V0KCk7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFBoYXNlSW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMuX3BoYXNlcyA9IHRoaXMuY3JlYXRlUGhhc2VzKCk7XHJcbiAgICAgICAgdGhpcy5fcGhhc2VUaW1lTGVmdCA9IHRoaXMuX3BoYXNlc1swXT8uZHVyYXRpb24gPz8gMDtcclxuICAgICAgICB0aGlzLl9oZWFsdGhDb21wb25lbnQuc2V0TGlmZSh0aGlzLl9waGFzZXNbMF0/LmhlYWx0aCA/PyAxKTtcclxuICAgICAgICB0aGlzLl9waGFzZXNbMF0/Lm9uRW50ZXI/LigpO1xyXG4gICAgICAgIHRoaXMuX3NwYXduQ29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9pc0ludnVsbmVyYWJsZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGN1cnJlbnRQaGFzZUluZGV4KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRQaGFzZUluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgYnVsbGV0U3Bhd25lcigpOiBCdWxsZXRTcGF3bmVyQ29tcG9uZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYnVsbGV0U3Bhd25lcjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgYnVsbGV0U3Bhd25lcih2YWx1ZTogQnVsbGV0U3Bhd25lckNvbXBvbmVudCkge1xyXG4gICAgICAgIHRoaXMuX2J1bGxldFNwYXduZXIgPSB2YWx1ZTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJQaGFzZXIiLCJCYXNlRW5lbXkiLCJDVVNUT01fRVZFTlRTIiwiQm9zc0VuZW15IiwiY29uc3RydWN0b3IiLCJzY2VuZSIsIngiLCJ5IiwiX3BoYXNlcyIsIl9jdXJyZW50UGhhc2VJbmRleCIsIl9waGFzZVRpbWVMZWZ0IiwiX2xhc3RNb3ZlbWVudENoYW5nZVRpbWUiLCJfbW92ZW1lbnRDaGFuZ2VDb29sZG93biIsIl9pc0ludnVsbmVyYWJsZSIsIl9pc1BoYXNlVHJhbnNpdGlvbmluZyIsIl9zcGF3bkNvbXBsZXRlIiwiX3ZlcnRpY2FsUmFuZ2UiLCJtaW4iLCJtYXgiLCJfdGFyZ2V0UG9zaXRpb24iLCJfbW92ZW1lbnRTcGVlZCIsIl9zY3JlZW5NYXJnaW4iLCJfY3VycmVudFNlY3Rpb24iLCJfc2VjdGlvbnMiLCJfbW92ZW1lbnRTdGF0ZSIsImluaXQiLCJldmVudEJ1cyIsImdldFBsYXllciIsIl9wbGF5ZXJHZXR0ZXIiLCJjcmVhdGVQaGFzZXMiLCJkdXJhdGlvbiIsIl9oZWFsdGhDb21wb25lbnQiLCJzZXRMaWZlIiwiaGVhbHRoIiwiaW5pdFNjcmVlblNlY3Rpb25zIiwiYm9keSIsInZlbG9jaXR5IiwiZW1pdCIsIkJPU1NfU1BBV05FRCIsInNjcmVlbldpZHRoIiwic2NhbGUiLCJ3aWR0aCIsInNlY3Rpb25XaWR0aCIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwiaXNJbnZ1bG5lcmFibGUiLCJzZXRJbnZ1bG5lcmFibGUiLCJpbnZ1bG5lcmFiaWxpdHlUaW1lciIsInRpbWUiLCJkZWxheWVkQ2FsbCIsImN1c3RvbVVwZGF0ZSIsImRlbHRhIiwiaGFuZGxlU3Bhd25Nb3ZlbWVudCIsImN1cnJlbnRQaGFzZSIsImhhbmRsZVBoYXNlVHJhbnNpdGlvbiIsInVwZGF0ZSIsImhhbmRsZU1vdmVtZW50IiwiaGFuZGxlRGVhdGgiLCJfZXZlbnRCdXNDb21wb25lbnQiLCJCT1NTX0RFRkVBVEVEIiwiYnVsbGV0U3Bhd25lciIsImNsZWFudXAiLCJvbkV4aXQiLCJkaWUiLCJuZXh0UGhhc2UiLCJyZXNldCIsImJ1bGxldENsZWFyIiwiQk9TU19QSEFTRV9DSEFOR0UiLCJvbkVudGVyIiwiY29uc29sZSIsImxvZyIsIm5vdyIsIkRhdGUiLCJjaG9vc2VOZXdUYXJnZXQiLCJkeCIsImR5IiwiZGlzdGFuY2UiLCJNYXRoIiwic3FydCIsInNldCIsInVwZGF0ZVZlbG9jaXR5IiwicGxheWVyIiwiY3VycmVudFNlY3Rpb24iLCJnZXRDdXJyZW50U2VjdGlvbiIsInBsYXllclNlY3Rpb24iLCJmaW5kSW5kZXgiLCJzIiwidGFyZ2V0WFNlY3Rpb24iLCJwbGF5ZXJPZmZzZXRYIiwic2lnbiIsIkJldHdlZW4iLCJDbGFtcCIsInNlY3Rpb24iLCJzcGVlZCIsInZ4IiwidnkiLCJjdXJyZW50UGhhc2VJbmRleCIsIl9idWxsZXRTcGF3bmVyIiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/entities/enemies/bosses/base-boss.ts\n");

/***/ }),

/***/ "./src/game/entities/enemies/bosses/first-boss-enemy.ts":
/*!**************************************************************!*\
  !*** ./src/game/entities/enemies/bosses/first-boss-enemy.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FirstBoss: () => (/* binding */ FirstBoss)\n/* harmony export */ });\n/* harmony import */ var _game_components_weapon_bullet_spawner_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/game/components/weapon/bullet-spawner-component */ \"./src/game/components/weapon/bullet-spawner-component.ts\");\n/* harmony import */ var _base_boss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base-boss */ \"./src/game/entities/enemies/bosses/base-boss.ts\");\n\n\nclass FirstBoss extends _base_boss__WEBPACK_IMPORTED_MODULE_1__.BossEnemy {\n    initSprites() {\n        this._shipSprite = this.scene.add.sprite(0, 0, \"fighter\", 0);\n        this._engineSprite = this.scene.add.sprite(0, 0, \"fighter_engine\").setFlipY(true).play(\"fighter_engine\");\n        this.add([\n            this._engineSprite,\n            this._shipSprite\n        ]);\n    }\n    createPhases() {\n        return [\n            // // Фаза 1: Синусоидальные волны\n            // {\n            //     health: 1000,\n            //     duration: 15000,\n            //     onEnter: () => {\n            //         this.fireInterval = 200;\n            //         this._movementSpeed = 120;\n            //     },\n            //     update: (time: number, delta: number) => {\n            //         if (time - this.lastShootTime >= this.fireInterval) {\n            //             this.lastShootTime = time;\n            //             const directions = [\n            //                 new Phaser.Math.Vector2(0, 1),\n            //                 new Phaser.Math.Vector2(0.5, 0.8),\n            //                 new Phaser.Math.Vector2(-0.5, 0.8)\n            //             ];\n            //             this.bulletSpawner.spawn({\n            //                 directions,\n            //                 speed: 300,\n            //                 lifespan: 5000,\n            //                 animationKey: 'bullet',\n            //                 behaviors: [\n            //                     new SinWaveBehavior(0.005, 0.15, 90),\n            //                 ]\n            //             });\n            //         }\n            //     }\n            // },\n            // // Фаза 2: Ускоряющиеся спирали\n            // {\n            //     health: 1200,\n            //     duration: 15000,\n            //     onEnter: () => {\n            //         this.fireInterval = 300;\n            //         this._movementSpeed = 150;\n            //         this._spiralAngle = 0;\n            //     },\n            //     update: (time: number, delta: number) => {\n            //         if (time - this.lastShootTime < this.fireInterval) return;\n            //         this.lastShootTime = time;\n            //         const spiralArms = 4;\n            //         const bulletsPerArm = 3;\n            //         for (let arm = 0; arm < spiralArms; arm++) {\n            //             const angleOffset = arm * (2 * Math.PI / spiralArms);\n            //             this._spiralAngle += 0.1;\n            //             for (let bulletNum = 0; bulletNum < bulletsPerArm; bulletNum++) {\n            //                 const angle = angleOffset + this._spiralAngle + bulletNum * 0.3;\n            //                 const direction = new Phaser.Math.Vector2(\n            //                     Math.cos(angle),\n            //                     Math.sin(angle)\n            //                 );\n            //                 this.bulletSpawner.spawn({\n            //                     directions: [direction],\n            //                     speed: 150 + bulletNum * 30,\n            //                     lifespan: 3500,\n            //                     animationKey: 'bullet',\n            //                     behaviors: [\n            //                         new AcceleratingBehavior(80 + bulletNum * 15),\n            //                     ]\n            //                 });\n            //             }\n            //         }\n            //     }\n            // },\n            // Фаза 3: Самонаводящиеся пули с задержкой\n            // {\n            //     health: 1500,\n            //     duration: 20000,\n            //     onEnter: () => {\n            //         this.fireInterval = 700;\n            //         this._movementSpeed = 180;\n            //     },\n            //     update: (time: number, delta: number) => {\n            //         if (time - this.lastShootTime < this.fireInterval) return;\n            //         this.lastShootTime = time;\n            //         const circleCount = 12;\n            //         for (let i = 0; i < circleCount; i++) {\n            //             const angle = Phaser.Math.DegToRad(i * (360 / circleCount));\n            //             const direction = new Phaser.Math.Vector2(\n            //                 Math.cos(angle),\n            //                 Math.sin(angle)\n            //             );\n            //             this.bulletSpawner.spawn({\n            //                 directions: [direction],\n            //                 speed: 150,\n            //                 lifespan: 5000,\n            //                 animationKey: 'bullet',\n            //                 behaviors: [\n            //                     new HomingBehavior(\n            //                         0.08,\n            //                         () => this.scene.registry.get('player'),\n            //                         i * 300,\n            //                         1500 // Длительность наведения 1.5 сек\n            //                     ),\n            //                     new AcceleratingBehavior(40)\n            //                 ]\n            //             });\n            //         }\n            //     }\n            // },\n            // // Фаза 4: Пули с резкой сменой направления\n            // {\n            //     health: 1800,\n            //     duration: 20000,\n            //     onEnter: () => {\n            //         this.fireInterval = 500;\n            //         this._movementSpeed = 200;\n            //     },\n            //     update: (time: number, delta: number) => {\n            //         if (time - this.lastShootTime < this.fireInterval) return;\n            //         this.lastShootTime = time;\n            //         // Создаем 12 направлений в веере\n            //         const directions = Array.from({length: 12}, (_, i) => {\n            //             const angle = Phaser.Math.DegToRad(i * 30 - 75); // От -75° до +75°\n            //             return new Phaser.Math.Vector2(\n            //                 Math.cos(angle),\n            //                 Math.sin(angle)\n            //             );\n            //         });\n            //         this.bulletSpawner.spawn({\n            //             directions,\n            //             speed: 300, // Высокая начальная скорость\n            //             lifespan: 3000,\n            //             animationKey: 'bullet',\n            //             behaviors: [\n            //                 new DirectionChangeBehavior(\n            //                     1000, // Через 1 сек\n            //                     Math.PI // Разворот на 180°\n            //                 ),\n            //                 new AcceleratingBehavior(50)\n            //             ]\n            //         });\n            //     }\n            // },\n            {\n                health: 1000,\n                duration: 30000,\n                dropItems: [\n                    {\n                        type: \"HEALTH\",\n                        count: 1,\n                        spread: 30\n                    },\n                    {\n                        type: \"BOMB\",\n                        count: 1,\n                        spread: 30\n                    }\n                ],\n                onEnter: ()=>{\n                    this.fireInterval = 200;\n                    this._movementSpeed = 120;\n                    this._movementChangeCooldown = 2000;\n                },\n                update: (time, delta)=>{\n                    if (time - this.lastShootTime < this.fireInterval) return;\n                    if (this.isInvulnerable()) return;\n                    this.lastShootTime = time;\n                    const player = this._playerGetter?.(); // Получаем игрока\n                    if (!player) return; // Если игрока нет, выходим\n                    // Вычисляем угол между боссом и игроком\n                    const angleToPlayer = Phaser.Math.RadToDeg(Phaser.Math.Angle.Between(this.x, this.y, player.x, player.y));\n                    // Задаем углы разлета пуль относительно направления на игрока\n                    const spreadAngles = [\n                        -30,\n                        -20,\n                        -10,\n                        0,\n                        10,\n                        20,\n                        30\n                    ];\n                    const directions = spreadAngles.map((deg)=>{\n                        // Суммируем угол на игрока и угол разлета\n                        const totalAngle = angleToPlayer + deg;\n                        return new Phaser.Math.Vector2(Math.cos(Phaser.Math.DegToRad(totalAngle)), Math.sin(Phaser.Math.DegToRad(totalAngle)));\n                    });\n                    this.bulletSpawner.spawn({\n                        directions,\n                        speed: 400,\n                        lifespan: 6000,\n                        animationKey: \"bullet\",\n                        size: {\n                            width: 14,\n                            height: 18\n                        },\n                        flipY: false,\n                        scale: 0.8\n                    });\n                }\n            },\n            {\n                health: 1200,\n                duration: 30000,\n                onEnter: ()=>{\n                    this.fireInterval = 300;\n                    this._movementSpeed = 180;\n                    this._movementChangeCooldown = 1500;\n                    this._shotCounter = 0; // Счётчик залпов\n                    this._lineOffset = 0; // Текущее смещение линий\n                },\n                update: (time, delta)=>{\n                    if (time - this.lastShootTime < this.fireInterval) return;\n                    if (this.isInvulnerable()) return;\n                    this.lastShootTime = time;\n                    const bulletCount = 6;\n                    const screenWidth = this.scene.scale.width;\n                    const lineSpacing = screenWidth / bulletCount;\n                    // Смещаем линии каждые n залпов (можно настроить)\n                    if (this._shotCounter % 1 === 0) {\n                        this._lineOffset = (this._lineOffset + lineSpacing * 0.2) % (lineSpacing * 10);\n                    }\n                    this._shotCounter++;\n                    Array(bulletCount).fill(0).forEach((_, i)=>{\n                        // Позиция с учётом смещения\n                        const xPos = ((i + 0.5) * lineSpacing + this._lineOffset) % screenWidth;\n                        const directionY = i % 2 === 0 ? 1 : -1;\n                        const yPos = i % 2 === 0 ? 0 : this.scene.scale.height;\n                        const speed = i % 2 === 0 ? 200 : 300;\n                        this.bulletSpawner.spawn({\n                            directions: [\n                                new Phaser.Math.Vector2(0, directionY)\n                            ],\n                            speed: speed,\n                            lifespan: 4000,\n                            animationKey: \"bullet\",\n                            size: {\n                                width: 14,\n                                height: 18\n                            },\n                            flipY: true,\n                            scale: 0.8,\n                            spawnPosition: {\n                                x: xPos,\n                                y: yPos\n                            }\n                        });\n                    });\n                }\n            },\n            {\n                health: 1200,\n                duration: 30000,\n                onEnter: ()=>{\n                    this._targetPosition = {\n                        x: this.scene.scale.width / 2,\n                        y: 150\n                    };\n                    this._movementState = \"moving\";\n                    this._movementChangeCooldown = Infinity;\n                    // Ожидание достижения центра\n                    this.scene.time.delayedCall(100, ()=>{\n                        if (this.body && Phaser.Math.Distance.BetweenPoints(this._targetPosition, this.body.position) < 10) {\n                            this.body.velocity.set(0, 0);\n                        }\n                    }, [], this);\n                    this.fireInterval = 40;\n                },\n                update: (time, delta)=>{\n                    if (time - this.lastShootTime < this.fireInterval) return;\n                    if (this.body && this.body.velocity.x != 0 && this.body.velocity.y != 0) return;\n                    if (this.isInvulnerable()) return;\n                    this.lastShootTime = time;\n                    const directions = Array(4).fill(0).map(()=>{\n                        let angle;\n                        if (Phaser.Math.Between(1, 100) <= 25) {\n                            angle = Math.PI * -1.5 + Phaser.Math.FloatBetween(-0.5, 0.5); // -30° to +30°\n                        } else {\n                            angle = Phaser.Math.FloatBetween(0, Math.PI * 2); // Полный рандом\n                        }\n                        return new Phaser.Math.Vector2(Math.cos(angle), Math.sin(angle));\n                    });\n                    this.bulletSpawner.spawn({\n                        directions,\n                        speed: Phaser.Math.Between(300, 550),\n                        lifespan: 2000,\n                        animationKey: \"bullet\",\n                        size: {\n                            width: 14,\n                            height: 18\n                        },\n                        flipY: false,\n                        scale: 0.8\n                    });\n                }\n            },\n            {\n                health: 3500,\n                duration: 60000,\n                onEnter: ()=>{\n                    this._targetPosition = {\n                        x: this.scene.scale.width / 2,\n                        y: this.scene.scale.height / 2 - 50\n                    };\n                    this._movementState = \"moving\";\n                    this._movementChangeCooldown = Infinity;\n                    // Ожидание достижения центра\n                    this.scene.time.delayedCall(100, ()=>{\n                        if (this.body && Phaser.Math.Distance.BetweenPoints(this._targetPosition, this.body.position) < 10) {\n                            this.body.velocity.set(0, 0);\n                        }\n                    }, [], this);\n                    this.fireInterval = 30;\n                    this._patternAngle = 0; // Базовый угол Phaser.Math.Between(0, 360)\n                    this._patternCounter = 0; // Счётчик итераций\n                },\n                update: (time, delta)=>{\n                    // Проверяем интервал стрельбы\n                    if (time - this.lastShootTime < this.fireInterval) return;\n                    if (this.body && this.body.velocity.x != 0 && this.body.velocity.y != 0) return;\n                    if (this.isInvulnerable()) return;\n                    this.lastShootTime = time;\n                    const BULLETS_IN_RING = 5;\n                    const ANGLE_STEP = 20; // Шаг изменения угла\n                    // Создаем кольцо из 5 пуль\n                    const directions = Array(BULLETS_IN_RING).fill(0).map((_, i)=>{\n                        const angleDeg = this._patternAngle + i * (360 / BULLETS_IN_RING);\n                        const angleRad = Phaser.Math.DegToRad(angleDeg);\n                        return new Phaser.Math.Vector2(Math.cos(angleRad), Math.sin(angleRad));\n                    });\n                    this.bulletSpawner.spawn({\n                        directions,\n                        speed: 240,\n                        lifespan: 2000,\n                        animationKey: \"bullet\",\n                        size: {\n                            width: 14,\n                            height: 18\n                        },\n                        flipY: false,\n                        scale: 0.8\n                    });\n                    // Обновляем угол с синусоидальным смещением\n                    this._patternAngle += Math.sin(Phaser.Math.DegToRad(this._patternCounter)) * ANGLE_STEP;\n                    this._patternCounter++;\n                }\n            }\n        ];\n    }\n    init(eventBus, getPlayer) {\n        super.init(eventBus, getPlayer);\n        this.bulletSpawner = new _game_components_weapon_bullet_spawner_component__WEBPACK_IMPORTED_MODULE_0__.BulletSpawnerComponent(this.scene, this, \"bullet\", 300);\n        this.initSprites();\n        this.initPhysics();\n    }\n    initPhysics() {\n        this.scene.add.existing(this);\n        this.scene.physics.add.existing(this);\n        // Настраиваем хитбокс\n        if (this.body instanceof Phaser.Physics.Arcade.Body) {\n            this.body.setSize(this.hitboxWidth, this.hitboxHeight).setOffset(this.hitboxOffsetX, this.hitboxOffsetY);\n        }\n        // Увеличиваем спрайты\n        this.setScale(2);\n    }\n    getInitialHealth() {\n        return 100;\n    }\n    reset() {\n        super.reset();\n        this._engineSprite.setVisible(true);\n        this.bulletSpawner.bulletClear();\n    }\n    destroy(fromScene) {\n        this._engineSprite.destroy(fromScene);\n        super.destroy(fromScene);\n        this.bulletSpawner?.bulletClear();\n    }\n    get shipAssetKey() {\n        return \"fighter\";\n    }\n    get shipDestroyedAnimationKey() {\n        return \"fighter_destroy\";\n    }\n    constructor(...args){\n        super(...args);\n        this.lastShootTime = 0;\n        this.fireInterval = 200;\n        this._spiralAngle = 0;\n        this._splitTimer = 0;\n        this._homingTimer = 0;\n        // Размеры хитбокса (ширина, высота)\n        this.hitboxWidth = 48;\n        this.hitboxHeight = 48;\n        // Смещение хитбокса (чтобы центрировать)\n        this.hitboxOffsetX = -24;\n        this.hitboxOffsetY = -24;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy9lbmVtaWVzL2Jvc3Nlcy9maXJzdC1ib3NzLWVuZW15LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUMyRjtBQUNuRDtBQUdqQyxNQUFNRSxrQkFBa0JELGlEQUFTQTtJQXNCMUJFLGNBQW9CO1FBQzFCLElBQUksQ0FBQ0MsV0FBVyxHQUFHLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxHQUFHLENBQUNDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsV0FBVztRQUMxRCxJQUFJLENBQUNDLGFBQWEsR0FBRyxJQUFJLENBQUNILEtBQUssQ0FBQ0MsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxHQUFHLGtCQUM1Q0UsUUFBUSxDQUFDLE1BQ1RDLElBQUksQ0FBQztRQUVWLElBQUksQ0FBQ0osR0FBRyxDQUFDO1lBQUMsSUFBSSxDQUFDRSxhQUFhO1lBQUUsSUFBSSxDQUFDSixXQUFXO1NBQUM7SUFDbkQ7SUFFVU8sZUFBZTtRQUNyQixPQUFPO1lBQ0gsa0NBQWtDO1lBQ2xDLElBQUk7WUFDSixvQkFBb0I7WUFDcEIsdUJBQXVCO1lBQ3ZCLHVCQUF1QjtZQUN2QixtQ0FBbUM7WUFDbkMscUNBQXFDO1lBQ3JDLFNBQVM7WUFDVCxpREFBaUQ7WUFDakQsZ0VBQWdFO1lBQ2hFLHlDQUF5QztZQUV6QyxtQ0FBbUM7WUFDbkMsaURBQWlEO1lBQ2pELHFEQUFxRDtZQUNyRCxxREFBcUQ7WUFDckQsaUJBQWlCO1lBRWpCLHlDQUF5QztZQUN6Qyw4QkFBOEI7WUFDOUIsOEJBQThCO1lBQzlCLGtDQUFrQztZQUNsQywwQ0FBMEM7WUFDMUMsK0JBQStCO1lBQy9CLDREQUE0RDtZQUM1RCxvQkFBb0I7WUFDcEIsa0JBQWtCO1lBQ2xCLFlBQVk7WUFDWixRQUFRO1lBQ1IsS0FBSztZQUVMLGtDQUFrQztZQUNsQyxJQUFJO1lBQ0osb0JBQW9CO1lBQ3BCLHVCQUF1QjtZQUN2Qix1QkFBdUI7WUFDdkIsbUNBQW1DO1lBQ25DLHFDQUFxQztZQUNyQyxpQ0FBaUM7WUFD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QUFDQyxhQUFhO1FBQzdEO1FBRUEsc0JBQXNCO1FBQ3RCLElBQUksQ0FBQ0MsUUFBUSxDQUFDO0lBQ2xCO0lBRVVDLG1CQUEyQjtRQUNqQyxPQUFPO0lBQ1g7SUFFQUMsUUFBYztRQUNWLEtBQUssQ0FBQ0E7UUFDTixJQUFJLENBQUNsRyxhQUFhLENBQUNtRyxVQUFVLENBQUM7UUFDOUIsSUFBSSxDQUFDN0QsYUFBYSxDQUFDOEQsV0FBVztJQUNsQztJQUVBQyxRQUFRQyxTQUFtQixFQUFRO1FBQy9CLElBQUksQ0FBQ3RHLGFBQWEsQ0FBQ3FHLE9BQU8sQ0FBQ0M7UUFDM0IsS0FBSyxDQUFDRCxRQUFRQztRQUNkLElBQUksQ0FBQ2hFLGFBQWEsRUFBRThEO0lBQ3hCO0lBRUEsSUFBSUcsZUFBdUI7UUFBRSxPQUFRO0lBQVc7SUFDaEQsSUFBSUMsNEJBQW9DO1FBQUUsT0FBUTtJQUFtQjs7O2FBamI3RHZGLGdCQUFnQjthQUNoQk4sZUFBZTthQVFmOEYsZUFBdUI7YUFDdkJDLGNBQXNCO2FBQ3RCQyxlQUF1QjtRQUUvQixvQ0FBb0M7YUFDNUJoQixjQUFzQjthQUN0QkMsZUFBdUI7UUFFL0IseUNBQXlDO2FBQ2pDRSxnQkFBd0IsQ0FBQzthQUN6QkMsZ0JBQXdCLENBQUM7O0FBK1pyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9lbnRpdGllcy9lbmVtaWVzL2Jvc3Nlcy9maXJzdC1ib3NzLWVuZW15LnRzPzdmMzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRCdXNDb21wb25lbnQgfSBmcm9tICdAL2dhbWUvY29tcG9uZW50cy9ldmVudHMvZXZlbnQtYnVzLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEJ1bGxldFNwYXduZXJDb21wb25lbnQgfSBmcm9tICdAL2dhbWUvY29tcG9uZW50cy93ZWFwb24vYnVsbGV0LXNwYXduZXItY29tcG9uZW50JztcclxuaW1wb3J0IHsgQm9zc0VuZW15IH0gZnJvbSAnLi9iYXNlLWJvc3MnO1xyXG5pbXBvcnQgeyBTaW5XYXZlQmVoYXZpb3IsIEFjY2VsZXJhdGluZ0JlaGF2aW9yLCBIb21pbmdCZWhhdmlvciwgRGlyZWN0aW9uQ2hhbmdlQmVoYXZpb3IgfSBmcm9tICdAL2dhbWUvY29tcG9uZW50cy93ZWFwb24vYnVsbGV0LWJlaGF2aW9ycyc7XHJcblxyXG5leHBvcnQgY2xhc3MgRmlyc3RCb3NzIGV4dGVuZHMgQm9zc0VuZW15IHtcclxuICAgIHByaXZhdGUgbGFzdFNob290VGltZSA9IDA7XHJcbiAgICBwcml2YXRlIGZpcmVJbnRlcnZhbCA9IDIwMDtcclxuICAgIHByaXZhdGUgX3BhdHRlcm5BbmdsZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfcGF0dGVybkNvdW50ZXI6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX3Nob3RDb3VudGVyOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9saW5lT2Zmc2V0OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9zaGlwU3ByaXRlITogUGhhc2VyLkdhbWVPYmplY3RzLlNwcml0ZTtcclxuICAgIHByaXZhdGUgX2VuZ2luZVNwcml0ZSE6IFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGU7XHJcblxyXG4gICAgcHJpdmF0ZSBfc3BpcmFsQW5nbGU6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIF9zcGxpdFRpbWVyOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBfaG9taW5nVGltZXI6IG51bWJlciA9IDA7XHJcblxyXG4gICAgLy8g0KDQsNC30LzQtdGA0Ysg0YXQuNGC0LHQvtC60YHQsCAo0YjQuNGA0LjQvdCwLCDQstGL0YHQvtGC0LApXHJcbiAgICBwcml2YXRlIGhpdGJveFdpZHRoOiBudW1iZXIgPSA0ODtcclxuICAgIHByaXZhdGUgaGl0Ym94SGVpZ2h0OiBudW1iZXIgPSA0ODtcclxuICAgIFxyXG4gICAgLy8g0KHQvNC10YnQtdC90LjQtSDRhdC40YLQsdC+0LrRgdCwICjRh9GC0L7QsdGLINGG0LXQvdGC0YDQuNGA0L7QstCw0YLRjClcclxuICAgIHByaXZhdGUgaGl0Ym94T2Zmc2V0WDogbnVtYmVyID0gLTI0O1xyXG4gICAgcHJpdmF0ZSBoaXRib3hPZmZzZXRZOiBudW1iZXIgPSAtMjQ7XHJcblxyXG4gICAgcHJvdGVjdGVkIGluaXRTcHJpdGVzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX3NoaXBTcHJpdGUgPSB0aGlzLnNjZW5lLmFkZC5zcHJpdGUoMCwgMCwgJ2ZpZ2h0ZXInLCAwKTtcclxuICAgICAgICB0aGlzLl9lbmdpbmVTcHJpdGUgPSB0aGlzLnNjZW5lLmFkZC5zcHJpdGUoMCwgMCwgJ2ZpZ2h0ZXJfZW5naW5lJylcclxuICAgICAgICAgICAgLnNldEZsaXBZKHRydWUpXHJcbiAgICAgICAgICAgIC5wbGF5KCdmaWdodGVyX2VuZ2luZScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuYWRkKFt0aGlzLl9lbmdpbmVTcHJpdGUsIHRoaXMuX3NoaXBTcHJpdGVdKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgY3JlYXRlUGhhc2VzKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIC8vIC8vINCk0LDQt9CwIDE6INCh0LjQvdGD0YHQvtC40LTQsNC70YzQvdGL0LUg0LLQvtC70L3Ri1xyXG4gICAgICAgICAgICAvLyB7XHJcbiAgICAgICAgICAgIC8vICAgICBoZWFsdGg6IDEwMDAsXHJcbiAgICAgICAgICAgIC8vICAgICBkdXJhdGlvbjogMTUwMDAsXHJcbiAgICAgICAgICAgIC8vICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5maXJlSW50ZXJ2YWwgPSAyMDA7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5fbW92ZW1lbnRTcGVlZCA9IDEyMDtcclxuICAgICAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgICAgIC8vICAgICB1cGRhdGU6ICh0aW1lOiBudW1iZXIsIGRlbHRhOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBpZiAodGltZSAtIHRoaXMubGFzdFNob290VGltZSA+PSB0aGlzLmZpcmVJbnRlcnZhbCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLmxhc3RTaG9vdFRpbWUgPSB0aW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKDAsIDEpLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgbmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoMC41LCAwLjgpLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgbmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoLTAuNSwgMC44KVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5idWxsZXRTcGF3bmVyLnNwYXduKHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGRpcmVjdGlvbnMsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBzcGVlZDogMzAwLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgbGlmZXNwYW46IDUwMDAsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBhbmltYXRpb25LZXk6ICdidWxsZXQnLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgYmVoYXZpb3JzOiBbXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbmV3IFNpbldhdmVCZWhhdmlvcigwLjAwNSwgMC4xNSwgOTApLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH0sXHJcblxyXG4gICAgICAgICAgICAvLyAvLyDQpNCw0LfQsCAyOiDQo9GB0LrQvtGA0Y/RjtGJ0LjQtdGB0Y8g0YHQv9C40YDQsNC70LhcclxuICAgICAgICAgICAgLy8ge1xyXG4gICAgICAgICAgICAvLyAgICAgaGVhbHRoOiAxMjAwLFxyXG4gICAgICAgICAgICAvLyAgICAgZHVyYXRpb246IDE1MDAwLFxyXG4gICAgICAgICAgICAvLyAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMuZmlyZUludGVydmFsID0gMzAwO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMuX21vdmVtZW50U3BlZWQgPSAxNTA7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5fc3BpcmFsQW5nbGUgPSAwO1xyXG4gICAgICAgICAgICAvLyAgICAgfSxcclxuICAgICAgICAgICAgLy8gICAgIHVwZGF0ZTogKHRpbWU6IG51bWJlciwgZGVsdGE6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGlmICh0aW1lIC0gdGhpcy5sYXN0U2hvb3RUaW1lIDwgdGhpcy5maXJlSW50ZXJ2YWwpIHJldHVybjtcclxuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLmxhc3RTaG9vdFRpbWUgPSB0aW1lO1xyXG5cclxuICAgICAgICAgICAgLy8gICAgICAgICBjb25zdCBzcGlyYWxBcm1zID0gNDtcclxuICAgICAgICAgICAgLy8gICAgICAgICBjb25zdCBidWxsZXRzUGVyQXJtID0gMztcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gICAgICAgICBmb3IgKGxldCBhcm0gPSAwOyBhcm0gPCBzcGlyYWxBcm1zOyBhcm0rKykge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zdCBhbmdsZU9mZnNldCA9IGFybSAqICgyICogTWF0aC5QSSAvIHNwaXJhbEFybXMpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLl9zcGlyYWxBbmdsZSArPSAwLjE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBmb3IgKGxldCBidWxsZXROdW0gPSAwOyBidWxsZXROdW0gPCBidWxsZXRzUGVyQXJtOyBidWxsZXROdW0rKykge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBhbmdsZU9mZnNldCArIHRoaXMuX3NwaXJhbEFuZ2xlICsgYnVsbGV0TnVtICogMC4zO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gbmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLmJ1bGxldFNwYXduZXIuc3Bhd24oe1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbnM6IFtkaXJlY3Rpb25dLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHNwZWVkOiAxNTAgKyBidWxsZXROdW0gKiAzMCxcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBsaWZlc3BhbjogMzUwMCxcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25LZXk6ICdidWxsZXQnLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJlaGF2aW9yczogW1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQWNjZWxlcmF0aW5nQmVoYXZpb3IoODAgKyBidWxsZXROdW0gKiAxNSksXHJcblxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyB9LFxyXG5cclxuICAgICAgICAgICAgLy8g0KTQsNC30LAgMzog0KHQsNC80L7QvdCw0LLQvtC00Y/RidC40LXRgdGPINC/0YPQu9C4INGBINC30LDQtNC10YDQttC60L7QuVxyXG4gICAgICAgICAgICAvLyB7XHJcbiAgICAgICAgICAgIC8vICAgICBoZWFsdGg6IDE1MDAsXHJcbiAgICAgICAgICAgIC8vICAgICBkdXJhdGlvbjogMjAwMDAsXHJcbiAgICAgICAgICAgIC8vICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5maXJlSW50ZXJ2YWwgPSA3MDA7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5fbW92ZW1lbnRTcGVlZCA9IDE4MDtcclxuICAgICAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgICAgIC8vICAgICB1cGRhdGU6ICh0aW1lOiBudW1iZXIsIGRlbHRhOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBpZiAodGltZSAtIHRoaXMubGFzdFNob290VGltZSA8IHRoaXMuZmlyZUludGVydmFsKSByZXR1cm47XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5sYXN0U2hvb3RUaW1lID0gdGltZTtcclxuXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc3QgY2lyY2xlQ291bnQgPSAxMjtcclxuICAgICAgICAgICAgLy8gICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNpcmNsZUNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBQaGFzZXIuTWF0aC5EZWdUb1JhZChpICogKDM2MCAvIGNpcmNsZUNvdW50KSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgTWF0aC5zaW4oYW5nbGUpXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLmJ1bGxldFNwYXduZXIuc3Bhd24oe1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgZGlyZWN0aW9uczogW2RpcmVjdGlvbl0sXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBzcGVlZDogMTUwLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgbGlmZXNwYW46IDUwMDAsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBhbmltYXRpb25LZXk6ICdidWxsZXQnLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgYmVoYXZpb3JzOiBbXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbmV3IEhvbWluZ0JlaGF2aW9yKFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAwLjA4LFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLnNjZW5lLnJlZ2lzdHJ5LmdldCgncGxheWVyJyksXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIGkgKiAzMDAsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIDE1MDAgLy8g0JTQu9C40YLQtdC70YzQvdC+0YHRgtGMINC90LDQstC10LTQtdC90LjRjyAxLjUg0YHQtdC6XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBuZXcgQWNjZWxlcmF0aW5nQmVoYXZpb3IoNDApXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gfSxcclxuXHJcbiAgICAgICAgICAgIC8vIC8vINCk0LDQt9CwIDQ6INCf0YPQu9C4INGBINGA0LXQt9C60L7QuSDRgdC80LXQvdC+0Lkg0L3QsNC/0YDQsNCy0LvQtdC90LjRj1xyXG4gICAgICAgICAgICAvLyB7XHJcbiAgICAgICAgICAgIC8vICAgICBoZWFsdGg6IDE4MDAsXHJcbiAgICAgICAgICAgIC8vICAgICBkdXJhdGlvbjogMjAwMDAsXHJcbiAgICAgICAgICAgIC8vICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5maXJlSW50ZXJ2YWwgPSA1MDA7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5fbW92ZW1lbnRTcGVlZCA9IDIwMDtcclxuICAgICAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgICAgIC8vICAgICB1cGRhdGU6ICh0aW1lOiBudW1iZXIsIGRlbHRhOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBpZiAodGltZSAtIHRoaXMubGFzdFNob290VGltZSA8IHRoaXMuZmlyZUludGVydmFsKSByZXR1cm47XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5sYXN0U2hvb3RUaW1lID0gdGltZTtcclxuXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgLy8g0KHQvtC30LTQsNC10LwgMTIg0L3QsNC/0YDQsNCy0LvQtdC90LjQuSDQsiDQstC10LXRgNC1XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IEFycmF5LmZyb20oe2xlbmd0aDogMTJ9LCAoXywgaSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zdCBhbmdsZSA9IFBoYXNlci5NYXRoLkRlZ1RvUmFkKGkgKiAzMCAtIDc1KTsgLy8g0J7RgiAtNzXCsCDQtNC+ICs3NcKwXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHJldHVybiBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMihcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIE1hdGguY29zKGFuZ2xlKSxcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLmJ1bGxldFNwYXduZXIuc3Bhd24oe1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBkaXJlY3Rpb25zLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBzcGVlZDogMzAwLCAvLyDQktGL0YHQvtC60LDRjyDQvdCw0YfQsNC70YzQvdCw0Y8g0YHQutC+0YDQvtGB0YLRjFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBsaWZlc3BhbjogMzAwMCxcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgYW5pbWF0aW9uS2V5OiAnYnVsbGV0JyxcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgYmVoYXZpb3JzOiBbXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBuZXcgRGlyZWN0aW9uQ2hhbmdlQmVoYXZpb3IoXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgMTAwMCwgLy8g0KfQtdGA0LXQtyAxINGB0LXQulxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIE1hdGguUEkgLy8g0KDQsNC30LLQvtGA0L7RgiDQvdCwIDE4MMKwXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgbmV3IEFjY2VsZXJhdGluZ0JlaGF2aW9yKDUwKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH0sXHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaGVhbHRoOiAxMDAwLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMDAwLFxyXG4gICAgICAgICAgICAgICAgZHJvcEl0ZW1zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0hFQUxUSCcgYXMgY29uc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiAxLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWFkOiAzMCBcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdCT01CJyBhcyBjb25zdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IDEsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcHJlYWQ6IDMwXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmVJbnRlcnZhbCA9IDIwMDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlbWVudFNwZWVkID0gMTIwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVtZW50Q2hhbmdlQ29vbGRvd24gPSAyMDAwO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZTogKHRpbWU6IG51bWJlciwgZGVsdGE6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aW1lIC0gdGhpcy5sYXN0U2hvb3RUaW1lIDwgdGhpcy5maXJlSW50ZXJ2YWwpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ludnVsbmVyYWJsZSgpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0U2hvb3RUaW1lID0gdGltZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxheWVyID0gdGhpcy5fcGxheWVyR2V0dGVyPy4oKTsgLy8g0J/QvtC70YPRh9Cw0LXQvCDQuNCz0YDQvtC60LBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBsYXllcikgcmV0dXJuOyAvLyDQldGB0LvQuCDQuNCz0YDQvtC60LAg0L3QtdGCLCDQstGL0YXQvtC00LjQvFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDQktGL0YfQuNGB0LvRj9C10Lwg0YPQs9C+0Lsg0LzQtdC20LTRgyDQsdC+0YHRgdC+0Lwg0Lgg0LjQs9GA0L7QutC+0LxcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmdsZVRvUGxheWVyID0gUGhhc2VyLk1hdGguUmFkVG9EZWcoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBoYXNlci5NYXRoLkFuZ2xlLkJldHdlZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLngsIHRoaXMueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci54LCBwbGF5ZXIueVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g0JfQsNC00LDQtdC8INGD0LPQu9GLINGA0LDQt9C70LXRgtCwINC/0YPQu9GMINC+0YLQvdC+0YHQuNGC0LXQu9GM0L3QviDQvdCw0L/RgNCw0LLQu9C10L3QuNGPINC90LAg0LjQs9GA0L7QutCwXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ByZWFkQW5nbGVzID0gWy0zMCwgLTIwLCAtMTAsIDAsIDEwLCAyMCwgMzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBzcHJlYWRBbmdsZXMubWFwKGRlZyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINCh0YPQvNC80LjRgNGD0LXQvCDRg9Cz0L7QuyDQvdCwINC40LPRgNC+0LrQsCDQuCDRg9Cz0L7QuyDRgNCw0LfQu9C10YLQsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEFuZ2xlID0gYW5nbGVUb1BsYXllciArIGRlZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5jb3MoUGhhc2VyLk1hdGguRGVnVG9SYWQodG90YWxBbmdsZSkpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguc2luKFBoYXNlci5NYXRoLkRlZ1RvUmFkKHRvdGFsQW5nbGUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1bGxldFNwYXduZXIuc3Bhd24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGVlZDogNDAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWZlc3BhbjogNjAwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uS2V5OiAnYnVsbGV0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogeyB3aWR0aDogMTQsIGhlaWdodDogMTggfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxpcFk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMC44LFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaGVhbHRoOiAxMjAwLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMDAwLFxyXG4gICAgICAgICAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyZUludGVydmFsID0gMzAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVtZW50U3BlZWQgPSAxODA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZW1lbnRDaGFuZ2VDb29sZG93biA9IDE1MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2hvdENvdW50ZXIgPSAwOyAvLyDQodGH0ZHRgtGH0LjQuiDQt9Cw0LvQv9C+0LJcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9saW5lT2Zmc2V0ID0gMDsgIC8vINCi0LXQutGD0YnQtdC1INGB0LzQtdGJ0LXQvdC40LUg0LvQuNC90LjQuVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZTogKHRpbWU6IG51bWJlciwgZGVsdGE6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aW1lIC0gdGhpcy5sYXN0U2hvb3RUaW1lIDwgdGhpcy5maXJlSW50ZXJ2YWwpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ludnVsbmVyYWJsZSgpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0U2hvb3RUaW1lID0gdGltZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnVsbGV0Q291bnQgPSA2O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcmVlbldpZHRoID0gdGhpcy5zY2VuZS5zY2FsZS53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lU3BhY2luZyA9IHNjcmVlbldpZHRoIC8gYnVsbGV0Q291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g0KHQvNC10YnQsNC10Lwg0LvQuNC90LjQuCDQutCw0LbQtNGL0LUgbiDQt9Cw0LvQv9C+0LIgKNC80L7QttC90L4g0L3QsNGB0YLRgNC+0LjRgtGMKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zaG90Q291bnRlciAlIDEgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZU9mZnNldCA9ICh0aGlzLl9saW5lT2Zmc2V0ICsgbGluZVNwYWNpbmcgKiAwLjIpICUgKGxpbmVTcGFjaW5nICogMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaG90Q291bnRlcisrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBBcnJheShidWxsZXRDb3VudCkuZmlsbCgwKS5mb3JFYWNoKChfLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINCf0L7Qt9C40YbQuNGPINGBINGD0YfRkdGC0L7QvCDRgdC80LXRidC10L3QuNGPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHhQb3MgPSAoKGkgKyAwLjUpICogbGluZVNwYWNpbmcgKyB0aGlzLl9saW5lT2Zmc2V0KSAlIHNjcmVlbldpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXJlY3Rpb25ZID0gaSAlIDIgPT09IDAgPyAxIDogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHlQb3MgPSBpICUgMiA9PT0gMCA/IDAgOiB0aGlzLnNjZW5lLnNjYWxlLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWQgPSBpICUgMiA9PT0gMCA/IDIwMCA6IDMwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVsbGV0U3Bhd25lci5zcGF3bih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25zOiBbbmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoMCwgZGlyZWN0aW9uWSldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IHNwZWVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlmZXNwYW46IDQwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25LZXk6ICdidWxsZXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogeyB3aWR0aDogMTQsIGhlaWdodDogMTggfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsaXBZOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IDAuOCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXduUG9zaXRpb246IHsgeDogeFBvcywgeTogeVBvcyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaGVhbHRoOiAxMjAwLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMDAwLFxyXG4gICAgICAgICAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RhcmdldFBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLnNjZW5lLnNjYWxlLndpZHRoIC8gMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogMTUwXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlbWVudFN0YXRlID0gJ21vdmluZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZW1lbnRDaGFuZ2VDb29sZG93biA9IEluZmluaXR5O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyDQntC20LjQtNCw0L3QuNC1INC00L7RgdGC0LjQttC10L3QuNGPINGG0LXQvdGC0YDQsFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUudGltZS5kZWxheWVkQ2FsbCgxMDAsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9keSAmJiBQaGFzZXIuTWF0aC5EaXN0YW5jZS5CZXR3ZWVuUG9pbnRzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGFyZ2V0UG9zaXRpb24sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2R5LnBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYm9keS52ZWxvY2l0eSBhcyBQaGFzZXIuTWF0aC5WZWN0b3IyKS5zZXQoMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCBbXSwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJlSW50ZXJ2YWwgPSA0MDtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1cGRhdGU6ICh0aW1lOiBudW1iZXIsIGRlbHRhOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGltZSAtIHRoaXMubGFzdFNob290VGltZSA8IHRoaXMuZmlyZUludGVydmFsKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9keSAmJiB0aGlzLmJvZHkudmVsb2NpdHkueCAhPSAwICYmIHRoaXMuYm9keS52ZWxvY2l0eS55ICE9IDApIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ludnVsbmVyYWJsZSgpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0U2hvb3RUaW1lID0gdGltZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IEFycmF5KDQpLmZpbGwoMCkubWFwKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFuZ2xlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFBoYXNlci5NYXRoLkJldHdlZW4oMSwgMTAwKSA8PSAyNSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSBNYXRoLlBJICogKC0xLjUpICsgUGhhc2VyLk1hdGguRmxvYXRCZXR3ZWVuKC0wLjUsIDAuNSk7IC8vIC0zMMKwIHRvICszMMKwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IFBoYXNlci5NYXRoLkZsb2F0QmV0d2VlbigwLCBNYXRoLlBJICogMik7IC8vINCf0L7Qu9C90YvQuSDRgNCw0L3QtNC+0LxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKE1hdGguY29zKGFuZ2xlKSwgTWF0aC5zaW4oYW5nbGUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWxsZXRTcGF3bmVyLnNwYXduKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IFBoYXNlci5NYXRoLkJldHdlZW4oMzAwLCA1NTApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWZlc3BhbjogMjAwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uS2V5OiAnYnVsbGV0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogeyB3aWR0aDogMTQsIGhlaWdodDogMTggfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxpcFk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMC44LFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaGVhbHRoOiAzNTAwLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDYwMDAwLFxyXG4gICAgICAgICAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RhcmdldFBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLnNjZW5lLnNjYWxlLndpZHRoIC8gMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogdGhpcy5zY2VuZS5zY2FsZS5oZWlnaHQgLyAyIC0gNTBcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVtZW50U3RhdGUgPSAnbW92aW5nJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlbWVudENoYW5nZUNvb2xkb3duID0gSW5maW5pdHk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vINCe0LbQuNC00LDQvdC40LUg0LTQvtGB0YLQuNC20LXQvdC40Y8g0YbQtdC90YLRgNCwXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS50aW1lLmRlbGF5ZWRDYWxsKDEwMCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib2R5ICYmIFBoYXNlci5NYXRoLkRpc3RhbmNlLkJldHdlZW5Qb2ludHMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90YXJnZXRQb3NpdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvZHkucG9zaXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5ib2R5LnZlbG9jaXR5IGFzIFBoYXNlci5NYXRoLlZlY3RvcjIpLnNldCgwLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIFtdLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmVJbnRlcnZhbCA9IDMwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhdHRlcm5BbmdsZSA9IDA7ICAvLyDQkdCw0LfQvtCy0YvQuSDRg9Cz0L7QuyBQaGFzZXIuTWF0aC5CZXR3ZWVuKDAsIDM2MClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXR0ZXJuQ291bnRlciA9IDA7IC8vINCh0YfRkdGC0YfQuNC6INC40YLQtdGA0LDRhtC40LlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1cGRhdGU6ICh0aW1lOiBudW1iZXIsIGRlbHRhOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0LjQvdGC0LXRgNCy0LDQuyDRgdGC0YDQtdC70YzQsdGLXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgLSB0aGlzLmxhc3RTaG9vdFRpbWUgPCB0aGlzLmZpcmVJbnRlcnZhbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvZHkgJiYgdGhpcy5ib2R5LnZlbG9jaXR5LnggIT0gMCAmJiB0aGlzLmJvZHkudmVsb2NpdHkueSAhPSAwKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNJbnZ1bG5lcmFibGUoKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdFNob290VGltZSA9IHRpbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IEJVTExFVFNfSU5fUklORyA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgQU5HTEVfU1RFUCA9IDIwOyAvLyDQqNCw0LMg0LjQt9C80LXQvdC10L3QuNGPINGD0LPQu9CwXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g0KHQvtC30LTQsNC10Lwg0LrQvtC70YzRhtC+INC40LcgNSDQv9GD0LvRjFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBBcnJheShCVUxMRVRTX0lOX1JJTkcpLmZpbGwoMCkubWFwKChfLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlRGVnID0gdGhpcy5fcGF0dGVybkFuZ2xlICsgKGkgKiAoMzYwIC8gQlVMTEVUU19JTl9SSU5HKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlUmFkID0gUGhhc2VyLk1hdGguRGVnVG9SYWQoYW5nbGVEZWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoTWF0aC5jb3MoYW5nbGVSYWQpLCBNYXRoLnNpbihhbmdsZVJhZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWxsZXRTcGF3bmVyLnNwYXduKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDI0MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlmZXNwYW46IDIwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbktleTogJ2J1bGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IHsgd2lkdGg6IDE0LCBoZWlnaHQ6IDE4IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsaXBZOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IDAuOFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g0J7QsdC90L7QstC70Y/QtdC8INGD0LPQvtC7INGBINGB0LjQvdGD0YHQvtC40LTQsNC70YzQvdGL0Lwg0YHQvNC10YnQtdC90LjQtdC8XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGF0dGVybkFuZ2xlICs9IE1hdGguc2luKFBoYXNlci5NYXRoLkRlZ1RvUmFkKHRoaXMuX3BhdHRlcm5Db3VudGVyKSkgKiBBTkdMRV9TVEVQO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhdHRlcm5Db3VudGVyKys7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KGV2ZW50QnVzOiBFdmVudEJ1c0NvbXBvbmVudCwgZ2V0UGxheWVyOiAoKSA9PiBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlIHwgdW5kZWZpbmVkKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuaW5pdChldmVudEJ1cywgZ2V0UGxheWVyKTtcclxuICAgICAgICB0aGlzLmJ1bGxldFNwYXduZXIgPSBuZXcgQnVsbGV0U3Bhd25lckNvbXBvbmVudCh0aGlzLnNjZW5lLCB0aGlzLCAnYnVsbGV0JywgMzAwKTtcclxuICAgICAgICB0aGlzLmluaXRTcHJpdGVzKCk7XHJcbiAgICAgICAgdGhpcy5pbml0UGh5c2ljcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbml0UGh5c2ljcygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZC5leGlzdGluZyh0aGlzKTtcclxuICAgICAgICB0aGlzLnNjZW5lLnBoeXNpY3MuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCd0LDRgdGC0YDQsNC40LLQsNC10Lwg0YXQuNGC0LHQvtC60YFcclxuICAgICAgICBpZiAodGhpcy5ib2R5IGluc3RhbmNlb2YgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkJvZHkpIHtcclxuICAgICAgICAgICAgdGhpcy5ib2R5LnNldFNpemUodGhpcy5oaXRib3hXaWR0aCwgdGhpcy5oaXRib3hIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldE9mZnNldCh0aGlzLmhpdGJveE9mZnNldFgsIHRoaXMuaGl0Ym94T2Zmc2V0WSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDQo9Cy0LXQu9C40YfQuNCy0LDQtdC8INGB0L/RgNCw0LnRgtGLXHJcbiAgICAgICAgdGhpcy5zZXRTY2FsZSgyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0SW5pdGlhbEhlYWx0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAxMDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIucmVzZXQoKTtcclxuICAgICAgICB0aGlzLl9lbmdpbmVTcHJpdGUuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICB0aGlzLmJ1bGxldFNwYXduZXIuYnVsbGV0Q2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KGZyb21TY2VuZT86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9lbmdpbmVTcHJpdGUuZGVzdHJveShmcm9tU2NlbmUpO1xyXG4gICAgICAgIHN1cGVyLmRlc3Ryb3koZnJvbVNjZW5lKTtcclxuICAgICAgICB0aGlzLmJ1bGxldFNwYXduZXI/LmJ1bGxldENsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNoaXBBc3NldEtleSgpOiBzdHJpbmcgeyByZXR1cm4gICdmaWdodGVyJzsgfVxyXG4gICAgZ2V0IHNoaXBEZXN0cm95ZWRBbmltYXRpb25LZXkoKTogc3RyaW5nIHsgcmV0dXJuICAnZmlnaHRlcl9kZXN0cm95JzsgfVxyXG59Il0sIm5hbWVzIjpbIkJ1bGxldFNwYXduZXJDb21wb25lbnQiLCJCb3NzRW5lbXkiLCJGaXJzdEJvc3MiLCJpbml0U3ByaXRlcyIsIl9zaGlwU3ByaXRlIiwic2NlbmUiLCJhZGQiLCJzcHJpdGUiLCJfZW5naW5lU3ByaXRlIiwic2V0RmxpcFkiLCJwbGF5IiwiY3JlYXRlUGhhc2VzIiwiaGVhbHRoIiwiZHVyYXRpb24iLCJkcm9wSXRlbXMiLCJ0eXBlIiwiY291bnQiLCJzcHJlYWQiLCJvbkVudGVyIiwiZmlyZUludGVydmFsIiwiX21vdmVtZW50U3BlZWQiLCJfbW92ZW1lbnRDaGFuZ2VDb29sZG93biIsInVwZGF0ZSIsInRpbWUiLCJkZWx0YSIsImxhc3RTaG9vdFRpbWUiLCJpc0ludnVsbmVyYWJsZSIsInBsYXllciIsIl9wbGF5ZXJHZXR0ZXIiLCJhbmdsZVRvUGxheWVyIiwiUGhhc2VyIiwiTWF0aCIsIlJhZFRvRGVnIiwiQW5nbGUiLCJCZXR3ZWVuIiwieCIsInkiLCJzcHJlYWRBbmdsZXMiLCJkaXJlY3Rpb25zIiwibWFwIiwiZGVnIiwidG90YWxBbmdsZSIsIlZlY3RvcjIiLCJjb3MiLCJEZWdUb1JhZCIsInNpbiIsImJ1bGxldFNwYXduZXIiLCJzcGF3biIsInNwZWVkIiwibGlmZXNwYW4iLCJhbmltYXRpb25LZXkiLCJzaXplIiwid2lkdGgiLCJoZWlnaHQiLCJmbGlwWSIsInNjYWxlIiwiX3Nob3RDb3VudGVyIiwiX2xpbmVPZmZzZXQiLCJidWxsZXRDb3VudCIsInNjcmVlbldpZHRoIiwibGluZVNwYWNpbmciLCJBcnJheSIsImZpbGwiLCJmb3JFYWNoIiwiXyIsImkiLCJ4UG9zIiwiZGlyZWN0aW9uWSIsInlQb3MiLCJzcGF3blBvc2l0aW9uIiwiX3RhcmdldFBvc2l0aW9uIiwiX21vdmVtZW50U3RhdGUiLCJJbmZpbml0eSIsImRlbGF5ZWRDYWxsIiwiYm9keSIsIkRpc3RhbmNlIiwiQmV0d2VlblBvaW50cyIsInBvc2l0aW9uIiwidmVsb2NpdHkiLCJzZXQiLCJhbmdsZSIsIlBJIiwiRmxvYXRCZXR3ZWVuIiwiX3BhdHRlcm5BbmdsZSIsIl9wYXR0ZXJuQ291bnRlciIsIkJVTExFVFNfSU5fUklORyIsIkFOR0xFX1NURVAiLCJhbmdsZURlZyIsImFuZ2xlUmFkIiwiaW5pdCIsImV2ZW50QnVzIiwiZ2V0UGxheWVyIiwiaW5pdFBoeXNpY3MiLCJleGlzdGluZyIsInBoeXNpY3MiLCJQaHlzaWNzIiwiQXJjYWRlIiwiQm9keSIsInNldFNpemUiLCJoaXRib3hXaWR0aCIsImhpdGJveEhlaWdodCIsInNldE9mZnNldCIsImhpdGJveE9mZnNldFgiLCJoaXRib3hPZmZzZXRZIiwic2V0U2NhbGUiLCJnZXRJbml0aWFsSGVhbHRoIiwicmVzZXQiLCJzZXRWaXNpYmxlIiwiYnVsbGV0Q2xlYXIiLCJkZXN0cm95IiwiZnJvbVNjZW5lIiwic2hpcEFzc2V0S2V5Iiwic2hpcERlc3Ryb3llZEFuaW1hdGlvbktleSIsIl9zcGlyYWxBbmdsZSIsIl9zcGxpdFRpbWVyIiwiX2hvbWluZ1RpbWVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/entities/enemies/bosses/first-boss-enemy.ts\n");

/***/ }),

/***/ "./src/game/entities/enemies/common/circular-fighter-enemy.ts":
/*!********************************************************************!*\
  !*** ./src/game/entities/enemies/common/circular-fighter-enemy.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CircularFighterEnemy: () => (/* binding */ CircularFighterEnemy)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _game_components_movement_horizontal_movement_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/game/components/movement/horizontal-movement-component */ \"./src/game/components/movement/horizontal-movement-component.ts\");\n/* harmony import */ var _game_components_movement_vertical_movement_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/game/components/movement/vertical-movement-component */ \"./src/game/components/movement/vertical-movement-component.ts\");\n/* harmony import */ var _game_components_weapon_bullet_spawner_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/game/components/weapon/bullet-spawner-component */ \"./src/game/components/weapon/bullet-spawner-component.ts\");\n/* harmony import */ var _game_configs_game_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/game/configs/game-config */ \"./src/game/configs/game-config.ts\");\n/* harmony import */ var _game_entities_enemies_base_enemy__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/game/entities/enemies/base-enemy */ \"./src/game/entities/enemies/base-enemy.ts\");\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _game_components_input_ai_common_circular_fighter_input_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/game/components/input/ai/common/circular-fighter-input-component */ \"./src/game/components/input/ai/common/circular-fighter-input-component.ts\");\n\n\n\n\n\n\n\n\nclass CircularFighterEnemy extends _game_entities_enemies_base_enemy__WEBPACK_IMPORTED_MODULE_5__.BaseEnemy {\n    static{\n        this.enemyType = \"circular_fighter\";\n    }\n    constructor(scene, x, y){\n        super(scene, x, y);\n        this._waveCenterX = 0;\n        this._waveCenterY = 0;\n        this._stopDistance = _game_configs_game_config__WEBPACK_IMPORTED_MODULE_4__.CIRCULAR_FIGHTER_STOP_DISTANCE;\n        this._shootInterval = _game_configs_game_config__WEBPACK_IMPORTED_MODULE_4__.CIRCULAR_FIGHTER_SHOOT_INTERVAL;\n        this._shootCounter = 0;\n        this._maxShoots = _game_configs_game_config__WEBPACK_IMPORTED_MODULE_4__.CIRCULAR_FIGHTER_SHOOT_CYCLES;\n        this._currentTargetAngle = 0;\n        this._isMovingOut = false;\n        this.initSprites();\n    }\n    init(eventBus) {\n        super.init(eventBus);\n        this._inputComponent = new _game_components_input_ai_common_circular_fighter_input_component__WEBPACK_IMPORTED_MODULE_7__.CircularFighterInputComponent();\n        this._horizontalMovement = new _game_components_movement_horizontal_movement_component__WEBPACK_IMPORTED_MODULE_1__.HorizontalMovementComponent(this, this._inputComponent, _game_configs_game_config__WEBPACK_IMPORTED_MODULE_4__.CIRCULAR_FIGHTER_MOVEMENT_VELOCITY);\n        this._verticalMovement = new _game_components_movement_vertical_movement_component__WEBPACK_IMPORTED_MODULE_2__.VerticalMovementComponent(this, this._inputComponent, _game_configs_game_config__WEBPACK_IMPORTED_MODULE_4__.CIRCULAR_FIGHTER_MOVEMENT_VELOCITY);\n        this._bulletSpawner = new _game_components_weapon_bullet_spawner_component__WEBPACK_IMPORTED_MODULE_3__.BulletSpawnerComponent(this.scene, this, \"red_rice\", 100);\n        this._dropConfig = {\n            items: [\n                {\n                    type: \"POWER\",\n                    chance: 0.4\n                },\n                {\n                    type: \"SCORE\",\n                    chance: 0.4\n                }\n            ]\n        };\n        this.setWaveParams();\n        eventBus.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_6__.CUSTOM_EVENTS.ENEMY_INIT, this);\n    }\n    setWaveParams() {\n        this._waveCenterX = 240;\n        this._waveCenterY = 340;\n        this._isMovingOut = false;\n        this._shootCounter = 0;\n        this._shootingEvent?.destroy();\n    }\n    initSprites() {\n        this._shipSprite = this.scene.add.sprite(0, 0, \"fighter\", 0);\n        this._engineSprite = this.scene.add.sprite(0, 0, \"fighter_engine\").setFlipY(true).play(\"fighter_engine\");\n        this.add([\n            this._engineSprite,\n            this._shipSprite\n        ]);\n    }\n    getInitialHealth() {\n        return _game_configs_game_config__WEBPACK_IMPORTED_MODULE_4__.ENEMY_FIGHTER_HEALTH;\n    }\n    customUpdate(time, delta) {\n        this.updateMovement(time);\n        this._inputComponent.update(time, delta);\n        this._horizontalMovement.update();\n        this._verticalMovement.update();\n        if (this._isMovingOut) {\n            this.checkBounds();\n        }\n    }\n    updateMovement(time) {\n        if (this._isMovingOut) return;\n        const distanceToCenter = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Distance.Between(this.x, this.y, this._waveCenterX, this._waveCenterY);\n        // Движение к центру\n        if (distanceToCenter > this._stopDistance) {\n            const angle = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Angle.Between(this.x, this.y, this._waveCenterX, this._waveCenterY);\n            this._inputComponent.setMovementAngle(angle);\n        } else if (this._shootCounter === 0) {\n            this._inputComponent.resetMovement(); // Останавливаем движение\n            this.startShootingBehavior(time);\n        }\n    }\n    startShootingBehavior(time) {\n        this.updateShootingTarget(time);\n        this._shootingEvent = this.scene.time.addEvent({\n            delay: _game_configs_game_config__WEBPACK_IMPORTED_MODULE_4__.CIRCULAR_FIGHTER_BULLET_INTERVAL,\n            callback: ()=>{\n                if (!this.active || this._isMovingOut) return;\n                this.fireAtAngle(this._currentTargetAngle);\n            },\n            callbackScope: this,\n            loop: true\n        });\n    }\n    updateShootingTarget(time) {\n        const player = this.getPlayer();\n        if (player) {\n            this._currentTargetAngle = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Angle.Between(this.x, this.y, player.x, player.y);\n        }\n        this._inputComponent.setShootTarget(this._currentTargetAngle, true);\n        this._shootCounter++;\n        if (this._shootCounter >= this._maxShoots) {\n            this.startMovingOut();\n        } else {\n            this.scene.time.delayedCall(this._shootInterval, ()=>{\n                this.updateShootingTarget(time);\n            });\n        }\n    }\n    startMovingOut() {\n        this._isMovingOut = true;\n        this._shootingEvent?.destroy();\n        const angle = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Angle.Between(this._waveCenterX, this._waveCenterY, this.x, this.y);\n        this._inputComponent.setMovementAngle(angle);\n        this._inputComponent.setShootTarget(0, false);\n    }\n    fireAtAngle(angle) {\n        if (!this._bulletSpawner) return;\n        // Основная пуля (прямо в цель)\n        const mainDirection = new (phaser__WEBPACK_IMPORTED_MODULE_0___default().Math).Vector2(Math.cos(angle), Math.sin(angle));\n        // Левая пуля\n        const leftDirection = new (phaser__WEBPACK_IMPORTED_MODULE_0___default().Math).Vector2(Math.cos(angle - phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.DegToRad(20)), Math.sin(angle - phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.DegToRad(20)));\n        // Правая пуля\n        const rightDirection = new (phaser__WEBPACK_IMPORTED_MODULE_0___default().Math).Vector2(Math.cos(angle + phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.DegToRad(20)), Math.sin(angle + phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.DegToRad(20)));\n        // Спавним все три пули\n        this._bulletSpawner.spawn({\n            directions: [\n                mainDirection,\n                leftDirection,\n                rightDirection\n            ],\n            speed: _game_configs_game_config__WEBPACK_IMPORTED_MODULE_4__.CIRCULAR_FIGHTER_BULLET_SPEED,\n            lifespan: _game_configs_game_config__WEBPACK_IMPORTED_MODULE_4__.CIRCULAR_FIGHTER_BULLET_LIFESPAN,\n            size: {\n                width: 6,\n                height: 10\n            },\n            flipY: true,\n            scale: 1.1,\n            spawnPosition: {\n                x: this.x,\n                y: this.y + 10\n            }\n        });\n        this._eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_6__.CUSTOM_EVENTS.SHIP_SHOOT);\n    }\n    getPlayer() {\n        try {\n            return this.scene.registry.get(\"player\");\n        } catch  {\n            return null;\n        }\n    }\n    checkBounds() {\n        const { width, height } = this.scene.scale;\n        const margin = 100;\n        if (this.x < -margin || this.x > width + margin || this.y < -margin || this.y > height + margin) {\n            this.destroy();\n        }\n    }\n    destroy(fromScene) {\n        this._shootingEvent?.destroy();\n        if (this._bulletSpawner) {\n            this._bulletSpawner.cleanup();\n        }\n        this._engineSprite.destroy(fromScene);\n        super.destroy(fromScene);\n    }\n    get shipAssetKey() {\n        return \"fighter\";\n    }\n    get shipDestroyedAnimationKey() {\n        return \"fighter_destroy\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy9lbmVtaWVzL2NvbW1vbi9jaXJjdWxhci1maWdodGVyLWVuZW15LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBNEI7QUFDMkU7QUFDSjtBQUNSO0FBRXRDO0FBQ1U7QUFDSjtBQUN3RDtBQUU1RyxNQUFNUSw2QkFBNkJILHdFQUFTQTs7YUFDeENJLFlBQVk7O0lBa0JuQkMsWUFBWUMsS0FBbUIsRUFBRUMsQ0FBUyxFQUFFQyxDQUFTLENBQUU7UUFDbkQsS0FBSyxDQUFDRixPQUFPQyxHQUFHQzthQVhaQyxlQUF1QjthQUN2QkMsZUFBdUI7YUFDdkJDLGdCQUF3QloscUZBQXFDO2FBQzdEYyxpQkFBeUJkLHNGQUFzQzthQUMvRGdCLGdCQUF3QjthQUN4QkMsYUFBcUJqQixvRkFBb0M7YUFDekRtQixzQkFBOEI7YUFDOUJDLGVBQXdCO1FBSzVCLElBQUksQ0FBQ0MsV0FBVztJQUNwQjtJQUVBQyxLQUFLQyxRQUEyQixFQUFRO1FBQ3BDLEtBQUssQ0FBQ0QsS0FBS0M7UUFFWCxJQUFJLENBQUNDLGVBQWUsR0FBRyxJQUFJckIsNEhBQTZCQTtRQUV4RCxJQUFJLENBQUNzQixtQkFBbUIsR0FBRyxJQUFJNUIsZ0hBQTJCQSxDQUN0RCxJQUFJLEVBQ0osSUFBSSxDQUFDMkIsZUFBZSxFQUNwQnhCLHlGQUF5QztRQUc3QyxJQUFJLENBQUMyQixpQkFBaUIsR0FBRyxJQUFJN0IsNEdBQXlCQSxDQUNsRCxJQUFJLEVBQ0osSUFBSSxDQUFDMEIsZUFBZSxFQUNwQnhCLHlGQUF5QztRQUc3QyxJQUFJLENBQUM0QixjQUFjLEdBQUcsSUFBSTdCLG9HQUFzQkEsQ0FDNUMsSUFBSSxDQUFDUSxLQUFLLEVBQ1YsSUFBSSxFQUNKLFlBQ0E7UUFHSixJQUFJLENBQUNzQixXQUFXLEdBQUc7WUFDZkMsT0FBTztnQkFDSDtvQkFBRUMsTUFBTTtvQkFBU0MsUUFBUTtnQkFBSTtnQkFDN0I7b0JBQUVELE1BQU07b0JBQVNDLFFBQVE7Z0JBQUk7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SUFBSSxDQUFDMUYsQ0FBQyxHQUFHLENBQUMwRixVQUFVLElBQUksQ0FBQzFGLENBQUMsR0FBR2lGLFFBQVFTLFVBQ3JDLElBQUksQ0FBQ3pGLENBQUMsR0FBRyxDQUFDeUYsVUFBVSxJQUFJLENBQUN6RixDQUFDLEdBQUdpRixTQUFTUSxRQUFRO1lBQzlDLElBQUksQ0FBQzdELE9BQU87UUFDaEI7SUFDSjtJQUVBQSxRQUFROEQsU0FBbUIsRUFBUTtRQUMvQixJQUFJLENBQUMvRCxjQUFjLEVBQUVDO1FBQ3JCLElBQUksSUFBSSxDQUFDVCxjQUFjLEVBQUU7WUFDckIsSUFBSSxDQUFDQSxjQUFjLENBQUN3RSxPQUFPO1FBQy9CO1FBQ0EsSUFBSSxDQUFDM0QsYUFBYSxDQUFDSixPQUFPLENBQUM4RDtRQUMzQixLQUFLLENBQUM5RCxRQUFROEQ7SUFDbEI7SUFFQSxJQUFJRSxlQUF1QjtRQUFFLE9BQU87SUFBVztJQUMvQyxJQUFJQyw0QkFBb0M7UUFBRSxPQUFPO0lBQW1CO0FBQ3hFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2VudGl0aWVzL2VuZW1pZXMvY29tbW9uL2NpcmN1bGFyLWZpZ2h0ZXItZW5lbXkudHM/OWE4ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcbmltcG9ydCB7IEhvcml6b250YWxNb3ZlbWVudENvbXBvbmVudCB9IGZyb20gJ0AvZ2FtZS9jb21wb25lbnRzL21vdmVtZW50L2hvcml6b250YWwtbW92ZW1lbnQtY29tcG9uZW50JztcclxuaW1wb3J0IHsgVmVydGljYWxNb3ZlbWVudENvbXBvbmVudCB9IGZyb20gJ0AvZ2FtZS9jb21wb25lbnRzL21vdmVtZW50L3ZlcnRpY2FsLW1vdmVtZW50LWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEJ1bGxldFNwYXduZXJDb21wb25lbnQgfSBmcm9tICdAL2dhbWUvY29tcG9uZW50cy93ZWFwb24vYnVsbGV0LXNwYXduZXItY29tcG9uZW50JztcclxuaW1wb3J0IHsgRXZlbnRCdXNDb21wb25lbnQgfSBmcm9tICdAL2dhbWUvY29tcG9uZW50cy9ldmVudHMvZXZlbnQtYnVzLWNvbXBvbmVudCc7XHJcbmltcG9ydCAqIGFzIENPTkZJRyBmcm9tICdAL2dhbWUvY29uZmlncy9nYW1lLWNvbmZpZyc7XHJcbmltcG9ydCB7IEJhc2VFbmVteSB9IGZyb20gJ0AvZ2FtZS9lbnRpdGllcy9lbmVtaWVzL2Jhc2UtZW5lbXknO1xyXG5pbXBvcnQgeyBDVVNUT01fRVZFTlRTIH0gZnJvbSAnQC9nYW1lL3R5cGVzL2N1c3RvbS1ldmVudHMnO1xyXG5pbXBvcnQgeyBDaXJjdWxhckZpZ2h0ZXJJbnB1dENvbXBvbmVudCB9IGZyb20gJ0AvZ2FtZS9jb21wb25lbnRzL2lucHV0L2FpL2NvbW1vbi9jaXJjdWxhci1maWdodGVyLWlucHV0LWNvbXBvbmVudCc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2lyY3VsYXJGaWdodGVyRW5lbXkgZXh0ZW5kcyBCYXNlRW5lbXkge1xyXG4gICAgc3RhdGljIGVuZW15VHlwZSA9ICdjaXJjdWxhcl9maWdodGVyJztcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfaW5wdXRDb21wb25lbnQhOiBDaXJjdWxhckZpZ2h0ZXJJbnB1dENvbXBvbmVudDtcclxuICAgIHByaXZhdGUgX2hvcml6b250YWxNb3ZlbWVudCE6IEhvcml6b250YWxNb3ZlbWVudENvbXBvbmVudDtcclxuICAgIHByaXZhdGUgX3ZlcnRpY2FsTW92ZW1lbnQhOiBWZXJ0aWNhbE1vdmVtZW50Q29tcG9uZW50O1xyXG4gICAgcHJpdmF0ZSBfc2hpcFNwcml0ZSE6IFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGU7XHJcbiAgICBwcml2YXRlIF9lbmdpbmVTcHJpdGUhOiBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlO1xyXG4gICAgXHJcbiAgICBwcml2YXRlIF93YXZlQ2VudGVyWDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgX3dhdmVDZW50ZXJZOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBfc3RvcERpc3RhbmNlOiBudW1iZXIgPSBDT05GSUcuQ0lSQ1VMQVJfRklHSFRFUl9TVE9QX0RJU1RBTkNFO1xyXG4gICAgcHJpdmF0ZSBfc2hvb3RJbnRlcnZhbDogbnVtYmVyID0gQ09ORklHLkNJUkNVTEFSX0ZJR0hURVJfU0hPT1RfSU5URVJWQUw7XHJcbiAgICBwcml2YXRlIF9zaG9vdENvdW50ZXI6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIF9tYXhTaG9vdHM6IG51bWJlciA9IENPTkZJRy5DSVJDVUxBUl9GSUdIVEVSX1NIT09UX0NZQ0xFUztcclxuICAgIHByaXZhdGUgX2N1cnJlbnRUYXJnZXRBbmdsZTogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgX2lzTW92aW5nT3V0OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9zaG9vdGluZ0V2ZW50PzogUGhhc2VyLlRpbWUuVGltZXJFdmVudDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogUGhhc2VyLlNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5KTtcclxuICAgICAgICB0aGlzLmluaXRTcHJpdGVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdChldmVudEJ1czogRXZlbnRCdXNDb21wb25lbnQpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5pbml0KGV2ZW50QnVzKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9pbnB1dENvbXBvbmVudCA9IG5ldyBDaXJjdWxhckZpZ2h0ZXJJbnB1dENvbXBvbmVudCgpO1xyXG5cclxuICAgICAgICB0aGlzLl9ob3Jpem9udGFsTW92ZW1lbnQgPSBuZXcgSG9yaXpvbnRhbE1vdmVtZW50Q29tcG9uZW50KFxyXG4gICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICB0aGlzLl9pbnB1dENvbXBvbmVudCxcclxuICAgICAgICAgICAgQ09ORklHLkNJUkNVTEFSX0ZJR0hURVJfTU9WRU1FTlRfVkVMT0NJVFlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLl92ZXJ0aWNhbE1vdmVtZW50ID0gbmV3IFZlcnRpY2FsTW92ZW1lbnRDb21wb25lbnQoXHJcbiAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0Q29tcG9uZW50LFxyXG4gICAgICAgICAgICBDT05GSUcuQ0lSQ1VMQVJfRklHSFRFUl9NT1ZFTUVOVF9WRUxPQ0lUWVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fYnVsbGV0U3Bhd25lciA9IG5ldyBCdWxsZXRTcGF3bmVyQ29tcG9uZW50KFxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLFxyXG4gICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAncmVkX3JpY2UnLFxyXG4gICAgICAgICAgICAxMDBcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLl9kcm9wQ29uZmlnID0ge1xyXG4gICAgICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgICAgICAgeyB0eXBlOiAnUE9XRVInLCBjaGFuY2U6IDAuNCB9LFxyXG4gICAgICAgICAgICAgICAgeyB0eXBlOiAnU0NPUkUnLCBjaGFuY2U6IDAuNCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNldFdhdmVQYXJhbXMoKTtcclxuXHJcbiAgICAgICAgZXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLkVORU1ZX0lOSVQsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFdhdmVQYXJhbXMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fd2F2ZUNlbnRlclggPSAyNDA7XHJcbiAgICAgICAgdGhpcy5fd2F2ZUNlbnRlclkgPSAzNDA7XHJcbiAgICAgICAgdGhpcy5faXNNb3ZpbmdPdXQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9zaG9vdENvdW50ZXIgPSAwO1xyXG4gICAgICAgIHRoaXMuX3Nob290aW5nRXZlbnQ/LmRlc3Ryb3koKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW5pdFNwcml0ZXMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fc2hpcFNwcml0ZSA9IHRoaXMuc2NlbmUuYWRkLnNwcml0ZSgwLCAwLCAnZmlnaHRlcicsIDApO1xyXG4gICAgICAgIHRoaXMuX2VuZ2luZVNwcml0ZSA9IHRoaXMuc2NlbmUuYWRkLnNwcml0ZSgwLCAwLCAnZmlnaHRlcl9lbmdpbmUnKVxyXG4gICAgICAgICAgICAuc2V0RmxpcFkodHJ1ZSlcclxuICAgICAgICAgICAgLnBsYXkoJ2ZpZ2h0ZXJfZW5naW5lJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5hZGQoW3RoaXMuX2VuZ2luZVNwcml0ZSwgdGhpcy5fc2hpcFNwcml0ZV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRJbml0aWFsSGVhbHRoKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIENPTkZJRy5FTkVNWV9GSUdIVEVSX0hFQUxUSDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgY3VzdG9tVXBkYXRlKHRpbWU6IG51bWJlciwgZGVsdGE6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudXBkYXRlTW92ZW1lbnQodGltZSk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRDb21wb25lbnQudXBkYXRlKHRpbWUsIGRlbHRhKTtcclxuICAgICAgICB0aGlzLl9ob3Jpem9udGFsTW92ZW1lbnQudXBkYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fdmVydGljYWxNb3ZlbWVudC51cGRhdGUoKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5faXNNb3ZpbmdPdXQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0JvdW5kcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZU1vdmVtZW50KHRpbWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc01vdmluZ091dCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBkaXN0YW5jZVRvQ2VudGVyID0gUGhhc2VyLk1hdGguRGlzdGFuY2UuQmV0d2VlbihcclxuICAgICAgICAgICAgdGhpcy54LCB0aGlzLnksIFxyXG4gICAgICAgICAgICB0aGlzLl93YXZlQ2VudGVyWCwgdGhpcy5fd2F2ZUNlbnRlcllcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyDQlNCy0LjQttC10L3QuNC1INC6INGG0LXQvdGC0YDRg1xyXG4gICAgICAgIGlmIChkaXN0YW5jZVRvQ2VudGVyID4gdGhpcy5fc3RvcERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gUGhhc2VyLk1hdGguQW5nbGUuQmV0d2VlbihcclxuICAgICAgICAgICAgICAgIHRoaXMueCwgdGhpcy55LFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fd2F2ZUNlbnRlclgsIHRoaXMuX3dhdmVDZW50ZXJZXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0Q29tcG9uZW50LnNldE1vdmVtZW50QW5nbGUoYW5nbGUpO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgLy8g0JTQvtGB0YLQuNCz0LvQuCDRhtC10L3RgtGA0LAgLSDQvdCw0YfQuNC90LDQtdC8INGB0YLRgNC10LvRjNCx0YNcclxuICAgICAgICBlbHNlIGlmICh0aGlzLl9zaG9vdENvdW50ZXIgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5faW5wdXRDb21wb25lbnQucmVzZXRNb3ZlbWVudCgpOyAvLyDQntGB0YLQsNC90LDQstC70LjQstCw0LXQvCDQtNCy0LjQttC10L3QuNC1XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRTaG9vdGluZ0JlaGF2aW9yKHRpbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXJ0U2hvb3RpbmdCZWhhdmlvcih0aW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVNob290aW5nVGFyZ2V0KHRpbWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX3Nob290aW5nRXZlbnQgPSB0aGlzLnNjZW5lLnRpbWUuYWRkRXZlbnQoe1xyXG4gICAgICAgICAgICBkZWxheTogQ09ORklHLkNJUkNVTEFSX0ZJR0hURVJfQlVMTEVUX0lOVEVSVkFMLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZSB8fCB0aGlzLl9pc01vdmluZ091dCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maXJlQXRBbmdsZSh0aGlzLl9jdXJyZW50VGFyZ2V0QW5nbGUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWxsYmFja1Njb3BlOiB0aGlzLFxyXG4gICAgICAgICAgICBsb29wOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVTaG9vdGluZ1RhcmdldCh0aW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLmdldFBsYXllcigpO1xyXG4gICAgICAgIGlmIChwbGF5ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFRhcmdldEFuZ2xlID0gUGhhc2VyLk1hdGguQW5nbGUuQmV0d2VlbihcclxuICAgICAgICAgICAgICAgIHRoaXMueCwgdGhpcy55LFxyXG4gICAgICAgICAgICAgICAgcGxheWVyLngsIHBsYXllci55XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2lucHV0Q29tcG9uZW50LnNldFNob290VGFyZ2V0KHRoaXMuX2N1cnJlbnRUYXJnZXRBbmdsZSwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fc2hvb3RDb3VudGVyKys7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuX3Nob290Q291bnRlciA+PSB0aGlzLl9tYXhTaG9vdHMpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydE1vdmluZ091dCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUudGltZS5kZWxheWVkQ2FsbCh0aGlzLl9zaG9vdEludGVydmFsLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNob290aW5nVGFyZ2V0KHRpbWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGFydE1vdmluZ091dCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9pc01vdmluZ091dCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fc2hvb3RpbmdFdmVudD8uZGVzdHJveSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGFuZ2xlID0gUGhhc2VyLk1hdGguQW5nbGUuQmV0d2VlbihcclxuICAgICAgICAgICAgdGhpcy5fd2F2ZUNlbnRlclgsIHRoaXMuX3dhdmVDZW50ZXJZLFxyXG4gICAgICAgICAgICB0aGlzLngsIHRoaXMueVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRDb21wb25lbnQuc2V0TW92ZW1lbnRBbmdsZShhbmdsZSk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRDb21wb25lbnQuc2V0U2hvb3RUYXJnZXQoMCwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmlyZUF0QW5nbGUoYW5nbGU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5fYnVsbGV0U3Bhd25lcikgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCe0YHQvdC+0LLQvdCw0Y8g0L/Rg9C70Y8gKNC/0YDRj9C80L4g0LIg0YbQtdC70YwpXHJcbiAgICAgICAgY29uc3QgbWFpbkRpcmVjdGlvbiA9IG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKFxyXG4gICAgICAgICAgICBNYXRoLmNvcyhhbmdsZSksXHJcbiAgICAgICAgICAgIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0JvQtdCy0LDRjyDQv9GD0LvRj1xyXG4gICAgICAgIGNvbnN0IGxlZnREaXJlY3Rpb24gPSBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMihcclxuICAgICAgICAgICAgTWF0aC5jb3MoYW5nbGUgLSBQaGFzZXIuTWF0aC5EZWdUb1JhZCgyMCkpLFxyXG4gICAgICAgICAgICBNYXRoLnNpbihhbmdsZSAtIFBoYXNlci5NYXRoLkRlZ1RvUmFkKDIwKSlcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCf0YDQsNCy0LDRjyDQv9GD0LvRj1xyXG4gICAgICAgIGNvbnN0IHJpZ2h0RGlyZWN0aW9uID0gbmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoXHJcbiAgICAgICAgICAgIE1hdGguY29zKGFuZ2xlICsgUGhhc2VyLk1hdGguRGVnVG9SYWQoMjApKSxcclxuICAgICAgICAgICAgTWF0aC5zaW4oYW5nbGUgKyBQaGFzZXIuTWF0aC5EZWdUb1JhZCgyMCkpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQodC/0LDQstC90LjQvCDQstGB0LUg0YLRgNC4INC/0YPQu9C4XHJcbiAgICAgICAgdGhpcy5fYnVsbGV0U3Bhd25lci5zcGF3bih7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbnM6IFttYWluRGlyZWN0aW9uLCBsZWZ0RGlyZWN0aW9uLCByaWdodERpcmVjdGlvbl0sXHJcbiAgICAgICAgICAgIHNwZWVkOiBDT05GSUcuQ0lSQ1VMQVJfRklHSFRFUl9CVUxMRVRfU1BFRUQsXHJcbiAgICAgICAgICAgIGxpZmVzcGFuOiBDT05GSUcuQ0lSQ1VMQVJfRklHSFRFUl9CVUxMRVRfTElGRVNQQU4sXHJcbiAgICAgICAgICAgIHNpemU6IHsgd2lkdGg6IDYsIGhlaWdodDogMTAgfSxcclxuICAgICAgICAgICAgZmxpcFk6IHRydWUsXHJcbiAgICAgICAgICAgIHNjYWxlOiAxLjEsXHJcbiAgICAgICAgICAgIHNwYXduUG9zaXRpb246IHsgXHJcbiAgICAgICAgICAgICAgICB4OiB0aGlzLngsIFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy55ICsgMTBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2V2ZW50QnVzQ29tcG9uZW50LmVtaXQoQ1VTVE9NX0VWRU5UUy5TSElQX1NIT09UKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFBsYXllcigpOiBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlIHwgbnVsbCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmUucmVnaXN0cnkuZ2V0KCdwbGF5ZXInKSBhcyBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlO1xyXG4gICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja0JvdW5kcygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NlbmUuc2NhbGU7XHJcbiAgICAgICAgY29uc3QgbWFyZ2luID0gMTAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLnggPCAtbWFyZ2luIHx8IHRoaXMueCA+IHdpZHRoICsgbWFyZ2luIHx8IFxyXG4gICAgICAgICAgICB0aGlzLnkgPCAtbWFyZ2luIHx8IHRoaXMueSA+IGhlaWdodCArIG1hcmdpbikge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveShmcm9tU2NlbmU/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fc2hvb3RpbmdFdmVudD8uZGVzdHJveSgpO1xyXG4gICAgICAgIGlmICh0aGlzLl9idWxsZXRTcGF3bmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1bGxldFNwYXduZXIuY2xlYW51cCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9lbmdpbmVTcHJpdGUuZGVzdHJveShmcm9tU2NlbmUpO1xyXG4gICAgICAgIHN1cGVyLmRlc3Ryb3koZnJvbVNjZW5lKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2hpcEFzc2V0S2V5KCk6IHN0cmluZyB7IHJldHVybiAnZmlnaHRlcic7IH1cclxuICAgIGdldCBzaGlwRGVzdHJveWVkQW5pbWF0aW9uS2V5KCk6IHN0cmluZyB7IHJldHVybiAnZmlnaHRlcl9kZXN0cm95JzsgfVxyXG59Il0sIm5hbWVzIjpbIlBoYXNlciIsIkhvcml6b250YWxNb3ZlbWVudENvbXBvbmVudCIsIlZlcnRpY2FsTW92ZW1lbnRDb21wb25lbnQiLCJCdWxsZXRTcGF3bmVyQ29tcG9uZW50IiwiQ09ORklHIiwiQmFzZUVuZW15IiwiQ1VTVE9NX0VWRU5UUyIsIkNpcmN1bGFyRmlnaHRlcklucHV0Q29tcG9uZW50IiwiQ2lyY3VsYXJGaWdodGVyRW5lbXkiLCJlbmVteVR5cGUiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwieCIsInkiLCJfd2F2ZUNlbnRlclgiLCJfd2F2ZUNlbnRlclkiLCJfc3RvcERpc3RhbmNlIiwiQ0lSQ1VMQVJfRklHSFRFUl9TVE9QX0RJU1RBTkNFIiwiX3Nob290SW50ZXJ2YWwiLCJDSVJDVUxBUl9GSUdIVEVSX1NIT09UX0lOVEVSVkFMIiwiX3Nob290Q291bnRlciIsIl9tYXhTaG9vdHMiLCJDSVJDVUxBUl9GSUdIVEVSX1NIT09UX0NZQ0xFUyIsIl9jdXJyZW50VGFyZ2V0QW5nbGUiLCJfaXNNb3ZpbmdPdXQiLCJpbml0U3ByaXRlcyIsImluaXQiLCJldmVudEJ1cyIsIl9pbnB1dENvbXBvbmVudCIsIl9ob3Jpem9udGFsTW92ZW1lbnQiLCJDSVJDVUxBUl9GSUdIVEVSX01PVkVNRU5UX1ZFTE9DSVRZIiwiX3ZlcnRpY2FsTW92ZW1lbnQiLCJfYnVsbGV0U3Bhd25lciIsIl9kcm9wQ29uZmlnIiwiaXRlbXMiLCJ0eXBlIiwiY2hhbmNlIiwic2V0V2F2ZVBhcmFtcyIsImVtaXQiLCJFTkVNWV9JTklUIiwiX3Nob290aW5nRXZlbnQiLCJkZXN0cm95IiwiX3NoaXBTcHJpdGUiLCJhZGQiLCJzcHJpdGUiLCJfZW5naW5lU3ByaXRlIiwic2V0RmxpcFkiLCJwbGF5IiwiZ2V0SW5pdGlhbEhlYWx0aCIsIkVORU1ZX0ZJR0hURVJfSEVBTFRIIiwiY3VzdG9tVXBkYXRlIiwidGltZSIsImRlbHRhIiwidXBkYXRlTW92ZW1lbnQiLCJ1cGRhdGUiLCJjaGVja0JvdW5kcyIsImRpc3RhbmNlVG9DZW50ZXIiLCJNYXRoIiwiRGlzdGFuY2UiLCJCZXR3ZWVuIiwiYW5nbGUiLCJBbmdsZSIsInNldE1vdmVtZW50QW5nbGUiLCJyZXNldE1vdmVtZW50Iiwic3RhcnRTaG9vdGluZ0JlaGF2aW9yIiwidXBkYXRlU2hvb3RpbmdUYXJnZXQiLCJhZGRFdmVudCIsImRlbGF5IiwiQ0lSQ1VMQVJfRklHSFRFUl9CVUxMRVRfSU5URVJWQUwiLCJjYWxsYmFjayIsImFjdGl2ZSIsImZpcmVBdEFuZ2xlIiwiY2FsbGJhY2tTY29wZSIsImxvb3AiLCJwbGF5ZXIiLCJnZXRQbGF5ZXIiLCJzZXRTaG9vdFRhcmdldCIsInN0YXJ0TW92aW5nT3V0IiwiZGVsYXllZENhbGwiLCJtYWluRGlyZWN0aW9uIiwiVmVjdG9yMiIsImNvcyIsInNpbiIsImxlZnREaXJlY3Rpb24iLCJEZWdUb1JhZCIsInJpZ2h0RGlyZWN0aW9uIiwic3Bhd24iLCJkaXJlY3Rpb25zIiwic3BlZWQiLCJDSVJDVUxBUl9GSUdIVEVSX0JVTExFVF9TUEVFRCIsImxpZmVzcGFuIiwiQ0lSQ1VMQVJfRklHSFRFUl9CVUxMRVRfTElGRVNQQU4iLCJzaXplIiwid2lkdGgiLCJoZWlnaHQiLCJmbGlwWSIsInNjYWxlIiwic3Bhd25Qb3NpdGlvbiIsIl9ldmVudEJ1c0NvbXBvbmVudCIsIlNISVBfU0hPT1QiLCJyZWdpc3RyeSIsImdldCIsIm1hcmdpbiIsImZyb21TY2VuZSIsImNsZWFudXAiLCJzaGlwQXNzZXRLZXkiLCJzaGlwRGVzdHJveWVkQW5pbWF0aW9uS2V5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/entities/enemies/common/circular-fighter-enemy.ts\n");

/***/ }),

/***/ "./src/game/entities/enemies/common/fighter-enemy.ts":
/*!***********************************************************!*\
  !*** ./src/game/entities/enemies/common/fighter-enemy.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FighterEnemy: () => (/* binding */ FighterEnemy)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_input_ai_common_bot_fighter_input_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/input/ai/common/bot-fighter-input-component */ \"./src/game/components/input/ai/common/bot-fighter-input-component.ts\");\n/* harmony import */ var _components_movement_vertical_movement_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/movement/vertical-movement-component */ \"./src/game/components/movement/vertical-movement-component.ts\");\n/* harmony import */ var _components_weapon_bullet_spawner_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/weapon/bullet-spawner-component */ \"./src/game/components/weapon/bullet-spawner-component.ts\");\n/* harmony import */ var _configs_game_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../configs/game-config */ \"./src/game/configs/game-config.ts\");\n/* harmony import */ var _base_enemy__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../base-enemy */ \"./src/game/entities/enemies/base-enemy.ts\");\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n\n\n\n\n\n\n\nclass FighterEnemy extends _base_enemy__WEBPACK_IMPORTED_MODULE_5__.BaseEnemy {\n    static{\n        this.enemyType = \"fighter\";\n    }\n    constructor(scene, x, y){\n        super(scene, x, y);\n        this._lastFireTime = 0;\n        this.initSprites();\n    }\n    init(eventBus) {\n        super.init(eventBus);\n        this._inputComponent = new _components_input_ai_common_bot_fighter_input_component__WEBPACK_IMPORTED_MODULE_1__.BotFighterInputComponent();\n        this._verticalMovementComponent = new _components_movement_vertical_movement_component__WEBPACK_IMPORTED_MODULE_2__.VerticalMovementComponent(this, this._inputComponent, _configs_game_config__WEBPACK_IMPORTED_MODULE_4__.ENEMY_FIGHTER_MOVEMENT_VERTICAL_VELOCITY);\n        this._bulletSpawner = new _components_weapon_bullet_spawner_component__WEBPACK_IMPORTED_MODULE_3__.BulletSpawnerComponent(this.scene, this, \"bullet\", _configs_game_config__WEBPACK_IMPORTED_MODULE_4__.ENEMY_FIGHTER_BULLET_MAX_COUNT);\n        this._dropConfig = {\n            items: [\n                {\n                    type: \"POWER\",\n                    chance: 0.7\n                },\n                {\n                    type: \"SCORE\",\n                    chance: 0.3\n                }\n            ]\n        };\n        eventBus.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_6__.CUSTOM_EVENTS.ENEMY_INIT, this);\n    }\n    initSprites() {\n        this._shipSprite = this.scene.add.sprite(0, 0, \"fighter\", 0);\n        this._engineSprite = this.scene.add.sprite(0, 0, \"fighter_engine\").setFlipY(true).play(\"fighter_engine\");\n        this.add([\n            this._engineSprite,\n            this._shipSprite\n        ]);\n    }\n    get shipAssetKey() {\n        return \"fighter\";\n    }\n    get shipDestroyedAnimationKey() {\n        return \"fighter_destroy\";\n    }\n    reset() {\n        super.reset();\n        this._verticalMovementComponent.reset();\n        this._engineSprite.setVisible(true);\n        this._lastFireTime = 0;\n    }\n    getInitialHealth() {\n        return _configs_game_config__WEBPACK_IMPORTED_MODULE_4__.ENEMY_FIGHTER_HEALTH;\n    }\n    customUpdate(time, delta) {\n        this._inputComponent.update();\n        this._verticalMovementComponent.update();\n        // Логика стрельбы\n        if (time - this._lastFireTime >= _configs_game_config__WEBPACK_IMPORTED_MODULE_4__.ENEMY_FIGHTER_BULLET_INTERVAL) {\n            this.fireBullet();\n            this._lastFireTime = time;\n        }\n    }\n    fireBullet() {\n        this._bulletSpawner?.spawn({\n            directions: [\n                new (phaser__WEBPACK_IMPORTED_MODULE_0___default().Math).Vector2(0, -1)\n            ],\n            speed: _configs_game_config__WEBPACK_IMPORTED_MODULE_4__.ENEMY_FIGHTER_BULLET_SPEED,\n            lifespan: _configs_game_config__WEBPACK_IMPORTED_MODULE_4__.ENEMY_FIGHTER_BULLET_LIFESPAN,\n            size: {\n                width: 14,\n                height: 18\n            },\n            animationKey: \"bullet\",\n            flipY: true,\n            scale: 0.8,\n            spawnPosition: {\n                x: this.x,\n                y: this.y + 10\n            }\n        });\n        this._eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_6__.CUSTOM_EVENTS.SHIP_SHOOT);\n    }\n    destroy(fromScene) {\n        if (this._bulletSpawner) {\n            this._bulletSpawner.cleanup();\n        }\n        this._engineSprite.destroy(fromScene);\n        super.destroy(fromScene);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy9lbmVtaWVzL2NvbW1vbi9maWdodGVyLWVuZW15LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUE0QjtBQUMrRTtBQUNOO0FBQ1I7QUFFdEM7QUFDYjtBQUNpQjtBQUVwRCxNQUFNTyxxQkFBcUJGLGtEQUFTQTs7YUFDaENHLFlBQVk7O0lBT25CQyxZQUFZQyxLQUFtQixFQUFFQyxDQUFTLEVBQUVDLENBQVMsQ0FBRTtRQUNuRCxLQUFLLENBQUNGLE9BQU9DLEdBQUdDO2FBSFpDLGdCQUFnQjtRQUlwQixJQUFJLENBQUNDLFdBQVc7SUFDcEI7SUFFQUMsS0FBS0MsUUFBMkIsRUFBUTtRQUNwQyxLQUFLLENBQUNELEtBQUtDO1FBRVgsSUFBSSxDQUFDQyxlQUFlLEdBQUcsSUFBSWhCLDZHQUF3QkE7UUFDbkQsSUFBSSxDQUFDaUIsMEJBQTBCLEdBQUcsSUFBSWhCLHVHQUF5QkEsQ0FDM0QsSUFBSSxFQUNKLElBQUksQ0FBQ2UsZUFBZSxFQUNwQmIsMEZBQStDO1FBR25ELElBQUksQ0FBQ2dCLGNBQWMsR0FBRyxJQUFJakIsK0ZBQXNCQSxDQUM1QyxJQUFJLENBQUNPLEtBQUssRUFDVixJQUFJLEVBQ0osVUFDQU4sZ0ZBQXFDO1FBR3pDLElBQUksQ0FBQ2tCLFdBQVcsR0FBRztZQUNmQyxPQUFPO2dCQUNIO29CQUFFQyxNQUFNO29CQUFTQyxRQUFRO2dCQUFJO2dCQUM3QjtvQkFBRUQsTUFBTTtvQkFBU0MsUUFBUTtnQkFBSTthQUNoQztRQUNMO1FBRUFULFNBQVNVLElBQUksQ0FBQ3BCLG9FQUFhQSxDQUFDcUIsVUFBVSxFQUFFLElBQUk7SUFDaEQ7SUFFVWIsY0FBb0I7UUFDMUIsSUFBSSxDQUFDYyxXQUFXLEdBQUcsSUFBSSxDQUFDbEIsS0FBSyxDQUFDbUIsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxHQUFHLFdBQVc7UUFDMUQsSUFBSSxDQUFDQyxhQUFhLEdBQUcsSUFBSSxDQUFDckIsS0FBSyxDQUFDbUIsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxHQUFHLGtCQUM1Q0UsUUFBUSxDQUFDLE1BQ1RDLElBQUksQ0FBQztRQUVWLElBQUksQ0FBQ0osR0FBRyxDQUFDO1lBQUMsSUFBSSxDQUFDRSxhQUFhO1lBQUUsSUFBSSxDQUFDSCxXQUFXO1NBQUM7SUFDbkQ7SUFFQSxJQUFJTSxlQUF1QjtRQUFFLE9BQU87SUFBVztJQUMvQyxJQUFJQyw0QkFBb0M7UUFBRSxPQUFPO0lBQW1CO0lBRXBFQyxRQUFjO1FBQ1YsS0FBSyxDQUFDQTtRQUNOLElBQUksQ0FBQ2xCLDBCQUEwQixDQUFDa0IsS0FBSztRQUNyQyxJQUFJLENBQUNMLGFBQWEsQ0FBQ00sVUFBVSxDQUFDO1FBQzlCLElBQUksQ0FBQ3hCLGFBQWEsR0FBRztJQUN6QjtJQUVVeUIsbUJBQTJCO1FBQ2pDLE9BQU9sQyxzRUFBMkI7SUFDdEM7SUFFVW9DLGFBQWFDLElBQVksRUFBRUMsS0FBYSxFQUFRO1FBQ3RELElBQUksQ0FBQ3pCLGVBQWUsQ0FBQzBCLE1BQU07UUFDM0IsSUFBSSxDQUFDekIsMEJBQTBCLENBQUN5QixNQUFNO1FBRXRDLGtCQUFrQjtRQUNsQixJQUFJRixPQUFPLElBQUksQ0FBQzVCLGFBQWEsSUFBSVQsK0VBQW9DLEVBQUU7WUFDbkUsSUFBSSxDQUFDeUMsVUFBVTtZQUNmLElBQUksQ0FBQ2hDLGFBQWEsR0FBRzRCO1FBQ3pCO0lBQ0o7SUFFUUksYUFBbUI7UUFDdkIsSUFBSSxDQUFDekIsY0FBYyxFQUFFMEIsTUFBTTtZQUN2QkMsWUFBWTtnQkFBQyxJQUFJL0Msb0RBQVcsQ0FBQ2lELE9BQU8sQ0FBQyxHQUFHLENBQUM7YUFBRztZQUM1Q0MsT0FBTzlDLDRFQUFpQztZQUN4Q2dELFVBQVVoRCwrRUFBb0M7WUFDOUNrRCxNQUFNO2dCQUFFQyxPQUFPO2dCQUFJQyxRQUFRO1lBQUc7WUFDOUJDLGNBQWM7WUFDZEMsT0FBTztZQUNQQyxPQUFPO1lBQ1BDLGVBQWU7Z0JBQ1hqRCxHQUFHLElBQUksQ0FBQ0EsQ0FBQztnQkFDVEMsR0FBRyxJQUFJLENBQUNBLENBQUMsR0FBRztZQUNoQjtRQUNKO1FBRUEsSUFBSSxDQUFDaUQsa0JBQWtCLENBQUNuQyxJQUFJLENBQUNwQixvRUFBYUEsQ0FBQ3dELFVBQVU7SUFDekQ7SUFFQUMsUUFBUUMsU0FBbUIsRUFBUTtRQUMvQixJQUFJLElBQUksQ0FBQzVDLGNBQWMsRUFBRTtZQUNyQixJQUFJLENBQUNBLGNBQWMsQ0FBQzZDLE9BQU87UUFDL0I7UUFDQSxJQUFJLENBQUNsQyxhQUFhLENBQUNnQyxPQUFPLENBQUNDO1FBQzNCLEtBQUssQ0FBQ0QsUUFBUUM7SUFDbEI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9lbnRpdGllcy9lbmVtaWVzL2NvbW1vbi9maWdodGVyLWVuZW15LnRzPzljZjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xuaW1wb3J0IHsgQm90RmlnaHRlcklucHV0Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9pbnB1dC9haS9jb21tb24vYm90LWZpZ2h0ZXItaW5wdXQtY29tcG9uZW50JztcbmltcG9ydCB7IFZlcnRpY2FsTW92ZW1lbnRDb21wb25lbnQgfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL21vdmVtZW50L3ZlcnRpY2FsLW1vdmVtZW50LWNvbXBvbmVudCc7XG5pbXBvcnQgeyBCdWxsZXRTcGF3bmVyQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy93ZWFwb24vYnVsbGV0LXNwYXduZXItY29tcG9uZW50JztcbmltcG9ydCB7IEV2ZW50QnVzQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9ldmVudHMvZXZlbnQtYnVzLWNvbXBvbmVudCc7XG5pbXBvcnQgKiBhcyBDT05GSUcgZnJvbSAnLi4vLi4vLi4vY29uZmlncy9nYW1lLWNvbmZpZyc7XG5pbXBvcnQgeyBCYXNlRW5lbXkgfSBmcm9tICcuLi9iYXNlLWVuZW15JztcbmltcG9ydCB7IENVU1RPTV9FVkVOVFMgfSBmcm9tICdAL2dhbWUvdHlwZXMvY3VzdG9tLWV2ZW50cyc7XG5cbmV4cG9ydCBjbGFzcyBGaWdodGVyRW5lbXkgZXh0ZW5kcyBCYXNlRW5lbXkge1xuICAgIHN0YXRpYyBlbmVteVR5cGUgPSAnZmlnaHRlcic7XG4gICAgcHJpdmF0ZSBfaW5wdXRDb21wb25lbnQhOiBCb3RGaWdodGVySW5wdXRDb21wb25lbnQ7XG4gICAgcHJpdmF0ZSBfdmVydGljYWxNb3ZlbWVudENvbXBvbmVudCE6IFZlcnRpY2FsTW92ZW1lbnRDb21wb25lbnQ7XG4gICAgcHJpdmF0ZSBfc2hpcFNwcml0ZSE6IFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGU7XG4gICAgcHJpdmF0ZSBfZW5naW5lU3ByaXRlITogUGhhc2VyLkdhbWVPYmplY3RzLlNwcml0ZTtcbiAgICBwcml2YXRlIF9sYXN0RmlyZVRpbWUgPSAwO1xuXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFBoYXNlci5TY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoc2NlbmUsIHgsIHkpO1xuICAgICAgICB0aGlzLmluaXRTcHJpdGVzKCk7XG4gICAgfVxuXG4gICAgaW5pdChldmVudEJ1czogRXZlbnRCdXNDb21wb25lbnQpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIuaW5pdChldmVudEJ1cyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pbnB1dENvbXBvbmVudCA9IG5ldyBCb3RGaWdodGVySW5wdXRDb21wb25lbnQoKTtcbiAgICAgICAgdGhpcy5fdmVydGljYWxNb3ZlbWVudENvbXBvbmVudCA9IG5ldyBWZXJ0aWNhbE1vdmVtZW50Q29tcG9uZW50KFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIHRoaXMuX2lucHV0Q29tcG9uZW50LFxuICAgICAgICAgICAgQ09ORklHLkVORU1ZX0ZJR0hURVJfTU9WRU1FTlRfVkVSVElDQUxfVkVMT0NJVFlcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2J1bGxldFNwYXduZXIgPSBuZXcgQnVsbGV0U3Bhd25lckNvbXBvbmVudChcbiAgICAgICAgICAgIHRoaXMuc2NlbmUsXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgJ2J1bGxldCcsXG4gICAgICAgICAgICBDT05GSUcuRU5FTVlfRklHSFRFUl9CVUxMRVRfTUFYX0NPVU5UXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5fZHJvcENvbmZpZyA9IHtcbiAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgeyB0eXBlOiAnUE9XRVInLCBjaGFuY2U6IDAuNyB9LFxuICAgICAgICAgICAgICAgIHsgdHlwZTogJ1NDT1JFJywgY2hhbmNlOiAwLjMgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuXG4gICAgICAgIGV2ZW50QnVzLmVtaXQoQ1VTVE9NX0VWRU5UUy5FTkVNWV9JTklULCB0aGlzKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW5pdFNwcml0ZXMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX3NoaXBTcHJpdGUgPSB0aGlzLnNjZW5lLmFkZC5zcHJpdGUoMCwgMCwgJ2ZpZ2h0ZXInLCAwKTtcbiAgICAgICAgdGhpcy5fZW5naW5lU3ByaXRlID0gdGhpcy5zY2VuZS5hZGQuc3ByaXRlKDAsIDAsICdmaWdodGVyX2VuZ2luZScpXG4gICAgICAgICAgICAuc2V0RmxpcFkodHJ1ZSlcbiAgICAgICAgICAgIC5wbGF5KCdmaWdodGVyX2VuZ2luZScpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGQoW3RoaXMuX2VuZ2luZVNwcml0ZSwgdGhpcy5fc2hpcFNwcml0ZV0pO1xuICAgIH1cblxuICAgIGdldCBzaGlwQXNzZXRLZXkoKTogc3RyaW5nIHsgcmV0dXJuICdmaWdodGVyJzsgfVxuICAgIGdldCBzaGlwRGVzdHJveWVkQW5pbWF0aW9uS2V5KCk6IHN0cmluZyB7IHJldHVybiAnZmlnaHRlcl9kZXN0cm95JzsgfVxuXG4gICAgcmVzZXQoKTogdm9pZCB7XG4gICAgICAgIHN1cGVyLnJlc2V0KCk7XG4gICAgICAgIHRoaXMuX3ZlcnRpY2FsTW92ZW1lbnRDb21wb25lbnQucmVzZXQoKTtcbiAgICAgICAgdGhpcy5fZW5naW5lU3ByaXRlLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuX2xhc3RGaXJlVGltZSA9IDA7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldEluaXRpYWxIZWFsdGgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIENPTkZJRy5FTkVNWV9GSUdIVEVSX0hFQUxUSDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgY3VzdG9tVXBkYXRlKHRpbWU6IG51bWJlciwgZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLl9pbnB1dENvbXBvbmVudC51cGRhdGUoKTtcbiAgICAgICAgdGhpcy5fdmVydGljYWxNb3ZlbWVudENvbXBvbmVudC51cGRhdGUoKTtcbiAgICAgICAgXG4gICAgICAgIC8vINCb0L7Qs9C40LrQsCDRgdGC0YDQtdC70YzQsdGLXG4gICAgICAgIGlmICh0aW1lIC0gdGhpcy5fbGFzdEZpcmVUaW1lID49IENPTkZJRy5FTkVNWV9GSUdIVEVSX0JVTExFVF9JTlRFUlZBTCkge1xuICAgICAgICAgICAgdGhpcy5maXJlQnVsbGV0KCk7XG4gICAgICAgICAgICB0aGlzLl9sYXN0RmlyZVRpbWUgPSB0aW1lO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaXJlQnVsbGV0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9idWxsZXRTcGF3bmVyPy5zcGF3bih7XG4gICAgICAgICAgICBkaXJlY3Rpb25zOiBbbmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoMCwgLTEpXSxcbiAgICAgICAgICAgIHNwZWVkOiBDT05GSUcuRU5FTVlfRklHSFRFUl9CVUxMRVRfU1BFRUQsXG4gICAgICAgICAgICBsaWZlc3BhbjogQ09ORklHLkVORU1ZX0ZJR0hURVJfQlVMTEVUX0xJRkVTUEFOLFxuICAgICAgICAgICAgc2l6ZTogeyB3aWR0aDogMTQsIGhlaWdodDogMTggfSxcbiAgICAgICAgICAgIGFuaW1hdGlvbktleTogJ2J1bGxldCcsXG4gICAgICAgICAgICBmbGlwWTogdHJ1ZSxcbiAgICAgICAgICAgIHNjYWxlOiAwLjgsXG4gICAgICAgICAgICBzcGF3blBvc2l0aW9uOiB7IFxuICAgICAgICAgICAgICAgIHg6IHRoaXMueCwgXG4gICAgICAgICAgICAgICAgeTogdGhpcy55ICsgMTBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fZXZlbnRCdXNDb21wb25lbnQuZW1pdChDVVNUT01fRVZFTlRTLlNISVBfU0hPT1QpO1xuICAgIH1cblxuICAgIGRlc3Ryb3koZnJvbVNjZW5lPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5fYnVsbGV0U3Bhd25lcikge1xuICAgICAgICAgICAgdGhpcy5fYnVsbGV0U3Bhd25lci5jbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZW5naW5lU3ByaXRlLmRlc3Ryb3koZnJvbVNjZW5lKTtcbiAgICAgICAgc3VwZXIuZGVzdHJveShmcm9tU2NlbmUpO1xuICAgIH1cbn0iXSwibmFtZXMiOlsiUGhhc2VyIiwiQm90RmlnaHRlcklucHV0Q29tcG9uZW50IiwiVmVydGljYWxNb3ZlbWVudENvbXBvbmVudCIsIkJ1bGxldFNwYXduZXJDb21wb25lbnQiLCJDT05GSUciLCJCYXNlRW5lbXkiLCJDVVNUT01fRVZFTlRTIiwiRmlnaHRlckVuZW15IiwiZW5lbXlUeXBlIiwiY29uc3RydWN0b3IiLCJzY2VuZSIsIngiLCJ5IiwiX2xhc3RGaXJlVGltZSIsImluaXRTcHJpdGVzIiwiaW5pdCIsImV2ZW50QnVzIiwiX2lucHV0Q29tcG9uZW50IiwiX3ZlcnRpY2FsTW92ZW1lbnRDb21wb25lbnQiLCJFTkVNWV9GSUdIVEVSX01PVkVNRU5UX1ZFUlRJQ0FMX1ZFTE9DSVRZIiwiX2J1bGxldFNwYXduZXIiLCJFTkVNWV9GSUdIVEVSX0JVTExFVF9NQVhfQ09VTlQiLCJfZHJvcENvbmZpZyIsIml0ZW1zIiwidHlwZSIsImNoYW5jZSIsImVtaXQiLCJFTkVNWV9JTklUIiwiX3NoaXBTcHJpdGUiLCJhZGQiLCJzcHJpdGUiLCJfZW5naW5lU3ByaXRlIiwic2V0RmxpcFkiLCJwbGF5Iiwic2hpcEFzc2V0S2V5Iiwic2hpcERlc3Ryb3llZEFuaW1hdGlvbktleSIsInJlc2V0Iiwic2V0VmlzaWJsZSIsImdldEluaXRpYWxIZWFsdGgiLCJFTkVNWV9GSUdIVEVSX0hFQUxUSCIsImN1c3RvbVVwZGF0ZSIsInRpbWUiLCJkZWx0YSIsInVwZGF0ZSIsIkVORU1ZX0ZJR0hURVJfQlVMTEVUX0lOVEVSVkFMIiwiZmlyZUJ1bGxldCIsInNwYXduIiwiZGlyZWN0aW9ucyIsIk1hdGgiLCJWZWN0b3IyIiwic3BlZWQiLCJFTkVNWV9GSUdIVEVSX0JVTExFVF9TUEVFRCIsImxpZmVzcGFuIiwiRU5FTVlfRklHSFRFUl9CVUxMRVRfTElGRVNQQU4iLCJzaXplIiwid2lkdGgiLCJoZWlnaHQiLCJhbmltYXRpb25LZXkiLCJmbGlwWSIsInNjYWxlIiwic3Bhd25Qb3NpdGlvbiIsIl9ldmVudEJ1c0NvbXBvbmVudCIsIlNISVBfU0hPT1QiLCJkZXN0cm95IiwiZnJvbVNjZW5lIiwiY2xlYW51cCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/entities/enemies/common/fighter-enemy.ts\n");

/***/ }),

/***/ "./src/game/entities/enemies/common/scout-enemy.ts":
/*!*********************************************************!*\
  !*** ./src/game/entities/enemies/common/scout-enemy.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ScoutEnemy: () => (/* binding */ ScoutEnemy)\n/* harmony export */ });\n/* harmony import */ var _components_input_ai_common_bot_scout_input_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../components/input/ai/common/bot-scout-input-component */ \"./src/game/components/input/ai/common/bot-scout-input-component.ts\");\n/* harmony import */ var _components_movement_horizontal_movement_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/movement/horizontal-movement-component */ \"./src/game/components/movement/horizontal-movement-component.ts\");\n/* harmony import */ var _components_movement_vertical_movement_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/movement/vertical-movement-component */ \"./src/game/components/movement/vertical-movement-component.ts\");\n/* harmony import */ var _configs_game_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../configs/game-config */ \"./src/game/configs/game-config.ts\");\n/* harmony import */ var _base_enemy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../base-enemy */ \"./src/game/entities/enemies/base-enemy.ts\");\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n\n\n\n\n\n\nclass ScoutEnemy extends _base_enemy__WEBPACK_IMPORTED_MODULE_4__.BaseEnemy {\n    static{\n        this.enemyType = \"scout\";\n    }\n    constructor(scene, x, y){\n        super(scene, x, y);\n        this.initSprites();\n        this._dropConfig = {\n            items: [\n                {\n                    type: \"POWER\",\n                    chance: 0.6\n                },\n                {\n                    type: \"SCORE\",\n                    chance: 0.3\n                }\n            ]\n        };\n    }\n    init(eventBus) {\n        super.init(eventBus);\n        this._inputComponent = new _components_input_ai_common_bot_scout_input_component__WEBPACK_IMPORTED_MODULE_0__.BotScoutInputComponent(this);\n        this._horizontalMovementComponent = new _components_movement_horizontal_movement_component__WEBPACK_IMPORTED_MODULE_1__.HorizontalMovementComponent(this, this._inputComponent, _configs_game_config__WEBPACK_IMPORTED_MODULE_3__.ENEMY_SCOUT_MOVEMENT_HORIZONTAL_VELOCITY);\n        this._verticalMovementComponent = new _components_movement_vertical_movement_component__WEBPACK_IMPORTED_MODULE_2__.VerticalMovementComponent(this, this._inputComponent, _configs_game_config__WEBPACK_IMPORTED_MODULE_3__.ENEMY_SCOUT_MOVEMENT_VERTICAL_VELOCITY);\n        eventBus.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_5__.CUSTOM_EVENTS.ENEMY_INIT, this);\n    }\n    initSprites() {\n        this._shipSprite = this.scene.add.sprite(0, 0, \"scout\", 0);\n        this._engineSprite = this.scene.add.sprite(0, 0, \"scout_engine\").setFlipY(true).play(\"scout_engine\");\n        this.add([\n            this._engineSprite,\n            this._shipSprite\n        ]);\n    }\n    get shipAssetKey() {\n        return \"scout\";\n    }\n    get shipDestroyedAnimationKey() {\n        return \"scout_destroy\";\n    }\n    reset() {\n        super.reset();\n        this._inputComponent.setStartX(this.x);\n        this._verticalMovementComponent.reset();\n        this._horizontalMovementComponent.reset();\n        this._engineSprite.setVisible(true);\n    }\n    getInitialHealth() {\n        return _configs_game_config__WEBPACK_IMPORTED_MODULE_3__.ENEMY_SCOUT_HEALTH;\n    }\n    customUpdate(time, delta) {\n        this._inputComponent.update();\n        this._horizontalMovementComponent.update();\n        this._verticalMovementComponent.update();\n    }\n    destroy(fromScene) {\n        this._engineSprite.destroy(fromScene);\n        super.destroy(fromScene);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy9lbmVtaWVzL2NvbW1vbi9zY291dC1lbmVteS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ3VHO0FBQ0U7QUFDSjtBQUU5QztBQUNiO0FBQ2lCO0FBRXBELE1BQU1NLG1CQUFtQkYsa0RBQVNBOzthQUM5QkcsWUFBWTs7SUFPbkJDLFlBQVlDLEtBQW1CLEVBQUVDLENBQVMsRUFBRUMsQ0FBUyxDQUFFO1FBQ25ELEtBQUssQ0FBQ0YsT0FBT0MsR0FBR0M7UUFDaEIsSUFBSSxDQUFDQyxXQUFXO1FBQ2hCLElBQUksQ0FBQ0MsV0FBVyxHQUFHO1lBQ2ZDLE9BQU87Z0JBQ0g7b0JBQUVDLE1BQU07b0JBQVNDLFFBQVE7Z0JBQUk7Z0JBQzdCO29CQUFFRCxNQUFNO29CQUFTQyxRQUFRO2dCQUFJO2FBQ2hDO1FBQ0w7SUFDSjtJQUVBQyxLQUFLQyxRQUEyQixFQUFRO1FBQ3BDLEtBQUssQ0FBQ0QsS0FBS0M7UUFFWCxJQUFJLENBQUNDLGVBQWUsR0FBRyxJQUFJbkIseUdBQXNCQSxDQUFDLElBQUk7UUFDdEQsSUFBSSxDQUFDb0IsNEJBQTRCLEdBQUcsSUFBSW5CLDJHQUEyQkEsQ0FDL0QsSUFBSSxFQUNKLElBQUksQ0FBQ2tCLGVBQWUsRUFDcEJoQiwwRkFBK0M7UUFFbkQsSUFBSSxDQUFDbUIsMEJBQTBCLEdBQUcsSUFBSXBCLHVHQUF5QkEsQ0FDM0QsSUFBSSxFQUNKLElBQUksQ0FBQ2lCLGVBQWUsRUFDcEJoQix3RkFBNkM7UUFHakRlLFNBQVNNLElBQUksQ0FBQ25CLG9FQUFhQSxDQUFDb0IsVUFBVSxFQUFFLElBQUk7SUFDaEQ7SUFFVWIsY0FBb0I7UUFDMUIsSUFBSSxDQUFDYyxXQUFXLEdBQUcsSUFBSSxDQUFDakIsS0FBSyxDQUFDa0IsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxHQUFHLFNBQVM7UUFDeEQsSUFBSSxDQUFDQyxhQUFhLEdBQUcsSUFBSSxDQUFDcEIsS0FBSyxDQUFDa0IsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxHQUFHLGdCQUM1Q0UsUUFBUSxDQUFDLE1BQ1RDLElBQUksQ0FBQztRQUVWLElBQUksQ0FBQ0osR0FBRyxDQUFDO1lBQUMsSUFBSSxDQUFDRSxhQUFhO1lBQUUsSUFBSSxDQUFDSCxXQUFXO1NBQUM7SUFDbkQ7SUFFQSxJQUFJTSxlQUF1QjtRQUFFLE9BQVE7SUFBUztJQUM5QyxJQUFJQyw0QkFBb0M7UUFBRSxPQUFRO0lBQWlCO0lBRW5FQyxRQUFjO1FBQ1YsS0FBSyxDQUFDQTtRQUNOLElBQUksQ0FBQ2YsZUFBZSxDQUFDZ0IsU0FBUyxDQUFDLElBQUksQ0FBQ3pCLENBQUM7UUFDckMsSUFBSSxDQUFDWSwwQkFBMEIsQ0FBQ1ksS0FBSztRQUNyQyxJQUFJLENBQUNkLDRCQUE0QixDQUFDYyxLQUFLO1FBQ3ZDLElBQUksQ0FBQ0wsYUFBYSxDQUFDTyxVQUFVLENBQUM7SUFDbEM7SUFFVUMsbUJBQTJCO1FBQ2pDLE9BQU9sQyxvRUFBeUI7SUFDcEM7SUFFVW9DLGFBQWFDLElBQVksRUFBRUMsS0FBYSxFQUFRO1FBQ3RELElBQUksQ0FBQ3RCLGVBQWUsQ0FBQ3VCLE1BQU07UUFDM0IsSUFBSSxDQUFDdEIsNEJBQTRCLENBQUNzQixNQUFNO1FBQ3hDLElBQUksQ0FBQ3BCLDBCQUEwQixDQUFDb0IsTUFBTTtJQUMxQztJQUVBQyxRQUFRQyxTQUFtQixFQUFRO1FBQy9CLElBQUksQ0FBQ2YsYUFBYSxDQUFDYyxPQUFPLENBQUNDO1FBQzNCLEtBQUssQ0FBQ0QsUUFBUUM7SUFDbEI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9lbnRpdGllcy9lbmVtaWVzL2NvbW1vbi9zY291dC1lbmVteS50cz8xNTQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IEJvdFNjb3V0SW5wdXRDb21wb25lbnQgfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL2lucHV0L2FpL2NvbW1vbi9ib3Qtc2NvdXQtaW5wdXQtY29tcG9uZW50JztcbmltcG9ydCB7IEhvcml6b250YWxNb3ZlbWVudENvbXBvbmVudCB9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvbW92ZW1lbnQvaG9yaXpvbnRhbC1tb3ZlbWVudC1jb21wb25lbnQnO1xuaW1wb3J0IHsgVmVydGljYWxNb3ZlbWVudENvbXBvbmVudCB9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvbW92ZW1lbnQvdmVydGljYWwtbW92ZW1lbnQtY29tcG9uZW50JztcbmltcG9ydCB7IEV2ZW50QnVzQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9ldmVudHMvZXZlbnQtYnVzLWNvbXBvbmVudCc7XG5pbXBvcnQgKiBhcyBDT05GSUcgZnJvbSAnLi4vLi4vLi4vY29uZmlncy9nYW1lLWNvbmZpZyc7XG5pbXBvcnQgeyBCYXNlRW5lbXkgfSBmcm9tICcuLi9iYXNlLWVuZW15JztcbmltcG9ydCB7IENVU1RPTV9FVkVOVFMgfSBmcm9tICdAL2dhbWUvdHlwZXMvY3VzdG9tLWV2ZW50cyc7XG5cbmV4cG9ydCBjbGFzcyBTY291dEVuZW15IGV4dGVuZHMgQmFzZUVuZW15IHtcbiAgICBzdGF0aWMgZW5lbXlUeXBlID0gJ3Njb3V0JztcbiAgICBwcml2YXRlIF9pbnB1dENvbXBvbmVudCE6IEJvdFNjb3V0SW5wdXRDb21wb25lbnQ7XG4gICAgcHJpdmF0ZSBfaG9yaXpvbnRhbE1vdmVtZW50Q29tcG9uZW50ITogSG9yaXpvbnRhbE1vdmVtZW50Q29tcG9uZW50O1xuICAgIHByaXZhdGUgX3ZlcnRpY2FsTW92ZW1lbnRDb21wb25lbnQhOiBWZXJ0aWNhbE1vdmVtZW50Q29tcG9uZW50O1xuICAgIHByaXZhdGUgX3NoaXBTcHJpdGUhOiBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlO1xuICAgIHByaXZhdGUgX2VuZ2luZVNwcml0ZSE6IFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGU7XG5cbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogUGhhc2VyLlNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSk7XG4gICAgICAgIHRoaXMuaW5pdFNwcml0ZXMoKTtcbiAgICAgICAgdGhpcy5fZHJvcENvbmZpZyA9IHtcbiAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgeyB0eXBlOiAnUE9XRVInLCBjaGFuY2U6IDAuNiB9LFxuICAgICAgICAgICAgICAgIHsgdHlwZTogJ1NDT1JFJywgY2hhbmNlOiAwLjMgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGluaXQoZXZlbnRCdXM6IEV2ZW50QnVzQ29tcG9uZW50KTogdm9pZCB7XG4gICAgICAgIHN1cGVyLmluaXQoZXZlbnRCdXMpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5faW5wdXRDb21wb25lbnQgPSBuZXcgQm90U2NvdXRJbnB1dENvbXBvbmVudCh0aGlzKTtcbiAgICAgICAgdGhpcy5faG9yaXpvbnRhbE1vdmVtZW50Q29tcG9uZW50ID0gbmV3IEhvcml6b250YWxNb3ZlbWVudENvbXBvbmVudChcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICB0aGlzLl9pbnB1dENvbXBvbmVudCxcbiAgICAgICAgICAgIENPTkZJRy5FTkVNWV9TQ09VVF9NT1ZFTUVOVF9IT1JJWk9OVEFMX1ZFTE9DSVRZXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX3ZlcnRpY2FsTW92ZW1lbnRDb21wb25lbnQgPSBuZXcgVmVydGljYWxNb3ZlbWVudENvbXBvbmVudChcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICB0aGlzLl9pbnB1dENvbXBvbmVudCxcbiAgICAgICAgICAgIENPTkZJRy5FTkVNWV9TQ09VVF9NT1ZFTUVOVF9WRVJUSUNBTF9WRUxPQ0lUWVxuICAgICAgICApO1xuXG4gICAgICAgIGV2ZW50QnVzLmVtaXQoQ1VTVE9NX0VWRU5UUy5FTkVNWV9JTklULCB0aGlzKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW5pdFNwcml0ZXMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX3NoaXBTcHJpdGUgPSB0aGlzLnNjZW5lLmFkZC5zcHJpdGUoMCwgMCwgJ3Njb3V0JywgMCk7XG4gICAgICAgIHRoaXMuX2VuZ2luZVNwcml0ZSA9IHRoaXMuc2NlbmUuYWRkLnNwcml0ZSgwLCAwLCAnc2NvdXRfZW5naW5lJylcbiAgICAgICAgICAgIC5zZXRGbGlwWSh0cnVlKVxuICAgICAgICAgICAgLnBsYXkoJ3Njb3V0X2VuZ2luZScpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGQoW3RoaXMuX2VuZ2luZVNwcml0ZSwgdGhpcy5fc2hpcFNwcml0ZV0pO1xuICAgIH1cblxuICAgIGdldCBzaGlwQXNzZXRLZXkoKTogc3RyaW5nIHsgcmV0dXJuICAnc2NvdXQnOyB9XG4gICAgZ2V0IHNoaXBEZXN0cm95ZWRBbmltYXRpb25LZXkoKTogc3RyaW5nIHsgcmV0dXJuICAnc2NvdXRfZGVzdHJveSc7IH1cblxuICAgIHJlc2V0KCk6IHZvaWQge1xuICAgICAgICBzdXBlci5yZXNldCgpO1xuICAgICAgICB0aGlzLl9pbnB1dENvbXBvbmVudC5zZXRTdGFydFgodGhpcy54KTtcbiAgICAgICAgdGhpcy5fdmVydGljYWxNb3ZlbWVudENvbXBvbmVudC5yZXNldCgpO1xuICAgICAgICB0aGlzLl9ob3Jpem9udGFsTW92ZW1lbnRDb21wb25lbnQucmVzZXQoKTtcbiAgICAgICAgdGhpcy5fZW5naW5lU3ByaXRlLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldEluaXRpYWxIZWFsdGgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIENPTkZJRy5FTkVNWV9TQ09VVF9IRUFMVEg7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGN1c3RvbVVwZGF0ZSh0aW1lOiBudW1iZXIsIGRlbHRhOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5faW5wdXRDb21wb25lbnQudXBkYXRlKCk7XG4gICAgICAgIHRoaXMuX2hvcml6b250YWxNb3ZlbWVudENvbXBvbmVudC51cGRhdGUoKTtcbiAgICAgICAgdGhpcy5fdmVydGljYWxNb3ZlbWVudENvbXBvbmVudC51cGRhdGUoKTtcbiAgICB9XG5cbiAgICBkZXN0cm95KGZyb21TY2VuZT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fZW5naW5lU3ByaXRlLmRlc3Ryb3koZnJvbVNjZW5lKTtcbiAgICAgICAgc3VwZXIuZGVzdHJveShmcm9tU2NlbmUpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCb3RTY291dElucHV0Q29tcG9uZW50IiwiSG9yaXpvbnRhbE1vdmVtZW50Q29tcG9uZW50IiwiVmVydGljYWxNb3ZlbWVudENvbXBvbmVudCIsIkNPTkZJRyIsIkJhc2VFbmVteSIsIkNVU1RPTV9FVkVOVFMiLCJTY291dEVuZW15IiwiZW5lbXlUeXBlIiwiY29uc3RydWN0b3IiLCJzY2VuZSIsIngiLCJ5IiwiaW5pdFNwcml0ZXMiLCJfZHJvcENvbmZpZyIsIml0ZW1zIiwidHlwZSIsImNoYW5jZSIsImluaXQiLCJldmVudEJ1cyIsIl9pbnB1dENvbXBvbmVudCIsIl9ob3Jpem9udGFsTW92ZW1lbnRDb21wb25lbnQiLCJFTkVNWV9TQ09VVF9NT1ZFTUVOVF9IT1JJWk9OVEFMX1ZFTE9DSVRZIiwiX3ZlcnRpY2FsTW92ZW1lbnRDb21wb25lbnQiLCJFTkVNWV9TQ09VVF9NT1ZFTUVOVF9WRVJUSUNBTF9WRUxPQ0lUWSIsImVtaXQiLCJFTkVNWV9JTklUIiwiX3NoaXBTcHJpdGUiLCJhZGQiLCJzcHJpdGUiLCJfZW5naW5lU3ByaXRlIiwic2V0RmxpcFkiLCJwbGF5Iiwic2hpcEFzc2V0S2V5Iiwic2hpcERlc3Ryb3llZEFuaW1hdGlvbktleSIsInJlc2V0Iiwic2V0U3RhcnRYIiwic2V0VmlzaWJsZSIsImdldEluaXRpYWxIZWFsdGgiLCJFTkVNWV9TQ09VVF9IRUFMVEgiLCJjdXN0b21VcGRhdGUiLCJ0aW1lIiwiZGVsdGEiLCJ1cGRhdGUiLCJkZXN0cm95IiwiZnJvbVNjZW5lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/entities/enemies/common/scout-enemy.ts\n");

/***/ }),

/***/ "./src/game/entities/items/base-item.ts":
/*!**********************************************!*\
  !*** ./src/game/entities/items/base-item.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseItem: () => (/* binding */ BaseItem)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n\nclass BaseItem extends (phaser__WEBPACK_IMPORTED_MODULE_0___default().Physics).Arcade.Sprite {\n    constructor(scene, x, y){\n        super(scene, x, y, \"\");\n        this.velocityY = 200 // Скорость падения\n        ;\n        // Создаем графическое представление\n        this.graphics = this.createGraphics();\n        this.graphics.setPosition(x, y);\n        // Добавляем физическое тело\n        scene.physics.add.existing(this);\n        const body = this.body;\n        body.setSize(this.getColliderWidth(), this.getColliderHeight());\n        body.setOffset(-this.getColliderWidth() / 2, -this.getColliderHeight() / 2);\n        body.setVelocity(0, this.velocityY);\n        body.setAllowGravity(false);\n        body.setCollideWorldBounds(false);\n        this.setDepth(4); // Уровень отрисовки выше врагов, но ниже пуль\n    }\n    init(eventBus) {\n        this.eventBus = eventBus;\n        this.scene.add.existing(this.graphics);\n    }\n    update() {\n        this.graphics.setPosition(this.x, this.y);\n        const body = this.body;\n        if (body.velocity.y !== this.velocityY) {\n            body.setVelocityY(this.velocityY);\n        }\n    }\n    destroy(fromScene) {\n        this.graphics.destroy();\n        super.destroy(fromScene);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy9pdGVtcy9iYXNlLWl0ZW0udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQzRCO0FBRXJCLE1BQWVDLGlCQUFpQkQsdURBQWMsQ0FBQ0csTUFBTSxDQUFDQyxNQUFNO0lBSy9EQyxZQUFZQyxLQUFtQixFQUFFQyxDQUFTLEVBQUVDLENBQVMsQ0FBRTtRQUNuRCxLQUFLLENBQUNGLE9BQU9DLEdBQUdDLEdBQUc7YUFKYkMsWUFBb0IsSUFBSyxtQkFBbUI7O1FBS2xELG9DQUFvQztRQUNwQyxJQUFJLENBQUNDLFFBQVEsR0FBRyxJQUFJLENBQUNDLGNBQWM7UUFDbkMsSUFBSSxDQUFDRCxRQUFRLENBQUNFLFdBQVcsQ0FBQ0wsR0FBR0M7UUFFN0IsNEJBQTRCO1FBQzVCRixNQUFNTyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxDQUFDLElBQUk7UUFDL0IsTUFBTUMsT0FBTyxJQUFJLENBQUNBLElBQUk7UUFDdEJBLEtBQUtDLE9BQU8sQ0FBQyxJQUFJLENBQUNDLGdCQUFnQixJQUFJLElBQUksQ0FBQ0MsaUJBQWlCO1FBQzVESCxLQUFLSSxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUNGLGdCQUFnQixLQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUNDLGlCQUFpQixLQUFHO1FBQ3JFSCxLQUFLSyxXQUFXLENBQUMsR0FBRyxJQUFJLENBQUNaLFNBQVM7UUFDbENPLEtBQUtNLGVBQWUsQ0FBQztRQUNyQk4sS0FBS08scUJBQXFCLENBQUM7UUFFM0IsSUFBSSxDQUFDQyxRQUFRLENBQUMsSUFBSSw4Q0FBOEM7SUFDcEU7SUFFQUMsS0FBS0MsUUFBMkIsRUFBUTtRQUNwQyxJQUFJLENBQUNBLFFBQVEsR0FBR0E7UUFDaEIsSUFBSSxDQUFDcEIsS0FBSyxDQUFDUSxHQUFHLENBQUNDLFFBQVEsQ0FBQyxJQUFJLENBQUNMLFFBQVE7SUFDekM7SUFFQWlCLFNBQWU7UUFDWCxJQUFJLENBQUNqQixRQUFRLENBQUNFLFdBQVcsQ0FBQyxJQUFJLENBQUNMLENBQUMsRUFBRSxJQUFJLENBQUNDLENBQUM7UUFDeEMsTUFBTVEsT0FBTyxJQUFJLENBQUNBLElBQUk7UUFDdEIsSUFBSUEsS0FBS1ksUUFBUSxDQUFDcEIsQ0FBQyxLQUFLLElBQUksQ0FBQ0MsU0FBUyxFQUFFO1lBQ3BDTyxLQUFLYSxZQUFZLENBQUMsSUFBSSxDQUFDcEIsU0FBUztRQUNwQztJQUNKO0lBT0FxQixRQUFRQyxTQUFtQixFQUFFO1FBQ3pCLElBQUksQ0FBQ3JCLFFBQVEsQ0FBQ29CLE9BQU87UUFDckIsS0FBSyxDQUFDQSxRQUFRQztJQUNsQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2VudGl0aWVzL2l0ZW1zL2Jhc2UtaXRlbS50cz9jOTZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50QnVzQ29tcG9uZW50IH0gZnJvbSAnQC9nYW1lL2NvbXBvbmVudHMvZXZlbnRzL2V2ZW50LWJ1cy1jb21wb25lbnQnO1xyXG5pbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZUl0ZW0gZXh0ZW5kcyBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuU3ByaXRlIHtcclxuICAgIHByb3RlY3RlZCBldmVudEJ1czogRXZlbnRCdXNDb21wb25lbnQ7XHJcbiAgICBwcm90ZWN0ZWQgdmVsb2NpdHlZOiBudW1iZXIgPSAyMDA7IC8vINCh0LrQvtGA0L7RgdGC0Ywg0L/QsNC00LXQvdC40Y9cclxuICAgIHByb3RlY3RlZCBncmFwaGljczogUGhhc2VyLkdhbWVPYmplY3RzLkdyYXBoaWNzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBQaGFzZXIuU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIHgsIHksICcnKTtcclxuICAgICAgICAvLyDQodC+0LfQtNCw0LXQvCDQs9GA0LDRhNC40YfQtdGB0LrQvtC1INC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNC1XHJcbiAgICAgICAgdGhpcy5ncmFwaGljcyA9IHRoaXMuY3JlYXRlR3JhcGhpY3MoKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNzLnNldFBvc2l0aW9uKHgsIHkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDRhNC40LfQuNGH0LXRgdC60L7QtSDRgtC10LvQvlxyXG4gICAgICAgIHNjZW5lLnBoeXNpY3MuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSB0aGlzLmJvZHkgYXMgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkJvZHk7XHJcbiAgICAgICAgYm9keS5zZXRTaXplKHRoaXMuZ2V0Q29sbGlkZXJXaWR0aCgpLCB0aGlzLmdldENvbGxpZGVySGVpZ2h0KCkpO1xyXG4gICAgICAgIGJvZHkuc2V0T2Zmc2V0KC10aGlzLmdldENvbGxpZGVyV2lkdGgoKS8yLCAtdGhpcy5nZXRDb2xsaWRlckhlaWdodCgpLzIpO1xyXG4gICAgICAgIGJvZHkuc2V0VmVsb2NpdHkoMCwgdGhpcy52ZWxvY2l0eVkpO1xyXG4gICAgICAgIGJvZHkuc2V0QWxsb3dHcmF2aXR5KGZhbHNlKTtcclxuICAgICAgICBib2R5LnNldENvbGxpZGVXb3JsZEJvdW5kcyhmYWxzZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zZXREZXB0aCg0KTsgLy8g0KPRgNC+0LLQtdC90Ywg0L7RgtGA0LjRgdC+0LLQutC4INCy0YvRiNC1INCy0YDQsNCz0L7Qsiwg0L3QviDQvdC40LbQtSDQv9GD0LvRjFxyXG4gICAgfVxyXG5cclxuICAgIGluaXQoZXZlbnRCdXM6IEV2ZW50QnVzQ29tcG9uZW50KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cyA9IGV2ZW50QnVzO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMuZ3JhcGhpY3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmdyYXBoaWNzLnNldFBvc2l0aW9uKHRoaXMueCwgdGhpcy55KTtcclxuICAgICAgICBjb25zdCBib2R5ID0gdGhpcy5ib2R5IGFzIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Cb2R5O1xyXG4gICAgICAgIGlmIChib2R5LnZlbG9jaXR5LnkgIT09IHRoaXMudmVsb2NpdHlZKSB7XHJcbiAgICAgICAgICAgIGJvZHkuc2V0VmVsb2NpdHlZKHRoaXMudmVsb2NpdHlZKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWJzdHJhY3Qgb25Db2xsZWN0KHBsYXllcjogYW55KTogdm9pZDsgLy8g0JzQtdGC0L7QtCDQsdGD0LTQtdGCINGA0LXQsNC70LjQt9C+0LLQsNC9INCyINC00L7Rh9C10YDQvdC40YUg0LrQu9Cw0YHRgdCw0YVcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjcmVhdGVHcmFwaGljcygpOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3M7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0Q29sbGlkZXJXaWR0aCgpOiBudW1iZXI7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0Q29sbGlkZXJIZWlnaHQoKTogbnVtYmVyO1xyXG5cclxuICAgIGRlc3Ryb3koZnJvbVNjZW5lPzogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY3MuZGVzdHJveSgpO1xyXG4gICAgICAgIHN1cGVyLmRlc3Ryb3koZnJvbVNjZW5lKTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJQaGFzZXIiLCJCYXNlSXRlbSIsIlBoeXNpY3MiLCJBcmNhZGUiLCJTcHJpdGUiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwieCIsInkiLCJ2ZWxvY2l0eVkiLCJncmFwaGljcyIsImNyZWF0ZUdyYXBoaWNzIiwic2V0UG9zaXRpb24iLCJwaHlzaWNzIiwiYWRkIiwiZXhpc3RpbmciLCJib2R5Iiwic2V0U2l6ZSIsImdldENvbGxpZGVyV2lkdGgiLCJnZXRDb2xsaWRlckhlaWdodCIsInNldE9mZnNldCIsInNldFZlbG9jaXR5Iiwic2V0QWxsb3dHcmF2aXR5Iiwic2V0Q29sbGlkZVdvcmxkQm91bmRzIiwic2V0RGVwdGgiLCJpbml0IiwiZXZlbnRCdXMiLCJ1cGRhdGUiLCJ2ZWxvY2l0eSIsInNldFZlbG9jaXR5WSIsImRlc3Ryb3kiLCJmcm9tU2NlbmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/entities/items/base-item.ts\n");

/***/ }),

/***/ "./src/game/entities/items/bomb-item.ts":
/*!**********************************************!*\
  !*** ./src/game/entities/items/bomb-item.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BombItem: () => (/* binding */ BombItem)\n/* harmony export */ });\n/* harmony import */ var _base_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base-item */ \"./src/game/entities/items/base-item.ts\");\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _game_utils_graphics_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/game/utils/graphics-utils */ \"./src/game/utils/graphics-utils.ts\");\n\n\n\nclass BombItem extends _base_item__WEBPACK_IMPORTED_MODULE_0__.BaseItem {\n    createGraphics() {\n        return _game_utils_graphics_utils__WEBPACK_IMPORTED_MODULE_2__.GraphicsUtils.createBombItem(this.scene, 0, 0);\n    }\n    getColliderWidth() {\n        return 32;\n    }\n    getColliderHeight() {\n        return 32;\n    }\n    onCollect(player) {\n        this.eventBus.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ADD_BOMB, this.bombValue);\n        this.destroy();\n    }\n    constructor(...args){\n        super(...args);\n        this.bombValue = 1;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy9pdGVtcy9ib21iLWl0ZW0udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF1QztBQUVvQjtBQUNDO0FBRXJELE1BQU1HLGlCQUFpQkgsZ0RBQVFBO0lBR3hCSSxpQkFBOEM7UUFDcEQsT0FBT0YscUVBQWFBLENBQUNHLGNBQWMsQ0FBQyxJQUFJLENBQUNDLEtBQUssRUFBRSxHQUFHO0lBQ3ZEO0lBRVVDLG1CQUEyQjtRQUNqQyxPQUFPO0lBQ1g7SUFDVUMsb0JBQTRCO1FBQ2xDLE9BQU87SUFDWDtJQUVBQyxVQUFVQyxNQUFjLEVBQVE7UUFDNUIsSUFBSSxDQUFDQyxRQUFRLENBQUNDLElBQUksQ0FBQ1gsb0VBQWFBLENBQUNZLFFBQVEsRUFBRSxJQUFJLENBQUNDLFNBQVM7UUFDekQsSUFBSSxDQUFDQyxPQUFPO0lBQ2hCOzs7YUFoQlFELFlBQW9COztBQWlCaEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvZW50aXRpZXMvaXRlbXMvYm9tYi1pdGVtLnRzPzdjYjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZUl0ZW0gfSBmcm9tICcuL2Jhc2UtaXRlbSc7XHJcbmltcG9ydCB7IFBsYXllciB9IGZyb20gJy4uL3BsYXllcic7XHJcbmltcG9ydCB7IENVU1RPTV9FVkVOVFMgfSBmcm9tICdAL2dhbWUvdHlwZXMvY3VzdG9tLWV2ZW50cyc7XHJcbmltcG9ydCB7IEdyYXBoaWNzVXRpbHMgfSBmcm9tICdAL2dhbWUvdXRpbHMvZ3JhcGhpY3MtdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJvbWJJdGVtIGV4dGVuZHMgQmFzZUl0ZW0ge1xyXG4gICAgcHJpdmF0ZSBib21iVmFsdWU6IG51bWJlciA9IDE7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUdyYXBoaWNzKCk6IFBoYXNlci5HYW1lT2JqZWN0cy5HcmFwaGljcyB7XHJcbiAgICAgICAgcmV0dXJuIEdyYXBoaWNzVXRpbHMuY3JlYXRlQm9tYkl0ZW0odGhpcy5zY2VuZSwgMCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldENvbGxpZGVyV2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gMzI7XHJcbiAgICB9XHJcbiAgICBwcm90ZWN0ZWQgZ2V0Q29sbGlkZXJIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gMzI7XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2xsZWN0KHBsYXllcjogUGxheWVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuQUREX0JPTUIsIHRoaXMuYm9tYlZhbHVlKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJCYXNlSXRlbSIsIkNVU1RPTV9FVkVOVFMiLCJHcmFwaGljc1V0aWxzIiwiQm9tYkl0ZW0iLCJjcmVhdGVHcmFwaGljcyIsImNyZWF0ZUJvbWJJdGVtIiwic2NlbmUiLCJnZXRDb2xsaWRlcldpZHRoIiwiZ2V0Q29sbGlkZXJIZWlnaHQiLCJvbkNvbGxlY3QiLCJwbGF5ZXIiLCJldmVudEJ1cyIsImVtaXQiLCJBRERfQk9NQiIsImJvbWJWYWx1ZSIsImRlc3Ryb3kiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/entities/items/bomb-item.ts\n");

/***/ }),

/***/ "./src/game/entities/items/health-item.ts":
/*!************************************************!*\
  !*** ./src/game/entities/items/health-item.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HealthItem: () => (/* binding */ HealthItem)\n/* harmony export */ });\n/* harmony import */ var _base_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base-item */ \"./src/game/entities/items/base-item.ts\");\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _game_utils_graphics_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/game/utils/graphics-utils */ \"./src/game/utils/graphics-utils.ts\");\n\n\n\nclass HealthItem extends _base_item__WEBPACK_IMPORTED_MODULE_0__.BaseItem {\n    createGraphics() {\n        return _game_utils_graphics_utils__WEBPACK_IMPORTED_MODULE_2__.GraphicsUtils.createHealthItem(this.scene, 0, 0);\n    }\n    getColliderWidth() {\n        return 32;\n    }\n    getColliderHeight() {\n        return 32;\n    }\n    onCollect(player) {\n        this.eventBus.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ADD_LIFE, this.healthValue);\n        this.destroy();\n    }\n    constructor(...args){\n        super(...args);\n        this.healthValue = 1;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy9pdGVtcy9oZWFsdGgtaXRlbS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVDO0FBRW9CO0FBQ0M7QUFFckQsTUFBTUcsbUJBQW1CSCxnREFBUUE7SUFHMUJJLGlCQUE4QztRQUNwRCxPQUFPRixxRUFBYUEsQ0FBQ0csZ0JBQWdCLENBQUMsSUFBSSxDQUFDQyxLQUFLLEVBQUUsR0FBRztJQUN6RDtJQUVVQyxtQkFBMkI7UUFDakMsT0FBTztJQUNYO0lBQ1VDLG9CQUE0QjtRQUNsQyxPQUFPO0lBQ1g7SUFFQUMsVUFBVUMsTUFBYyxFQUFRO1FBQzVCLElBQUksQ0FBQ0MsUUFBUSxDQUFDQyxJQUFJLENBQUNYLG9FQUFhQSxDQUFDWSxRQUFRLEVBQUUsSUFBSSxDQUFDQyxXQUFXO1FBQzNELElBQUksQ0FBQ0MsT0FBTztJQUNoQjs7O2FBaEJRRCxjQUFzQjs7QUFpQmxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2VudGl0aWVzL2l0ZW1zL2hlYWx0aC1pdGVtLnRzPzU0ODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZUl0ZW0gfSBmcm9tICcuL2Jhc2UtaXRlbSc7XHJcbmltcG9ydCB7IFBsYXllciB9IGZyb20gJy4uL3BsYXllcic7XHJcbmltcG9ydCB7IENVU1RPTV9FVkVOVFMgfSBmcm9tICdAL2dhbWUvdHlwZXMvY3VzdG9tLWV2ZW50cyc7XHJcbmltcG9ydCB7IEdyYXBoaWNzVXRpbHMgfSBmcm9tICdAL2dhbWUvdXRpbHMvZ3JhcGhpY3MtdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEhlYWx0aEl0ZW0gZXh0ZW5kcyBCYXNlSXRlbSB7XHJcbiAgICBwcml2YXRlIGhlYWx0aFZhbHVlOiBudW1iZXIgPSAxO1xyXG5cclxuICAgIHByb3RlY3RlZCBjcmVhdGVHcmFwaGljcygpOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3Mge1xyXG4gICAgICAgIHJldHVybiBHcmFwaGljc1V0aWxzLmNyZWF0ZUhlYWx0aEl0ZW0odGhpcy5zY2VuZSwgMCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldENvbGxpZGVyV2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gMzI7XHJcbiAgICB9XHJcbiAgICBwcm90ZWN0ZWQgZ2V0Q29sbGlkZXJIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gMzI7XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2xsZWN0KHBsYXllcjogUGxheWVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuQUREX0xJRkUsIHRoaXMuaGVhbHRoVmFsdWUpO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIkJhc2VJdGVtIiwiQ1VTVE9NX0VWRU5UUyIsIkdyYXBoaWNzVXRpbHMiLCJIZWFsdGhJdGVtIiwiY3JlYXRlR3JhcGhpY3MiLCJjcmVhdGVIZWFsdGhJdGVtIiwic2NlbmUiLCJnZXRDb2xsaWRlcldpZHRoIiwiZ2V0Q29sbGlkZXJIZWlnaHQiLCJvbkNvbGxlY3QiLCJwbGF5ZXIiLCJldmVudEJ1cyIsImVtaXQiLCJBRERfTElGRSIsImhlYWx0aFZhbHVlIiwiZGVzdHJveSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/entities/items/health-item.ts\n");

/***/ }),

/***/ "./src/game/entities/items/power-item.ts":
/*!***********************************************!*\
  !*** ./src/game/entities/items/power-item.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PowerItem: () => (/* binding */ PowerItem)\n/* harmony export */ });\n/* harmony import */ var _base_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base-item */ \"./src/game/entities/items/base-item.ts\");\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _game_utils_graphics_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/game/utils/graphics-utils */ \"./src/game/utils/graphics-utils.ts\");\n\n\n\nclass PowerItem extends _base_item__WEBPACK_IMPORTED_MODULE_0__.BaseItem {\n    createGraphics() {\n        return _game_utils_graphics_utils__WEBPACK_IMPORTED_MODULE_2__.GraphicsUtils.createPowerItem(this.scene, 0, 0);\n    }\n    getColliderWidth() {\n        return 16;\n    }\n    getColliderHeight() {\n        return 16;\n    }\n    onCollect(player) {\n        this.eventBus.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ADD_POWER, this.powerValue);\n        this.destroy();\n    }\n    constructor(...args){\n        super(...args);\n        this.powerValue = 5;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy9pdGVtcy9wb3dlci1pdGVtLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUM7QUFFb0I7QUFDQztBQUVyRCxNQUFNRyxrQkFBa0JILGdEQUFRQTtJQUd6QkksaUJBQThDO1FBQ3BELE9BQU9GLHFFQUFhQSxDQUFDRyxlQUFlLENBQUMsSUFBSSxDQUFDQyxLQUFLLEVBQUUsR0FBRztJQUN4RDtJQUVVQyxtQkFBMkI7UUFDakMsT0FBTztJQUNYO0lBRVVDLG9CQUE0QjtRQUNsQyxPQUFPO0lBQ1g7SUFFQUMsVUFBVUMsTUFBYyxFQUFRO1FBQzVCLElBQUksQ0FBQ0MsUUFBUSxDQUFDQyxJQUFJLENBQUNYLG9FQUFhQSxDQUFDWSxTQUFTLEVBQUUsSUFBSSxDQUFDQyxVQUFVO1FBQzNELElBQUksQ0FBQ0MsT0FBTztJQUNoQjs7O2FBakJRRCxhQUFxQjs7QUFrQmpDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2VudGl0aWVzL2l0ZW1zL3Bvd2VyLWl0ZW0udHM/MTYwYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlSXRlbSB9IGZyb20gJy4vYmFzZS1pdGVtJztcclxuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSAnLi4vcGxheWVyJztcclxuaW1wb3J0IHsgQ1VTVE9NX0VWRU5UUyB9IGZyb20gJ0AvZ2FtZS90eXBlcy9jdXN0b20tZXZlbnRzJztcclxuaW1wb3J0IHsgR3JhcGhpY3NVdGlscyB9IGZyb20gJ0AvZ2FtZS91dGlscy9ncmFwaGljcy11dGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG93ZXJJdGVtIGV4dGVuZHMgQmFzZUl0ZW0ge1xyXG4gICAgcHJpdmF0ZSBwb3dlclZhbHVlOiBudW1iZXIgPSA1O1xyXG5cclxuICAgIHByb3RlY3RlZCBjcmVhdGVHcmFwaGljcygpOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3Mge1xyXG4gICAgICAgIHJldHVybiBHcmFwaGljc1V0aWxzLmNyZWF0ZVBvd2VySXRlbSh0aGlzLnNjZW5lLCAwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0Q29sbGlkZXJXaWR0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAxNjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJvdGVjdGVkIGdldENvbGxpZGVySGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIDE2O1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ29sbGVjdChwbGF5ZXI6IFBsYXllcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLkFERF9QT1dFUiwgdGhpcy5wb3dlclZhbHVlKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJCYXNlSXRlbSIsIkNVU1RPTV9FVkVOVFMiLCJHcmFwaGljc1V0aWxzIiwiUG93ZXJJdGVtIiwiY3JlYXRlR3JhcGhpY3MiLCJjcmVhdGVQb3dlckl0ZW0iLCJzY2VuZSIsImdldENvbGxpZGVyV2lkdGgiLCJnZXRDb2xsaWRlckhlaWdodCIsIm9uQ29sbGVjdCIsInBsYXllciIsImV2ZW50QnVzIiwiZW1pdCIsIkFERF9QT1dFUiIsInBvd2VyVmFsdWUiLCJkZXN0cm95Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/entities/items/power-item.ts\n");

/***/ }),

/***/ "./src/game/entities/items/score-item.ts":
/*!***********************************************!*\
  !*** ./src/game/entities/items/score-item.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ScoreItem: () => (/* binding */ ScoreItem)\n/* harmony export */ });\n/* harmony import */ var _base_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base-item */ \"./src/game/entities/items/base-item.ts\");\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _game_utils_graphics_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/game/utils/graphics-utils */ \"./src/game/utils/graphics-utils.ts\");\n\n\n\nclass ScoreItem extends _base_item__WEBPACK_IMPORTED_MODULE_0__.BaseItem {\n    createGraphics() {\n        return _game_utils_graphics_utils__WEBPACK_IMPORTED_MODULE_2__.GraphicsUtils.createScoreItem(this.scene, 0, 0);\n    }\n    getColliderWidth() {\n        return 16;\n    }\n    getColliderHeight() {\n        return 16;\n    }\n    onCollect(player) {\n        this.eventBus.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ADD_SCORE, this.scoreValue);\n        this.destroy();\n    }\n    constructor(...args){\n        super(...args);\n        this.scoreValue = 100;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy9pdGVtcy9zY29yZS1pdGVtLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUM7QUFFb0I7QUFDQztBQUVyRCxNQUFNRyxrQkFBa0JILGdEQUFRQTtJQUd6QkksaUJBQThDO1FBQ3BELE9BQU9GLHFFQUFhQSxDQUFDRyxlQUFlLENBQUMsSUFBSSxDQUFDQyxLQUFLLEVBQUUsR0FBRztJQUN4RDtJQUVVQyxtQkFBMkI7UUFDakMsT0FBTztJQUNYO0lBQ1VDLG9CQUE0QjtRQUNsQyxPQUFPO0lBQ1g7SUFFQUMsVUFBVUMsTUFBYyxFQUFRO1FBQzVCLElBQUksQ0FBQ0MsUUFBUSxDQUFDQyxJQUFJLENBQUNYLG9FQUFhQSxDQUFDWSxTQUFTLEVBQUUsSUFBSSxDQUFDQyxVQUFVO1FBQzNELElBQUksQ0FBQ0MsT0FBTztJQUNoQjs7O2FBaEJRRCxhQUFxQjs7QUFpQmpDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2VudGl0aWVzL2l0ZW1zL3Njb3JlLWl0ZW0udHM/MDhmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlSXRlbSB9IGZyb20gJy4vYmFzZS1pdGVtJztcclxuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSAnLi4vcGxheWVyJztcclxuaW1wb3J0IHsgQ1VTVE9NX0VWRU5UUyB9IGZyb20gJ0AvZ2FtZS90eXBlcy9jdXN0b20tZXZlbnRzJztcclxuaW1wb3J0IHsgR3JhcGhpY3NVdGlscyB9IGZyb20gJ0AvZ2FtZS91dGlscy9ncmFwaGljcy11dGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2NvcmVJdGVtIGV4dGVuZHMgQmFzZUl0ZW0ge1xyXG4gICAgcHJpdmF0ZSBzY29yZVZhbHVlOiBudW1iZXIgPSAxMDA7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUdyYXBoaWNzKCk6IFBoYXNlci5HYW1lT2JqZWN0cy5HcmFwaGljcyB7XHJcbiAgICAgICAgcmV0dXJuIEdyYXBoaWNzVXRpbHMuY3JlYXRlU2NvcmVJdGVtKHRoaXMuc2NlbmUsIDAsIDApO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRDb2xsaWRlcldpZHRoKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIDE2O1xyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIGdldENvbGxpZGVySGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIDE2O1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ29sbGVjdChwbGF5ZXI6IFBsYXllcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLkFERF9TQ09SRSwgdGhpcy5zY29yZVZhbHVlKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJCYXNlSXRlbSIsIkNVU1RPTV9FVkVOVFMiLCJHcmFwaGljc1V0aWxzIiwiU2NvcmVJdGVtIiwiY3JlYXRlR3JhcGhpY3MiLCJjcmVhdGVTY29yZUl0ZW0iLCJzY2VuZSIsImdldENvbGxpZGVyV2lkdGgiLCJnZXRDb2xsaWRlckhlaWdodCIsIm9uQ29sbGVjdCIsInBsYXllciIsImV2ZW50QnVzIiwiZW1pdCIsIkFERF9TQ09SRSIsInNjb3JlVmFsdWUiLCJkZXN0cm95Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/entities/items/score-item.ts\n");

/***/ }),

/***/ "./src/game/entities/player.ts":
/*!*************************************!*\
  !*** ./src/game/entities/player.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Player: () => (/* binding */ Player)\n/* harmony export */ });\n/* harmony import */ var _components_collider_collider_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/collider/collider-component */ \"./src/game/components/collider/collider-component.ts\");\n/* harmony import */ var _components_health_health_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/health/health-component */ \"./src/game/components/health/health-component.ts\");\n/* harmony import */ var _components_input_human_keyboard_input_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/input/human/keyboard-input-component */ \"./src/game/components/input/human/keyboard-input-component.ts\");\n/* harmony import */ var _components_movement_horizontal_movement_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/movement/horizontal-movement-component */ \"./src/game/components/movement/horizontal-movement-component.ts\");\n/* harmony import */ var _components_movement_vertical_movement_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/movement/vertical-movement-component */ \"./src/game/components/movement/vertical-movement-component.ts\");\n/* harmony import */ var _components_weapon_weapon_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/weapon/weapon-component */ \"./src/game/components/weapon/weapon-component.ts\");\n/* harmony import */ var _configs_game_config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../configs/game-config */ \"./src/game/configs/game-config.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _types_custom_events__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../types/custom-events */ \"./src/game/types/custom-events.ts\");\n\n\n\n\n\n\n\n\n\nclass Player extends (phaser__WEBPACK_IMPORTED_MODULE_7___default().GameObjects).Container {\n    constructor(scene, eventBus){\n        super(scene, scene.scale.width / 2, scene.scale.height - 32, []);\n        this._isInvulnerable = false;\n        this._invulnerabilityTimer = null;\n        this._blinkTween = null;\n        this._isBombActive = false;\n        this._bombTimer = null;\n        this._bombCooldown = false;\n        this._isWeaponChanged = false;\n        this._pickupRadius = 30 // Радиус подбора предметов\n        ;\n        // Инициализация физики\n        this.scene.add.existing(this);\n        this.scene.physics.add.existing(this); //хитбокс, при включенном debug виден\n        if (!this.body) {\n            throw new Error(\"Physics body not created for FighterEnemy\");\n        }\n        if (this.body instanceof (phaser__WEBPACK_IMPORTED_MODULE_7___default().Physics).Arcade.Body) {\n            this.body.setSize(4, 4); //его размер\n            this.body.setOffset(-1.9, 0); //его смещение\n            this.body.setCollideWorldBounds(true); //столкновение со стенами сцены\n            this.setDepth(2); //Выше глубина - отрисовывается выше объектов с меньшей глубиной\n        }\n        this._eventBus = eventBus;\n        // Графические компоненты\n        this._shipSprite = scene.add.sprite(0, 0, \"ship\");\n        this._engineSprite = scene.add.sprite(0, 0, \"ship_engine\");\n        this._thrusterSprite = scene.add.sprite(0, 0, \"ship_engine_thruster\");\n        this._thrusterSprite.play(\"ship_engine_thruster\");\n        this.add([\n            this._thrusterSprite,\n            this._engineSprite,\n            this._shipSprite\n        ]);\n        // Инициализация компонентов\n        this._keyboardInput = new _components_input_human_keyboard_input_component__WEBPACK_IMPORTED_MODULE_2__.KeyboardInputComponent(scene);\n        this._horizontalMovement = new _components_movement_horizontal_movement_component__WEBPACK_IMPORTED_MODULE_3__.HorizontalMovementComponent(this, this._keyboardInput, _configs_game_config__WEBPACK_IMPORTED_MODULE_6__.PLAYER_MOVEMENT_VELOCITY);\n        this._verticalMovement = new _components_movement_vertical_movement_component__WEBPACK_IMPORTED_MODULE_4__.VerticalMovementComponent(this, this._keyboardInput, _configs_game_config__WEBPACK_IMPORTED_MODULE_6__.PLAYER_MOVEMENT_VELOCITY);\n        this._weapon = new _components_weapon_weapon_component__WEBPACK_IMPORTED_MODULE_5__.WeaponComponent(this, this._keyboardInput, eventBus);\n        this._health = new _components_health_health_component__WEBPACK_IMPORTED_MODULE_1__.HealthComponent(_configs_game_config__WEBPACK_IMPORTED_MODULE_6__.PLAYER_HEALTH);\n        this._collider = new _components_collider_collider_component__WEBPACK_IMPORTED_MODULE_0__.ColliderComponent(this._health, eventBus);\n        // Настройка событий\n        this.hide();\n        eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.PLAYER_SPAWN, this.spawn, this);\n        // Обработка добавления HP\n        this._eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.ADD_LIFE, (amount = 1)=>{\n            this._health.setLife(this._health.life + amount);\n        });\n        // Обработка добавления бомб\n        this._eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.ADD_BOMB, (amount = 1)=>{\n            this._bombsCount = this._bombsCount + amount;\n            this._eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.BOMB_COUNT_CHANGED, this._bombsCount);\n        });\n        scene.events.on((phaser__WEBPACK_IMPORTED_MODULE_7___default().Scenes).Events.UPDATE, this.update, this);\n        this.once((phaser__WEBPACK_IMPORTED_MODULE_7___default().GameObjects).Events.DESTROY, this.cleanup, this);\n        this._focusIndicator = scene.add.graphics();\n        this._focusIndicator.setDepth(10); // Поверх других объектов\n        this.add(this._focusIndicator);\n        this._bombsCount = _configs_game_config__WEBPACK_IMPORTED_MODULE_6__.PLAYER_BOMB_CONFIG.count;\n        this._bombEffect = scene.add.graphics();\n        this._bombEffect.setDepth(-5); // Между фоном и объектами\n        this._bombEffect.setVisible(false);\n        this.setupTestControls();\n    }\n    canPickup(item) {\n        return phaser__WEBPACK_IMPORTED_MODULE_7___default().Math.Distance.Between(this.x, this.y, item.x, item.y) <= this._pickupRadius;\n    }\n    setupTestControls() {\n        if (!this.scene.input.keyboard) return;\n        // Добавление power\n        this.scene.input.keyboard.on(\"keydown-P\", ()=>{\n            this.increasePower(50);\n            console.log(`Power: ${this.getPower()} (Level ${this.getPowerLevel()})`);\n        });\n        // Сброс power\n        this.scene.input.keyboard.on(\"keydown-O\", ()=>{\n            this.increasePower(-this.getPower());\n            console.log(`Power reset`);\n        });\n    }\n    increasePower(amount) {\n        this._weapon.addPower(amount);\n    }\n    getPower() {\n        return this._weapon.getPower();\n    }\n    getPowerLevel() {\n        return this._weapon.getPowerLevel();\n    }\n    get powerLevel() {\n        return this._weapon.getPowerLevel();\n    }\n    get collider() {\n        return this._collider;\n    }\n    get health() {\n        return this._health;\n    }\n    get weaponGroup() {\n        return this._weapon.getBulletGroup();\n    }\n    get weapon() {\n        return this._weapon;\n    }\n    get isInvulnerable() {\n        return this._isInvulnerable;\n    }\n    update(time, delta) {\n        if (!this.active) return;\n        if (this._health.isDead) {\n            this.handleDeath();\n            return;\n        }\n        this._keyboardInput.update();\n        this._horizontalMovement.update();\n        this._verticalMovement.update();\n        this._weapon.update(delta);\n        // Обработка смены оружия\n        if (this._keyboardInput.thirdActionIsDown) {\n            if (!this._isWeaponChanged) this.cycleWeaponType();\n            this._isWeaponChanged = true;\n        } else {\n            this._isWeaponChanged = false;\n        }\n        this.updateHitboxIndicator();\n        // Обработка активации бомбы\n        if (this._keyboardInput.secondaryActionIsDown && !this._isBombActive && !this._bombCooldown && this._bombsCount > 0) {\n            this.activateBomb();\n        }\n    }\n    activateBomb() {\n        if (this._isInvulnerable) return; // Нельзя активировать в неуязвимости\n        this._bombsCount--;\n        this._isBombActive = true;\n        this._bombCooldown = true;\n        // Начальная вспышка\n        this.showBombInitialFlash();\n        // Постоянный эффект на время действия бомбы\n        this.showBombPersistentEffect();\n        // Делаем игрока неуязвимым\n        this.activateInvulnerability(_configs_game_config__WEBPACK_IMPORTED_MODULE_6__.PLAYER_BOMB_CONFIG.duration);\n        // Удаляем все пули противников и наносим урон\n        this._eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.PLAYER_BOMB_ACTIVATED);\n        // Запускаем таймеры\n        this._bombTimer = this.scene.time.delayedCall(_configs_game_config__WEBPACK_IMPORTED_MODULE_6__.PLAYER_BOMB_CONFIG.duration, this.deactivateBomb, [], this);\n        // КД после использования\n        this.scene.time.delayedCall(_configs_game_config__WEBPACK_IMPORTED_MODULE_6__.PLAYER_BOMB_CONFIG.cooldown, ()=>this._bombCooldown = false, [], this);\n        // Периодический урон врагам\n        const damageTimer = this.scene.time.addEvent({\n            delay: _configs_game_config__WEBPACK_IMPORTED_MODULE_6__.PLAYER_BOMB_CONFIG.damageInterval,\n            callback: ()=>{\n                this._eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.PLAYER_BOMB_DAMAGE_TICK);\n            },\n            callbackScope: this,\n            repeat: Math.floor(_configs_game_config__WEBPACK_IMPORTED_MODULE_6__.PLAYER_BOMB_CONFIG.duration / _configs_game_config__WEBPACK_IMPORTED_MODULE_6__.PLAYER_BOMB_CONFIG.damageInterval)\n        });\n        // Обновляем UI\n        this._eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.BOMB_COUNT_CHANGED, this._bombsCount);\n    }\n    deactivateBomb() {\n        this._isBombActive = false;\n        // Плавное затухание эффекта\n        this.scene.tweens.add({\n            targets: this._bombEffect,\n            alpha: 0,\n            duration: 500,\n            onComplete: ()=>this._bombEffect.setVisible(false)\n        });\n        if (this._bombTimer) {\n            this._bombTimer.destroy();\n            this._bombTimer = null;\n        }\n    }\n    showBombInitialFlash() {\n        // Яркая начальная вспышка\n        const flash = this.scene.add.graphics().fillStyle(0xffffff, 1).fillRect(0, 0, this.scene.scale.width, this.scene.scale.height).setDepth(1);\n        this.scene.tweens.add({\n            targets: flash,\n            alpha: 0,\n            duration: 300,\n            ease: \"Cubic.easeOut\",\n            onComplete: ()=>flash.destroy()\n        });\n    }\n    showBombPersistentEffect() {\n        this._bombEffect.clear();\n        // Пульсирующий эффект на весь экран\n        this._bombEffect.fillStyle(0x88aaff, 0.8);\n        this._bombEffect.fillRect(0, 0, this.scene.scale.width, this.scene.scale.height);\n        this._bombEffect.setVisible(true);\n        // Анимация пульсации\n        this.scene.tweens.add({\n            targets: this._bombEffect,\n            alpha: {\n                from: 0.3,\n                to: 0.1\n            },\n            duration: 1000,\n            yoyo: true,\n            repeat: -1\n        });\n    }\n    resetBombs() {\n        this._bombsCount = _configs_game_config__WEBPACK_IMPORTED_MODULE_6__.PLAYER_BOMB_CONFIG.count;\n        this._isBombActive = false;\n        this._bombCooldown = false;\n        this._bombEffect.setVisible(false);\n        this._eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.BOMB_COUNT_CHANGED, this._bombsCount);\n    }\n    cycleWeaponType() {\n        const currentType = this._weapon.getWeaponType();\n        const nextType = currentType % 3 + 1; // 1→2→3→1\n        this._weapon.setWeaponType(nextType);\n        this._eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.WEAPON_CHANGED, {\n            weaponType: nextType\n        });\n    }\n    updateHitboxIndicator() {\n        this._focusIndicator.clear();\n        if (this._keyboardInput.focusIsDown && this.body) {\n            const body = this.body;\n            // Красная точка в центре\n            this._focusIndicator.fillStyle(0xff0000, 1);\n            this._focusIndicator.fillCircle(body.offset.x + body.width / 2, body.offset.y + body.height / 2, 3);\n            // Контур хитбокса\n            this._focusIndicator.lineStyle(1, 0xff0000, 0.5);\n            this._focusIndicator.strokeRect(body.offset.x, body.offset.y, body.width, body.height);\n        }\n    }\n    handleDeath() {\n        this.hide();\n        this._weapon.deactivateLaser();\n        this.resetBombs();\n        this.setVisible(true);\n        this._shipSprite.play(\"explosion\");\n        this._eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.PLAYER_DESTROYED);\n    }\n    hide() {\n        // Отключаем физическое тело\n        if (this.body && this.body instanceof (phaser__WEBPACK_IMPORTED_MODULE_7___default().Physics).Arcade.Body) {\n            this.body.enable = false;\n            this.body.stop(); // Останавливаем движение\n        }\n        this.setActive(false).setVisible(false);\n        this._engineSprite.setVisible(false);\n        this._thrusterSprite.setVisible(false);\n        this._keyboardInput.lockInput = true;\n        // Отписываемся от физических событий\n        this.scene.physics.world.disable(this);\n    }\n    spawn() {\n        if (!this.scene || this.ignoreDestroy) return;\n        // Включаем физику\n        this.scene.physics.world.enable(this);\n        if (this.body && this.body instanceof (phaser__WEBPACK_IMPORTED_MODULE_7___default().Physics).Arcade.Body) {\n            this.body.enable = true;\n            this.body.velocity.set(0, 0);\n        }\n        this.setActive(true).setVisible(true);\n        this._engineSprite.setVisible(true);\n        this._thrusterSprite.setVisible(true);\n        this._shipSprite.setTexture(\"ship\", 0);\n        this._health.reset();\n        this.setPosition(this.scene.scale.width / 2, this.scene.scale.height - 32);\n        this._keyboardInput.lockInput = false;\n        this.activateInvulnerability(3000);\n    }\n    activateInvulnerability(duration) {\n        // Отменяем предыдущие эффекты, если есть\n        this.deactivateInvulnerability();\n        // Устанавливаем флаг неуязвимости\n        this._isInvulnerable = true;\n        // Эффект мигания\n        this._blinkTween = this.scene.tweens.add({\n            targets: [\n                this._shipSprite,\n                this._engineSprite,\n                this._thrusterSprite\n            ],\n            alpha: {\n                from: 0.3,\n                to: 1\n            },\n            duration: 300,\n            yoyo: true,\n            repeat: -1\n        });\n        // Таймер для отключения неуязвимости\n        this._invulnerabilityTimer = this.scene.time.delayedCall(duration, ()=>{\n            this.deactivateInvulnerability();\n        });\n    }\n    deactivateInvulnerability() {\n        if (!this._isInvulnerable) return;\n        this._isInvulnerable = false;\n        // Останавливаем мигание\n        if (this._blinkTween) {\n            this._blinkTween.stop();\n            this._blinkTween = null;\n        }\n        // Восстанавливаем полную видимость\n        this._shipSprite.setAlpha(1);\n        this._engineSprite.setAlpha(1);\n        this._thrusterSprite.setAlpha(1);\n        // Очищаем таймер\n        if (this._invulnerabilityTimer) {\n            this._invulnerabilityTimer.destroy();\n            this._invulnerabilityTimer = null;\n        }\n    }\n    cleanup() {\n        this.deactivateInvulnerability();\n        this.scene?.events.off((phaser__WEBPACK_IMPORTED_MODULE_7___default().Scenes).Events.UPDATE, this.update, this);\n        this._eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.PLAYER_SPAWN, this.spawn, this);\n        this._weapon.cleanup();\n        // Очистка таймеров бомбы\n        if (this._bombTimer) {\n            this._bombTimer.destroy();\n            this._bombTimer = null;\n        }\n        // Очистка графики бомбы\n        this._bombEffect.destroy();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQ0UsV0FBVyxFQUFFO1lBQ2xCLElBQUksQ0FBQ0EsV0FBVyxDQUFDd0ksSUFBSTtZQUNyQixJQUFJLENBQUN4SSxXQUFXLEdBQUc7UUFDdkI7UUFFQSxtQ0FBbUM7UUFDbkMsSUFBSSxDQUFDbUIsV0FBVyxDQUFDaUksUUFBUSxDQUFDO1FBQzFCLElBQUksQ0FBQy9ILGFBQWEsQ0FBQytILFFBQVEsQ0FBQztRQUM1QixJQUFJLENBQUM5SCxlQUFlLENBQUM4SCxRQUFRLENBQUM7UUFFOUIsaUJBQWlCO1FBQ2pCLElBQUksSUFBSSxDQUFDckoscUJBQXFCLEVBQUU7WUFDNUIsSUFBSSxDQUFDQSxxQkFBcUIsQ0FBQ2lILE9BQU87WUFDbEMsSUFBSSxDQUFDakgscUJBQXFCLEdBQUc7UUFDakM7SUFDSjtJQUVPb0QsVUFBZ0I7UUFDbkIsSUFBSSxDQUFDZ0cseUJBQXlCO1FBQzlCLElBQUksQ0FBQzFKLEtBQUssRUFBRW1ELE9BQU95RyxJQUFJbEssc0RBQWEsQ0FBQzJELE1BQU0sQ0FBQ0MsTUFBTSxFQUFFLElBQUksQ0FBQ0MsTUFBTSxFQUFFLElBQUk7UUFDckUsSUFBSSxDQUFDOUIsU0FBUyxDQUFDbUksR0FBRyxDQUFDakssK0RBQWFBLENBQUM4QyxZQUFZLEVBQUUsSUFBSSxDQUFDQyxLQUFLLEVBQUUsSUFBSTtRQUMvRCxJQUFJLENBQUNQLE9BQU8sQ0FBQ3VCLE9BQU87UUFFcEIseUJBQXlCO1FBQ3pCLElBQUksSUFBSSxDQUFDakQsVUFBVSxFQUFFO1lBQ2pCLElBQUksQ0FBQ0EsVUFBVSxDQUFDOEcsT0FBTztZQUN2QixJQUFJLENBQUM5RyxVQUFVLEdBQUc7UUFDdEI7UUFFQSx3QkFBd0I7UUFDeEIsSUFBSSxDQUFDc0QsV0FBVyxDQUFDd0QsT0FBTztJQUM1QjtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2VudGl0aWVzL3BsYXllci50cz8yZjViIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbGxpZGVyQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50cy9jb2xsaWRlci9jb2xsaWRlci1jb21wb25lbnQnO1xuaW1wb3J0IHsgRXZlbnRCdXNDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL2V2ZW50cy9ldmVudC1idXMtY29tcG9uZW50JztcbmltcG9ydCB7IEhlYWx0aENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvaGVhbHRoL2hlYWx0aC1jb21wb25lbnQnO1xuaW1wb3J0IHsgS2V5Ym9hcmRJbnB1dENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvaW5wdXQvaHVtYW4va2V5Ym9hcmQtaW5wdXQtY29tcG9uZW50JztcbmltcG9ydCB7IEhvcml6b250YWxNb3ZlbWVudENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvbW92ZW1lbnQvaG9yaXpvbnRhbC1tb3ZlbWVudC1jb21wb25lbnQnO1xuaW1wb3J0IHsgVmVydGljYWxNb3ZlbWVudENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvbW92ZW1lbnQvdmVydGljYWwtbW92ZW1lbnQtY29tcG9uZW50JztcbmltcG9ydCB7IFdlYXBvbkNvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvd2VhcG9uL3dlYXBvbi1jb21wb25lbnQnO1xuaW1wb3J0ICogYXMgQ09ORklHIGZyb20gJy4uL2NvbmZpZ3MvZ2FtZS1jb25maWcnO1xuaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xuaW1wb3J0IHsgQ1VTVE9NX0VWRU5UUyB9IGZyb20gJy4uL3R5cGVzL2N1c3RvbS1ldmVudHMnO1xuXG5leHBvcnQgY2xhc3MgUGxheWVyIGV4dGVuZHMgUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lciB7XG4gICAgcHJpdmF0ZSBfa2V5Ym9hcmRJbnB1dDogS2V5Ym9hcmRJbnB1dENvbXBvbmVudDtcbiAgICBwcml2YXRlIF93ZWFwb246IFdlYXBvbkNvbXBvbmVudDtcbiAgICBwcml2YXRlIF9ob3Jpem9udGFsTW92ZW1lbnQ6IEhvcml6b250YWxNb3ZlbWVudENvbXBvbmVudDtcbiAgICBwcml2YXRlIF92ZXJ0aWNhbE1vdmVtZW50OiBWZXJ0aWNhbE1vdmVtZW50Q29tcG9uZW50O1xuICAgIHByaXZhdGUgX2hlYWx0aDogSGVhbHRoQ29tcG9uZW50O1xuICAgIHByaXZhdGUgX2NvbGxpZGVyOiBDb2xsaWRlckNvbXBvbmVudDtcbiAgICBwcml2YXRlIF9ldmVudEJ1czogRXZlbnRCdXNDb21wb25lbnQ7XG4gICAgXG4gICAgcHJpdmF0ZSBfc2hpcFNwcml0ZTogUGhhc2VyLkdhbWVPYmplY3RzLlNwcml0ZTtcbiAgICBwcml2YXRlIF9lbmdpbmVTcHJpdGU6IFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGU7XG4gICAgcHJpdmF0ZSBfdGhydXN0ZXJTcHJpdGU6IFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGU7XG5cbiAgICBwcml2YXRlIF9pc0ludnVsbmVyYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgX2ludnVsbmVyYWJpbGl0eVRpbWVyOiBQaGFzZXIuVGltZS5UaW1lckV2ZW50IHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBfYmxpbmtUd2VlbjogUGhhc2VyLlR3ZWVucy5Ud2VlbiB8IG51bGwgPSBudWxsO1xuXG4gICAgcHJpdmF0ZSBfZm9jdXNJbmRpY2F0b3I6IFBoYXNlci5HYW1lT2JqZWN0cy5HcmFwaGljcztcblxuICAgIHByaXZhdGUgX2JvbWJzQ291bnQ6IG51bWJlcjtcbiAgICBwcml2YXRlIF9pc0JvbWJBY3RpdmU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIF9ib21iRWZmZWN0OiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3M7XG4gICAgcHJpdmF0ZSBfYm9tYlRpbWVyOiBQaGFzZXIuVGltZS5UaW1lckV2ZW50IHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBfYm9tYkNvb2xkb3duOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfaXNXZWFwb25DaGFuZ2VkOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHVibGljIF9waWNrdXBSYWRpdXM6IG51bWJlciA9IDMwOyAvLyDQoNCw0LTQuNGD0YEg0L/QvtC00LHQvtGA0LAg0L/RgNC10LTQvNC10YLQvtCyXG5cbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogUGhhc2VyLlNjZW5lLCBldmVudEJ1czogRXZlbnRCdXNDb21wb25lbnQpIHtcbiAgICAgICAgc3VwZXIoc2NlbmUsIHNjZW5lLnNjYWxlLndpZHRoIC8gMiwgc2NlbmUuc2NhbGUuaGVpZ2h0IC0gMzIsIFtdKTtcbiAgICAgICAgXG4gICAgICAgIC8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINGE0LjQt9C40LrQuFxuICAgICAgICB0aGlzLnNjZW5lLmFkZC5leGlzdGluZyh0aGlzKTtcbiAgICAgICAgdGhpcy5zY2VuZS5waHlzaWNzLmFkZC5leGlzdGluZyh0aGlzKTsgLy/RhdC40YLQsdC+0LrRgSwg0L/RgNC4INCy0LrQu9GO0YfQtdC90L3QvtC8IGRlYnVnINCy0LjQtNC10L1cbiAgICAgICAgaWYgKCF0aGlzLmJvZHkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGh5c2ljcyBib2R5IG5vdCBjcmVhdGVkIGZvciBGaWdodGVyRW5lbXknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuYm9keSBpbnN0YW5jZW9mIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Cb2R5KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmJvZHkuc2V0U2l6ZSg0LCA0KTsgLy/QtdCz0L4g0YDQsNC30LzQtdGAXG4gICAgICAgICAgICB0aGlzLmJvZHkuc2V0T2Zmc2V0KC0xLjksIDApOyAvL9C10LPQviDRgdC80LXRidC10L3QuNC1XG4gICAgICAgICAgICB0aGlzLmJvZHkuc2V0Q29sbGlkZVdvcmxkQm91bmRzKHRydWUpOyAvL9GB0YLQvtC70LrQvdC+0LLQtdC90LjQtSDRgdC+INGB0YLQtdC90LDQvNC4INGB0YbQtdC90YtcbiAgICAgICAgICAgIHRoaXMuc2V0RGVwdGgoMik7IC8v0JLRi9GI0LUg0LPQu9GD0LHQuNC90LAgLSDQvtGC0YDQuNGB0L7QstGL0LLQsNC10YLRgdGPINCy0YvRiNC1INC+0LHRitC10LrRgtC+0LIg0YEg0LzQtdC90YzRiNC10Lkg0LPQu9GD0LHQuNC90L7QuVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZXZlbnRCdXMgPSBldmVudEJ1cztcblxuICAgICAgICAvLyDQk9GA0LDRhNC40YfQtdGB0LrQuNC1INC60L7QvNC/0L7QvdC10L3RgtGLXG4gICAgICAgIHRoaXMuX3NoaXBTcHJpdGUgPSBzY2VuZS5hZGQuc3ByaXRlKDAsIDAsICdzaGlwJyk7XG4gICAgICAgIHRoaXMuX2VuZ2luZVNwcml0ZSA9IHNjZW5lLmFkZC5zcHJpdGUoMCwgMCwgJ3NoaXBfZW5naW5lJyk7XG4gICAgICAgIHRoaXMuX3RocnVzdGVyU3ByaXRlID0gc2NlbmUuYWRkLnNwcml0ZSgwLCAwLCAnc2hpcF9lbmdpbmVfdGhydXN0ZXInKTtcbiAgICAgICAgdGhpcy5fdGhydXN0ZXJTcHJpdGUucGxheSgnc2hpcF9lbmdpbmVfdGhydXN0ZXInKTtcbiAgICAgICAgdGhpcy5hZGQoW3RoaXMuX3RocnVzdGVyU3ByaXRlLCB0aGlzLl9lbmdpbmVTcHJpdGUsIHRoaXMuX3NoaXBTcHJpdGVdKTtcblxuICAgICAgICAvLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQutC+0LzQv9C+0L3QtdC90YLQvtCyXG4gICAgICAgIHRoaXMuX2tleWJvYXJkSW5wdXQgPSBuZXcgS2V5Ym9hcmRJbnB1dENvbXBvbmVudChzY2VuZSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9ob3Jpem9udGFsTW92ZW1lbnQgPSBuZXcgSG9yaXpvbnRhbE1vdmVtZW50Q29tcG9uZW50KFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIHRoaXMuX2tleWJvYXJkSW5wdXQsXG4gICAgICAgICAgICBDT05GSUcuUExBWUVSX01PVkVNRU5UX1ZFTE9DSVRZXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl92ZXJ0aWNhbE1vdmVtZW50ID0gbmV3IFZlcnRpY2FsTW92ZW1lbnRDb21wb25lbnQoXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgdGhpcy5fa2V5Ym9hcmRJbnB1dCxcbiAgICAgICAgICAgIENPTkZJRy5QTEFZRVJfTU9WRU1FTlRfVkVMT0NJVFlcbiAgICAgICAgKTtcbiAgICAgICAgXG5cbiAgICAgICAgdGhpcy5fd2VhcG9uID0gbmV3IFdlYXBvbkNvbXBvbmVudChcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICB0aGlzLl9rZXlib2FyZElucHV0LFxuICAgICAgICAgICAgZXZlbnRCdXNcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLl9oZWFsdGggPSBuZXcgSGVhbHRoQ29tcG9uZW50KENPTkZJRy5QTEFZRVJfSEVBTFRIKTtcbiAgICAgICAgdGhpcy5fY29sbGlkZXIgPSBuZXcgQ29sbGlkZXJDb21wb25lbnQodGhpcy5faGVhbHRoLCBldmVudEJ1cyk7XG5cbiAgICAgICAgLy8g0J3QsNGB0YLRgNC+0LnQutCwINGB0L7QsdGL0YLQuNC5XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICBldmVudEJ1cy5vbihDVVNUT01fRVZFTlRTLlBMQVlFUl9TUEFXTiwgdGhpcy5zcGF3biwgdGhpcyk7XG5cbiAgICAgICAgLy8g0J7QsdGA0LDQsdC+0YLQutCwINC00L7QsdCw0LLQu9C10L3QuNGPIEhQXG4gICAgICAgIHRoaXMuX2V2ZW50QnVzLm9uKENVU1RPTV9FVkVOVFMuQUREX0xJRkUsIChhbW91bnQ6IG51bWJlciA9IDEpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hlYWx0aC5zZXRMaWZlKHRoaXMuX2hlYWx0aC5saWZlICsgYW1vdW50KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g0J7QsdGA0LDQsdC+0YLQutCwINC00L7QsdCw0LLQu9C10L3QuNGPINCx0L7QvNCxXG4gICAgICAgIHRoaXMuX2V2ZW50QnVzLm9uKENVU1RPTV9FVkVOVFMuQUREX0JPTUIsIChhbW91bnQ6IG51bWJlciA9IDEpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2JvbWJzQ291bnQgPSB0aGlzLl9ib21ic0NvdW50ICsgYW1vdW50O1xuICAgICAgICAgICAgdGhpcy5fZXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLkJPTUJfQ09VTlRfQ0hBTkdFRCwgdGhpcy5fYm9tYnNDb3VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgc2NlbmUuZXZlbnRzLm9uKFBoYXNlci5TY2VuZXMuRXZlbnRzLlVQREFURSwgdGhpcy51cGRhdGUsIHRoaXMpO1xuICAgICAgICB0aGlzLm9uY2UoUGhhc2VyLkdhbWVPYmplY3RzLkV2ZW50cy5ERVNUUk9ZLCB0aGlzLmNsZWFudXAsIHRoaXMpO1xuXG4gICAgICAgIHRoaXMuX2ZvY3VzSW5kaWNhdG9yID0gc2NlbmUuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHRoaXMuX2ZvY3VzSW5kaWNhdG9yLnNldERlcHRoKDEwKTsgLy8g0J/QvtCy0LXRgNGFINC00YDRg9Cz0LjRhSDQvtCx0YrQtdC60YLQvtCyXG4gICAgICAgIHRoaXMuYWRkKHRoaXMuX2ZvY3VzSW5kaWNhdG9yKTtcblxuICAgICAgICB0aGlzLl9ib21ic0NvdW50ID0gQ09ORklHLlBMQVlFUl9CT01CX0NPTkZJRy5jb3VudDtcbiAgICAgICAgdGhpcy5fYm9tYkVmZmVjdCA9IHNjZW5lLmFkZC5ncmFwaGljcygpO1xuICAgICAgICB0aGlzLl9ib21iRWZmZWN0LnNldERlcHRoKC01KTsgLy8g0JzQtdC20LTRgyDRhNC+0L3QvtC8INC4INC+0LHRitC10LrRgtCw0LzQuFxuICAgICAgICB0aGlzLl9ib21iRWZmZWN0LnNldFZpc2libGUoZmFsc2UpO1xuXG4gICAgICAgIHRoaXMuc2V0dXBUZXN0Q29udHJvbHMoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FuUGlja3VwKGl0ZW06IFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGUpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIFBoYXNlci5NYXRoLkRpc3RhbmNlLkJldHdlZW4odGhpcy54LCB0aGlzLnksIGl0ZW0ueCwgaXRlbS55KSA8PSB0aGlzLl9waWNrdXBSYWRpdXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cFRlc3RDb250cm9scygpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLnNjZW5lLmlucHV0LmtleWJvYXJkKSByZXR1cm47XG5cbiAgICAgICAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUgcG93ZXJcbiAgICAgICAgdGhpcy5zY2VuZS5pbnB1dC5rZXlib2FyZC5vbigna2V5ZG93bi1QJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVBvd2VyKDUwKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBQb3dlcjogJHt0aGlzLmdldFBvd2VyKCl9IChMZXZlbCAke3RoaXMuZ2V0UG93ZXJMZXZlbCgpfSlgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g0KHQsdGA0L7RgSBwb3dlclxuICAgICAgICB0aGlzLnNjZW5lLmlucHV0LmtleWJvYXJkLm9uKCdrZXlkb3duLU8nLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmluY3JlYXNlUG93ZXIoLXRoaXMuZ2V0UG93ZXIoKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUG93ZXIgcmVzZXRgKTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBpbmNyZWFzZVBvd2VyKGFtb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX3dlYXBvbi5hZGRQb3dlcihhbW91bnQpO1xuICAgIH1cblxuICAgIGdldFBvd2VyKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWFwb24uZ2V0UG93ZXIoKTtcbiAgICB9XG5cbiAgICBnZXRQb3dlckxldmVsKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWFwb24uZ2V0UG93ZXJMZXZlbCgpO1xuICAgIH1cblxuICAgIGdldCBwb3dlckxldmVsKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWFwb24uZ2V0UG93ZXJMZXZlbCgpO1xuICAgIH1cblxuICAgIGdldCBjb2xsaWRlcigpOiBDb2xsaWRlckNvbXBvbmVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb2xsaWRlcjtcbiAgICB9XG5cbiAgICBnZXQgaGVhbHRoKCk6IEhlYWx0aENvbXBvbmVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oZWFsdGg7XG4gICAgfVxuXG4gICAgZ2V0IHdlYXBvbkdyb3VwKCk6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Hcm91cCB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy5fd2VhcG9uLmdldEJ1bGxldEdyb3VwKCk7XG4gICAgfVxuXG4gICAgZ2V0IHdlYXBvbigpOiBXZWFwb25Db21wb25lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5fd2VhcG9uO1xuICAgIH1cblxuICAgIGdldCBpc0ludnVsbmVyYWJsZSgpXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNJbnZ1bG5lcmFibGU7XG4gICAgfVxuXG4gICAgdXBkYXRlKHRpbWU6IG51bWJlciwgZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKSByZXR1cm47XG5cbiAgICAgICAgaWYgKHRoaXMuX2hlYWx0aC5pc0RlYWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRGVhdGgoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2tleWJvYXJkSW5wdXQudXBkYXRlKCk7XG4gICAgICAgIHRoaXMuX2hvcml6b250YWxNb3ZlbWVudC51cGRhdGUoKTtcbiAgICAgICAgdGhpcy5fdmVydGljYWxNb3ZlbWVudC51cGRhdGUoKTtcbiAgICAgICAgdGhpcy5fd2VhcG9uLnVwZGF0ZShkZWx0YSk7XG4gICAgICAgIFxuICAgICAgICAvLyDQntCx0YDQsNCx0L7RgtC60LAg0YHQvNC10L3RiyDQvtGA0YPQttC40Y9cbiAgICAgICAgaWYgKHRoaXMuX2tleWJvYXJkSW5wdXQudGhpcmRBY3Rpb25Jc0Rvd24pIHtcbiAgICAgICAgICAgIGlmKCF0aGlzLl9pc1dlYXBvbkNoYW5nZWQpIHRoaXMuY3ljbGVXZWFwb25UeXBlKCk7XG4gICAgICAgICAgICB0aGlzLl9pc1dlYXBvbkNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICB0aGlzLl9pc1dlYXBvbkNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlSGl0Ym94SW5kaWNhdG9yKCk7XG5cbiAgICAgICAgLy8g0J7QsdGA0LDQsdC+0YLQutCwINCw0LrRgtC40LLQsNGG0LjQuCDQsdC+0LzQsdGLXG4gICAgICAgIGlmICh0aGlzLl9rZXlib2FyZElucHV0LnNlY29uZGFyeUFjdGlvbklzRG93biAmJiBcbiAgICAgICAgICAgICF0aGlzLl9pc0JvbWJBY3RpdmUgJiYgXG4gICAgICAgICAgICAhdGhpcy5fYm9tYkNvb2xkb3duICYmXG4gICAgICAgICAgICB0aGlzLl9ib21ic0NvdW50ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZUJvbWIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYWN0aXZhdGVCb21iKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5faXNJbnZ1bG5lcmFibGUpIHJldHVybjsgLy8g0J3QtdC70YzQt9GPINCw0LrRgtC40LLQuNGA0L7QstCw0YLRjCDQsiDQvdC10YPRj9C30LLQuNC80L7RgdGC0LhcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2JvbWJzQ291bnQtLTtcbiAgICAgICAgdGhpcy5faXNCb21iQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fYm9tYkNvb2xkb3duID0gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIC8vINCd0LDRh9Cw0LvRjNC90LDRjyDQstGB0L/Ri9GI0LrQsFxuICAgICAgICB0aGlzLnNob3dCb21iSW5pdGlhbEZsYXNoKCk7XG4gICAgICAgIFxuICAgICAgICAvLyDQn9C+0YHRgtC+0Y/QvdC90YvQuSDRjdGE0YTQtdC60YIg0L3QsCDQstGA0LXQvNGPINC00LXQudGB0YLQstC40Y8g0LHQvtC80LHRi1xuICAgICAgICB0aGlzLnNob3dCb21iUGVyc2lzdGVudEVmZmVjdCgpO1xuICAgICAgICBcbiAgICAgICAgLy8g0JTQtdC70LDQtdC8INC40LPRgNC+0LrQsCDQvdC10YPRj9C30LLQuNC80YvQvFxuICAgICAgICB0aGlzLmFjdGl2YXRlSW52dWxuZXJhYmlsaXR5KENPTkZJRy5QTEFZRVJfQk9NQl9DT05GSUcuZHVyYXRpb24pO1xuICAgICAgICBcbiAgICAgICAgLy8g0KPQtNCw0LvRj9C10Lwg0LLRgdC1INC/0YPQu9C4INC/0YDQvtGC0LjQstC90LjQutC+0LIg0Lgg0L3QsNC90L7RgdC40Lwg0YPRgNC+0L1cbiAgICAgICAgdGhpcy5fZXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLlBMQVlFUl9CT01CX0FDVElWQVRFRCk7XG4gICAgICAgIFxuICAgICAgICAvLyDQl9Cw0L/Rg9GB0LrQsNC10Lwg0YLQsNC50LzQtdGA0YtcbiAgICAgICAgdGhpcy5fYm9tYlRpbWVyID0gdGhpcy5zY2VuZS50aW1lLmRlbGF5ZWRDYWxsKFxuICAgICAgICAgICAgQ09ORklHLlBMQVlFUl9CT01CX0NPTkZJRy5kdXJhdGlvbiwgXG4gICAgICAgICAgICB0aGlzLmRlYWN0aXZhdGVCb21iLCBcbiAgICAgICAgICAgIFtdLCBcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vINCa0JQg0L/QvtGB0LvQtSDQuNGB0L/QvtC70YzQt9C+0LLQsNC90LjRj1xuICAgICAgICB0aGlzLnNjZW5lLnRpbWUuZGVsYXllZENhbGwoXG4gICAgICAgICAgICBDT05GSUcuUExBWUVSX0JPTUJfQ09ORklHLmNvb2xkb3duLFxuICAgICAgICAgICAgKCkgPT4gdGhpcy5fYm9tYkNvb2xkb3duID0gZmFsc2UsXG4gICAgICAgICAgICBbXSxcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vINCf0LXRgNC40L7QtNC40YfQtdGB0LrQuNC5INGD0YDQvtC9INCy0YDQsNCz0LDQvFxuICAgICAgICBjb25zdCBkYW1hZ2VUaW1lciA9IHRoaXMuc2NlbmUudGltZS5hZGRFdmVudCh7XG4gICAgICAgICAgICBkZWxheTogQ09ORklHLlBMQVlFUl9CT01CX0NPTkZJRy5kYW1hZ2VJbnRlcnZhbCxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLlBMQVlFUl9CT01CX0RBTUFHRV9USUNLKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYWxsYmFja1Njb3BlOiB0aGlzLFxuICAgICAgICAgICAgcmVwZWF0OiBNYXRoLmZsb29yKENPTkZJRy5QTEFZRVJfQk9NQl9DT05GSUcuZHVyYXRpb24gLyBDT05GSUcuUExBWUVSX0JPTUJfQ09ORklHLmRhbWFnZUludGVydmFsKVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCBVSVxuICAgICAgICB0aGlzLl9ldmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuQk9NQl9DT1VOVF9DSEFOR0VELCB0aGlzLl9ib21ic0NvdW50KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlYWN0aXZhdGVCb21iKCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9pc0JvbWJBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIC8vINCf0LvQsNCy0L3QvtC1INC30LDRgtGD0YXQsNC90LjQtSDRjdGE0YTQtdC60YLQsFxuICAgICAgICB0aGlzLnNjZW5lLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5fYm9tYkVmZmVjdCxcbiAgICAgICAgICAgIGFscGhhOiAwLFxuICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHRoaXMuX2JvbWJFZmZlY3Quc2V0VmlzaWJsZShmYWxzZSlcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fYm9tYlRpbWVyKSB7XG4gICAgICAgICAgICB0aGlzLl9ib21iVGltZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5fYm9tYlRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd0JvbWJJbml0aWFsRmxhc2goKTogdm9pZCB7XG4gICAgICAgIC8vINCv0YDQutCw0Y8g0L3QsNGH0LDQu9GM0L3QsNGPINCy0YHQv9GL0YjQutCwXG4gICAgICAgIGNvbnN0IGZsYXNoID0gdGhpcy5zY2VuZS5hZGQuZ3JhcGhpY3MoKVxuICAgICAgICAgICAgLmZpbGxTdHlsZSgweGZmZmZmZiwgMSlcbiAgICAgICAgICAgIC5maWxsUmVjdCgwLCAwLCB0aGlzLnNjZW5lLnNjYWxlLndpZHRoLCB0aGlzLnNjZW5lLnNjYWxlLmhlaWdodClcbiAgICAgICAgICAgIC5zZXREZXB0aCgxKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2NlbmUudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiBmbGFzaCxcbiAgICAgICAgICAgIGFscGhhOiAwLFxuICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgIGVhc2U6ICdDdWJpYy5lYXNlT3V0JyxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IGZsYXNoLmRlc3Ryb3koKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dCb21iUGVyc2lzdGVudEVmZmVjdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fYm9tYkVmZmVjdC5jbGVhcigpO1xuICAgICAgICBcbiAgICAgICAgLy8g0J/Rg9C70YzRgdC40YDRg9GO0YnQuNC5INGN0YTRhNC10LrRgiDQvdCwINCy0LXRgdGMINGN0LrRgNCw0L1cbiAgICAgICAgdGhpcy5fYm9tYkVmZmVjdC5maWxsU3R5bGUoMHg4OGFhZmYsIDAuOCk7XG4gICAgICAgIHRoaXMuX2JvbWJFZmZlY3QuZmlsbFJlY3QoXG4gICAgICAgICAgICAwLCBcbiAgICAgICAgICAgIDAsIFxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zY2FsZS53aWR0aCwgXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnNjYWxlLmhlaWdodFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fYm9tYkVmZmVjdC5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICBcbiAgICAgICAgLy8g0JDQvdC40LzQsNGG0LjRjyDQv9GD0LvRjNGB0LDRhtC40LhcbiAgICAgICAgdGhpcy5zY2VuZS50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuX2JvbWJFZmZlY3QsXG4gICAgICAgICAgICBhbHBoYTogeyBmcm9tOiAwLjMsIHRvOiAwLjEgfSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLFxuICAgICAgICAgICAgeW95bzogdHJ1ZSxcbiAgICAgICAgICAgIHJlcGVhdDogLTFcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVzZXRCb21icygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fYm9tYnNDb3VudCA9IENPTkZJRy5QTEFZRVJfQk9NQl9DT05GSUcuY291bnQ7XG4gICAgICAgIHRoaXMuX2lzQm9tYkFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9ib21iQ29vbGRvd24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fYm9tYkVmZmVjdC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdGhpcy5fZXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLkJPTUJfQ09VTlRfQ0hBTkdFRCwgdGhpcy5fYm9tYnNDb3VudCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjeWNsZVdlYXBvblR5cGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUeXBlID0gdGhpcy5fd2VhcG9uLmdldFdlYXBvblR5cGUoKTtcbiAgICAgICAgY29uc3QgbmV4dFR5cGUgPSBjdXJyZW50VHlwZSAlIDMgKyAxOyAvLyAx4oaSMuKGkjPihpIxXG4gICAgICAgIHRoaXMuX3dlYXBvbi5zZXRXZWFwb25UeXBlKG5leHRUeXBlIGFzIDEgfCAyIHwgMyk7XG4gICAgICAgIHRoaXMuX2V2ZW50QnVzLmVtaXQoQ1VTVE9NX0VWRU5UUy5XRUFQT05fQ0hBTkdFRCwgeyB3ZWFwb25UeXBlOiBuZXh0VHlwZSB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUhpdGJveEluZGljYXRvcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fZm9jdXNJbmRpY2F0b3IuY2xlYXIoKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9rZXlib2FyZElucHV0LmZvY3VzSXNEb3duICYmIHRoaXMuYm9keSkge1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHRoaXMuYm9keSBhcyBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuQm9keTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g0JrRgNCw0YHQvdCw0Y8g0YLQvtGH0LrQsCDQsiDRhtC10L3RgtGA0LVcbiAgICAgICAgICAgIHRoaXMuX2ZvY3VzSW5kaWNhdG9yLmZpbGxTdHlsZSgweGZmMDAwMCwgMSk7XG4gICAgICAgICAgICB0aGlzLl9mb2N1c0luZGljYXRvci5maWxsQ2lyY2xlKFxuICAgICAgICAgICAgICAgIGJvZHkub2Zmc2V0LnggKyBib2R5LndpZHRoIC8gMixcbiAgICAgICAgICAgICAgICBib2R5Lm9mZnNldC55ICsgYm9keS5oZWlnaHQgLyAyLFxuICAgICAgICAgICAgICAgIDNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vINCa0L7QvdGC0YPRgCDRhdC40YLQsdC+0LrRgdCwXG4gICAgICAgICAgICB0aGlzLl9mb2N1c0luZGljYXRvci5saW5lU3R5bGUoMSwgMHhmZjAwMDAsIDAuNSk7XG4gICAgICAgICAgICB0aGlzLl9mb2N1c0luZGljYXRvci5zdHJva2VSZWN0KFxuICAgICAgICAgICAgICAgIGJvZHkub2Zmc2V0LngsXG4gICAgICAgICAgICAgICAgYm9keS5vZmZzZXQueSxcbiAgICAgICAgICAgICAgICBib2R5LndpZHRoLFxuICAgICAgICAgICAgICAgIGJvZHkuaGVpZ2h0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVEZWF0aCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIHRoaXMuX3dlYXBvbi5kZWFjdGl2YXRlTGFzZXIoKTtcbiAgICAgICAgdGhpcy5yZXNldEJvbWJzKCk7XG4gICAgICAgIHRoaXMuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgdGhpcy5fc2hpcFNwcml0ZS5wbGF5KCdleHBsb3Npb24nKTtcbiAgICAgICAgdGhpcy5fZXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLlBMQVlFUl9ERVNUUk9ZRUQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGlkZSgpOiB2b2lkIHtcbiAgICAgICAgLy8g0J7RgtC60LvRjtGH0LDQtdC8INGE0LjQt9C40YfQtdGB0LrQvtC1INGC0LXQu9C+XG4gICAgICAgIGlmICh0aGlzLmJvZHkgJiYgdGhpcy5ib2R5IGluc3RhbmNlb2YgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkJvZHkpIHtcbiAgICAgICAgICAgIHRoaXMuYm9keS5lbmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYm9keS5zdG9wKCk7IC8vINCe0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC00LLQuNC20LXQvdC40LVcbiAgICAgICAgfVxuICAgIFxuICAgICAgICB0aGlzLnNldEFjdGl2ZShmYWxzZSkuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHRoaXMuX2VuZ2luZVNwcml0ZS5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdGhpcy5fdGhydXN0ZXJTcHJpdGUuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHRoaXMuX2tleWJvYXJkSW5wdXQubG9ja0lucHV0ID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgLy8g0J7RgtC/0LjRgdGL0LLQsNC10LzRgdGPINC+0YIg0YTQuNC30LjRh9C10YHQutC40YUg0YHQvtCx0YvRgtC40LlcbiAgICAgICAgdGhpcy5zY2VuZS5waHlzaWNzLndvcmxkLmRpc2FibGUodGhpcyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzcGF3bigpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLnNjZW5lIHx8IHRoaXMuaWdub3JlRGVzdHJveSkgcmV0dXJuO1xuICAgIFxuICAgICAgICAvLyDQktC60LvRjtGH0LDQtdC8INGE0LjQt9C40LrRg1xuICAgICAgICB0aGlzLnNjZW5lLnBoeXNpY3Mud29ybGQuZW5hYmxlKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5ib2R5ICYmIHRoaXMuYm9keSBpbnN0YW5jZW9mIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Cb2R5KSB7XG4gICAgICAgICAgICB0aGlzLmJvZHkuZW5hYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYm9keS52ZWxvY2l0eS5zZXQoMCwgMCk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgdGhpcy5zZXRBY3RpdmUodHJ1ZSkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgdGhpcy5fZW5naW5lU3ByaXRlLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuX3RocnVzdGVyU3ByaXRlLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuX3NoaXBTcHJpdGUuc2V0VGV4dHVyZSgnc2hpcCcsIDApO1xuICAgICAgICB0aGlzLl9oZWFsdGgucmVzZXQoKTtcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbih0aGlzLnNjZW5lLnNjYWxlLndpZHRoIC8gMiwgdGhpcy5zY2VuZS5zY2FsZS5oZWlnaHQgLSAzMik7XG4gICAgICAgIHRoaXMuX2tleWJvYXJkSW5wdXQubG9ja0lucHV0ID0gZmFsc2U7XG4gICAgXG4gICAgICAgIHRoaXMuYWN0aXZhdGVJbnZ1bG5lcmFiaWxpdHkoMzAwMCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhY3RpdmF0ZUludnVsbmVyYWJpbGl0eShkdXJhdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIC8vINCe0YLQvNC10L3Rj9C10Lwg0L/RgNC10LTRi9C00YPRidC40LUg0Y3RhNGE0LXQutGC0YssINC10YHQu9C4INC10YHRgtGMXG4gICAgICAgIHRoaXMuZGVhY3RpdmF0ZUludnVsbmVyYWJpbGl0eSgpO1xuICAgICAgICBcbiAgICAgICAgLy8g0KPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0YTQu9Cw0LMg0L3QtdGD0Y/Qt9Cy0LjQvNC+0YHRgtC4XG4gICAgICAgIHRoaXMuX2lzSW52dWxuZXJhYmxlID0gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIC8vINCt0YTRhNC10LrRgiDQvNC40LPQsNC90LjRj1xuICAgICAgICB0aGlzLl9ibGlua1R3ZWVuID0gdGhpcy5zY2VuZS50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IFt0aGlzLl9zaGlwU3ByaXRlLCB0aGlzLl9lbmdpbmVTcHJpdGUsIHRoaXMuX3RocnVzdGVyU3ByaXRlXSxcbiAgICAgICAgICAgIGFscGhhOiB7IGZyb206IDAuMywgdG86IDEgfSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICB5b3lvOiB0cnVlLFxuICAgICAgICAgICAgcmVwZWF0OiAtMVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vINCi0LDQudC80LXRgCDQtNC70Y8g0L7RgtC60LvRjtGH0LXQvdC40Y8g0L3QtdGD0Y/Qt9Cy0LjQvNC+0YHRgtC4XG4gICAgICAgIHRoaXMuX2ludnVsbmVyYWJpbGl0eVRpbWVyID0gdGhpcy5zY2VuZS50aW1lLmRlbGF5ZWRDYWxsKGR1cmF0aW9uLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRlYWN0aXZhdGVJbnZ1bG5lcmFiaWxpdHkoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWFjdGl2YXRlSW52dWxuZXJhYmlsaXR5KCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuX2lzSW52dWxuZXJhYmxlKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pc0ludnVsbmVyYWJsZSA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgLy8g0J7RgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0LzQuNCz0LDQvdC40LVcbiAgICAgICAgaWYgKHRoaXMuX2JsaW5rVHdlZW4pIHtcbiAgICAgICAgICAgIHRoaXMuX2JsaW5rVHdlZW4uc3RvcCgpO1xuICAgICAgICAgICAgdGhpcy5fYmxpbmtUd2VlbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vINCS0L7RgdGB0YLQsNC90LDQstC70LjQstCw0LXQvCDQv9C+0LvQvdGD0Y4g0LLQuNC00LjQvNC+0YHRgtGMXG4gICAgICAgIHRoaXMuX3NoaXBTcHJpdGUuc2V0QWxwaGEoMSk7XG4gICAgICAgIHRoaXMuX2VuZ2luZVNwcml0ZS5zZXRBbHBoYSgxKTtcbiAgICAgICAgdGhpcy5fdGhydXN0ZXJTcHJpdGUuc2V0QWxwaGEoMSk7XG4gICAgICAgIFxuICAgICAgICAvLyDQntGH0LjRidCw0LXQvCDRgtCw0LnQvNC10YBcbiAgICAgICAgaWYgKHRoaXMuX2ludnVsbmVyYWJpbGl0eVRpbWVyKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnZ1bG5lcmFiaWxpdHlUaW1lci5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLl9pbnZ1bG5lcmFiaWxpdHlUaW1lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kZWFjdGl2YXRlSW52dWxuZXJhYmlsaXR5KCk7XG4gICAgICAgIHRoaXMuc2NlbmU/LmV2ZW50cy5vZmYoUGhhc2VyLlNjZW5lcy5FdmVudHMuVVBEQVRFLCB0aGlzLnVwZGF0ZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuX2V2ZW50QnVzLm9mZihDVVNUT01fRVZFTlRTLlBMQVlFUl9TUEFXTiwgdGhpcy5zcGF3biwgdGhpcyk7XG4gICAgICAgIHRoaXMuX3dlYXBvbi5jbGVhbnVwKCk7XG5cbiAgICAgICAgLy8g0J7Rh9C40YHRgtC60LAg0YLQsNC50LzQtdGA0L7QsiDQsdC+0LzQsdGLXG4gICAgICAgIGlmICh0aGlzLl9ib21iVGltZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2JvbWJUaW1lci5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLl9ib21iVGltZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDQntGH0LjRgdGC0LrQsCDQs9GA0LDRhNC40LrQuCDQsdC+0LzQsdGLXG4gICAgICAgIHRoaXMuX2JvbWJFZmZlY3QuZGVzdHJveSgpO1xuICAgIH1cblxufVxuIl0sIm5hbWVzIjpbIkNvbGxpZGVyQ29tcG9uZW50IiwiSGVhbHRoQ29tcG9uZW50IiwiS2V5Ym9hcmRJbnB1dENvbXBvbmVudCIsIkhvcml6b250YWxNb3ZlbWVudENvbXBvbmVudCIsIlZlcnRpY2FsTW92ZW1lbnRDb21wb25lbnQiLCJXZWFwb25Db21wb25lbnQiLCJDT05GSUciLCJQaGFzZXIiLCJDVVNUT01fRVZFTlRTIiwiUGxheWVyIiwiR2FtZU9iamVjdHMiLCJDb250YWluZXIiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwiZXZlbnRCdXMiLCJzY2FsZSIsIndpZHRoIiwiaGVpZ2h0IiwiX2lzSW52dWxuZXJhYmxlIiwiX2ludnVsbmVyYWJpbGl0eVRpbWVyIiwiX2JsaW5rVHdlZW4iLCJfaXNCb21iQWN0aXZlIiwiX2JvbWJUaW1lciIsIl9ib21iQ29vbGRvd24iLCJfaXNXZWFwb25DaGFuZ2VkIiwiX3BpY2t1cFJhZGl1cyIsImFkZCIsImV4aXN0aW5nIiwicGh5c2ljcyIsImJvZHkiLCJFcnJvciIsIlBoeXNpY3MiLCJBcmNhZGUiLCJCb2R5Iiwic2V0U2l6ZSIsInNldE9mZnNldCIsInNldENvbGxpZGVXb3JsZEJvdW5kcyIsInNldERlcHRoIiwiX2V2ZW50QnVzIiwiX3NoaXBTcHJpdGUiLCJzcHJpdGUiLCJfZW5naW5lU3ByaXRlIiwiX3RocnVzdGVyU3ByaXRlIiwicGxheSIsIl9rZXlib2FyZElucHV0IiwiX2hvcml6b250YWxNb3ZlbWVudCIsIlBMQVlFUl9NT1ZFTUVOVF9WRUxPQ0lUWSIsIl92ZXJ0aWNhbE1vdmVtZW50IiwiX3dlYXBvbiIsIl9oZWFsdGgiLCJQTEFZRVJfSEVBTFRIIiwiX2NvbGxpZGVyIiwiaGlkZSIsIm9uIiwiUExBWUVSX1NQQVdOIiwic3Bhd24iLCJBRERfTElGRSIsImFtb3VudCIsInNldExpZmUiLCJsaWZlIiwiQUREX0JPTUIiLCJfYm9tYnNDb3VudCIsImVtaXQiLCJCT01CX0NPVU5UX0NIQU5HRUQiLCJldmVudHMiLCJTY2VuZXMiLCJFdmVudHMiLCJVUERBVEUiLCJ1cGRhdGUiLCJvbmNlIiwiREVTVFJPWSIsImNsZWFudXAiLCJfZm9jdXNJbmRpY2F0b3IiLCJncmFwaGljcyIsIlBMQVlFUl9CT01CX0NPTkZJRyIsImNvdW50IiwiX2JvbWJFZmZlY3QiLCJzZXRWaXNpYmxlIiwic2V0dXBUZXN0Q29udHJvbHMiLCJjYW5QaWNrdXAiLCJpdGVtIiwiTWF0aCIsIkRpc3RhbmNlIiwiQmV0d2VlbiIsIngiLCJ5IiwiaW5wdXQiLCJrZXlib2FyZCIsImluY3JlYXNlUG93ZXIiLCJjb25zb2xlIiwibG9nIiwiZ2V0UG93ZXIiLCJnZXRQb3dlckxldmVsIiwiYWRkUG93ZXIiLCJwb3dlckxldmVsIiwiY29sbGlkZXIiLCJoZWFsdGgiLCJ3ZWFwb25Hcm91cCIsImdldEJ1bGxldEdyb3VwIiwid2VhcG9uIiwiaXNJbnZ1bG5lcmFibGUiLCJ0aW1lIiwiZGVsdGEiLCJhY3RpdmUiLCJpc0RlYWQiLCJoYW5kbGVEZWF0aCIsInRoaXJkQWN0aW9uSXNEb3duIiwiY3ljbGVXZWFwb25UeXBlIiwidXBkYXRlSGl0Ym94SW5kaWNhdG9yIiwic2Vjb25kYXJ5QWN0aW9uSXNEb3duIiwiYWN0aXZhdGVCb21iIiwic2hvd0JvbWJJbml0aWFsRmxhc2giLCJzaG93Qm9tYlBlcnNpc3RlbnRFZmZlY3QiLCJhY3RpdmF0ZUludnVsbmVyYWJpbGl0eSIsImR1cmF0aW9uIiwiUExBWUVSX0JPTUJfQUNUSVZBVEVEIiwiZGVsYXllZENhbGwiLCJkZWFjdGl2YXRlQm9tYiIsImNvb2xkb3duIiwiZGFtYWdlVGltZXIiLCJhZGRFdmVudCIsImRlbGF5IiwiZGFtYWdlSW50ZXJ2YWwiLCJjYWxsYmFjayIsIlBMQVlFUl9CT01CX0RBTUFHRV9USUNLIiwiY2FsbGJhY2tTY29wZSIsInJlcGVhdCIsImZsb29yIiwidHdlZW5zIiwidGFyZ2V0cyIsImFscGhhIiwib25Db21wbGV0ZSIsImRlc3Ryb3kiLCJmbGFzaCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiZWFzZSIsImNsZWFyIiwiZnJvbSIsInRvIiwieW95byIsInJlc2V0Qm9tYnMiLCJjdXJyZW50VHlwZSIsImdldFdlYXBvblR5cGUiLCJuZXh0VHlwZSIsInNldFdlYXBvblR5cGUiLCJXRUFQT05fQ0hBTkdFRCIsIndlYXBvblR5cGUiLCJmb2N1c0lzRG93biIsImZpbGxDaXJjbGUiLCJvZmZzZXQiLCJsaW5lU3R5bGUiLCJzdHJva2VSZWN0IiwiZGVhY3RpdmF0ZUxhc2VyIiwiUExBWUVSX0RFU1RST1lFRCIsImVuYWJsZSIsInN0b3AiLCJzZXRBY3RpdmUiLCJsb2NrSW5wdXQiLCJ3b3JsZCIsImRpc2FibGUiLCJpZ25vcmVEZXN0cm95IiwidmVsb2NpdHkiLCJzZXQiLCJzZXRUZXh0dXJlIiwicmVzZXQiLCJzZXRQb3NpdGlvbiIsImRlYWN0aXZhdGVJbnZ1bG5lcmFiaWxpdHkiLCJzZXRBbHBoYSIsIm9mZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/entities/player.ts\n");

/***/ }),

/***/ "./src/game/entities/ui/bombs.ts":
/*!***************************************!*\
  !*** ./src/game/entities/ui/bombs.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Bombs: () => (/* binding */ Bombs)\n/* harmony export */ });\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _configs_game_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../configs/game-config */ \"./src/game/configs/game-config.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _game_utils_graphics_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/game/utils/graphics-utils */ \"./src/game/utils/graphics-utils.ts\");\n\n\n\n\nclass Bombs extends (phaser__WEBPACK_IMPORTED_MODULE_2___default().GameObjects).Container {\n    constructor(scene, eventBus){\n        super(scene, 5, scene.scale.height - 60);\n        this.bombIcons = [];\n        this.eventBus = eventBus;\n        scene.add.existing(this);\n        this.createBombIcons();\n        this.setupEventListeners();\n    }\n    createBombIcons() {\n        this.bombIcons.forEach((icon)=>icon.destroy());\n        this.bombIcons = [];\n        this.removeAll(true);\n        for(let i = 0; i < _configs_game_config__WEBPACK_IMPORTED_MODULE_1__.PLAYER_BOMB_CONFIG.count; i++){\n            const bombIcon = _game_utils_graphics_utils__WEBPACK_IMPORTED_MODULE_3__.GraphicsUtils.createBombIcon(this.scene, i * 25 + 10, 10);\n            this.add(bombIcon);\n            this.bombIcons.push(bombIcon);\n        }\n    }\n    setupEventListeners() {\n        this.eventBus.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.BOMB_COUNT_CHANGED, (count)=>{\n            this.updateBombIcons(count);\n        });\n    }\n    updateBombIcons(count) {\n        while(this.bombIcons.length > count){\n            const icon = this.bombIcons.pop();\n            icon?.destroy();\n        }\n        while(this.bombIcons.length < count){\n            const newIndex = this.bombIcons.length;\n            const bombIcon = _game_utils_graphics_utils__WEBPACK_IMPORTED_MODULE_3__.GraphicsUtils.createBombIcon(this.scene, newIndex * 25 + 10, 10);\n            this.add(bombIcon);\n            this.bombIcons.push(bombIcon);\n        }\n    }\n    destroy(fromScene) {\n        this.eventBus.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.BOMB_COUNT_CHANGED);\n        this.bombIcons.forEach((icon)=>icon.destroy());\n        super.destroy(fromScene);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy91aS9ib21icy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkQ7QUFDUDtBQUN4QjtBQUVnQztBQUVyRCxNQUFNSSxjQUFjRiwyREFBa0IsQ0FBQ0ksU0FBUztJQUluREMsWUFBWUMsS0FBbUIsRUFBRUMsUUFBMkIsQ0FBRTtRQUMxRCxLQUFLLENBQUNELE9BQU8sR0FBR0EsTUFBTUUsS0FBSyxDQUFDQyxNQUFNLEdBQUc7YUFKakNDLFlBQTJDLEVBQUU7UUFLakQsSUFBSSxDQUFDSCxRQUFRLEdBQUdBO1FBQ2hCRCxNQUFNSyxHQUFHLENBQUNDLFFBQVEsQ0FBQyxJQUFJO1FBRXZCLElBQUksQ0FBQ0MsZUFBZTtRQUNwQixJQUFJLENBQUNDLG1CQUFtQjtJQUM1QjtJQUVRRCxrQkFBd0I7UUFDNUIsSUFBSSxDQUFDSCxTQUFTLENBQUNLLE9BQU8sQ0FBQ0MsQ0FBQUEsT0FBUUEsS0FBS0MsT0FBTztRQUMzQyxJQUFJLENBQUNQLFNBQVMsR0FBRyxFQUFFO1FBQ25CLElBQUksQ0FBQ1EsU0FBUyxDQUFDO1FBRWYsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlwQixvRUFBeUIsQ0FBQ3NCLEtBQUssRUFBRUYsSUFBSztZQUN0RCxNQUFNRyxXQUFXckIscUVBQWFBLENBQUNzQixjQUFjLENBQUMsSUFBSSxDQUFDakIsS0FBSyxFQUFFYSxJQUFJLEtBQUssSUFBSTtZQUN2RSxJQUFJLENBQUNSLEdBQUcsQ0FBQ1c7WUFDVCxJQUFJLENBQUNaLFNBQVMsQ0FBQ2MsSUFBSSxDQUFDRjtRQUN4QjtJQUNKO0lBRVFSLHNCQUE0QjtRQUNoQyxJQUFJLENBQUNQLFFBQVEsQ0FBQ2tCLEVBQUUsQ0FBQzNCLG9FQUFhQSxDQUFDNEIsa0JBQWtCLEVBQUUsQ0FBQ0w7WUFDaEQsSUFBSSxDQUFDTSxlQUFlLENBQUNOO1FBQ3pCO0lBQ0o7SUFFUU0sZ0JBQWdCTixLQUFhLEVBQVE7UUFDekMsTUFBTyxJQUFJLENBQUNYLFNBQVMsQ0FBQ2tCLE1BQU0sR0FBR1AsTUFBTztZQUNsQyxNQUFNTCxPQUFPLElBQUksQ0FBQ04sU0FBUyxDQUFDbUIsR0FBRztZQUMvQmIsTUFBTUM7UUFDVjtRQUVBLE1BQU8sSUFBSSxDQUFDUCxTQUFTLENBQUNrQixNQUFNLEdBQUdQLE1BQU87WUFDbEMsTUFBTVMsV0FBVyxJQUFJLENBQUNwQixTQUFTLENBQUNrQixNQUFNO1lBQ3RDLE1BQU1OLFdBQVdyQixxRUFBYUEsQ0FBQ3NCLGNBQWMsQ0FBQyxJQUFJLENBQUNqQixLQUFLLEVBQUV3QixXQUFXLEtBQUssSUFBSTtZQUM5RSxJQUFJLENBQUNuQixHQUFHLENBQUNXO1lBQ1QsSUFBSSxDQUFDWixTQUFTLENBQUNjLElBQUksQ0FBQ0Y7UUFDeEI7SUFDSjtJQUVPTCxRQUFRYyxTQUFtQixFQUFRO1FBQ3RDLElBQUksQ0FBQ3hCLFFBQVEsQ0FBQ3lCLEdBQUcsQ0FBQ2xDLG9FQUFhQSxDQUFDNEIsa0JBQWtCO1FBQ2xELElBQUksQ0FBQ2hCLFNBQVMsQ0FBQ0ssT0FBTyxDQUFDQyxDQUFBQSxPQUFRQSxLQUFLQyxPQUFPO1FBQzNDLEtBQUssQ0FBQ0EsUUFBUWM7SUFDbEI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9lbnRpdGllcy91aS9ib21icy50cz9hZjRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENVU1RPTV9FVkVOVFMgfSBmcm9tICdAL2dhbWUvdHlwZXMvY3VzdG9tLWV2ZW50cyc7XHJcbmltcG9ydCAqIGFzIENPTkZJRyBmcm9tICcuLi8uLi9jb25maWdzL2dhbWUtY29uZmlnJztcclxuaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgeyBFdmVudEJ1c0NvbXBvbmVudCB9IGZyb20gJ0AvZ2FtZS9jb21wb25lbnRzL2V2ZW50cy9ldmVudC1idXMtY29tcG9uZW50JztcclxuaW1wb3J0IHsgR3JhcGhpY3NVdGlscyB9IGZyb20gJ0AvZ2FtZS91dGlscy9ncmFwaGljcy11dGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQm9tYnMgZXh0ZW5kcyBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyIHtcclxuICAgIHByaXZhdGUgYm9tYkljb25zOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3NbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXNDb21wb25lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFBoYXNlci5TY2VuZSwgZXZlbnRCdXM6IEV2ZW50QnVzQ29tcG9uZW50KSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIDUsIHNjZW5lLnNjYWxlLmhlaWdodCAtIDYwKTtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzID0gZXZlbnRCdXM7XHJcbiAgICAgICAgc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlQm9tYkljb25zKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVCb21iSWNvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ib21iSWNvbnMuZm9yRWFjaChpY29uID0+IGljb24uZGVzdHJveSgpKTtcclxuICAgICAgICB0aGlzLmJvbWJJY29ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQWxsKHRydWUpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IENPTkZJRy5QTEFZRVJfQk9NQl9DT05GSUcuY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBib21iSWNvbiA9IEdyYXBoaWNzVXRpbHMuY3JlYXRlQm9tYkljb24odGhpcy5zY2VuZSwgaSAqIDI1ICsgMTAsIDEwKTtcclxuICAgICAgICAgICAgdGhpcy5hZGQoYm9tYkljb24pO1xyXG4gICAgICAgICAgICB0aGlzLmJvbWJJY29ucy5wdXNoKGJvbWJJY29uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR1cEV2ZW50TGlzdGVuZXJzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oQ1VTVE9NX0VWRU5UUy5CT01CX0NPVU5UX0NIQU5HRUQsIChjb3VudDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQm9tYkljb25zKGNvdW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUJvbWJJY29ucyhjb3VudDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMuYm9tYkljb25zLmxlbmd0aCA+IGNvdW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGljb24gPSB0aGlzLmJvbWJJY29ucy5wb3AoKTtcclxuICAgICAgICAgICAgaWNvbj8uZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB3aGlsZSAodGhpcy5ib21iSWNvbnMubGVuZ3RoIDwgY291bnQpIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3SW5kZXggPSB0aGlzLmJvbWJJY29ucy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvbWJJY29uID0gR3JhcGhpY3NVdGlscy5jcmVhdGVCb21iSWNvbih0aGlzLnNjZW5lLCBuZXdJbmRleCAqIDI1ICsgMTAsIDEwKTtcclxuICAgICAgICAgICAgdGhpcy5hZGQoYm9tYkljb24pO1xyXG4gICAgICAgICAgICB0aGlzLmJvbWJJY29ucy5wdXNoKGJvbWJJY29uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koZnJvbVNjZW5lPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub2ZmKENVU1RPTV9FVkVOVFMuQk9NQl9DT1VOVF9DSEFOR0VEKTtcclxuICAgICAgICB0aGlzLmJvbWJJY29ucy5mb3JFYWNoKGljb24gPT4gaWNvbi5kZXN0cm95KCkpO1xyXG4gICAgICAgIHN1cGVyLmRlc3Ryb3koZnJvbVNjZW5lKTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJDVVNUT01fRVZFTlRTIiwiQ09ORklHIiwiUGhhc2VyIiwiR3JhcGhpY3NVdGlscyIsIkJvbWJzIiwiR2FtZU9iamVjdHMiLCJDb250YWluZXIiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwiZXZlbnRCdXMiLCJzY2FsZSIsImhlaWdodCIsImJvbWJJY29ucyIsImFkZCIsImV4aXN0aW5nIiwiY3JlYXRlQm9tYkljb25zIiwic2V0dXBFdmVudExpc3RlbmVycyIsImZvckVhY2giLCJpY29uIiwiZGVzdHJveSIsInJlbW92ZUFsbCIsImkiLCJQTEFZRVJfQk9NQl9DT05GSUciLCJjb3VudCIsImJvbWJJY29uIiwiY3JlYXRlQm9tYkljb24iLCJwdXNoIiwib24iLCJCT01CX0NPVU5UX0NIQU5HRUQiLCJ1cGRhdGVCb21iSWNvbnMiLCJsZW5ndGgiLCJwb3AiLCJuZXdJbmRleCIsImZyb21TY2VuZSIsIm9mZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/entities/ui/bombs.ts\n");

/***/ }),

/***/ "./src/game/entities/ui/boss-ui.ts":
/*!*****************************************!*\
  !*** ./src/game/entities/ui/boss-ui.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BossUI: () => (/* binding */ BossUI)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _game_event_bus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/game/event-bus */ \"./src/game/event-bus.ts\");\n\n\nclass BossUI {\n    constructor(scene){\n        this._currentHealthBar = null;\n        this._currentHealthBarBg = null;\n        this._phaseIndicators = [];\n        this._healthText = null;\n        this._boss = null;\n        this._phaseTimerText = null;\n        this._phaseStartTime = 0;\n        this.handlePhaseChange = ()=>{\n            this._phaseStartTime = this._scene.time.now;\n            this.updatePhaseIndicators();\n            this.updateUI();\n        };\n        this.updatePhaseTimer = ()=>{\n            if (!this._boss || !this._phaseTimerText) return;\n            const currentPhase = this._boss.currentPhaseIndex;\n            const phases = this._boss[\"_phases\"];\n            const currentPhaseData = phases[currentPhase];\n            if (!currentPhaseData?.duration) {\n                this._phaseTimerText?.setText(\"\");\n                return;\n            }\n            const elapsed = this._scene.time.now - this._phaseStartTime;\n            const remaining = Math.max(0, currentPhaseData.duration - elapsed);\n            this._phaseTimerText.setText(`${Math.ceil(remaining / 1000)}s`);\n        };\n        this._scene = scene;\n        this._barWidth = scene.scale.width * 0.75;\n        this._barHeight = 12;\n        this._margin = 10;\n        this._indicatorSize = 10;\n        this.initEventListeners();\n    }\n    initEventListeners() {\n        _game_event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.on(\"BOSS_HEALTH_CHANGE\", this.updateUI, this);\n        _game_event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.on(\"BOSS_PHASE_CHANGE\", this.handlePhaseChange, this);\n        this._scene.events.on((phaser__WEBPACK_IMPORTED_MODULE_0___default().Scenes).Events.UPDATE, this.updatePhaseTimer, this);\n    }\n    createUIElements() {\n        this.destroyElements();\n        this.createHealthBar();\n        this.createTextElements();\n        this.createPhaseTimer();\n    }\n    setBoss(boss) {\n        this._boss = boss;\n        this._phaseStartTime = this._scene.time.now;\n        this.createUIElements();\n        this.updatePhaseIndicators();\n        this.updateUI();\n    }\n    createHealthBar() {\n        this._currentHealthBarBg = this._scene.add.graphics().fillStyle(0x333333, 0.8).fillRect(this._margin, this._margin, this._barWidth, this._barHeight).setScrollFactor(0).setDepth(100);\n        this._currentHealthBar = this._scene.add.graphics().fillStyle(0xff0000, 1).fillRect(this._margin, this._margin, this._barWidth, this._barHeight).setScrollFactor(0).setDepth(101);\n    }\n    createTextElements() {\n        this._healthText = this._scene.add.text(this._margin, this._margin + this._barHeight + this._indicatorSize + 10, \"BOSS: 100%\", {\n            fontFamily: \"Arial\",\n            fontSize: \"14px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0, 0).setScrollFactor(0).setDepth(100);\n    }\n    createPhaseTimer() {\n        this._phaseTimerText = this._scene.add.text(this._margin + this._barWidth - 5, this._margin + this._barHeight + 6, \"\", {\n            fontFamily: \"Arial\",\n            fontSize: \"16px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(1, 0).setScrollFactor(0).setDepth(100);\n    }\n    updateUI() {\n        if (!this._boss || !this._boss.healthComponent) {\n            this.destroy();\n            return;\n        }\n        const currentPhase = this._boss.currentPhaseIndex;\n        const phases = this._boss[\"_phases\"];\n        const currentPhaseData = phases[currentPhase];\n        const healthPercent = Math.floor(this._boss.healthComponent.life / currentPhaseData.health * 100);\n        const width = this._boss.healthComponent.life / currentPhaseData.health * this._barWidth;\n        this._currentHealthBar?.clear().fillStyle(this.getHealthColor(healthPercent), 1).fillRect(this._margin, this._margin, width, this._barHeight);\n        this._healthText?.setText(`BOSS: ${healthPercent}%`);\n    }\n    updatePhaseIndicators() {\n        if (!this._boss) return;\n        // Очищаем старые индикаторы\n        this._phaseIndicators.forEach((indicator)=>indicator.destroy());\n        this._phaseIndicators = [];\n        const totalPhases = this._boss[\"_phases\"].length;\n        const currentPhase = this._boss.currentPhaseIndex;\n        // Параметры звезды\n        const starColor = 0xffffff; // 0x00ff00 Зеленый\n        const starSize = 12;\n        const starSpacing = 15;\n        const startX = this._margin;\n        const yPos = this._margin + this._barHeight + 8;\n        // Рисуем звезды для будущих фаз\n        for(let i = currentPhase + 1; i < totalPhases; i++){\n            const xPos = startX + (i - currentPhase - 1) * starSpacing;\n            const star = this._scene.add.graphics().fillStyle(starColor, 1).lineStyle(1, 0xffffff, 0.8);\n            // Рисуем 5-конечную звезду\n            this.drawStar(star, xPos + starSize / 2, yPos + starSize / 2, 5, starSize / 2, starSize / 4);\n            star.setScrollFactor(0).setDepth(102);\n            this._phaseIndicators.push(star);\n        }\n    }\n    // Метод для рисования звезды\n    drawStar(graphics, x, y, points, outerRadius, innerRadius) {\n        const angle = Math.PI / points;\n        let rotation = Math.PI / 2 * 3;\n        graphics.beginPath();\n        graphics.moveTo(x, y - outerRadius);\n        for(let i = 0; i < points; i++){\n            // Внешняя точка\n            const outerX = x + Math.cos(rotation) * outerRadius;\n            const outerY = y + Math.sin(rotation) * outerRadius;\n            graphics.lineTo(outerX, outerY);\n            rotation += angle;\n            // Внутренняя точка\n            const innerX = x + Math.cos(rotation) * innerRadius;\n            const innerY = y + Math.sin(rotation) * innerRadius;\n            graphics.lineTo(innerX, innerY);\n            rotation += angle;\n        }\n        graphics.lineTo(x, y - outerRadius);\n        graphics.closePath();\n        graphics.fillPath();\n        graphics.strokePath();\n    }\n    getHealthColor(percent) {\n        if (percent > 60) return 0x00ff00;\n        if (percent > 30) return 0xffff00;\n        return 0xff0000;\n    }\n    destroy() {\n        _game_event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.off(\"BOSS_HEALTH_CHANGE\", this.updateUI, this);\n        _game_event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.off(\"BOSS_PHASE_CHANGE\", this.handlePhaseChange, this);\n        this._scene.events.off((phaser__WEBPACK_IMPORTED_MODULE_0___default().Scenes).Events.UPDATE, this.updatePhaseTimer, this);\n        this.destroyElements();\n    }\n    destroyElements() {\n        this._currentHealthBar?.destroy();\n        this._currentHealthBarBg?.destroy();\n        this._healthText?.destroy();\n        this._phaseTimerText?.destroy();\n        this._phaseIndicators.forEach((indicator)=>indicator.destroy());\n        this._currentHealthBar = null;\n        this._currentHealthBarBg = null;\n        this._healthText = null;\n        this._phaseTimerText = null;\n        this._phaseIndicators = [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFeUQ7UUFDMUIsSUFBSSxDQUFDdkQsV0FBVyxFQUFFdUQ7UUFDbEIsSUFBSSxDQUFDckQsZUFBZSxFQUFFcUQ7UUFDdEIsSUFBSSxDQUFDeEQsZ0JBQWdCLENBQUMrRCxPQUFPLENBQUNDLENBQUFBLFlBQWFBLFVBQVVSLE9BQU87UUFFNUQsSUFBSSxDQUFDMUQsaUJBQWlCLEdBQUc7UUFDekIsSUFBSSxDQUFDQyxtQkFBbUIsR0FBRztRQUMzQixJQUFJLENBQUNFLFdBQVcsR0FBRztRQUNuQixJQUFJLENBQUNFLGVBQWUsR0FBRztRQUN2QixJQUFJLENBQUNILGdCQUFnQixHQUFHLEVBQUU7SUFDOUI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9lbnRpdGllcy91aS9ib3NzLXVpLnRzPzdmNzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgeyBCb3NzRW5lbXkgfSBmcm9tICcuLi9lbmVtaWVzL2Jvc3Nlcy9iYXNlLWJvc3MnO1xyXG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJ0AvZ2FtZS9ldmVudC1idXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJvc3NVSSB7XHJcbiAgICBwcml2YXRlIF9jdXJyZW50SGVhbHRoQmFyOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3MgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX2N1cnJlbnRIZWFsdGhCYXJCZzogUGhhc2VyLkdhbWVPYmplY3RzLkdyYXBoaWNzIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9waGFzZUluZGljYXRvcnM6IFBoYXNlci5HYW1lT2JqZWN0cy5HcmFwaGljc1tdID0gW107XHJcbiAgICBwcml2YXRlIF9oZWFsdGhUZXh0OiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dCB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfYm9zczogQm9zc0VuZW15IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9zY2VuZTogUGhhc2VyLlNjZW5lO1xyXG4gICAgcHJpdmF0ZSBfYmFyV2lkdGg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX2JhckhlaWdodDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfbWFyZ2luOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9pbmRpY2F0b3JTaXplOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9waGFzZVRpbWVyVGV4dDogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX3BoYXNlU3RhcnRUaW1lOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBQaGFzZXIuU2NlbmUpIHtcclxuICAgICAgICB0aGlzLl9zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMuX2JhcldpZHRoID0gc2NlbmUuc2NhbGUud2lkdGggKiAwLjc1O1xyXG4gICAgICAgIHRoaXMuX2JhckhlaWdodCA9IDEyO1xyXG4gICAgICAgIHRoaXMuX21hcmdpbiA9IDEwO1xyXG4gICAgICAgIHRoaXMuX2luZGljYXRvclNpemUgPSAxMDtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRFdmVudExpc3RlbmVycygpOiB2b2lkIHtcclxuICAgICAgICBFdmVudEJ1cy5vbignQk9TU19IRUFMVEhfQ0hBTkdFJywgdGhpcy51cGRhdGVVSSwgdGhpcyk7XHJcbiAgICAgICAgRXZlbnRCdXMub24oJ0JPU1NfUEhBU0VfQ0hBTkdFJywgdGhpcy5oYW5kbGVQaGFzZUNoYW5nZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5fc2NlbmUuZXZlbnRzLm9uKFBoYXNlci5TY2VuZXMuRXZlbnRzLlVQREFURSwgdGhpcy51cGRhdGVQaGFzZVRpbWVyLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVVJRWxlbWVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95RWxlbWVudHMoKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZUhlYWx0aEJhcigpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlVGV4dEVsZW1lbnRzKCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVQaGFzZVRpbWVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVQaGFzZUNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9waGFzZVN0YXJ0VGltZSA9IHRoaXMuX3NjZW5lLnRpbWUubm93O1xyXG4gICAgICAgIHRoaXMudXBkYXRlUGhhc2VJbmRpY2F0b3JzKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVVSSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVBoYXNlVGltZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9ib3NzIHx8ICF0aGlzLl9waGFzZVRpbWVyVGV4dCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBjdXJyZW50UGhhc2UgPSB0aGlzLl9ib3NzLmN1cnJlbnRQaGFzZUluZGV4O1xyXG4gICAgICAgIGNvbnN0IHBoYXNlcyA9IHRoaXMuX2Jvc3NbJ19waGFzZXMnXTtcclxuICAgICAgICBjb25zdCBjdXJyZW50UGhhc2VEYXRhID0gcGhhc2VzW2N1cnJlbnRQaGFzZV07XHJcbiAgICAgICAgaWYgKCFjdXJyZW50UGhhc2VEYXRhPy5kdXJhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLl9waGFzZVRpbWVyVGV4dD8uc2V0VGV4dCgnJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGVsYXBzZWQgPSB0aGlzLl9zY2VuZS50aW1lLm5vdyAtIHRoaXMuX3BoYXNlU3RhcnRUaW1lO1xyXG4gICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IE1hdGgubWF4KDAsIGN1cnJlbnRQaGFzZURhdGEuZHVyYXRpb24gLSBlbGFwc2VkKTtcclxuICAgICAgICB0aGlzLl9waGFzZVRpbWVyVGV4dC5zZXRUZXh0KGAke01hdGguY2VpbChyZW1haW5pbmcgLyAxMDAwKX1zYCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBzZXRCb3NzKGJvc3M6IEJvc3NFbmVteSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2Jvc3MgPSBib3NzO1xyXG4gICAgICAgIHRoaXMuX3BoYXNlU3RhcnRUaW1lID0gdGhpcy5fc2NlbmUudGltZS5ub3c7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVVSUVsZW1lbnRzKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQaGFzZUluZGljYXRvcnMoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVVJKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVIZWFsdGhCYXIoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudEhlYWx0aEJhckJnID0gdGhpcy5fc2NlbmUuYWRkLmdyYXBoaWNzKClcclxuICAgICAgICAgICAgLmZpbGxTdHlsZSgweDMzMzMzMywgMC44KVxyXG4gICAgICAgICAgICAuZmlsbFJlY3QodGhpcy5fbWFyZ2luLCB0aGlzLl9tYXJnaW4sIHRoaXMuX2JhcldpZHRoLCB0aGlzLl9iYXJIZWlnaHQpXHJcbiAgICAgICAgICAgIC5zZXRTY3JvbGxGYWN0b3IoMClcclxuICAgICAgICAgICAgLnNldERlcHRoKDEwMCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRIZWFsdGhCYXIgPSB0aGlzLl9zY2VuZS5hZGQuZ3JhcGhpY3MoKVxyXG4gICAgICAgICAgICAuZmlsbFN0eWxlKDB4ZmYwMDAwLCAxKVxyXG4gICAgICAgICAgICAuZmlsbFJlY3QodGhpcy5fbWFyZ2luLCB0aGlzLl9tYXJnaW4sIHRoaXMuX2JhcldpZHRoLCB0aGlzLl9iYXJIZWlnaHQpXHJcbiAgICAgICAgICAgIC5zZXRTY3JvbGxGYWN0b3IoMClcclxuICAgICAgICAgICAgLnNldERlcHRoKDEwMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVUZXh0RWxlbWVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5faGVhbHRoVGV4dCA9IHRoaXMuX3NjZW5lLmFkZC50ZXh0KFxyXG4gICAgICAgICAgICB0aGlzLl9tYXJnaW4sXHJcbiAgICAgICAgICAgIHRoaXMuX21hcmdpbiArIHRoaXMuX2JhckhlaWdodCArIHRoaXMuX2luZGljYXRvclNpemUgKyAxMCxcclxuICAgICAgICAgICAgJ0JPU1M6IDEwMCUnLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxyXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICcxNHB4JyxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZicsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVRoaWNrbmVzczogMlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5zZXRPcmlnaW4oMCwgMClcclxuICAgICAgICAuc2V0U2Nyb2xsRmFjdG9yKDApXHJcbiAgICAgICAgLnNldERlcHRoKDEwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVQaGFzZVRpbWVyKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX3BoYXNlVGltZXJUZXh0ID0gdGhpcy5fc2NlbmUuYWRkLnRleHQoXHJcbiAgICAgICAgICAgIHRoaXMuX21hcmdpbiArIHRoaXMuX2JhcldpZHRoIC0gNSxcclxuICAgICAgICAgICAgdGhpcy5fbWFyZ2luICsgdGhpcy5fYmFySGVpZ2h0ICsgNixcclxuICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzE2cHgnLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlVGhpY2tuZXNzOiAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgICAgLnNldE9yaWdpbigxLCAwKVxyXG4gICAgICAgIC5zZXRTY3JvbGxGYWN0b3IoMClcclxuICAgICAgICAuc2V0RGVwdGgoMTAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVVJKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5fYm9zcyB8fCAhdGhpcy5fYm9zcy5oZWFsdGhDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRQaGFzZSA9IHRoaXMuX2Jvc3MuY3VycmVudFBoYXNlSW5kZXg7XHJcbiAgICAgICAgY29uc3QgcGhhc2VzID0gdGhpcy5fYm9zc1snX3BoYXNlcyddO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRQaGFzZURhdGEgPSBwaGFzZXNbY3VycmVudFBoYXNlXTtcclxuICAgICAgICBjb25zdCBoZWFsdGhQZXJjZW50ID0gTWF0aC5mbG9vcigodGhpcy5fYm9zcy5oZWFsdGhDb21wb25lbnQubGlmZSAvIGN1cnJlbnRQaGFzZURhdGEuaGVhbHRoKSAqIDEwMCk7XHJcbiAgICAgICAgY29uc3Qgd2lkdGggPSAodGhpcy5fYm9zcy5oZWFsdGhDb21wb25lbnQubGlmZSAvIGN1cnJlbnRQaGFzZURhdGEuaGVhbHRoKSAqIHRoaXMuX2JhcldpZHRoO1xyXG5cclxuICAgICAgICB0aGlzLl9jdXJyZW50SGVhbHRoQmFyXHJcbiAgICAgICAgICAgID8uY2xlYXIoKVxyXG4gICAgICAgICAgICAuZmlsbFN0eWxlKHRoaXMuZ2V0SGVhbHRoQ29sb3IoaGVhbHRoUGVyY2VudCksIDEpXHJcbiAgICAgICAgICAgIC5maWxsUmVjdCh0aGlzLl9tYXJnaW4sIHRoaXMuX21hcmdpbiwgd2lkdGgsIHRoaXMuX2JhckhlaWdodCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2hlYWx0aFRleHQ/LnNldFRleHQoYEJPU1M6ICR7aGVhbHRoUGVyY2VudH0lYCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVQaGFzZUluZGljYXRvcnMoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9ib3NzKSByZXR1cm47XHJcbiAgICBcclxuICAgICAgICAvLyDQntGH0LjRidCw0LXQvCDRgdGC0LDRgNGL0LUg0LjQvdC00LjQutCw0YLQvtGA0YtcclxuICAgICAgICB0aGlzLl9waGFzZUluZGljYXRvcnMuZm9yRWFjaChpbmRpY2F0b3IgPT4gaW5kaWNhdG9yLmRlc3Ryb3koKSk7XHJcbiAgICAgICAgdGhpcy5fcGhhc2VJbmRpY2F0b3JzID0gW107XHJcbiAgICBcclxuICAgICAgICBjb25zdCB0b3RhbFBoYXNlcyA9IHRoaXMuX2Jvc3NbJ19waGFzZXMnXS5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFBoYXNlID0gdGhpcy5fYm9zcy5jdXJyZW50UGhhc2VJbmRleDtcclxuICAgIFxyXG4gICAgICAgIC8vINCf0LDRgNCw0LzQtdGC0YDRiyDQt9Cy0LXQt9C00YtcclxuICAgICAgICBjb25zdCBzdGFyQ29sb3IgPSAweGZmZmZmZjsgLy8gMHgwMGZmMDAg0JfQtdC70LXQvdGL0LlcclxuICAgICAgICBjb25zdCBzdGFyU2l6ZSA9IDEyO1xyXG4gICAgICAgIGNvbnN0IHN0YXJTcGFjaW5nID0gMTU7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRYID0gdGhpcy5fbWFyZ2luO1xyXG4gICAgICAgIGNvbnN0IHlQb3MgPSB0aGlzLl9tYXJnaW4gKyB0aGlzLl9iYXJIZWlnaHQgKyA4O1xyXG4gICAgXHJcbiAgICAgICAgLy8g0KDQuNGB0YPQtdC8INC30LLQtdC30LTRiyDQtNC70Y8g0LHRg9C00YPRidC40YUg0YTQsNC3XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGN1cnJlbnRQaGFzZSArIDE7IGkgPCB0b3RhbFBoYXNlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHhQb3MgPSBzdGFydFggKyAoaSAtIGN1cnJlbnRQaGFzZSAtIDEpICogc3RhclNwYWNpbmc7XHJcbiAgICBcclxuICAgICAgICAgICAgY29uc3Qgc3RhciA9IHRoaXMuX3NjZW5lLmFkZC5ncmFwaGljcygpXHJcbiAgICAgICAgICAgICAgICAuZmlsbFN0eWxlKHN0YXJDb2xvciwgMSlcclxuICAgICAgICAgICAgICAgIC5saW5lU3R5bGUoMSwgMHhmZmZmZmYsIDAuOCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8g0KDQuNGB0YPQtdC8IDUt0LrQvtC90LXRh9C90YPRjiDQt9Cy0LXQt9C00YNcclxuICAgICAgICAgICAgdGhpcy5kcmF3U3RhcihzdGFyLCB4UG9zICsgc3RhclNpemUvMiwgeVBvcyArIHN0YXJTaXplLzIsIDUsIHN0YXJTaXplLzIsIHN0YXJTaXplLzQpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHN0YXIuc2V0U2Nyb2xsRmFjdG9yKDApXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVwdGgoMTAyKTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9waGFzZUluZGljYXRvcnMucHVzaChzdGFyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vINCc0LXRgtC+0LQg0LTQu9GPINGA0LjRgdC+0LLQsNC90LjRjyDQt9Cy0LXQt9C00YtcclxuICAgIHByaXZhdGUgZHJhd1N0YXIoXHJcbiAgICAgICAgZ3JhcGhpY3M6IFBoYXNlci5HYW1lT2JqZWN0cy5HcmFwaGljcyxcclxuICAgICAgICB4OiBudW1iZXIsXHJcbiAgICAgICAgeTogbnVtYmVyLFxyXG4gICAgICAgIHBvaW50czogbnVtYmVyLFxyXG4gICAgICAgIG91dGVyUmFkaXVzOiBudW1iZXIsXHJcbiAgICAgICAgaW5uZXJSYWRpdXM6IG51bWJlclxyXG4gICAgKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgYW5nbGUgPSBNYXRoLlBJIC8gcG9pbnRzO1xyXG4gICAgICAgIGxldCByb3RhdGlvbiA9IE1hdGguUEkgLyAyICogMztcclxuICAgIFxyXG4gICAgICAgIGdyYXBoaWNzLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGdyYXBoaWNzLm1vdmVUbyh4LCB5IC0gb3V0ZXJSYWRpdXMpO1xyXG4gICAgXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHM7IGkrKykge1xyXG4gICAgICAgICAgICAvLyDQktC90LXRiNC90Y/RjyDRgtC+0YfQutCwXHJcbiAgICAgICAgICAgIGNvbnN0IG91dGVyWCA9IHggKyBNYXRoLmNvcyhyb3RhdGlvbikgKiBvdXRlclJhZGl1cztcclxuICAgICAgICAgICAgY29uc3Qgb3V0ZXJZID0geSArIE1hdGguc2luKHJvdGF0aW9uKSAqIG91dGVyUmFkaXVzO1xyXG4gICAgICAgICAgICBncmFwaGljcy5saW5lVG8ob3V0ZXJYLCBvdXRlclkpO1xyXG4gICAgICAgICAgICByb3RhdGlvbiArPSBhbmdsZTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDQktC90YPRgtGA0LXQvdC90Y/RjyDRgtC+0YfQutCwXHJcbiAgICAgICAgICAgIGNvbnN0IGlubmVyWCA9IHggKyBNYXRoLmNvcyhyb3RhdGlvbikgKiBpbm5lclJhZGl1cztcclxuICAgICAgICAgICAgY29uc3QgaW5uZXJZID0geSArIE1hdGguc2luKHJvdGF0aW9uKSAqIGlubmVyUmFkaXVzO1xyXG4gICAgICAgICAgICBncmFwaGljcy5saW5lVG8oaW5uZXJYLCBpbm5lclkpO1xyXG4gICAgICAgICAgICByb3RhdGlvbiArPSBhbmdsZTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBncmFwaGljcy5saW5lVG8oeCwgeSAtIG91dGVyUmFkaXVzKTtcclxuICAgICAgICBncmFwaGljcy5jbG9zZVBhdGgoKTtcclxuICAgICAgICBncmFwaGljcy5maWxsUGF0aCgpO1xyXG4gICAgICAgIGdyYXBoaWNzLnN0cm9rZVBhdGgoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEhlYWx0aENvbG9yKHBlcmNlbnQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKHBlcmNlbnQgPiA2MCkgcmV0dXJuIDB4MDBmZjAwO1xyXG4gICAgICAgIGlmIChwZXJjZW50ID4gMzApIHJldHVybiAweGZmZmYwMDtcclxuICAgICAgICByZXR1cm4gMHhmZjAwMDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgRXZlbnRCdXMub2ZmKCdCT1NTX0hFQUxUSF9DSEFOR0UnLCB0aGlzLnVwZGF0ZVVJLCB0aGlzKTtcclxuICAgICAgICBFdmVudEJ1cy5vZmYoJ0JPU1NfUEhBU0VfQ0hBTkdFJywgdGhpcy5oYW5kbGVQaGFzZUNoYW5nZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5fc2NlbmUuZXZlbnRzLm9mZihQaGFzZXIuU2NlbmVzLkV2ZW50cy5VUERBVEUsIHRoaXMudXBkYXRlUGhhc2VUaW1lciwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95RWxlbWVudHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlc3Ryb3lFbGVtZW50cygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50SGVhbHRoQmFyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudEhlYWx0aEJhckJnPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5faGVhbHRoVGV4dD8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX3BoYXNlVGltZXJUZXh0Py5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fcGhhc2VJbmRpY2F0b3JzLmZvckVhY2goaW5kaWNhdG9yID0+IGluZGljYXRvci5kZXN0cm95KCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRIZWFsdGhCYXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRIZWFsdGhCYXJCZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5faGVhbHRoVGV4dCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fcGhhc2VUaW1lclRleHQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3BoYXNlSW5kaWNhdG9ycyA9IFtdO1xyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIlBoYXNlciIsIkV2ZW50QnVzIiwiQm9zc1VJIiwiY29uc3RydWN0b3IiLCJzY2VuZSIsIl9jdXJyZW50SGVhbHRoQmFyIiwiX2N1cnJlbnRIZWFsdGhCYXJCZyIsIl9waGFzZUluZGljYXRvcnMiLCJfaGVhbHRoVGV4dCIsIl9ib3NzIiwiX3BoYXNlVGltZXJUZXh0IiwiX3BoYXNlU3RhcnRUaW1lIiwiaGFuZGxlUGhhc2VDaGFuZ2UiLCJfc2NlbmUiLCJ0aW1lIiwibm93IiwidXBkYXRlUGhhc2VJbmRpY2F0b3JzIiwidXBkYXRlVUkiLCJ1cGRhdGVQaGFzZVRpbWVyIiwiY3VycmVudFBoYXNlIiwiY3VycmVudFBoYXNlSW5kZXgiLCJwaGFzZXMiLCJjdXJyZW50UGhhc2VEYXRhIiwiZHVyYXRpb24iLCJzZXRUZXh0IiwiZWxhcHNlZCIsInJlbWFpbmluZyIsIk1hdGgiLCJtYXgiLCJjZWlsIiwiX2JhcldpZHRoIiwic2NhbGUiLCJ3aWR0aCIsIl9iYXJIZWlnaHQiLCJfbWFyZ2luIiwiX2luZGljYXRvclNpemUiLCJpbml0RXZlbnRMaXN0ZW5lcnMiLCJvbiIsImV2ZW50cyIsIlNjZW5lcyIsIkV2ZW50cyIsIlVQREFURSIsImNyZWF0ZVVJRWxlbWVudHMiLCJkZXN0cm95RWxlbWVudHMiLCJjcmVhdGVIZWFsdGhCYXIiLCJjcmVhdGVUZXh0RWxlbWVudHMiLCJjcmVhdGVQaGFzZVRpbWVyIiwic2V0Qm9zcyIsImJvc3MiLCJhZGQiLCJncmFwaGljcyIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwic2V0U2Nyb2xsRmFjdG9yIiwic2V0RGVwdGgiLCJ0ZXh0IiwiZm9udEZhbWlseSIsImZvbnRTaXplIiwiY29sb3IiLCJzdHJva2UiLCJzdHJva2VUaGlja25lc3MiLCJzZXRPcmlnaW4iLCJoZWFsdGhDb21wb25lbnQiLCJkZXN0cm95IiwiaGVhbHRoUGVyY2VudCIsImZsb29yIiwibGlmZSIsImhlYWx0aCIsImNsZWFyIiwiZ2V0SGVhbHRoQ29sb3IiLCJmb3JFYWNoIiwiaW5kaWNhdG9yIiwidG90YWxQaGFzZXMiLCJsZW5ndGgiLCJzdGFyQ29sb3IiLCJzdGFyU2l6ZSIsInN0YXJTcGFjaW5nIiwic3RhcnRYIiwieVBvcyIsImkiLCJ4UG9zIiwic3RhciIsImxpbmVTdHlsZSIsImRyYXdTdGFyIiwicHVzaCIsIngiLCJ5IiwicG9pbnRzIiwib3V0ZXJSYWRpdXMiLCJpbm5lclJhZGl1cyIsImFuZ2xlIiwiUEkiLCJyb3RhdGlvbiIsImJlZ2luUGF0aCIsIm1vdmVUbyIsIm91dGVyWCIsImNvcyIsIm91dGVyWSIsInNpbiIsImxpbmVUbyIsImlubmVyWCIsImlubmVyWSIsImNsb3NlUGF0aCIsImZpbGxQYXRoIiwic3Ryb2tlUGF0aCIsInBlcmNlbnQiLCJvZmYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/entities/ui/boss-ui.ts\n");

/***/ }),

/***/ "./src/game/entities/ui/fps-display.ts":
/*!*********************************************!*\
  !*** ./src/game/entities/ui/fps-display.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FPSDisplay: () => (/* binding */ FPSDisplay)\n/* harmony export */ });\nclass FPSDisplay extends Phaser.GameObjects.Text {\n    constructor(scene, x, y){\n        super(scene, x, y, \"\", {\n            fontFamily: \"Arial\",\n            fontSize: \"12px\",\n            color: \"#ffffff\",\n            padding: {\n                x: 2,\n                y: 2\n            }\n        });\n        this.lastUpdateTime = 0;\n        this.fpsValues = [];\n        this.avgFPS = 0;\n        scene.add.existing(this);\n        this.setOrigin(1, 1) // Привязываем к правому нижнему углу\n        .setDepth(1000).setAlpha(0.7); // Полупрозрачный\n        this.lastUpdateTime = Date.now();\n    }\n    update() {\n        const now = Date.now();\n        const delta = now - this.lastUpdateTime;\n        this.lastUpdateTime = now;\n        if (delta > 0) {\n            const currentFPS = Math.round(1000 / delta);\n            this.fpsValues.push(currentFPS);\n            // Ограничиваем количество значений для усреднения\n            if (this.fpsValues.length > 10) {\n                this.fpsValues.shift();\n            }\n            // Вычисляем среднее значение\n            this.avgFPS = Math.round(this.fpsValues.reduce((sum, val)=>sum + val, 0) / this.fpsValues.length);\n            this.setText(`FPS: ${this.avgFPS}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy91aS9mcHMtZGlzcGxheS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sTUFBTUEsbUJBQW1CQyxPQUFPQyxXQUFXLENBQUNDLElBQUk7SUFLbkRDLFlBQVlDLEtBQW1CLEVBQUVDLENBQVMsRUFBRUMsQ0FBUyxDQUFFO1FBRW5ELEtBQUssQ0FBQ0YsT0FBT0MsR0FBR0MsR0FBRyxJQUFJO1lBQ25CQyxZQUFZO1lBQ1pDLFVBQVU7WUFDVkMsT0FBTztZQUNQQyxTQUFTO2dCQUFFTCxHQUFHO2dCQUFHQyxHQUFHO1lBQUU7UUFDMUI7YUFYSUssaUJBQXlCO2FBQ3pCQyxZQUFzQixFQUFFO2FBQ3hCQyxTQUFpQjtRQVdyQlQsTUFBTVUsR0FBRyxDQUFDQyxRQUFRLENBQUMsSUFBSTtRQUN2QixJQUFJLENBQUNDLFNBQVMsQ0FBQyxHQUFHLEdBQUcscUNBQXFDO1NBQ3JEQyxRQUFRLENBQUMsTUFDVEMsUUFBUSxDQUFDLE1BQU0saUJBQWlCO1FBQ3JDLElBQUksQ0FBQ1AsY0FBYyxHQUFHUSxLQUFLQyxHQUFHO0lBQ2xDO0lBRUFDLFNBQWU7UUFDWCxNQUFNRCxNQUFNRCxLQUFLQyxHQUFHO1FBQ3BCLE1BQU1FLFFBQVFGLE1BQU0sSUFBSSxDQUFDVCxjQUFjO1FBQ3ZDLElBQUksQ0FBQ0EsY0FBYyxHQUFHUztRQUV0QixJQUFJRSxRQUFRLEdBQUc7WUFDWCxNQUFNQyxhQUFhQyxLQUFLQyxLQUFLLENBQUMsT0FBT0g7WUFDckMsSUFBSSxDQUFDVixTQUFTLENBQUNjLElBQUksQ0FBQ0g7WUFFcEIsa0RBQWtEO1lBQ2xELElBQUksSUFBSSxDQUFDWCxTQUFTLENBQUNlLE1BQU0sR0FBRyxJQUFJO2dCQUM1QixJQUFJLENBQUNmLFNBQVMsQ0FBQ2dCLEtBQUs7WUFDeEI7WUFFQSw2QkFBNkI7WUFDN0IsSUFBSSxDQUFDZixNQUFNLEdBQUdXLEtBQUtDLEtBQUssQ0FDcEIsSUFBSSxDQUFDYixTQUFTLENBQUNpQixNQUFNLENBQUMsQ0FBQ0MsS0FBS0MsTUFBUUQsTUFBTUMsS0FBSyxLQUFLLElBQUksQ0FBQ25CLFNBQVMsQ0FBQ2UsTUFBTTtZQUc3RSxJQUFJLENBQUNLLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUNuQixNQUFNLENBQUMsQ0FBQztRQUN0QztJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvZW50aXRpZXMvdWkvZnBzLWRpc3BsYXkudHM/NWIyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgRlBTRGlzcGxheSBleHRlbmRzIFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0IHtcclxuICAgIHByaXZhdGUgbGFzdFVwZGF0ZVRpbWU6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGZwc1ZhbHVlczogbnVtYmVyW10gPSBbXTtcclxuICAgIHByaXZhdGUgYXZnRlBTOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBQaGFzZXIuU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5LCAnJywgeyBcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJywgXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMTJweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZicsXHJcbiAgICAgICAgICAgIHBhZGRpbmc6IHsgeDogMiwgeTogMiB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2V0T3JpZ2luKDEsIDEpIC8vINCf0YDQuNCy0Y/Qt9GL0LLQsNC10Lwg0Log0L/RgNCw0LLQvtC80YMg0L3QuNC20L3QtdC80YMg0YPQs9C70YNcclxuICAgICAgICAgICAgLnNldERlcHRoKDEwMDApXHJcbiAgICAgICAgICAgIC5zZXRBbHBoYSgwLjcpOyAvLyDQn9C+0LvRg9C/0YDQvtC30YDQsNGH0L3Ri9C5XHJcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlVGltZSA9IERhdGUubm93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgY29uc3QgZGVsdGEgPSBub3cgLSB0aGlzLmxhc3RVcGRhdGVUaW1lO1xyXG4gICAgICAgIHRoaXMubGFzdFVwZGF0ZVRpbWUgPSBub3c7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGRlbHRhID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RlBTID0gTWF0aC5yb3VuZCgxMDAwIC8gZGVsdGEpO1xyXG4gICAgICAgICAgICB0aGlzLmZwc1ZhbHVlcy5wdXNoKGN1cnJlbnRGUFMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g0J7Qs9GA0LDQvdC40YfQuNCy0LDQtdC8INC60L7Qu9C40YfQtdGB0YLQstC+INC30L3QsNGH0LXQvdC40Lkg0LTQu9GPINGD0YHRgNC10LTQvdC10L3QuNGPXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZwc1ZhbHVlcy5sZW5ndGggPiAxMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mcHNWYWx1ZXMuc2hpZnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g0JLRi9GH0LjRgdC70Y/QtdC8INGB0YDQtdC00L3QtdC1INC30L3QsNGH0LXQvdC40LVcclxuICAgICAgICAgICAgdGhpcy5hdmdGUFMgPSBNYXRoLnJvdW5kKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5mcHNWYWx1ZXMucmVkdWNlKChzdW0sIHZhbCkgPT4gc3VtICsgdmFsLCAwKSAvIHRoaXMuZnBzVmFsdWVzLmxlbmd0aFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5zZXRUZXh0KGBGUFM6ICR7dGhpcy5hdmdGUFN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIkZQU0Rpc3BsYXkiLCJQaGFzZXIiLCJHYW1lT2JqZWN0cyIsIlRleHQiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwieCIsInkiLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJjb2xvciIsInBhZGRpbmciLCJsYXN0VXBkYXRlVGltZSIsImZwc1ZhbHVlcyIsImF2Z0ZQUyIsImFkZCIsImV4aXN0aW5nIiwic2V0T3JpZ2luIiwic2V0RGVwdGgiLCJzZXRBbHBoYSIsIkRhdGUiLCJub3ciLCJ1cGRhdGUiLCJkZWx0YSIsImN1cnJlbnRGUFMiLCJNYXRoIiwicm91bmQiLCJwdXNoIiwibGVuZ3RoIiwic2hpZnQiLCJyZWR1Y2UiLCJzdW0iLCJ2YWwiLCJzZXRUZXh0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/entities/ui/fps-display.ts\n");

/***/ }),

/***/ "./src/game/entities/ui/lives.ts":
/*!***************************************!*\
  !*** ./src/game/entities/ui/lives.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Lives: () => (/* binding */ Lives)\n/* harmony export */ });\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _configs_game_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../configs/game-config */ \"./src/game/configs/game-config.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nclass Lives extends (phaser__WEBPACK_IMPORTED_MODULE_2___default().GameObjects).Container {\n    constructor(scene, eventBusComponent){\n        super(scene, 5, scene.scale.height - 30);\n        this.livesIcons = [];\n        this.currentLives = _configs_game_config__WEBPACK_IMPORTED_MODULE_1__.PLAYER_LIVES;\n        this.eventBusComponent = eventBusComponent;\n        scene.add.existing(this);\n        this.createLivesIcons();\n        this.setupEventListeners();\n        // Первый спавн игрока\n        this.eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.PLAYER_SPAWN);\n    }\n    createLivesIcons() {\n        this.livesIcons.forEach((icon)=>icon.destroy());\n        this.livesIcons = [];\n        this.removeAll(true);\n        for(let i = 0; i < this.currentLives; i++){\n            const shipIcon = this.scene.add.image(i * 20, 0, \"ship\").setScale(0.6).setOrigin(0);\n            this.add(shipIcon);\n            this.livesIcons.push(shipIcon);\n        }\n    }\n    setupEventListeners() {\n        this.eventBusComponent.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.PLAYER_DESTROYED, ()=>{\n            this.handlePlayerDestroyed();\n        });\n        this.eventBusComponent.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.ADD_LIFE, ()=>{\n            this.currentLives = this.currentLives + 1;\n            this.createLivesIcons();\n        });\n    }\n    handlePlayerDestroyed() {\n        this.currentLives--;\n        // Уничтожение иконки жизни\n        if (this.livesIcons[this.currentLives]) {\n            this.livesIcons[this.currentLives].destroy();\n        }\n        if (this.currentLives > 0) {\n            // Респавн игрока с задержкой\n            this.scene.time.delayedCall(1500, ()=>{\n                this.eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.PLAYER_SPAWN);\n            });\n            return;\n        }\n        // Game Over\n        this.scene.time.delayedCall(1000, ()=>{\n            this.eventBusComponent.emit(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.GAME_OVER);\n        });\n    }\n    get livesCount() {\n        return this.currentLives;\n    }\n    destroy(fromScene) {\n        this.eventBusComponent.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.PLAYER_DESTROYED);\n        this.eventBusComponent.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.ADD_LIFE);\n        super.destroy(fromScene);\n    }\n    resetLives() {\n        // Удаляем все текущие иконки жизней\n        this.livesIcons.forEach((icon)=>icon.destroy());\n        this.livesIcons = [];\n        // Восстанавливаем начальное количество жизней\n        this.currentLives = _configs_game_config__WEBPACK_IMPORTED_MODULE_1__.PLAYER_LIVES;\n        // Создаем новые иконки\n        this.createLivesIcons();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUMsUUFBUTtRQUNqRCxLQUFLLENBQUNYLFFBQVFnQjtJQUNsQjtJQUVPRSxhQUFhO1FBQ2hCLG9DQUFvQztRQUNwQyxJQUFJLENBQUM3QixVQUFVLENBQUNTLE9BQU8sQ0FBQ0MsQ0FBQUEsT0FBUUEsS0FBS0MsT0FBTztRQUM1QyxJQUFJLENBQUNYLFVBQVUsR0FBRyxFQUFFO1FBRXBCLDhDQUE4QztRQUM5QyxJQUFJLENBQUNDLFlBQVksR0FBR1gsOERBQW1CO1FBRXZDLHVCQUF1QjtRQUN2QixJQUFJLENBQUNlLGdCQUFnQjtJQUN6QjtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2VudGl0aWVzL3VpL2xpdmVzLnRzPzNlZmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ1VTVE9NX0VWRU5UUyB9IGZyb20gJ0AvZ2FtZS90eXBlcy9jdXN0b20tZXZlbnRzJztcbmltcG9ydCB7IEV2ZW50QnVzQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9ldmVudHMvZXZlbnQtYnVzLWNvbXBvbmVudCc7XG5pbXBvcnQgKiBhcyBDT05GSUcgZnJvbSAnLi4vLi4vY29uZmlncy9nYW1lLWNvbmZpZyc7XG5pbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XG5cbmV4cG9ydCBjbGFzcyBMaXZlcyBleHRlbmRzIFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXIge1xuICAgIHByaXZhdGUgY3VycmVudExpdmVzOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBldmVudEJ1c0NvbXBvbmVudDogRXZlbnRCdXNDb21wb25lbnQ7XG4gICAgcHJpdmF0ZSBsaXZlc0ljb25zOiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2VbXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFBoYXNlci5TY2VuZSwgZXZlbnRCdXNDb21wb25lbnQ6IEV2ZW50QnVzQ29tcG9uZW50KSB7XG4gICAgICAgIHN1cGVyKHNjZW5lLCA1LCBzY2VuZS5zY2FsZS5oZWlnaHQgLSAzMCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmN1cnJlbnRMaXZlcyA9IENPTkZJRy5QTEFZRVJfTElWRVM7XG4gICAgICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQgPSBldmVudEJ1c0NvbXBvbmVudDtcbiAgICAgICAgXG4gICAgICAgIHNjZW5lLmFkZC5leGlzdGluZyh0aGlzKTtcbiAgICAgICAgdGhpcy5jcmVhdGVMaXZlc0ljb25zKCk7XG4gICAgICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xuICAgICAgICBcbiAgICAgICAgLy8g0J/QtdGA0LLRi9C5INGB0L/QsNCy0L0g0LjQs9GA0L7QutCwXG4gICAgICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQuZW1pdChDVVNUT01fRVZFTlRTLlBMQVlFUl9TUEFXTik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVMaXZlc0ljb25zKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxpdmVzSWNvbnMuZm9yRWFjaChpY29uID0+IGljb24uZGVzdHJveSgpKTtcbiAgICAgICAgdGhpcy5saXZlc0ljb25zID0gW107XG4gICAgICAgIHRoaXMucmVtb3ZlQWxsKHRydWUpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50TGl2ZXM7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc2hpcEljb24gPSB0aGlzLnNjZW5lLmFkZC5pbWFnZShpICogMjAsIDAsICdzaGlwJylcbiAgICAgICAgICAgICAgICAuc2V0U2NhbGUoMC42KVxuICAgICAgICAgICAgICAgIC5zZXRPcmlnaW4oMCk7XG4gICAgICAgICAgICB0aGlzLmFkZChzaGlwSWNvbik7XG4gICAgICAgICAgICB0aGlzLmxpdmVzSWNvbnMucHVzaChzaGlwSWNvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwRXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQub24oQ1VTVE9NX0VWRU5UUy5QTEFZRVJfREVTVFJPWUVELCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBsYXllckRlc3Ryb3llZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ldmVudEJ1c0NvbXBvbmVudC5vbihDVVNUT01fRVZFTlRTLkFERF9MSUZFLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRMaXZlcyA9IHRoaXMuY3VycmVudExpdmVzICsgMTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTGl2ZXNJY29ucygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZVBsYXllckRlc3Ryb3llZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jdXJyZW50TGl2ZXMtLTtcbiAgICAgICAgXG4gICAgICAgIC8vINCj0L3QuNGH0YLQvtC20LXQvdC40LUg0LjQutC+0L3QutC4INC20LjQt9C90LhcbiAgICAgICAgaWYgKHRoaXMubGl2ZXNJY29uc1t0aGlzLmN1cnJlbnRMaXZlc10pIHtcbiAgICAgICAgICAgIHRoaXMubGl2ZXNJY29uc1t0aGlzLmN1cnJlbnRMaXZlc10uZGVzdHJveSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY3VycmVudExpdmVzID4gMCkge1xuICAgICAgICAgICAgLy8g0KDQtdGB0L/QsNCy0L0g0LjQs9GA0L7QutCwINGBINC30LDQtNC10YDQttC60L7QuVxuICAgICAgICAgICAgdGhpcy5zY2VuZS50aW1lLmRlbGF5ZWRDYWxsKDE1MDAsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzQ29tcG9uZW50LmVtaXQoQ1VTVE9NX0VWRU5UUy5QTEFZRVJfU1BBV04pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHYW1lIE92ZXJcbiAgICAgICAgdGhpcy5zY2VuZS50aW1lLmRlbGF5ZWRDYWxsKDEwMDAsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQuZW1pdChDVVNUT01fRVZFTlRTLkdBTUVfT1ZFUik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgbGl2ZXNDb3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50TGl2ZXM7XG4gICAgfVxuXG4gICAgcHVibGljIGRlc3Ryb3koZnJvbVNjZW5lPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICB0aGlzLmV2ZW50QnVzQ29tcG9uZW50Lm9mZihDVVNUT01fRVZFTlRTLlBMQVlFUl9ERVNUUk9ZRUQpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzQ29tcG9uZW50Lm9mZihDVVNUT01fRVZFTlRTLkFERF9MSUZFKTtcbiAgICAgICAgc3VwZXIuZGVzdHJveShmcm9tU2NlbmUpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZXNldExpdmVzKCkge1xuICAgICAgICAvLyDQo9C00LDQu9GP0LXQvCDQstGB0LUg0YLQtdC60YPRidC40LUg0LjQutC+0L3QutC4INC20LjQt9C90LXQuVxuICAgICAgICB0aGlzLmxpdmVzSWNvbnMuZm9yRWFjaChpY29uID0+IGljb24uZGVzdHJveSgpKTtcbiAgICAgICAgdGhpcy5saXZlc0ljb25zID0gW107XG4gICAgICAgIFxuICAgICAgICAvLyDQktC+0YHRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0L3QsNGH0LDQu9GM0L3QvtC1INC60L7Qu9C40YfQtdGB0YLQstC+INC20LjQt9C90LXQuVxuICAgICAgICB0aGlzLmN1cnJlbnRMaXZlcyA9IENPTkZJRy5QTEFZRVJfTElWRVM7XG4gICAgICAgIFxuICAgICAgICAvLyDQodC+0LfQtNCw0LXQvCDQvdC+0LLRi9C1INC40LrQvtC90LrQuFxuICAgICAgICB0aGlzLmNyZWF0ZUxpdmVzSWNvbnMoKTtcbiAgICB9XG5cbn1cbiJdLCJuYW1lcyI6WyJDVVNUT01fRVZFTlRTIiwiQ09ORklHIiwiUGhhc2VyIiwiTGl2ZXMiLCJHYW1lT2JqZWN0cyIsIkNvbnRhaW5lciIsImNvbnN0cnVjdG9yIiwic2NlbmUiLCJldmVudEJ1c0NvbXBvbmVudCIsInNjYWxlIiwiaGVpZ2h0IiwibGl2ZXNJY29ucyIsImN1cnJlbnRMaXZlcyIsIlBMQVlFUl9MSVZFUyIsImFkZCIsImV4aXN0aW5nIiwiY3JlYXRlTGl2ZXNJY29ucyIsInNldHVwRXZlbnRMaXN0ZW5lcnMiLCJlbWl0IiwiUExBWUVSX1NQQVdOIiwiZm9yRWFjaCIsImljb24iLCJkZXN0cm95IiwicmVtb3ZlQWxsIiwiaSIsInNoaXBJY29uIiwiaW1hZ2UiLCJzZXRTY2FsZSIsInNldE9yaWdpbiIsInB1c2giLCJvbiIsIlBMQVlFUl9ERVNUUk9ZRUQiLCJoYW5kbGVQbGF5ZXJEZXN0cm95ZWQiLCJBRERfTElGRSIsInRpbWUiLCJkZWxheWVkQ2FsbCIsIkdBTUVfT1ZFUiIsImxpdmVzQ291bnQiLCJmcm9tU2NlbmUiLCJvZmYiLCJyZXNldExpdmVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/entities/ui/lives.ts\n");

/***/ }),

/***/ "./src/game/entities/ui/score.ts":
/*!***************************************!*\
  !*** ./src/game/entities/ui/score.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Score: () => (/* binding */ Score)\n/* harmony export */ });\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _configs_game_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../configs/game-config */ \"./src/game/configs/game-config.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// Константа с очками за врагов\nconst ENEMY_SCORES = {\n    ScoutEnemy: _configs_game_config__WEBPACK_IMPORTED_MODULE_1__.ENEMY_SCOUT_SCORE,\n    FighterEnemy: _configs_game_config__WEBPACK_IMPORTED_MODULE_1__.ENEMY_FIGHTER_SCORE\n};\nclass Score extends (phaser__WEBPACK_IMPORTED_MODULE_2___default().GameObjects).Text {\n    constructor(scene, eventBusComponent){\n        super(scene, scene.scale.width - 10, 10, \"0\", {\n            fontSize: \"24px\",\n            color: \"#ff2f66\",\n            fontFamily: \"Arial\",\n            align: \"right\"\n        });\n        this.isActive = true;\n        this.currentScore = 0;\n        this.eventBusComponent = eventBusComponent;\n        // Добавление текста на сцену\n        scene.add.existing(this);\n        this.setOrigin(1, 0); // Выравнивание по правому верхнему углу\n        // Инициализация счета в реестре\n        scene.registry.set(\"score\", this.currentScore);\n        // Подписка на события\n        this.setupEventListeners();\n    }\n    setupEventListeners() {\n        // Уничтожение врагов\n        this.eventBusComponent.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.ENEMY_DESTROYED, (enemy)=>{\n            if (this.isActive) return;\n            const enemyType = enemy.constructor.name;\n            if (ENEMY_SCORES[enemyType]) {\n                this.addScore(ENEMY_SCORES[enemyType]);\n            }\n        });\n        // Попадание по врагам\n        this.eventBusComponent.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.ENEMY_HIT, ()=>{\n            if (this.isActive) this.addScore(10);\n        });\n        this.eventBusComponent.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.ADD_BONUS_SCORE, (bonus)=>{\n            if (this.isActive) this.addScore(bonus);\n        });\n        this.eventBusComponent.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.ADD_SCORE, (value)=>{\n            if (this.isActive) this.addScore(value);\n        });\n    }\n    addScore(points) {\n        if (!this.isActive) return;\n        try {\n            this.currentScore += points;\n            this.updateScoreText();\n            this.scene.registry.set(\"score\", this.currentScore);\n            // Анимация при изменении счета\n            this.scene.tweens.add({\n                targets: this,\n                scaleX: 1.2,\n                scaleY: 1.2,\n                duration: 100,\n                yoyo: true\n            });\n        } catch (e) {\n            console.log(e);\n        }\n    }\n    updateScoreText() {\n        if (!this.active || !this.scene) return;\n        this.setText(this.currentScore.toString());\n        // Автоматическое уменьшение шрифта для больших чисел\n        const scoreLength = this.currentScore.toString().length;\n        if (scoreLength > 6) {\n            this.setFontSize(\"18px\");\n        } else {\n            this.setFontSize(\"24px\");\n        }\n    }\n    get score() {\n        return this.currentScore;\n    }\n    destroy(fromScene) {\n        this.isActive = false;\n        this.eventBusComponent.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.ENEMY_DESTROYED);\n        this.eventBusComponent.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.SHIP_HIT);\n        this.eventBusComponent.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.ADD_BONUS_SCORE);\n        if (this.scene) {\n            this.scene.tweens.killTweensOf(this);\n        }\n        super.destroy(fromScene);\n    }\n    resetScore(continueCount) {\n        // Обнуляем счет + добавляем количество продолжений\n        this.currentScore = continueCount;\n        this.updateScoreText();\n        if (this.scene) {\n            this.scene.registry.set(\"score\", this.currentScore);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDOUIsWUFBWSxDQUFDK0IsUUFBUTtRQUV2QyxxREFBcUQ7UUFDckQsTUFBTUMsY0FBYyxJQUFJLENBQUNoQyxZQUFZLENBQUMrQixRQUFRLEdBQUdFLE1BQU07UUFDdkQsSUFBSUQsY0FBYyxHQUFHO1lBQ2pCLElBQUksQ0FBQ0UsV0FBVyxDQUFDO1FBQ3JCLE9BQU87WUFDSCxJQUFJLENBQUNBLFdBQVcsQ0FBQztRQUNyQjtJQUNKO0lBRUEsSUFBV0MsUUFBZ0I7UUFDdkIsT0FBTyxJQUFJLENBQUNuQyxZQUFZO0lBQzVCO0lBRU9vQyxRQUFRQyxTQUFtQixFQUFRO1FBQ3RDLElBQUksQ0FBQ3RDLFFBQVEsR0FBRztRQUNoQixJQUFJLENBQUNQLGlCQUFpQixDQUFDOEMsR0FBRyxDQUFDM0Qsb0VBQWFBLENBQUM2QixlQUFlO1FBQ3hELElBQUksQ0FBQ2hCLGlCQUFpQixDQUFDOEMsR0FBRyxDQUFDM0Qsb0VBQWFBLENBQUM0RCxRQUFRO1FBQ2pELElBQUksQ0FBQy9DLGlCQUFpQixDQUFDOEMsR0FBRyxDQUFDM0Qsb0VBQWFBLENBQUNtQyxlQUFlO1FBQ3hELElBQUksSUFBSSxDQUFDdkIsS0FBSyxFQUFFO1lBQ1osSUFBSSxDQUFDQSxLQUFLLENBQUM2QixNQUFNLENBQUNvQixZQUFZLENBQUMsSUFBSTtRQUN2QztRQUNBLEtBQUssQ0FBQ0osUUFBUUM7SUFDbEI7SUFFT0ksV0FBV0MsYUFBcUIsRUFBRTtRQUNyQyxtREFBbUQ7UUFDbkQsSUFBSSxDQUFDMUMsWUFBWSxHQUFHMEM7UUFDcEIsSUFBSSxDQUFDdkIsZUFBZTtRQUNwQixJQUFJLElBQUksQ0FBQzVCLEtBQUssRUFBRTtZQUNaLElBQUksQ0FBQ0EsS0FBSyxDQUFDYSxRQUFRLENBQUNDLEdBQUcsQ0FBQyxTQUFTLElBQUksQ0FBQ0wsWUFBWTtRQUN0RDtJQUNKO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvZW50aXRpZXMvdWkvc2NvcmUudHM/ODhmMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDVVNUT01fRVZFTlRTIH0gZnJvbSAnQC9nYW1lL3R5cGVzL2N1c3RvbS1ldmVudHMnO1xuaW1wb3J0IHsgRXZlbnRCdXNDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL2V2ZW50cy9ldmVudC1idXMtY29tcG9uZW50JztcbmltcG9ydCAqIGFzIENPTkZJRyBmcm9tICcuLi8uLi9jb25maWdzL2dhbWUtY29uZmlnJztcbmltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcblxuLy8g0KLQuNC/INC00LvRjyDQutC70LDRgdGB0L7QsiDQstGA0LDQs9C+0LJcbnR5cGUgRW5lbXlUeXBlID0gJ1Njb3V0RW5lbXknIHwgJ0ZpZ2h0ZXJFbmVteSc7XG5cbi8vINCa0L7QvdGB0YLQsNC90YLQsCDRgSDQvtGH0LrQsNC80Lgg0LfQsCDQstGA0LDQs9C+0LJcbmNvbnN0IEVORU1ZX1NDT1JFUzogUmVjb3JkPEVuZW15VHlwZSwgbnVtYmVyPiA9IHtcbiAgICBTY291dEVuZW15OiBDT05GSUcuRU5FTVlfU0NPVVRfU0NPUkUsXG4gICAgRmlnaHRlckVuZW15OiBDT05GSUcuRU5FTVlfRklHSFRFUl9TQ09SRVxufTtcblxuZXhwb3J0IGNsYXNzIFNjb3JlIGV4dGVuZHMgUGhhc2VyLkdhbWVPYmplY3RzLlRleHQge1xuICAgIHByaXZhdGUgY3VycmVudFNjb3JlOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBldmVudEJ1c0NvbXBvbmVudDogRXZlbnRCdXNDb21wb25lbnQ7XG4gICAgcHJpdmF0ZSBpc0FjdGl2ZTogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogUGhhc2VyLlNjZW5lLCBldmVudEJ1c0NvbXBvbmVudDogRXZlbnRCdXNDb21wb25lbnQpIHtcbiAgICAgICAgc3VwZXIoc2NlbmUsIHNjZW5lLnNjYWxlLndpZHRoIC0gMTAsIDEwLCAnMCcsIHtcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjRweCcsXG4gICAgICAgICAgICBjb2xvcjogJyNmZjJmNjYnLFxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcbiAgICAgICAgICAgIGFsaWduOiAncmlnaHQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY3VycmVudFNjb3JlID0gMDtcbiAgICAgICAgdGhpcy5ldmVudEJ1c0NvbXBvbmVudCA9IGV2ZW50QnVzQ29tcG9uZW50O1xuXG4gICAgICAgIC8vINCU0L7QsdCw0LLQu9C10L3QuNC1INGC0LXQutGB0YLQsCDQvdCwINGB0YbQtdC90YNcbiAgICAgICAgc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMpO1xuICAgICAgICB0aGlzLnNldE9yaWdpbigxLCAwKTsgLy8g0JLRi9GA0LDQstC90LjQstCw0L3QuNC1INC/0L4g0L/RgNCw0LLQvtC80YMg0LLQtdGA0YXQvdC10LzRgyDRg9Cz0LvRg1xuXG4gICAgICAgIC8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINGB0YfQtdGC0LAg0LIg0YDQtdC10YHRgtGA0LVcbiAgICAgICAgc2NlbmUucmVnaXN0cnkuc2V0KCdzY29yZScsIHRoaXMuY3VycmVudFNjb3JlKTtcblxuICAgICAgICAvLyDQn9C+0LTQv9C40YHQutCwINC90LAg0YHQvtCx0YvRgtC40Y9cbiAgICAgICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cEV2ZW50TGlzdGVuZXJzKCk6IHZvaWQge1xuICAgICAgICAvLyDQo9C90LjRh9GC0L7QttC10L3QuNC1INCy0YDQsNCz0L7QslxuICAgICAgICB0aGlzLmV2ZW50QnVzQ29tcG9uZW50Lm9uKFxuICAgICAgICAgICAgQ1VTVE9NX0VWRU5UUy5FTkVNWV9ERVNUUk9ZRUQsIFxuICAgICAgICAgICAgKGVuZW15OiB7IGNvbnN0cnVjdG9yOiB7IG5hbWU6IEVuZW15VHlwZSB9IH0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZW15VHlwZSA9IGVuZW15LmNvbnN0cnVjdG9yLm5hbWUgYXMgRW5lbXlUeXBlO1xuICAgICAgICAgICAgICAgIGlmIChFTkVNWV9TQ09SRVNbZW5lbXlUeXBlXSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFNjb3JlKEVORU1ZX1NDT1JFU1tlbmVteVR5cGVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8g0J/QvtC/0LDQtNCw0L3QuNC1INC/0L4g0LLRgNCw0LPQsNC8XG4gICAgICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQub24oQ1VTVE9NX0VWRU5UUy5FTkVNWV9ISVQsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aXZlKSB0aGlzLmFkZFNjb3JlKDEwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuXG4gICAgICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQub24oQ1VTVE9NX0VWRU5UUy5BRERfQk9OVVNfU0NPUkUsIChib251czogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSkgdGhpcy5hZGRTY29yZShib251cyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQub24oQ1VTVE9NX0VWRU5UUy5BRERfU0NPUkUsICh2YWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSkgdGhpcy5hZGRTY29yZSh2YWx1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRTY29yZShwb2ludHM6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNjb3JlICs9IHBvaW50cztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2NvcmVUZXh0KCk7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlZ2lzdHJ5LnNldCgnc2NvcmUnLCB0aGlzLmN1cnJlbnRTY29yZSk7XG5cbiAgICAgICAgICAgIC8vINCQ0L3QuNC80LDRhtC40Y8g0L/RgNC4INC40LfQvNC10L3QtdC90LjQuCDRgdGH0LXRgtCwXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgICAgIHRhcmdldHM6IHRoaXMsXG4gICAgICAgICAgICAgICAgc2NhbGVYOiAxLjIsXG4gICAgICAgICAgICAgICAgc2NhbGVZOiAxLjIsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMCxcbiAgICAgICAgICAgICAgICB5b3lvOiB0cnVlXG4gICAgICAgICAgICB9KTsgXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVTY29yZVRleHQoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5hY3RpdmUgfHwgIXRoaXMuc2NlbmUpIHJldHVybjtcbiAgICAgICAgdGhpcy5zZXRUZXh0KHRoaXMuY3VycmVudFNjb3JlLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgIC8vINCQ0LLRgtC+0LzQsNGC0LjRh9C10YHQutC+0LUg0YPQvNC10L3RjNGI0LXQvdC40LUg0YjRgNC40YTRgtCwINC00LvRjyDQsdC+0LvRjNGI0LjRhSDRh9C40YHQtdC7XG4gICAgICAgIGNvbnN0IHNjb3JlTGVuZ3RoID0gdGhpcy5jdXJyZW50U2NvcmUudG9TdHJpbmcoKS5sZW5ndGg7XG4gICAgICAgIGlmIChzY29yZUxlbmd0aCA+IDYpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9udFNpemUoJzE4cHgnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9udFNpemUoJzI0cHgnKTtcbiAgICAgICAgfSAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIGdldCBzY29yZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50U2NvcmU7XG4gICAgfVxuXG4gICAgcHVibGljIGRlc3Ryb3koZnJvbVNjZW5lPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQub2ZmKENVU1RPTV9FVkVOVFMuRU5FTVlfREVTVFJPWUVEKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1c0NvbXBvbmVudC5vZmYoQ1VTVE9NX0VWRU5UUy5TSElQX0hJVCk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXNDb21wb25lbnQub2ZmKENVU1RPTV9FVkVOVFMuQUREX0JPTlVTX1NDT1JFKTtcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUpIHtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUudHdlZW5zLmtpbGxUd2VlbnNPZih0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5kZXN0cm95KGZyb21TY2VuZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlc2V0U2NvcmUoY29udGludWVDb3VudDogbnVtYmVyKSB7XG4gICAgICAgIC8vINCe0LHQvdGD0LvRj9C10Lwg0YHRh9C10YIgKyDQtNC+0LHQsNCy0LvRj9C10Lwg0LrQvtC70LjRh9C10YHRgtCy0L4g0L/RgNC+0LTQvtC70LbQtdC90LjQuVxuICAgICAgICB0aGlzLmN1cnJlbnRTY29yZSA9IGNvbnRpbnVlQ291bnQ7XG4gICAgICAgIHRoaXMudXBkYXRlU2NvcmVUZXh0KCk7XG4gICAgICAgIGlmICh0aGlzLnNjZW5lKSB7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlZ2lzdHJ5LnNldCgnc2NvcmUnLCB0aGlzLmN1cnJlbnRTY29yZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbiJdLCJuYW1lcyI6WyJDVVNUT01fRVZFTlRTIiwiQ09ORklHIiwiUGhhc2VyIiwiRU5FTVlfU0NPUkVTIiwiU2NvdXRFbmVteSIsIkVORU1ZX1NDT1VUX1NDT1JFIiwiRmlnaHRlckVuZW15IiwiRU5FTVlfRklHSFRFUl9TQ09SRSIsIlNjb3JlIiwiR2FtZU9iamVjdHMiLCJUZXh0IiwiY29uc3RydWN0b3IiLCJzY2VuZSIsImV2ZW50QnVzQ29tcG9uZW50Iiwic2NhbGUiLCJ3aWR0aCIsImZvbnRTaXplIiwiY29sb3IiLCJmb250RmFtaWx5IiwiYWxpZ24iLCJpc0FjdGl2ZSIsImN1cnJlbnRTY29yZSIsImFkZCIsImV4aXN0aW5nIiwic2V0T3JpZ2luIiwicmVnaXN0cnkiLCJzZXQiLCJzZXR1cEV2ZW50TGlzdGVuZXJzIiwib24iLCJFTkVNWV9ERVNUUk9ZRUQiLCJlbmVteSIsImVuZW15VHlwZSIsIm5hbWUiLCJhZGRTY29yZSIsIkVORU1ZX0hJVCIsIkFERF9CT05VU19TQ09SRSIsImJvbnVzIiwiQUREX1NDT1JFIiwidmFsdWUiLCJwb2ludHMiLCJ1cGRhdGVTY29yZVRleHQiLCJ0d2VlbnMiLCJ0YXJnZXRzIiwic2NhbGVYIiwic2NhbGVZIiwiZHVyYXRpb24iLCJ5b3lvIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJhY3RpdmUiLCJzZXRUZXh0IiwidG9TdHJpbmciLCJzY29yZUxlbmd0aCIsImxlbmd0aCIsInNldEZvbnRTaXplIiwic2NvcmUiLCJkZXN0cm95IiwiZnJvbVNjZW5lIiwib2ZmIiwiU0hJUF9ISVQiLCJraWxsVHdlZW5zT2YiLCJyZXNldFNjb3JlIiwiY29udGludWVDb3VudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/entities/ui/score.ts\n");

/***/ }),

/***/ "./src/game/entities/ui/weapon.ts":
/*!****************************************!*\
  !*** ./src/game/entities/ui/weapon.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Weapons: () => (/* binding */ Weapons)\n/* harmony export */ });\n/* harmony import */ var _game_managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/game/managers/local-storage-manager */ \"./src/game/managers/local-storage-manager.ts\");\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nclass Weapons extends (phaser__WEBPACK_IMPORTED_MODULE_2___default().GameObjects).Container {\n    constructor(scene, eventBus){\n        super(scene, scene.scale.width - 80, scene.scale.height - 60);\n        this.eventBus = eventBus;\n        scene.add.existing(this);\n        this.createDisplay();\n        this.setupEventListeners();\n    }\n    createDisplay() {\n        this.weaponTypeText = this.scene.add.text(0, 0, \"W\", {\n            fontFamily: \"Arial\",\n            fontSize: \"24px\",\n            color: \"#ffffff\"\n        }).setOrigin(0.5, 0);\n        this.powerText = this.scene.add.text(20, 0, \"0.00\", {\n            fontFamily: \"Arial\",\n            fontSize: \"24px\",\n            color: \"#ffffff\"\n        }).setOrigin(0, 0);\n        this.add([\n            this.weaponTypeText,\n            this.powerText\n        ]);\n        const settings = _game_managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_0__.LocalStorageManager.loadSettings();\n        this.updateWeaponType(this.mapWeaponType(settings.weaponType));\n    }\n    mapWeaponType(type) {\n        switch(type){\n            case \"wide\":\n                return 1;\n            case \"laser\":\n                return 2;\n            case \"rockets\":\n                return 3;\n        }\n    }\n    setupEventListeners() {\n        this.eventBus.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.WEAPON_CHANGED, (data)=>{\n            this.updateWeaponType(data.weaponType);\n        });\n        this.eventBus.on(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.POWER_CHANGED, (power)=>{\n            this.updatePower(power);\n        });\n    }\n    updateWeaponType(type) {\n        let typeChar = \"W\";\n        switch(type){\n            case 2:\n                typeChar = \"L\";\n                break;\n            case 3:\n                typeChar = \"R\";\n                break;\n        }\n        this.weaponTypeText.setText(typeChar);\n    }\n    updatePower(power) {\n        const powerLevel = (power / 100).toFixed(2);\n        this.powerText.setText(powerLevel);\n    }\n    destroy(fromScene) {\n        this.eventBus.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.WEAPON_CHANGED);\n        this.eventBus.off(_game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.POWER_CHANGED);\n        super.destroy(fromScene);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9lbnRpdGllcy91aS93ZWFwb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDNEU7QUFDakI7QUFDL0I7QUFFckIsTUFBTUcsZ0JBQWdCRCwyREFBa0IsQ0FBQ0csU0FBUztJQUtyREMsWUFBWUMsS0FBbUIsRUFBRUMsUUFBMkIsQ0FBRTtRQUMxRCxLQUFLLENBQUNELE9BQU9BLE1BQU1FLEtBQUssQ0FBQ0MsS0FBSyxHQUFHLElBQUlILE1BQU1FLEtBQUssQ0FBQ0UsTUFBTSxHQUFHO1FBQzFELElBQUksQ0FBQ0gsUUFBUSxHQUFHQTtRQUNoQkQsTUFBTUssR0FBRyxDQUFDQyxRQUFRLENBQUMsSUFBSTtRQUV2QixJQUFJLENBQUNDLGFBQWE7UUFDbEIsSUFBSSxDQUFDQyxtQkFBbUI7SUFDNUI7SUFFUUQsZ0JBQXNCO1FBQzFCLElBQUksQ0FBQ0UsY0FBYyxHQUFHLElBQUksQ0FBQ1QsS0FBSyxDQUFDSyxHQUFHLENBQUNLLElBQUksQ0FBQyxHQUFHLEdBQUcsS0FBSztZQUNqREMsWUFBWTtZQUNaQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWCxHQUFHQyxTQUFTLENBQUMsS0FBSztRQUVsQixJQUFJLENBQUNDLFNBQVMsR0FBRyxJQUFJLENBQUNmLEtBQUssQ0FBQ0ssR0FBRyxDQUFDSyxJQUFJLENBQUMsSUFBSSxHQUFHLFFBQVE7WUFDaERDLFlBQVk7WUFDWkMsVUFBVTtZQUNWQyxPQUFPO1FBQ1gsR0FBR0MsU0FBUyxDQUFDLEdBQUc7UUFFaEIsSUFBSSxDQUFDVCxHQUFHLENBQUM7WUFBQyxJQUFJLENBQUNJLGNBQWM7WUFBRSxJQUFJLENBQUNNLFNBQVM7U0FBQztRQUU5QyxNQUFNQyxXQUFXdkIscUZBQW1CQSxDQUFDd0IsWUFBWTtRQUNqRCxJQUFJLENBQUNDLGdCQUFnQixDQUFDLElBQUksQ0FBQ0MsYUFBYSxDQUFDSCxTQUFTSSxVQUFVO0lBQ2hFO0lBRVFELGNBQWNFLElBQWtDLEVBQWE7UUFDakUsT0FBUUE7WUFDSixLQUFLO2dCQUFRLE9BQU87WUFDcEIsS0FBSztnQkFBUyxPQUFPO1lBQ3JCLEtBQUs7Z0JBQVcsT0FBTztRQUMzQjtJQUNKO0lBRVFiLHNCQUE0QjtRQUNoQyxJQUFJLENBQUNQLFFBQVEsQ0FBQ3FCLEVBQUUsQ0FBQzVCLG9FQUFhQSxDQUFDNkIsY0FBYyxFQUFFLENBQUNDO1lBQzVDLElBQUksQ0FBQ04sZ0JBQWdCLENBQUNNLEtBQUtKLFVBQVU7UUFDekM7UUFFQSxJQUFJLENBQUNuQixRQUFRLENBQUNxQixFQUFFLENBQUM1QixvRUFBYUEsQ0FBQytCLGFBQWEsRUFBRSxDQUFDQztZQUMzQyxJQUFJLENBQUNDLFdBQVcsQ0FBQ0Q7UUFDckI7SUFDSjtJQUVRUixpQkFBaUJHLElBQVksRUFBUTtRQUN6QyxJQUFJTyxXQUFXO1FBQ2YsT0FBT1A7WUFDSCxLQUFLO2dCQUFHTyxXQUFXO2dCQUFLO1lBQ3hCLEtBQUs7Z0JBQUdBLFdBQVc7Z0JBQUs7UUFDNUI7UUFDQSxJQUFJLENBQUNuQixjQUFjLENBQUNvQixPQUFPLENBQUNEO0lBQ2hDO0lBRVFELFlBQVlELEtBQWEsRUFBUTtRQUNyQyxNQUFNSSxhQUFhLENBQUNKLFFBQVEsR0FBRSxFQUFHSyxPQUFPLENBQUM7UUFDekMsSUFBSSxDQUFDaEIsU0FBUyxDQUFDYyxPQUFPLENBQUNDO0lBQzNCO0lBRU9FLFFBQVFDLFNBQW1CLEVBQVE7UUFDdEMsSUFBSSxDQUFDaEMsUUFBUSxDQUFDaUMsR0FBRyxDQUFDeEMsb0VBQWFBLENBQUM2QixjQUFjO1FBQzlDLElBQUksQ0FBQ3RCLFFBQVEsQ0FBQ2lDLEdBQUcsQ0FBQ3hDLG9FQUFhQSxDQUFDK0IsYUFBYTtRQUM3QyxLQUFLLENBQUNPLFFBQVFDO0lBQ2xCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvZW50aXRpZXMvdWkvd2VhcG9uLnRzP2Q2N2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRCdXNDb21wb25lbnQgfSBmcm9tICdAL2dhbWUvY29tcG9uZW50cy9ldmVudHMvZXZlbnQtYnVzLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IExvY2FsU3RvcmFnZU1hbmFnZXIgfSBmcm9tICdAL2dhbWUvbWFuYWdlcnMvbG9jYWwtc3RvcmFnZS1tYW5hZ2VyJztcclxuaW1wb3J0IHsgQ1VTVE9NX0VWRU5UUyB9IGZyb20gJ0AvZ2FtZS90eXBlcy9jdXN0b20tZXZlbnRzJztcclxuaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFdlYXBvbnMgZXh0ZW5kcyBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyIHtcclxuICAgIHByaXZhdGUgd2VhcG9uVHlwZVRleHQ6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xyXG4gICAgcHJpdmF0ZSBwb3dlclRleHQ6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xyXG4gICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXNDb21wb25lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFBoYXNlci5TY2VuZSwgZXZlbnRCdXM6IEV2ZW50QnVzQ29tcG9uZW50KSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIHNjZW5lLnNjYWxlLndpZHRoIC0gODAsIHNjZW5lLnNjYWxlLmhlaWdodCAtIDYwKTtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzID0gZXZlbnRCdXM7XHJcbiAgICAgICAgc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlRGlzcGxheSgpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlRGlzcGxheSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLndlYXBvblR5cGVUZXh0ID0gdGhpcy5zY2VuZS5hZGQudGV4dCgwLCAwLCAnVycsIHtcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgZm9udFNpemU6ICcyNHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUsIDApO1xyXG5cclxuICAgICAgICB0aGlzLnBvd2VyVGV4dCA9IHRoaXMuc2NlbmUuYWRkLnRleHQoMjAsIDAsICcwLjAwJywge1xyXG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogJzI0cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAsIDApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuYWRkKFt0aGlzLndlYXBvblR5cGVUZXh0LCB0aGlzLnBvd2VyVGV4dF0pO1xyXG5cclxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IExvY2FsU3RvcmFnZU1hbmFnZXIubG9hZFNldHRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVXZWFwb25UeXBlKHRoaXMubWFwV2VhcG9uVHlwZShzZXR0aW5ncy53ZWFwb25UeXBlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtYXBXZWFwb25UeXBlKHR5cGU6ICd3aWRlJyB8ICdsYXNlcicgfCAncm9ja2V0cycpOiAxIHwgMiB8IDMge1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICd3aWRlJzogcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xhc2VyJzogcmV0dXJuIDI7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JvY2tldHMnOiByZXR1cm4gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR1cEV2ZW50TGlzdGVuZXJzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oQ1VTVE9NX0VWRU5UUy5XRUFQT05fQ0hBTkdFRCwgKGRhdGE6IHsgd2VhcG9uVHlwZTogbnVtYmVyIH0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVXZWFwb25UeXBlKGRhdGEud2VhcG9uVHlwZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihDVVNUT01fRVZFTlRTLlBPV0VSX0NIQU5HRUQsIChwb3dlcjogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUG93ZXIocG93ZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlV2VhcG9uVHlwZSh0eXBlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBsZXQgdHlwZUNoYXIgPSAnVyc7XHJcbiAgICAgICAgc3dpdGNoKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAyOiB0eXBlQ2hhciA9ICdMJzsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzogdHlwZUNoYXIgPSAnUic7IGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLndlYXBvblR5cGVUZXh0LnNldFRleHQodHlwZUNoYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlUG93ZXIocG93ZXI6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHBvd2VyTGV2ZWwgPSAocG93ZXIgLyAxMDApLnRvRml4ZWQoMik7XHJcbiAgICAgICAgdGhpcy5wb3dlclRleHQuc2V0VGV4dChwb3dlckxldmVsKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVzdHJveShmcm9tU2NlbmU/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5XRUFQT05fQ0hBTkdFRCk7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5QT1dFUl9DSEFOR0VEKTtcclxuICAgICAgICBzdXBlci5kZXN0cm95KGZyb21TY2VuZSk7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiTG9jYWxTdG9yYWdlTWFuYWdlciIsIkNVU1RPTV9FVkVOVFMiLCJQaGFzZXIiLCJXZWFwb25zIiwiR2FtZU9iamVjdHMiLCJDb250YWluZXIiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwiZXZlbnRCdXMiLCJzY2FsZSIsIndpZHRoIiwiaGVpZ2h0IiwiYWRkIiwiZXhpc3RpbmciLCJjcmVhdGVEaXNwbGF5Iiwic2V0dXBFdmVudExpc3RlbmVycyIsIndlYXBvblR5cGVUZXh0IiwidGV4dCIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImNvbG9yIiwic2V0T3JpZ2luIiwicG93ZXJUZXh0Iiwic2V0dGluZ3MiLCJsb2FkU2V0dGluZ3MiLCJ1cGRhdGVXZWFwb25UeXBlIiwibWFwV2VhcG9uVHlwZSIsIndlYXBvblR5cGUiLCJ0eXBlIiwib24iLCJXRUFQT05fQ0hBTkdFRCIsImRhdGEiLCJQT1dFUl9DSEFOR0VEIiwicG93ZXIiLCJ1cGRhdGVQb3dlciIsInR5cGVDaGFyIiwic2V0VGV4dCIsInBvd2VyTGV2ZWwiLCJ0b0ZpeGVkIiwiZGVzdHJveSIsImZyb21TY2VuZSIsIm9mZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/entities/ui/weapon.ts\n");

/***/ }),

/***/ "./src/game/event-bus.ts":
/*!*******************************!*\
  !*** ./src/game/event-bus.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventBus: () => (/* binding */ EventBus)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/game/types/custom-events */ \"./src/game/types/custom-events.ts\");\n\n\nclass CustomEventBus extends phaser__WEBPACK_IMPORTED_MODULE_0__.Events.EventEmitter {\n    constructor(){\n        super();\n        Object.assign(this, _game_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS);\n    }\n}\nconst EventBus = new CustomEventBus();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9ldmVudC1idXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUMyQjtBQUUzRCxNQUFNRSx1QkFBdUJGLDBDQUFNQSxDQUFDRyxZQUFZO0lBQzVDQyxhQUFjO1FBQ1YsS0FBSztRQUNMQyxPQUFPQyxNQUFNLENBQUMsSUFBSSxFQUFFTCxvRUFBYUE7SUFDckM7QUFFSjtBQUVPLE1BQU1NLFdBQVcsSUFBSUwsaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL2V2ZW50LWJ1cy50cz82MWM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50cyB9IGZyb20gJ3BoYXNlcic7XG5pbXBvcnQgeyBDVVNUT01fRVZFTlRTIH0gZnJvbSAnQC9nYW1lL3R5cGVzL2N1c3RvbS1ldmVudHMnO1xuXG5jbGFzcyBDdXN0b21FdmVudEJ1cyBleHRlbmRzIEV2ZW50cy5FdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIENVU1RPTV9FVkVOVFMpO1xuICAgIH1cbiAgICBcbn1cblxuZXhwb3J0IGNvbnN0IEV2ZW50QnVzID0gbmV3IEN1c3RvbUV2ZW50QnVzKCk7Il0sIm5hbWVzIjpbIkV2ZW50cyIsIkNVU1RPTV9FVkVOVFMiLCJDdXN0b21FdmVudEJ1cyIsIkV2ZW50RW1pdHRlciIsImNvbnN0cnVjdG9yIiwiT2JqZWN0IiwiYXNzaWduIiwiRXZlbnRCdXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/event-bus.ts\n");

/***/ }),

/***/ "./src/game/main.ts":
/*!**************************!*\
  !*** ./src/game/main.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _scenes_boot_scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scenes/boot-scene */ \"./src/game/scenes/boot-scene.ts\");\n/* harmony import */ var _scenes_game_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scenes/game-scene */ \"./src/game/scenes/game-scene.ts\");\n/* harmony import */ var _scenes_game_over_scene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scenes/game-over-scene */ \"./src/game/scenes/game-over-scene.ts\");\n/* harmony import */ var _scenes_main_menu_scene__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scenes/main-menu-scene */ \"./src/game/scenes/main-menu-scene.ts\");\n/* harmony import */ var _scenes_pause_menu_scene__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scenes/pause-menu-scene */ \"./src/game/scenes/pause-menu-scene.ts\");\n/* harmony import */ var _scenes_preload_scene__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./scenes/preload-scene */ \"./src/game/scenes/preload-scene.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _scenes_level_complete_scene__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./scenes/level-complete-scene */ \"./src/game/scenes/level-complete-scene.ts\");\n/* harmony import */ var _scenes_victory_scene__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./scenes/victory-scene */ \"./src/game/scenes/victory-scene.ts\");\n/* harmony import */ var _scenes_options_scene__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./scenes/options-scene */ \"./src/game/scenes/options-scene.ts\");\n/* harmony import */ var _scenes_records_scene__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./scenes/records-scene */ \"./src/game/scenes/records-scene.ts\");\n/* harmony import */ var _scenes_input_scene__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./scenes/input-scene */ \"./src/game/scenes/input-scene.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst config = {\n    type: phaser__WEBPACK_IMPORTED_MODULE_6__.AUTO,\n    width: 480,\n    height: 640,\n    parent: \"game-container\",\n    roundPixels: true,\n    pixelArt: true,\n    scale: {\n        mode: Phaser.Scale.HEIGHT_CONTROLS_WIDTH,\n        autoCenter: Phaser.Scale.CENTER_BOTH\n    },\n    fps: {\n        target: 60,\n        forceSetTimeOut: true,\n        smoothStep: false\n    },\n    backgroundColor: \"#000000\",\n    physics: {\n        default: \"arcade\",\n        arcade: {\n            gravity: {\n                y: 0,\n                x: 0\n            },\n            debug: false\n        }\n    },\n    scene: [\n        _scenes_boot_scene__WEBPACK_IMPORTED_MODULE_0__.BootScene,\n        _scenes_preload_scene__WEBPACK_IMPORTED_MODULE_5__.PreloadScene,\n        _scenes_main_menu_scene__WEBPACK_IMPORTED_MODULE_3__.MainMenu,\n        _scenes_game_scene__WEBPACK_IMPORTED_MODULE_1__.GameScene,\n        _scenes_pause_menu_scene__WEBPACK_IMPORTED_MODULE_4__.PauseMenu,\n        _scenes_game_over_scene__WEBPACK_IMPORTED_MODULE_2__.GameOver,\n        _scenes_level_complete_scene__WEBPACK_IMPORTED_MODULE_7__.LevelCompleteScene,\n        _scenes_victory_scene__WEBPACK_IMPORTED_MODULE_8__.VictoryScene,\n        _scenes_records_scene__WEBPACK_IMPORTED_MODULE_10__.RecordsScene,\n        _scenes_options_scene__WEBPACK_IMPORTED_MODULE_9__.OptionsScene,\n        _scenes_input_scene__WEBPACK_IMPORTED_MODULE_11__.InputScene\n    ]\n};\nconst StartGame = (parent)=>{\n    return new phaser__WEBPACK_IMPORTED_MODULE_6__.Game({\n        ...config,\n        parent\n    });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StartGame);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9tYWluLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWdEO0FBQ0E7QUFDSTtBQUNBO0FBQ0U7QUFDQTtBQUNsQjtBQUMrQjtBQUNiO0FBQ0E7QUFDQTtBQUNKO0FBRWxELE1BQU1hLFNBQXVDO0lBQ3pDQyxNQUFNUCx3Q0FBSUE7SUFDVlEsT0FBTztJQUNQQyxRQUFRO0lBQ1JDLFFBQVE7SUFDUkMsYUFBYTtJQUNiQyxVQUFVO0lBQ1ZDLE9BQU87UUFDSEMsTUFBTUMsT0FBT0MsS0FBSyxDQUFDQyxxQkFBcUI7UUFDeENDLFlBQVlILE9BQU9DLEtBQUssQ0FBQ0csV0FBVztJQUN4QztJQUNBQyxLQUFLO1FBQ0RDLFFBQVE7UUFDUkMsaUJBQWlCO1FBQ2pCQyxZQUFZO0lBQ2hCO0lBQ0FDLGlCQUFpQjtJQUNqQkMsU0FBUztRQUNMQyxTQUFTO1FBQ1RDLFFBQVE7WUFDSkMsU0FBUztnQkFBRUMsR0FBRztnQkFBR0MsR0FBRztZQUFFO1lBQ3RCQyxPQUFPO1FBQ1g7SUFDSjtJQUNBQyxPQUFPO1FBQUN2Qyx5REFBU0E7UUFBRUssK0RBQVlBO1FBQUVGLDZEQUFRQTtRQUFFRix5REFBU0E7UUFBRUcsK0RBQVNBO1FBQUVGLDZEQUFRQTtRQUFFTSw0RUFBa0JBO1FBQUVDLCtEQUFZQTtRQUFFRSxnRUFBWUE7UUFBRUQsK0RBQVlBO1FBQUVFLDREQUFVQTtLQUFFO0FBQ3pKO0FBRUEsTUFBTTRCLFlBQVksQ0FBQ3ZCO0lBQ2YsT0FBTyxJQUFJWCx3Q0FBSUEsQ0FBQztRQUFFLEdBQUdPLE1BQU07UUFBRUk7SUFBTztBQUN4QztBQUVBLGlFQUFldUIsU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9tYWluLnRzPzUwNzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm9vdFNjZW5lIH0gZnJvbSAnLi9zY2VuZXMvYm9vdC1zY2VuZSc7XG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tICcuL3NjZW5lcy9nYW1lLXNjZW5lJztcbmltcG9ydCB7IEdhbWVPdmVyIH0gZnJvbSAnLi9zY2VuZXMvZ2FtZS1vdmVyLXNjZW5lJztcbmltcG9ydCB7IE1haW5NZW51IH0gZnJvbSAnLi9zY2VuZXMvbWFpbi1tZW51LXNjZW5lJztcbmltcG9ydCB7IFBhdXNlTWVudSB9IGZyb20gJy4vc2NlbmVzL3BhdXNlLW1lbnUtc2NlbmUnO1xuaW1wb3J0IHsgUHJlbG9hZFNjZW5lIH0gZnJvbSAnLi9zY2VuZXMvcHJlbG9hZC1zY2VuZSc7XG5pbXBvcnQgeyBHYW1lLCBBVVRPIH0gZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IExldmVsQ29tcGxldGVTY2VuZSB9IGZyb20gJy4vc2NlbmVzL2xldmVsLWNvbXBsZXRlLXNjZW5lJztcbmltcG9ydCB7IFZpY3RvcnlTY2VuZSB9IGZyb20gJy4vc2NlbmVzL3ZpY3Rvcnktc2NlbmUnO1xuaW1wb3J0IHsgT3B0aW9uc1NjZW5lIH0gZnJvbSAnLi9zY2VuZXMvb3B0aW9ucy1zY2VuZSc7XG5pbXBvcnQgeyBSZWNvcmRzU2NlbmUgfSBmcm9tICcuL3NjZW5lcy9yZWNvcmRzLXNjZW5lJztcbmltcG9ydCB7IElucHV0U2NlbmUgfSBmcm9tICcuL3NjZW5lcy9pbnB1dC1zY2VuZSc7XG5cbmNvbnN0IGNvbmZpZzogUGhhc2VyLlR5cGVzLkNvcmUuR2FtZUNvbmZpZyA9IHtcbiAgICB0eXBlOiBBVVRPLFxuICAgIHdpZHRoOiA0ODAsXG4gICAgaGVpZ2h0OiA2NDAsXG4gICAgcGFyZW50OiAnZ2FtZS1jb250YWluZXInLFxuICAgIHJvdW5kUGl4ZWxzOiB0cnVlLFxuICAgIHBpeGVsQXJ0OiB0cnVlLFxuICAgIHNjYWxlOiB7XG4gICAgICAgIG1vZGU6IFBoYXNlci5TY2FsZS5IRUlHSFRfQ09OVFJPTFNfV0lEVEgsXG4gICAgICAgIGF1dG9DZW50ZXI6IFBoYXNlci5TY2FsZS5DRU5URVJfQk9USFxuICAgIH0sXG4gICAgZnBzOiB7XG4gICAgICAgIHRhcmdldDogNjAsICAvLyDQodGC0LDQvdC00LDRgNGCINC00LvRjyDQv9C70LDQstC90L7Qs9C+INC00LLQuNC20LXQvdC40Y8g0L/Rg9C70YxcbiAgICAgICAgZm9yY2VTZXRUaW1lT3V0OiB0cnVlLCAgLy8g0KHRgtCw0LHQuNC70YzQvdC+0YHRgtGMINCyINCx0YDQsNGD0LfQtdGA0LDRhVxuICAgICAgICBzbW9vdGhTdGVwOiBmYWxzZSwgIC8vINCb0YPRh9GI0LUg0L7RgtC60LvRjtGH0LjRgtGMINC00LvRjyDRgtC+0YfQvdC+0LPQviDRhdC40YIt0LTQtdGC0LXQutGC0LjQvdCz0LBcbiAgICB9LFxuICAgIGJhY2tncm91bmRDb2xvcjogJyMwMDAwMDAnLFxuICAgIHBoeXNpY3M6IHtcbiAgICAgICAgZGVmYXVsdDogJ2FyY2FkZScsXG4gICAgICAgIGFyY2FkZToge1xuICAgICAgICAgICAgZ3Jhdml0eTogeyB5OiAwLCB4OiAwIH0sXG4gICAgICAgICAgICBkZWJ1ZzogZmFsc2VcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2NlbmU6IFtCb290U2NlbmUsIFByZWxvYWRTY2VuZSwgTWFpbk1lbnUsIEdhbWVTY2VuZSwgUGF1c2VNZW51LCBHYW1lT3ZlciwgTGV2ZWxDb21wbGV0ZVNjZW5lLCBWaWN0b3J5U2NlbmUsIFJlY29yZHNTY2VuZSwgT3B0aW9uc1NjZW5lLCBJbnB1dFNjZW5lIF1cbn07XG5cbmNvbnN0IFN0YXJ0R2FtZSA9IChwYXJlbnQ6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBuZXcgR2FtZSh7IC4uLmNvbmZpZywgcGFyZW50IH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBTdGFydEdhbWU7XG4iXSwibmFtZXMiOlsiQm9vdFNjZW5lIiwiR2FtZVNjZW5lIiwiR2FtZU92ZXIiLCJNYWluTWVudSIsIlBhdXNlTWVudSIsIlByZWxvYWRTY2VuZSIsIkdhbWUiLCJBVVRPIiwiTGV2ZWxDb21wbGV0ZVNjZW5lIiwiVmljdG9yeVNjZW5lIiwiT3B0aW9uc1NjZW5lIiwiUmVjb3Jkc1NjZW5lIiwiSW5wdXRTY2VuZSIsImNvbmZpZyIsInR5cGUiLCJ3aWR0aCIsImhlaWdodCIsInBhcmVudCIsInJvdW5kUGl4ZWxzIiwicGl4ZWxBcnQiLCJzY2FsZSIsIm1vZGUiLCJQaGFzZXIiLCJTY2FsZSIsIkhFSUdIVF9DT05UUk9MU19XSURUSCIsImF1dG9DZW50ZXIiLCJDRU5URVJfQk9USCIsImZwcyIsInRhcmdldCIsImZvcmNlU2V0VGltZU91dCIsInNtb290aFN0ZXAiLCJiYWNrZ3JvdW5kQ29sb3IiLCJwaHlzaWNzIiwiZGVmYXVsdCIsImFyY2FkZSIsImdyYXZpdHkiLCJ5IiwieCIsImRlYnVnIiwic2NlbmUiLCJTdGFydEdhbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/main.ts\n");

/***/ }),

/***/ "./src/game/managers/audio-manager.ts":
/*!********************************************!*\
  !*** ./src/game/managers/audio-manager.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioManager: () => (/* binding */ AudioManager)\n/* harmony export */ });\n/* harmony import */ var _types_custom_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../managers/local-storage-manager */ \"./src/game/managers/local-storage-manager.ts\");\n\n\nclass AudioManager {\n    constructor(scene, eventBus){\n        this.soundPools = new Map();\n        this.currentMusic = null;\n        this.scene = scene;\n        this.eventBus = eventBus;\n        this.currentSettings = _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_1__.LocalStorageManager.loadSettings();\n        this.config = this.getDefaultConfig();\n        this.init();\n    }\n    getDefaultConfig() {\n        return {\n            bgMusic: {\n                \"bg\": {\n                    baseVolume: 1.0,\n                    loop: true\n                }\n            },\n            sfx: {\n                \"explosion\": {\n                    baseVolume: 1.0,\n                    instances: 3,\n                    overlap: false\n                },\n                \"hit\": {\n                    baseVolume: 1.0,\n                    instances: 1,\n                    overlap: false\n                },\n                \"shot1\": {\n                    baseVolume: 1.0,\n                    instances: 3,\n                    overlap: true\n                }\n            }\n        };\n    }\n    init() {\n        this.preloadSounds();\n        this.setupEventListeners();\n        this.applyCurrentVolumes();\n    }\n    applyCurrentVolumes() {\n        // Применяем громкость для музыки\n        if (this.currentMusic) {\n            const musicConfig = this.config.bgMusic[this.currentMusic.key];\n            if (musicConfig) {\n                this.currentMusic.setVolume(musicConfig.baseVolume * this.currentSettings.musicVolume);\n            }\n        }\n        // Применяем громкость для SFX\n        this.soundPools.forEach((pool, key)=>{\n            const config = this.config.sfx[key];\n            if (config) {\n                pool.forEach((sound)=>{\n                    sound.setVolume(config.baseVolume * this.currentSettings.sfxVolume);\n                });\n            }\n        });\n    }\n    preloadSounds() {\n        // Предзагрузка музыки с учетом текущих настроек\n        Object.keys(this.config.bgMusic).forEach((key)=>{\n            const cfg = this.config.bgMusic[key];\n            this.scene.sound.add(key, {\n                ...cfg,\n                volume: cfg.baseVolume * this.currentSettings.musicVolume\n            });\n        });\n        // Создание пулов для SFX с учетом текущих настроек\n        Object.entries(this.config.sfx).forEach(([key, cfg])=>{\n            const pool = [];\n            for(let i = 0; i < (cfg.instances || 3); i++){\n                const sound = this.scene.sound.add(key, {\n                    ...cfg,\n                    volume: cfg.baseVolume * this.currentSettings.sfxVolume\n                });\n                pool.push(sound);\n            }\n            this.soundPools.set(key, pool);\n        });\n    }\n    setupEventListeners() {\n        this.eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.ENEMY_DESTROYED, ()=>this.playFromPool(\"explosion\"));\n        this.eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.PLAYER_DESTROYED, ()=>this.playFromPool(\"explosion\"));\n        this.eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.SHIP_HIT, ()=>this.playFromPool(\"hit\"));\n        this.eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.SHIP_SHOOT, ()=>this.playFromPool(\"shot1\"));\n        this.eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.SETTINGS_CHANGED, (settings)=>{\n            this.currentSettings = settings;\n            this.applyCurrentVolumes();\n        });\n    }\n    playFromPool(key) {\n        const pool = this.soundPools.get(key);\n        const config = this.config.sfx[key];\n        if (!pool || !config) return false;\n        if (config.overlap) {\n            const availableSound = pool.find((s)=>!s.isPlaying);\n            if (availableSound) {\n                this.setSoundVolume(availableSound, key);\n                availableSound.play();\n                return true;\n            }\n        }\n        const soundToUse = pool[0];\n        if (soundToUse.isPlaying && !config.overlap) {\n            soundToUse.stop();\n        }\n        this.setSoundVolume(soundToUse, key);\n        soundToUse.play();\n        return true;\n    }\n    setSoundVolume(sound, key) {\n        const config = this.config.sfx[key];\n        if (config) {\n            sound.setVolume(config.baseVolume * this.currentSettings.sfxVolume);\n        }\n    }\n    playMusic(key) {\n        const config = this.config.bgMusic[key];\n        if (!config) {\n            console.error(`Music ${key} not configured`);\n            return;\n        }\n        this.stopMusic();\n        this.currentMusic = this.scene.sound.add(key, {\n            ...config,\n            volume: config.baseVolume * this.currentSettings.musicVolume\n        });\n        this.currentMusic.play();\n    }\n    stopMusic(fadeDuration = 500) {\n        if (!this.currentMusic) return;\n        if (fadeDuration > 0) {\n            this.scene.tweens.add({\n                targets: this.currentMusic,\n                volume: 0,\n                duration: fadeDuration,\n                onComplete: ()=>{\n                    this.currentMusic?.stop();\n                    this.currentMusic?.destroy();\n                    this.currentMusic = null;\n                }\n            });\n        } else {\n            this.currentMusic.stop();\n            this.currentMusic.destroy();\n            this.currentMusic = null;\n        }\n    }\n    changeMusic(newTrack, fadeDuration = 1000) {\n        this.stopMusic(fadeDuration);\n        this.scene.time.delayedCall(fadeDuration + 100, ()=>{\n            this.playMusic(newTrack);\n        });\n    }\n    destroy() {\n        this.stopMusic();\n        this.soundPools.forEach((pool)=>{\n            pool.forEach((sound)=>sound.destroy());\n        });\n        this.soundPools.clear();\n        // Отписка от событий\n        this.eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.ENEMY_DESTROYED);\n        this.eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.PLAYER_DESTROYED);\n        this.eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.SHIP_HIT);\n        this.eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.SHIP_SHOOT);\n        this.eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_EVENTS.SETTINGS_CHANGED);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQ3RDLFFBQVEsQ0FBQ21FLEdBQUcsQ0FBQ3hFLCtEQUFhQSxDQUFDNEMsUUFBUTtRQUN4QyxJQUFJLENBQUN2QyxRQUFRLENBQUNtRSxHQUFHLENBQUN4RSwrREFBYUEsQ0FBQzZDLFVBQVU7UUFDMUMsSUFBSSxDQUFDeEMsUUFBUSxDQUFDbUUsR0FBRyxDQUFDeEUsK0RBQWFBLENBQUM4QyxnQkFBZ0I7SUFDcEQ7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9tYW5hZ2Vycy9hdWRpby1tYW5hZ2VyLnRzP2ZhODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRCdXNDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL2V2ZW50cy9ldmVudC1idXMtY29tcG9uZW50JztcbmltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IENVU1RPTV9FVkVOVFMgfSBmcm9tICcuLi90eXBlcy9jdXN0b20tZXZlbnRzJztcbmltcG9ydCB7IEdhbWVTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgTG9jYWxTdG9yYWdlTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzL2xvY2FsLXN0b3JhZ2UtbWFuYWdlcic7XG5cbnR5cGUgU291bmRDb25maWcgPSB7XG4gICAgYmFzZVZvbHVtZTogbnVtYmVyOyAvLyDQkdCw0LfQvtCy0LDRjyDQs9GA0L7QvNC60L7RgdGC0YwgKDAtMSlcbiAgICBsb29wPzogYm9vbGVhbjtcbiAgICBpbnN0YW5jZXM/OiBudW1iZXI7XG4gICAgb3ZlcmxhcD86IGJvb2xlYW47XG59O1xuXG50eXBlIEF1ZGlvQ29uZmlnID0ge1xuICAgIGJnTXVzaWM6IFJlY29yZDxzdHJpbmcsIFNvdW5kQ29uZmlnPjtcbiAgICBzZng6IFJlY29yZDxzdHJpbmcsIFNvdW5kQ29uZmlnPjtcbn07XG5cbmV4cG9ydCBjbGFzcyBBdWRpb01hbmFnZXIge1xuICAgIHByaXZhdGUgc2NlbmU6IFBoYXNlci5TY2VuZTtcbiAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1c0NvbXBvbmVudDtcbiAgICBwcml2YXRlIHNvdW5kUG9vbHM6IE1hcDxzdHJpbmcsIFBoYXNlci5Tb3VuZC5CYXNlU291bmRbXT4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBjdXJyZW50TXVzaWM6IFBoYXNlci5Tb3VuZC5XZWJBdWRpb1NvdW5kIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBjb25maWc6IEF1ZGlvQ29uZmlnO1xuICAgIHByaXZhdGUgY3VycmVudFNldHRpbmdzOiBHYW1lU2V0dGluZ3M7XG5cbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogUGhhc2VyLlNjZW5lLCBldmVudEJ1czogRXZlbnRCdXNDb21wb25lbnQpIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgICAgICB0aGlzLmV2ZW50QnVzID0gZXZlbnRCdXM7XG4gICAgICAgIHRoaXMuY3VycmVudFNldHRpbmdzID0gTG9jYWxTdG9yYWdlTWFuYWdlci5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSB0aGlzLmdldERlZmF1bHRDb25maWcoKTtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXREZWZhdWx0Q29uZmlnKCk6IEF1ZGlvQ29uZmlnIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJnTXVzaWM6IHtcbiAgICAgICAgICAgICAgICAnYmcnOiB7IGJhc2VWb2x1bWU6IDEuMCwgbG9vcDogdHJ1ZSB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNmeDoge1xuICAgICAgICAgICAgICAgICdleHBsb3Npb24nOiB7IGJhc2VWb2x1bWU6IDEuMCwgaW5zdGFuY2VzOiAzLCBvdmVybGFwOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICdoaXQnOiB7IGJhc2VWb2x1bWU6IDEuMCwgaW5zdGFuY2VzOiAxLCBvdmVybGFwOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICdzaG90MSc6IHsgYmFzZVZvbHVtZTogMS4wLCBpbnN0YW5jZXM6IDMsIG92ZXJsYXA6IHRydWUgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wcmVsb2FkU291bmRzKCk7XG4gICAgICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLmFwcGx5Q3VycmVudFZvbHVtZXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFwcGx5Q3VycmVudFZvbHVtZXMoKTogdm9pZCB7XG4gICAgICAgIC8vINCf0YDQuNC80LXQvdGP0LXQvCDQs9GA0L7QvNC60L7RgdGC0Ywg0LTQu9GPINC80YPQt9GL0LrQuFxuICAgICAgICBpZiAodGhpcy5jdXJyZW50TXVzaWMpIHtcbiAgICAgICAgICAgIGNvbnN0IG11c2ljQ29uZmlnID0gdGhpcy5jb25maWcuYmdNdXNpY1t0aGlzLmN1cnJlbnRNdXNpYy5rZXldO1xuICAgICAgICAgICAgaWYgKG11c2ljQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TXVzaWMuc2V0Vm9sdW1lKG11c2ljQ29uZmlnLmJhc2VWb2x1bWUgKiB0aGlzLmN1cnJlbnRTZXR0aW5ncy5tdXNpY1ZvbHVtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDQn9GA0LjQvNC10L3Rj9C10Lwg0LPRgNC+0LzQutC+0YHRgtGMINC00LvRjyBTRlhcbiAgICAgICAgdGhpcy5zb3VuZFBvb2xzLmZvckVhY2goKHBvb2wsIGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5jb25maWcuc2Z4W2tleV07XG4gICAgICAgICAgICBpZiAoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgcG9vbC5mb3JFYWNoKHNvdW5kID0+IHtcbiAgICAgICAgICAgICAgICAgICAgKHNvdW5kIGFzIFBoYXNlci5Tb3VuZC5XZWJBdWRpb1NvdW5kKS5zZXRWb2x1bWUoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuYmFzZVZvbHVtZSAqIHRoaXMuY3VycmVudFNldHRpbmdzLnNmeFZvbHVtZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByZWxvYWRTb3VuZHMoKTogdm9pZCB7XG4gICAgICAgIC8vINCf0YDQtdC00LfQsNCz0YDRg9C30LrQsCDQvNGD0LfRi9C60Lgg0YEg0YPRh9C10YLQvtC8INGC0LXQutGD0YnQuNGFINC90LDRgdGC0YDQvtC10LpcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5jb25maWcuYmdNdXNpYykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2ZnID0gdGhpcy5jb25maWcuYmdNdXNpY1trZXldO1xuICAgICAgICAgICAgdGhpcy5zY2VuZS5zb3VuZC5hZGQoa2V5LCB7XG4gICAgICAgICAgICAgICAgLi4uY2ZnLFxuICAgICAgICAgICAgICAgIHZvbHVtZTogY2ZnLmJhc2VWb2x1bWUgKiB0aGlzLmN1cnJlbnRTZXR0aW5ncy5tdXNpY1ZvbHVtZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8g0KHQvtC30LTQsNC90LjQtSDQv9GD0LvQvtCyINC00LvRjyBTRlgg0YEg0YPRh9C10YLQvtC8INGC0LXQutGD0YnQuNGFINC90LDRgdGC0YDQvtC10LpcbiAgICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5jb25maWcuc2Z4KS5mb3JFYWNoKChba2V5LCBjZmddKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwb29sOiBQaGFzZXIuU291bmQuQmFzZVNvdW5kW10gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgKGNmZy5pbnN0YW5jZXMgfHwgMyk7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvdW5kID0gdGhpcy5zY2VuZS5zb3VuZC5hZGQoa2V5LCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmNmZyxcbiAgICAgICAgICAgICAgICAgICAgdm9sdW1lOiBjZmcuYmFzZVZvbHVtZSAqIHRoaXMuY3VycmVudFNldHRpbmdzLnNmeFZvbHVtZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHBvb2wucHVzaChzb3VuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNvdW5kUG9vbHMuc2V0KGtleSwgcG9vbCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihDVVNUT01fRVZFTlRTLkVORU1ZX0RFU1RST1lFRCwgKCkgPT4gXG4gICAgICAgICAgICB0aGlzLnBsYXlGcm9tUG9vbCgnZXhwbG9zaW9uJykpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKENVU1RPTV9FVkVOVFMuUExBWUVSX0RFU1RST1lFRCwgKCkgPT4gXG4gICAgICAgICAgICB0aGlzLnBsYXlGcm9tUG9vbCgnZXhwbG9zaW9uJykpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKENVU1RPTV9FVkVOVFMuU0hJUF9ISVQsICgpID0+IFxuICAgICAgICAgICAgdGhpcy5wbGF5RnJvbVBvb2woJ2hpdCcpKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihDVVNUT01fRVZFTlRTLlNISVBfU0hPT1QsICgpID0+IFxuICAgICAgICAgICAgdGhpcy5wbGF5RnJvbVBvb2woJ3Nob3QxJykpO1xuXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oQ1VTVE9NX0VWRU5UUy5TRVRUSU5HU19DSEFOR0VELCAoc2V0dGluZ3M6IEdhbWVTZXR0aW5ncykgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuYXBwbHlDdXJyZW50Vm9sdW1lcygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHBsYXlGcm9tUG9vbChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBwb29sID0gdGhpcy5zb3VuZFBvb2xzLmdldChrZXkpO1xuICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmNvbmZpZy5zZnhba2V5XTtcbiAgICAgICAgXG4gICAgICAgIGlmICghcG9vbCB8fCAhY29uZmlnKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgaWYgKGNvbmZpZy5vdmVybGFwKSB7XG4gICAgICAgICAgICBjb25zdCBhdmFpbGFibGVTb3VuZCA9IHBvb2wuZmluZChzID0+ICEocyBhcyBQaGFzZXIuU291bmQuV2ViQXVkaW9Tb3VuZCkuaXNQbGF5aW5nKTtcbiAgICAgICAgICAgIGlmIChhdmFpbGFibGVTb3VuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U291bmRWb2x1bWUoYXZhaWxhYmxlU291bmQgYXMgUGhhc2VyLlNvdW5kLldlYkF1ZGlvU291bmQsIGtleSk7XG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlU291bmQucGxheSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzb3VuZFRvVXNlID0gcG9vbFswXSBhcyBQaGFzZXIuU291bmQuV2ViQXVkaW9Tb3VuZDtcbiAgICAgICAgaWYgKHNvdW5kVG9Vc2UuaXNQbGF5aW5nICYmICFjb25maWcub3ZlcmxhcCkge1xuICAgICAgICAgICAgc291bmRUb1VzZS5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0U291bmRWb2x1bWUoc291bmRUb1VzZSwga2V5KTtcbiAgICAgICAgc291bmRUb1VzZS5wbGF5KCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0U291bmRWb2x1bWUoc291bmQ6IFBoYXNlci5Tb3VuZC5XZWJBdWRpb1NvdW5kLCBrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmNvbmZpZy5zZnhba2V5XTtcbiAgICAgICAgaWYgKGNvbmZpZykge1xuICAgICAgICAgICAgc291bmQuc2V0Vm9sdW1lKGNvbmZpZy5iYXNlVm9sdW1lICogdGhpcy5jdXJyZW50U2V0dGluZ3Muc2Z4Vm9sdW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBwbGF5TXVzaWMoa2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5jb25maWcuYmdNdXNpY1trZXldO1xuICAgICAgICBpZiAoIWNvbmZpZykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTXVzaWMgJHtrZXl9IG5vdCBjb25maWd1cmVkYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0b3BNdXNpYygpO1xuICAgICAgICB0aGlzLmN1cnJlbnRNdXNpYyA9IHRoaXMuc2NlbmUuc291bmQuYWRkKGtleSwge1xuICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgICAgdm9sdW1lOiBjb25maWcuYmFzZVZvbHVtZSAqIHRoaXMuY3VycmVudFNldHRpbmdzLm11c2ljVm9sdW1lXG4gICAgICAgIH0pIGFzIFBoYXNlci5Tb3VuZC5XZWJBdWRpb1NvdW5kO1xuICAgICAgICB0aGlzLmN1cnJlbnRNdXNpYy5wbGF5KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0b3BNdXNpYyhmYWRlRHVyYXRpb246IG51bWJlciA9IDUwMCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudE11c2ljKSByZXR1cm47XG5cbiAgICAgICAgaWYgKGZhZGVEdXJhdGlvbiA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5jdXJyZW50TXVzaWMsXG4gICAgICAgICAgICAgICAgdm9sdW1lOiAwLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBmYWRlRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRNdXNpYz8uc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRNdXNpYz8uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRNdXNpYyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNdXNpYy5zdG9wKCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNdXNpYy5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNdXNpYyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgY2hhbmdlTXVzaWMobmV3VHJhY2s6IHN0cmluZywgZmFkZUR1cmF0aW9uOiBudW1iZXIgPSAxMDAwKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcE11c2ljKGZhZGVEdXJhdGlvbik7XG4gICAgICAgIHRoaXMuc2NlbmUudGltZS5kZWxheWVkQ2FsbChmYWRlRHVyYXRpb24gKyAxMDAsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGxheU11c2ljKG5ld1RyYWNrKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcE11c2ljKCk7XG4gICAgICAgIHRoaXMuc291bmRQb29scy5mb3JFYWNoKHBvb2wgPT4ge1xuICAgICAgICAgICAgcG9vbC5mb3JFYWNoKHNvdW5kID0+IHNvdW5kLmRlc3Ryb3koKSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNvdW5kUG9vbHMuY2xlYXIoKTtcblxuICAgICAgICAvLyDQntGC0L/QuNGB0LrQsCDQvtGCINGB0L7QsdGL0YLQuNC5XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub2ZmKENVU1RPTV9FVkVOVFMuRU5FTVlfREVTVFJPWUVEKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5QTEFZRVJfREVTVFJPWUVEKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5TSElQX0hJVCk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub2ZmKENVU1RPTV9FVkVOVFMuU0hJUF9TSE9PVCk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub2ZmKENVU1RPTV9FVkVOVFMuU0VUVElOR1NfQ0hBTkdFRCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkNVU1RPTV9FVkVOVFMiLCJMb2NhbFN0b3JhZ2VNYW5hZ2VyIiwiQXVkaW9NYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJzY2VuZSIsImV2ZW50QnVzIiwic291bmRQb29scyIsIk1hcCIsImN1cnJlbnRNdXNpYyIsImN1cnJlbnRTZXR0aW5ncyIsImxvYWRTZXR0aW5ncyIsImNvbmZpZyIsImdldERlZmF1bHRDb25maWciLCJpbml0IiwiYmdNdXNpYyIsImJhc2VWb2x1bWUiLCJsb29wIiwic2Z4IiwiaW5zdGFuY2VzIiwib3ZlcmxhcCIsInByZWxvYWRTb3VuZHMiLCJzZXR1cEV2ZW50TGlzdGVuZXJzIiwiYXBwbHlDdXJyZW50Vm9sdW1lcyIsIm11c2ljQ29uZmlnIiwia2V5Iiwic2V0Vm9sdW1lIiwibXVzaWNWb2x1bWUiLCJmb3JFYWNoIiwicG9vbCIsInNvdW5kIiwic2Z4Vm9sdW1lIiwiT2JqZWN0Iiwia2V5cyIsImNmZyIsImFkZCIsInZvbHVtZSIsImVudHJpZXMiLCJpIiwicHVzaCIsInNldCIsIm9uIiwiRU5FTVlfREVTVFJPWUVEIiwicGxheUZyb21Qb29sIiwiUExBWUVSX0RFU1RST1lFRCIsIlNISVBfSElUIiwiU0hJUF9TSE9PVCIsIlNFVFRJTkdTX0NIQU5HRUQiLCJzZXR0aW5ncyIsImdldCIsImF2YWlsYWJsZVNvdW5kIiwiZmluZCIsInMiLCJpc1BsYXlpbmciLCJzZXRTb3VuZFZvbHVtZSIsInBsYXkiLCJzb3VuZFRvVXNlIiwic3RvcCIsInBsYXlNdXNpYyIsImNvbnNvbGUiLCJlcnJvciIsInN0b3BNdXNpYyIsImZhZGVEdXJhdGlvbiIsInR3ZWVucyIsInRhcmdldHMiLCJkdXJhdGlvbiIsIm9uQ29tcGxldGUiLCJkZXN0cm95IiwiY2hhbmdlTXVzaWMiLCJuZXdUcmFjayIsInRpbWUiLCJkZWxheWVkQ2FsbCIsImNsZWFyIiwib2ZmIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/managers/audio-manager.ts\n");

/***/ }),

/***/ "./src/game/managers/collision-manager.ts":
/*!************************************************!*\
  !*** ./src/game/managers/collision-manager.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CollisionManager: () => (/* binding */ CollisionManager)\n/* harmony export */ });\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../event-bus */ \"./src/game/event-bus.ts\");\n/* harmony import */ var _types_custom_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/game/configs/game-config */ \"./src/game/configs/game-config.ts\");\n/* harmony import */ var _entities_enemies_common_scout_enemy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/enemies/common/scout-enemy */ \"./src/game/entities/enemies/common/scout-enemy.ts\");\n\n\n\n\nclass CollisionManager {\n    constructor(scene, player, spawnerManager, eventBus){\n        this.laserDamageTimer = 0;\n        this.LASER_DAMAGE_COOLDOWN = _game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_WEAPON_CONFIG.laser.fireRate;\n        this.bossLaserHandlers = new Map();\n        this.bossHomingHandlers = new Map();\n        this.activeBoss = null;\n        this.colliders = [] // массив для хранения коллайдеров\n        ;\n        this.isActive = true;\n        this.currentHomingGroup = null;\n        this.handleBombBulletClear = ()=>{\n            // Удаляем все пули противников\n            this.spawnerManager.getAllSpawners().forEach((spawner)=>{\n                spawner.phaserGroup.getChildren().forEach((enemy)=>{\n                    const baseEnemy = enemy;\n                    // Безопасная проверка через геттер\n                    baseEnemy.bulletSpawner?.bulletClear();\n                });\n            });\n            // Удаляем все пули босса\n            if (this.activeBoss?.bulletSpawner) {\n                this.activeBoss.bulletSpawner.bulletClear();\n            }\n        };\n        this.handleBombDamageTick = ()=>{\n            this.handleBombBulletClear();\n            // Наносим урон всем врагам на экране\n            const camera = this.scene.cameras.main;\n            // Наносим урон обычным врагам\n            this.spawnerManager.getAllSpawners().forEach((spawner)=>{\n                spawner.phaserGroup.getChildren().forEach((enemy)=>{\n                    const sprite = enemy;\n                    if (sprite.active && camera.worldView.contains(sprite.x, sprite.y)) {\n                        const baseEnemy = enemy;\n                        baseEnemy.colliderComponent.collideWithEnemyProjectile(_game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_BOMB_CONFIG.damage);\n                    }\n                });\n            });\n            // Урон боссу\n            if (this.activeBoss?.active) {\n                const bossSprite = this.activeBoss;\n                if (camera.worldView.contains(bossSprite.x, bossSprite.y)) {\n                    this.activeBoss.colliderComponent.collideWithEnemyProjectile(_game_configs_game_config__WEBPACK_IMPORTED_MODULE_2__.PLAYER_BOMB_CONFIG.damage);\n                    this.eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.BOSS_HEALTH_CHANGE);\n                }\n            }\n        };\n        this.handleWeaponPowerChange = (data)=>{\n            this.currentHomingGroup = this.player.weapon.getHomingBulletGroup();\n        };\n        this.setupEnemyCollisions = (enemy)=>{\n            if (enemy instanceof _entities_enemies_common_scout_enemy__WEBPACK_IMPORTED_MODULE_3__.ScoutEnemy) return;\n            this.colliders.push(this.scene.physics.add.overlap(this.player, enemy.bulletSpawner.getGroup(), (playerObj, bulletObj)=>{\n                if (!playerObj.active || !bulletObj.active) return;\n                enemy.bulletSpawner.destroyBullet(bulletObj);\n                const player = playerObj;\n                if (!player.isInvulnerable) {\n                    player.collider.collideWithEnemyProjectile();\n                }\n            }));\n        };\n        this.setupBossCollisions = (boss)=>{\n            this.cleanupDefeatedBossHandlers(boss);\n            this.activeBoss = boss;\n            // Body collision\n            this.colliders.push(this.scene.physics.add.overlap(this.player, boss, (playerObj, bossObj)=>{\n                const player = playerObj;\n                const boss = bossObj;\n                if (!boss.healthComponent.isDead && !player.isInvulnerable) {\n                    player.collider.collideWithEnemyShip();\n                }\n            }), // Boss bullets\n            this.scene.physics.add.overlap(this.player, boss.bulletSpawner.getGroup(), (playerObj, bulletObj)=>{\n                bulletObj.destroy();\n                const player = playerObj;\n                if (!player.isInvulnerable) {\n                    player.collider.collideWithEnemyProjectile();\n                }\n            }), // Player bullets vs Boss\n            this.scene.physics.add.overlap(boss, this.player.weaponGroup, (bossObj, bulletObj)=>{\n                const boss = bossObj;\n                const bullet = bulletObj;\n                this.player.weapon.destroyBullet(bullet);\n                if (!boss.isInvulnerable()) {\n                    const damage = bullet.getData(\"damage\") || 1;\n                    boss.colliderComponent.collideWithEnemyProjectile(damage);\n                    this.eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ENEMY_HIT);\n                    this.eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.BOSS_HEALTH_CHANGE);\n                }\n            }));\n            // Лазер vs Босс\n            const laserHandler = ()=>{\n                if (!this.player?.weapon?.isLaserActive?.() || boss.isInvulnerable() || boss.healthComponent.isDead) return;\n                const weapon = this.player.weapon;\n                const laserRect = weapon.laserHitArea;\n                const bossRect = boss.getBounds();\n                if (this.checkLaserBossCollision(laserRect, bossRect)) {\n                    boss.colliderComponent.collideWithEnemyProjectile(weapon.laserDamagePerTick);\n                    this.eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ENEMY_HIT);\n                    this.eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.BOSS_HEALTH_CHANGE);\n                }\n            };\n            this.scene.events.on(Phaser.Scenes.Events.UPDATE, laserHandler);\n            this.bossLaserHandlers.set(boss, laserHandler);\n            // 4. Коллизия homing-пуль игрока с боссом\n            this.colliders.push(this.scene.physics.add.overlap(boss, this.currentHomingGroup, (bossObj, bulletObj)=>{\n                const boss = bossObj;\n                const bullet = bulletObj;\n                if (!boss.isInvulnerable()) {\n                    const damage = bullet.getData(\"damage\") || 2; // Урон homing-пуль\n                    boss.colliderComponent.collideWithEnemyProjectile(damage);\n                    this.eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ENEMY_HIT);\n                    this.eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.BOSS_HEALTH_CHANGE);\n                }\n                bullet.disableBody(true, true); // Возвращаем пулю в пул\n            }));\n            // 5. Обновление homing-пуль\n            const homingHandler = ()=>{\n                this.updateHomingBullets();\n            };\n            this.scene.events.on(Phaser.Scenes.Events.UPDATE, homingHandler);\n            this.bossHomingHandlers.set(boss, homingHandler);\n        };\n        this.cleanupDefeatedBossHandlers = (boss)=>{\n            this.activeBoss = null;\n            this.cleanupBossLaserHandler(boss);\n            this.cleanupBossHomingHandler(boss);\n        };\n        this.handlePlayerEnemyCollision = (playerObj, enemyObj)=>{\n            const player = playerObj;\n            const enemy = enemyObj;\n            if (!player.active || !enemy.active || player.isInvulnerable) return;\n            player.collider.collideWithEnemyShip();\n            enemy.colliderComponent.collideWithEnemyShip();\n        };\n        this.handlePlayerBulletHit = (enemyObj, bulletObj)=>{\n            const enemy = enemyObj;\n            const bullet = bulletObj;\n            if (!enemy.active || !bullet.active) return;\n            const damage = bullet.getData(\"damage\") || 1;\n            this.player.weapon.destroyBullet(bullet);\n            enemy.colliderComponent.collideWithEnemyProjectile(damage);\n            _event_bus__WEBPACK_IMPORTED_MODULE_0__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ENEMY_HIT);\n        };\n        this.updateLaserCollisions = (time, delta)=>{\n            if (!this.player.weapon.isLaserActive()) return;\n            this.laserDamageTimer += delta;\n            if (this.laserDamageTimer >= this.LASER_DAMAGE_COOLDOWN) {\n                this.handleLaserCollisions();\n                this.laserDamageTimer = 0;\n            }\n        };\n        this.handleLaserCollisions = ()=>{\n            const weapon = this.player.weapon;\n            if (!weapon.isLaserActive()) return;\n            const laserHitArea = weapon.laserHitArea;\n            const damage = weapon.laserDamagePerTick;\n            // Проверка с обычными врагами\n            const enemyGroups = this.spawnerManager.getAllSpawners().map((spawner)=>spawner.phaserGroup);\n            enemyGroups.forEach((group)=>{\n                group.getChildren().forEach((enemy)=>{\n                    const sprite = enemy;\n                    if (!sprite.active) return;\n                    if (laserHitArea.contains(sprite.x, sprite.y)) {\n                        const enemyObj = sprite;\n                        enemyObj.colliderComponent.collideWithEnemyProjectile(damage);\n                        this.eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ENEMY_HIT);\n                    }\n                });\n            });\n        };\n        this.handleHomingBulletHit = (enemyObj, bulletObj)=>{\n            if (!this.scene?.scene?.isActive()) return;\n            const homingGroup = this.currentHomingGroup;\n            if (!homingGroup) {\n                return;\n            }\n            const enemy = enemyObj;\n            const bullet = bulletObj;\n            if (!enemy.active || !bullet.active) return;\n            const damage = bullet.getData(\"damage\") || 1;\n            bullet.disableBody(true, true);\n            enemy.colliderComponent.collideWithEnemyProjectile(damage);\n            this.eventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ENEMY_HIT);\n        };\n        this.scene = scene;\n        this.player = player;\n        this.spawnerManager = spawnerManager;\n        this.eventBus = eventBus;\n        this.currentHomingGroup = this.player.weapon.getHomingBulletGroup();\n        this.setupEventListeners();\n    }\n    setupEventListeners() {\n        this.eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ENEMY_INIT, this.setupEnemyCollisions, this);\n        this.eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.BOSS_INIT, this.setupBossCollisions, this);\n        this.eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.BOSS_DEFEATED, this.cleanupDefeatedBossHandlers, this);\n        this.eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.WEAPON_POWER_CHANGED, this.handleWeaponPowerChange, this);\n        this.eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.PLAYER_BOMB_ACTIVATED, this.handleBombBulletClear, this);\n        this.eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.PLAYER_BOMB_DAMAGE_TICK, this.handleBombDamageTick, this);\n    }\n    setupBaseCollisions() {\n        if (!this.scene || !this.scene.physics.world) {\n            return;\n        }\n        const enemyGroups = this.spawnerManager.getAllSpawners().map((spawner)=>spawner.phaserGroup);\n        this.colliders.push(// Player vs Enemies\n        this.scene.physics.add.overlap(this.player, enemyGroups, this.handlePlayerEnemyCollision), // Player bullets vs Enemies\n        this.scene.physics.add.overlap(enemyGroups, this.player.weaponGroup, this.handlePlayerBulletHit), // Homing bullets vs Enemies\n        this.scene.physics.add.overlap(enemyGroups, this.currentHomingGroup, this.handleHomingBulletHit));\n        // Добавляем проверку лазера в update\n        this.scene.events.on(Phaser.Scenes.Events.UPDATE, this.updateLaserCollisions, this);\n        // Регистрируем обновление homing-пуль\n        this.scene.events.on(Phaser.Scenes.Events.UPDATE, this.updateHomingBullets, this);\n    }\n    checkLaserBossCollision(laserRect, bossRect) {\n        // Более точная проверка коллизии\n        return laserRect.right > bossRect.left && laserRect.left < bossRect.right && laserRect.bottom > bossRect.top;\n    }\n    cleanupBossLaserHandler(boss) {\n        const handler = this.bossLaserHandlers.get(boss);\n        if (handler) {\n            this.scene.events.off(Phaser.Scenes.Events.UPDATE, handler);\n            this.bossLaserHandlers.delete(boss);\n        }\n    }\n    cleanupBossHomingHandler(boss) {\n        const handler = this.bossHomingHandlers.get(boss);\n        if (handler) {\n            this.scene.events.off(Phaser.Scenes.Events.UPDATE, handler);\n            this.bossHomingHandlers.delete(boss);\n        }\n    }\n    updateHomingBullets() {\n        if (!this.isActive || !this.scene?.scene?.isActive()) return;\n        const homingBullets = this.currentHomingGroup;\n        if (!homingBullets || !homingBullets.getChildren) {\n            return;\n        }\n        if (!homingBullets.scene?.scene?.isActive()) {\n            this.currentHomingGroup = this.player.weapon.getHomingBulletGroup();\n            return;\n        }\n        homingBullets.getChildren().forEach((bullet)=>{\n            const sprite = bullet;\n            if (!sprite.active || !sprite.body) return;\n            const homingData = sprite.getData(\"homingData\");\n            homingData.delay -= this.scene.game.loop.delta;\n            if (homingData.delay <= 0) {\n                if (!homingData.target || !homingData.target.active) {\n                    homingData.target = this.findNearestTarget(sprite);\n                }\n                if (homingData.target?.active) {\n                    this.updateHomingBehavior(sprite, homingData.target, homingData.turnRate, homingData.speed);\n                } else {\n                    const angleToTop = Phaser.Math.Angle.Between(sprite.x, sprite.y, sprite.x, -100);\n                    const currentMoveAngle = Math.atan2(sprite.body.velocity.y, sprite.body.velocity.x);\n                    const newMoveAngle = Phaser.Math.Angle.RotateTo(currentMoveAngle, angleToTop, homingData.turnRate);\n                    sprite.body?.velocity.set(Math.cos(newMoveAngle) * homingData.speed, Math.sin(newMoveAngle) * homingData.speed);\n                    sprite.setRotation(newMoveAngle + Math.PI / 2);\n                }\n            }\n        });\n    }\n    findNearestTarget(bullet) {\n        let nearestTarget = null;\n        let minDistance = Infinity;\n        // 1. Проверяем активного босса (явное приведение типа)\n        if (this.activeBoss?.active) {\n            const bossSprite = this.activeBoss;\n            const distance = Phaser.Math.Distance.Between(bullet.x, bullet.y, bossSprite.x, bossSprite.y);\n            if (distance < minDistance) {\n                minDistance = distance;\n                nearestTarget = bossSprite;\n            }\n        }\n        // 2. Проверяем обычных врагов\n        this.spawnerManager.getAllSpawners().forEach((spawner)=>{\n            spawner.phaserGroup.getChildren().forEach((enemy)=>{\n                const enemySprite = enemy;\n                if (!enemySprite.active) return;\n                const distance = Phaser.Math.Distance.Between(bullet.x, bullet.y, enemySprite.x, enemySprite.y);\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    nearestTarget = enemySprite;\n                }\n            });\n        });\n        return nearestTarget;\n    }\n    updateHomingBehavior(bullet, target, turnRate, speed) {\n        const angleToTarget = Phaser.Math.Angle.Between(bullet.x, bullet.y, target.x, target.y);\n        // Текущий угол движения пули (не спрайта!)\n        const currentMoveAngle = Math.atan2(bullet.body.velocity.y, bullet.body.velocity.x);\n        // Плавный поворот к цели\n        const newMoveAngle = Phaser.Math.Angle.RotateTo(currentMoveAngle, angleToTarget, turnRate);\n        // Обновляем velocity\n        bullet.body.velocity.set(Math.cos(newMoveAngle) * speed, Math.sin(newMoveAngle) * speed);\n        // Поворачиваем спрайт в направлении движения\n        bullet.setRotation(newMoveAngle + Math.PI / 2); // +90° для правильной ориентации\n    }\n    cleanup() {\n        this.isActive = false;\n        // Удаление коллайдеров\n        this.colliders.forEach((collider)=>{\n            collider.destroy();\n        });\n        this.colliders = [];\n        // Очищаем все обработчики лазера\n        this.bossLaserHandlers.forEach((handler, boss)=>{\n            this.cleanupBossLaserHandler(boss);\n        });\n        // Очищаем все обработчики homing-пуль\n        this.bossHomingHandlers.forEach((handler, boss)=>{\n            this.cleanupBossHomingHandler(boss);\n        });\n        this.bossLaserHandlers.clear();\n        this.bossHomingHandlers.clear();\n        // Очистка основного обработчика\n        this.scene.events.off(Phaser.Scenes.Events.UPDATE, this.updateLaserCollisions, this);\n        this.scene.events.off(Phaser.Scenes.Events.UPDATE, this.updateHomingBullets, this);\n        // Отписываемся от событий\n        this.eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ENEMY_INIT, this.setupEnemyCollisions, this);\n        this.eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.BOSS_INIT, this.setupBossCollisions, this);\n        this.eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.BOSS_DEFEATED, this.cleanupDefeatedBossHandlers, this);\n        this.eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.WEAPON_POWER_CHANGED, this.handleWeaponPowerChange, this);\n        this.activeBoss = null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQ3RDLElBQUksQ0FBQzhCLHdCQUF3QixDQUFDOUI7UUFDbEM7UUFFQSxJQUFJLENBQUNsRCxpQkFBaUIsQ0FBQzhJLEtBQUs7UUFDNUIsSUFBSSxDQUFDNUksa0JBQWtCLENBQUM0SSxLQUFLO1FBRTdCLGdDQUFnQztRQUNoQyxJQUFJLENBQUN2SixLQUFLLENBQUM4RSxNQUFNLENBQUN1QyxHQUFHLENBQUNyQyxPQUFPQyxNQUFNLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTSxFQUFFLElBQUksQ0FBQ1UscUJBQXFCLEVBQUUsSUFBSTtRQUNuRixJQUFJLENBQUM3RixLQUFLLENBQUM4RSxNQUFNLENBQUN1QyxHQUFHLENBQUNyQyxPQUFPQyxNQUFNLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTSxFQUFFLElBQUksQ0FBQ0ksbUJBQW1CLEVBQUUsSUFBSTtRQUVqRiwwQkFBMEI7UUFDMUIsSUFBSSxDQUFDcEYsUUFBUSxDQUFDa0gsR0FBRyxDQUFDMUgsK0RBQWFBLENBQUM0RyxVQUFVLEVBQUUsSUFBSSxDQUFDeEQsb0JBQW9CLEVBQUUsSUFBSTtRQUMzRSxJQUFJLENBQUM1QyxRQUFRLENBQUNrSCxHQUFHLENBQUMxSCwrREFBYUEsQ0FBQzZHLFNBQVMsRUFBRSxJQUFJLENBQUM5QyxtQkFBbUIsRUFBRSxJQUFJO1FBQ3pFLElBQUksQ0FBQ3ZELFFBQVEsQ0FBQ2tILEdBQUcsQ0FBQzFILCtEQUFhQSxDQUFDOEcsYUFBYSxFQUFFLElBQUksQ0FBQzdDLDJCQUEyQixFQUFFLElBQUk7UUFDckYsSUFBSSxDQUFDekQsUUFBUSxDQUFDa0gsR0FBRyxDQUFDMUgsK0RBQWFBLENBQUMrRyxvQkFBb0IsRUFBRSxJQUFJLENBQUMvRCx1QkFBdUIsRUFBRSxJQUFJO1FBRXhGLElBQUksQ0FBQy9CLFVBQVUsR0FBRztJQUN0QjtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL21hbmFnZXJzL2NvbGxpc2lvbi1tYW5hZ2VyLnRzPzBhYzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRCdXNDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9ldmVudHMvZXZlbnQtYnVzLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBCYXNlRW5lbXkgfSBmcm9tIFwiLi4vZW50aXRpZXMvZW5lbWllcy9iYXNlLWVuZW15XCI7XHJcbmltcG9ydCB7IEJvc3NFbmVteSB9IGZyb20gXCIuLi9lbnRpdGllcy9lbmVtaWVzL2Jvc3Nlcy9iYXNlLWJvc3NcIjtcclxuaW1wb3J0IHsgRmlnaHRlckVuZW15IH0gZnJvbSBcIi4uL2VudGl0aWVzL2VuZW1pZXMvY29tbW9uL2ZpZ2h0ZXItZW5lbXlcIjtcclxuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4uL2VudGl0aWVzL3BsYXllclwiO1xyXG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gXCIuLi9ldmVudC1idXNcIjtcclxuaW1wb3J0IHsgQ1VTVE9NX0VWRU5UUyB9IGZyb20gXCIuLi90eXBlcy9jdXN0b20tZXZlbnRzXCI7XHJcbmltcG9ydCB7IEhvbWluZ0J1bGxldERhdGEgfSBmcm9tIFwiLi4vdHlwZXMvaW50ZXJmYWNlc1wiO1xyXG5pbXBvcnQgeyBFbmVteVNwYXduZXJNYW5hZ2VyIH0gZnJvbSBcIi4vZW5lbXktc3Bhd25lci1tYW5hZ2VyXCI7XHJcbmltcG9ydCAqIGFzIENPTkZJRyBmcm9tICdAL2dhbWUvY29uZmlncy9nYW1lLWNvbmZpZyc7XHJcbmltcG9ydCB7IEl0ZW1NYW5hZ2VyIH0gZnJvbSBcIi4vaXRlbS1tYW5hZ2VyXCI7XHJcbmltcG9ydCB7IEJhc2VJdGVtIH0gZnJvbSBcIi4uL2VudGl0aWVzL2l0ZW1zL2Jhc2UtaXRlbVwiO1xyXG5pbXBvcnQgeyBTY291dEVuZW15IH0gZnJvbSBcIi4uL2VudGl0aWVzL2VuZW1pZXMvY29tbW9uL3Njb3V0LWVuZW15XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29sbGlzaW9uTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIHNjZW5lOiBQaGFzZXIuU2NlbmU7XHJcbiAgICBwcml2YXRlIHBsYXllcjogUGxheWVyO1xyXG4gICAgcHJpdmF0ZSBzcGF3bmVyTWFuYWdlcjogRW5lbXlTcGF3bmVyTWFuYWdlcjtcclxuICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzQ29tcG9uZW50O1xyXG4gICAgcHJpdmF0ZSBsYXNlckRhbWFnZVRpbWVyOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBMQVNFUl9EQU1BR0VfQ09PTERPV046IG51bWJlciA9IENPTkZJRy5QTEFZRVJfV0VBUE9OX0NPTkZJRy5sYXNlci5maXJlUmF0ZTtcclxuICAgIHByaXZhdGUgYm9zc0xhc2VySGFuZGxlcnM6IE1hcDxCb3NzRW5lbXksIEZ1bmN0aW9uPiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgYm9zc0hvbWluZ0hhbmRsZXJzOiBNYXA8Qm9zc0VuZW15LCBGdW5jdGlvbj4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIGFjdGl2ZUJvc3M6IEJvc3NFbmVteSB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBjb2xsaWRlcnM6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Db2xsaWRlcltdID0gW107IC8vINC80LDRgdGB0LjQsiDQtNC70Y8g0YXRgNCw0L3QtdC90LjRjyDQutC+0LvQu9Cw0LnQtNC10YDQvtCyXHJcbiAgICBwcml2YXRlIGlzQWN0aXZlID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgY3VycmVudEhvbWluZ0dyb3VwOiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuR3JvdXAgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogUGhhc2VyLlNjZW5lLCBwbGF5ZXI6IFBsYXllciwgXHJcbiAgICAgICAgICAgICAgICBzcGF3bmVyTWFuYWdlcjogRW5lbXlTcGF3bmVyTWFuYWdlciwgZXZlbnRCdXM6IEV2ZW50QnVzQ29tcG9uZW50KSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xyXG4gICAgICAgIHRoaXMuc3Bhd25lck1hbmFnZXIgPSBzcGF3bmVyTWFuYWdlcjtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzID0gZXZlbnRCdXM7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudEhvbWluZ0dyb3VwID0gdGhpcy5wbGF5ZXIud2VhcG9uLmdldEhvbWluZ0J1bGxldEdyb3VwKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0dXBFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKENVU1RPTV9FVkVOVFMuRU5FTVlfSU5JVCwgdGhpcy5zZXR1cEVuZW15Q29sbGlzaW9ucywgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihDVVNUT01fRVZFTlRTLkJPU1NfSU5JVCwgdGhpcy5zZXR1cEJvc3NDb2xsaXNpb25zLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKENVU1RPTV9FVkVOVFMuQk9TU19ERUZFQVRFRCwgdGhpcy5jbGVhbnVwRGVmZWF0ZWRCb3NzSGFuZGxlcnMsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oQ1VTVE9NX0VWRU5UUy5XRUFQT05fUE9XRVJfQ0hBTkdFRCwgdGhpcy5oYW5kbGVXZWFwb25Qb3dlckNoYW5nZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihDVVNUT01fRVZFTlRTLlBMQVlFUl9CT01CX0FDVElWQVRFRCwgdGhpcy5oYW5kbGVCb21iQnVsbGV0Q2xlYXIsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oQ1VTVE9NX0VWRU5UUy5QTEFZRVJfQk9NQl9EQU1BR0VfVElDSywgdGhpcy5oYW5kbGVCb21iRGFtYWdlVGljaywgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVCb21iQnVsbGV0Q2xlYXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgLy8g0KPQtNCw0LvRj9C10Lwg0LLRgdC1INC/0YPQu9C4INC/0YDQvtGC0LjQstC90LjQutC+0LJcclxuICAgICAgICB0aGlzLnNwYXduZXJNYW5hZ2VyLmdldEFsbFNwYXduZXJzKCkuZm9yRWFjaChzcGF3bmVyID0+IHtcclxuICAgICAgICAgICAgc3Bhd25lci5waGFzZXJHcm91cC5nZXRDaGlsZHJlbigpLmZvckVhY2goZW5lbXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUVuZW15ID0gZW5lbXkgYXMgQmFzZUVuZW15O1xyXG4gICAgICAgICAgICAgICAgLy8g0JHQtdC30L7Qv9Cw0YHQvdCw0Y8g0L/RgNC+0LLQtdGA0LrQsCDRh9C10YDQtdC3INCz0LXRgtGC0LXRgFxyXG4gICAgICAgICAgICAgICAgYmFzZUVuZW15LmJ1bGxldFNwYXduZXI/LmJ1bGxldENsZWFyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyDQo9C00LDQu9GP0LXQvCDQstGB0LUg0L/Rg9C70Lgg0LHQvtGB0YHQsFxyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUJvc3M/LmJ1bGxldFNwYXduZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVCb3NzLmJ1bGxldFNwYXduZXIuYnVsbGV0Q2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlQm9tYkRhbWFnZVRpY2sgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVCb21iQnVsbGV0Q2xlYXIoKTtcclxuICAgICAgICAvLyDQndCw0L3QvtGB0LjQvCDRg9GA0L7QvSDQstGB0LXQvCDQstGA0LDQs9Cw0Lwg0L3QsCDRjdC60YDQsNC90LVcclxuICAgICAgICBjb25zdCBjYW1lcmEgPSB0aGlzLnNjZW5lLmNhbWVyYXMubWFpbjtcclxuICAgICAgICAvLyDQndCw0L3QvtGB0LjQvCDRg9GA0L7QvSDQvtCx0YvRh9C90YvQvCDQstGA0LDQs9Cw0LxcclxuICAgICAgICB0aGlzLnNwYXduZXJNYW5hZ2VyLmdldEFsbFNwYXduZXJzKCkuZm9yRWFjaChzcGF3bmVyID0+IHtcclxuICAgICAgICAgICAgc3Bhd25lci5waGFzZXJHcm91cC5nZXRDaGlsZHJlbigpLmZvckVhY2goZW5lbXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ByaXRlID0gZW5lbXkgYXMgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzcHJpdGUuYWN0aXZlICYmIGNhbWVyYS53b3JsZFZpZXcuY29udGFpbnMoc3ByaXRlLngsIHNwcml0ZS55KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VFbmVteSA9IGVuZW15IGFzIEJhc2VFbmVteTtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlRW5lbXkuY29sbGlkZXJDb21wb25lbnQuY29sbGlkZVdpdGhFbmVteVByb2plY3RpbGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENPTkZJRy5QTEFZRVJfQk9NQl9DT05GSUcuZGFtYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vINCj0YDQvtC9INCx0L7RgdGB0YNcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVCb3NzPy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgY29uc3QgYm9zc1Nwcml0ZSA9IHRoaXMuYWN0aXZlQm9zcyBhcyB1bmtub3duIGFzIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGU7XHJcbiAgICAgICAgICAgIGlmIChjYW1lcmEud29ybGRWaWV3LmNvbnRhaW5zKGJvc3NTcHJpdGUueCwgYm9zc1Nwcml0ZS55KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVCb3NzLmNvbGxpZGVyQ29tcG9uZW50LmNvbGxpZGVXaXRoRW5lbXlQcm9qZWN0aWxlKFxyXG4gICAgICAgICAgICAgICAgICAgIENPTkZJRy5QTEFZRVJfQk9NQl9DT05GSUcuZGFtYWdlXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuQk9TU19IRUFMVEhfQ0hBTkdFKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVXZWFwb25Qb3dlckNoYW5nZSA9IChkYXRhOiB7IFxyXG4gICAgICAgIG9sZExldmVsOiBudW1iZXIsIFxyXG4gICAgICAgIG5ld0xldmVsOiBudW1iZXIsIFxyXG4gICAgICAgIGhvbWluZ0dyb3VwOiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuR3JvdXAgXHJcbiAgICB9KSA9PiB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50SG9taW5nR3JvdXAgPSB0aGlzLnBsYXllci53ZWFwb24uZ2V0SG9taW5nQnVsbGV0R3JvdXAoKTtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIHNldHVwQmFzZUNvbGxpc2lvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNjZW5lIHx8ICF0aGlzLnNjZW5lLnBoeXNpY3Mud29ybGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBlbmVteUdyb3VwcyA9IHRoaXMuc3Bhd25lck1hbmFnZXIuZ2V0QWxsU3Bhd25lcnMoKVxyXG4gICAgICAgICAgICAubWFwKHNwYXduZXIgPT4gc3Bhd25lci5waGFzZXJHcm91cCk7XHJcblxyXG4gICAgICAgIHRoaXMuY29sbGlkZXJzLnB1c2goXHJcbiAgICAgICAgICAgIC8vIFBsYXllciB2cyBFbmVtaWVzXHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucGh5c2ljcy5hZGQub3ZlcmxhcChcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLFxyXG4gICAgICAgICAgICAgICAgZW5lbXlHcm91cHMsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVBsYXllckVuZW15Q29sbGlzaW9uXHJcbiAgICAgICAgICAgICksXHJcblxyXG4gICAgICAgICAgICAvLyBQbGF5ZXIgYnVsbGV0cyB2cyBFbmVtaWVzXHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucGh5c2ljcy5hZGQub3ZlcmxhcChcclxuICAgICAgICAgICAgICAgIGVuZW15R3JvdXBzLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIud2VhcG9uR3JvdXAsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVBsYXllckJ1bGxldEhpdFxyXG4gICAgICAgICAgICApLFxyXG5cclxuICAgICAgICAgICAgLy8gSG9taW5nIGJ1bGxldHMgdnMgRW5lbWllc1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnBoeXNpY3MuYWRkLm92ZXJsYXAoXHJcbiAgICAgICAgICAgICAgICBlbmVteUdyb3VwcyxcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEhvbWluZ0dyb3VwLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVIb21pbmdCdWxsZXRIaXRcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDQv9GA0L7QstC10YDQutGDINC70LDQt9C10YDQsCDQsiB1cGRhdGVcclxuICAgICAgICB0aGlzLnNjZW5lLmV2ZW50cy5vbihQaGFzZXIuU2NlbmVzLkV2ZW50cy5VUERBVEUsIHRoaXMudXBkYXRlTGFzZXJDb2xsaXNpb25zLCB0aGlzKTtcclxuXHJcbiAgICAgICAgLy8g0KDQtdCz0LjRgdGC0YDQuNGA0YPQtdC8INC+0LHQvdC+0LLQu9C10L3QuNC1IGhvbWluZy3Qv9GD0LvRjFxyXG4gICAgICAgIHRoaXMuc2NlbmUuZXZlbnRzLm9uKFBoYXNlci5TY2VuZXMuRXZlbnRzLlVQREFURSwgdGhpcy51cGRhdGVIb21pbmdCdWxsZXRzLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldHVwRW5lbXlDb2xsaXNpb25zID0gKGVuZW15OiBCYXNlRW5lbXkpOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAoKGVuZW15IGluc3RhbmNlb2YgU2NvdXRFbmVteSkpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5jb2xsaWRlcnMucHVzaChcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5waHlzaWNzLmFkZC5vdmVybGFwKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIsXHJcbiAgICAgICAgICAgICAgICBlbmVteS5idWxsZXRTcGF3bmVyLmdldEdyb3VwKCksXHJcbiAgICAgICAgICAgICAgICAocGxheWVyT2JqLCBidWxsZXRPYmopID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBsYXllck9iai5hY3RpdmUgfHwgIWJ1bGxldE9iai5hY3RpdmUpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBlbmVteS5idWxsZXRTcGF3bmVyLmRlc3Ryb3lCdWxsZXQoYnVsbGV0T2JqKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBwbGF5ZXJPYmogYXMgUGxheWVyO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcGxheWVyLmlzSW52dWxuZXJhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5jb2xsaWRlci5jb2xsaWRlV2l0aEVuZW15UHJvamVjdGlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgc2V0dXBCb3NzQ29sbGlzaW9ucyA9IChib3NzOiBCb3NzRW5lbXkpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLmNsZWFudXBEZWZlYXRlZEJvc3NIYW5kbGVycyhib3NzKTtcclxuXHJcbiAgICAgICAgdGhpcy5hY3RpdmVCb3NzID0gYm9zcztcclxuICAgICAgICAvLyBCb2R5IGNvbGxpc2lvblxyXG4gICAgICAgIHRoaXMuY29sbGlkZXJzLnB1c2goXHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucGh5c2ljcy5hZGQub3ZlcmxhcChcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLFxyXG4gICAgICAgICAgICAgICAgYm9zcyxcclxuICAgICAgICAgICAgICAgIChwbGF5ZXJPYmosIGJvc3NPYmopID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBwbGF5ZXJPYmogYXMgUGxheWVyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvc3MgPSBib3NzT2JqIGFzIEJvc3NFbmVteTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWJvc3MuaGVhbHRoQ29tcG9uZW50LmlzRGVhZCAmJiAhcGxheWVyLmlzSW52dWxuZXJhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5jb2xsaWRlci5jb2xsaWRlV2l0aEVuZW15U2hpcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSxcclxuXHJcbiAgICAgICAgICAgIC8vIEJvc3MgYnVsbGV0c1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnBoeXNpY3MuYWRkLm92ZXJsYXAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllcixcclxuICAgICAgICAgICAgICAgIGJvc3MuYnVsbGV0U3Bhd25lci5nZXRHcm91cCgpLFxyXG4gICAgICAgICAgICAgICAgKHBsYXllck9iaiwgYnVsbGV0T2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVsbGV0T2JqLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBwbGF5ZXJPYmogYXMgUGxheWVyO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcGxheWVyLmlzSW52dWxuZXJhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5jb2xsaWRlci5jb2xsaWRlV2l0aEVuZW15UHJvamVjdGlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSxcclxuXHJcbiAgICAgICAgICAgIC8vIFBsYXllciBidWxsZXRzIHZzIEJvc3NcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5waHlzaWNzLmFkZC5vdmVybGFwKFxyXG4gICAgICAgICAgICAgICAgYm9zcyxcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLndlYXBvbkdyb3VwLFxyXG4gICAgICAgICAgICAgICAgKGJvc3NPYmosIGJ1bGxldE9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvc3MgPSBib3NzT2JqIGFzIEJvc3NFbmVteTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidWxsZXQgPSBidWxsZXRPYmogYXMgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIud2VhcG9uLmRlc3Ryb3lCdWxsZXQoYnVsbGV0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFib3NzLmlzSW52dWxuZXJhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGFtYWdlID0gYnVsbGV0LmdldERhdGEoJ2RhbWFnZScpIHx8IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvc3MuY29sbGlkZXJDb21wb25lbnQuY29sbGlkZVdpdGhFbmVteVByb2plY3RpbGUoZGFtYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuRU5FTVlfSElUKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuQk9TU19IRUFMVEhfQ0hBTkdFKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyDQm9Cw0LfQtdGAIHZzINCR0L7RgdGBXHJcbiAgICAgICAgY29uc3QgbGFzZXJIYW5kbGVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMucGxheWVyPy53ZWFwb24/LmlzTGFzZXJBY3RpdmU/LigpIHx8IGJvc3MuaXNJbnZ1bG5lcmFibGUoKSB8fCBib3NzLmhlYWx0aENvbXBvbmVudC5pc0RlYWQpIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMucGxheWVyLndlYXBvbjtcclxuICAgICAgICAgICAgY29uc3QgbGFzZXJSZWN0ID0gd2VhcG9uLmxhc2VySGl0QXJlYTtcclxuICAgICAgICAgICAgY29uc3QgYm9zc1JlY3QgPSBib3NzLmdldEJvdW5kcygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tMYXNlckJvc3NDb2xsaXNpb24obGFzZXJSZWN0LCBib3NzUmVjdCkpIHtcclxuICAgICAgICAgICAgICAgIGJvc3MuY29sbGlkZXJDb21wb25lbnQuY29sbGlkZVdpdGhFbmVteVByb2plY3RpbGUod2VhcG9uLmxhc2VyRGFtYWdlUGVyVGljayk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLmVtaXQoQ1VTVE9NX0VWRU5UUy5FTkVNWV9ISVQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuQk9TU19IRUFMVEhfQ0hBTkdFKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUuZXZlbnRzLm9uKFBoYXNlci5TY2VuZXMuRXZlbnRzLlVQREFURSwgbGFzZXJIYW5kbGVyKTtcclxuICAgICAgICB0aGlzLmJvc3NMYXNlckhhbmRsZXJzLnNldChib3NzLCBsYXNlckhhbmRsZXIpO1xyXG5cclxuICAgICAgICAvLyA0LiDQmtC+0LvQu9C40LfQuNGPIGhvbWluZy3Qv9GD0LvRjCDQuNCz0YDQvtC60LAg0YEg0LHQvtGB0YHQvtC8XHJcbiAgICAgICAgdGhpcy5jb2xsaWRlcnMucHVzaChcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5waHlzaWNzLmFkZC5vdmVybGFwKFxyXG4gICAgICAgICAgICAgICAgYm9zcyxcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEhvbWluZ0dyb3VwLFxyXG4gICAgICAgICAgICAgICAgKGJvc3NPYmosIGJ1bGxldE9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvc3MgPSBib3NzT2JqIGFzIEJvc3NFbmVteTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidWxsZXQgPSBidWxsZXRPYmogYXMgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFib3NzLmlzSW52dWxuZXJhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGFtYWdlID0gYnVsbGV0LmdldERhdGEoJ2RhbWFnZScpIHx8IDI7IC8vINCj0YDQvtC9IGhvbWluZy3Qv9GD0LvRjFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3NzLmNvbGxpZGVyQ29tcG9uZW50LmNvbGxpZGVXaXRoRW5lbXlQcm9qZWN0aWxlKGRhbWFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLkVORU1ZX0hJVCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLkJPU1NfSEVBTFRIX0NIQU5HRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kaXNhYmxlQm9keSh0cnVlLCB0cnVlKTsgLy8g0JLQvtC30LLRgNCw0YnQsNC10Lwg0L/Rg9C70Y4g0LIg0L/Rg9C7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyA1LiDQntCx0L3QvtCy0LvQtdC90LjQtSBob21pbmct0L/Rg9C70YxcclxuICAgICAgICBjb25zdCBob21pbmdIYW5kbGVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUhvbWluZ0J1bGxldHMoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNjZW5lLmV2ZW50cy5vbihQaGFzZXIuU2NlbmVzLkV2ZW50cy5VUERBVEUsIGhvbWluZ0hhbmRsZXIpO1xyXG4gICAgICAgIHRoaXMuYm9zc0hvbWluZ0hhbmRsZXJzLnNldChib3NzLCBob21pbmdIYW5kbGVyKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgY2hlY2tMYXNlckJvc3NDb2xsaXNpb24obGFzZXJSZWN0OiBQaGFzZXIuR2VvbS5SZWN0YW5nbGUsIGJvc3NSZWN0OiBQaGFzZXIuR2VvbS5SZWN0YW5nbGUpOiBib29sZWFuIHtcclxuICAgICAgICAvLyDQkdC+0LvQtdC1INGC0L7Rh9C90LDRjyDQv9GA0L7QstC10YDQutCwINC60L7Qu9C70LjQt9C40LhcclxuICAgICAgICByZXR1cm4gbGFzZXJSZWN0LnJpZ2h0ID4gYm9zc1JlY3QubGVmdCAmJiBcclxuICAgICAgICAgICAgICAgbGFzZXJSZWN0LmxlZnQgPCBib3NzUmVjdC5yaWdodCAmJlxyXG4gICAgICAgICAgICAgICBsYXNlclJlY3QuYm90dG9tID4gYm9zc1JlY3QudG9wO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2xlYW51cERlZmVhdGVkQm9zc0hhbmRsZXJzID0gKGJvc3M6IEJvc3NFbmVteSk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQm9zcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jbGVhbnVwQm9zc0xhc2VySGFuZGxlcihib3NzKTtcclxuICAgICAgICB0aGlzLmNsZWFudXBCb3NzSG9taW5nSGFuZGxlcihib3NzKTtcclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBjbGVhbnVwQm9zc0xhc2VySGFuZGxlcihib3NzOiBCb3NzRW5lbXkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5ib3NzTGFzZXJIYW5kbGVycy5nZXQoYm9zcyk7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5ldmVudHMub2ZmKFBoYXNlci5TY2VuZXMuRXZlbnRzLlVQREFURSwgaGFuZGxlcik7XHJcbiAgICAgICAgICAgIHRoaXMuYm9zc0xhc2VySGFuZGxlcnMuZGVsZXRlKGJvc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNsZWFudXBCb3NzSG9taW5nSGFuZGxlcihib3NzOiBCb3NzRW5lbXkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5ib3NzSG9taW5nSGFuZGxlcnMuZ2V0KGJvc3MpO1xyXG4gICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuZXZlbnRzLm9mZihQaGFzZXIuU2NlbmVzLkV2ZW50cy5VUERBVEUsIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmJvc3NIb21pbmdIYW5kbGVycy5kZWxldGUoYm9zcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlUGxheWVyRW5lbXlDb2xsaXNpb24gPSAocGxheWVyT2JqOiB1bmtub3duLCBlbmVteU9iajogdW5rbm93bikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBsYXllciA9IHBsYXllck9iaiBhcyBQbGF5ZXI7XHJcbiAgICAgICAgY29uc3QgZW5lbXkgPSBlbmVteU9iaiBhcyBCYXNlRW5lbXk7XHJcblxyXG4gICAgICAgIGlmICghcGxheWVyLmFjdGl2ZSB8fCAhZW5lbXkuYWN0aXZlIHx8IHBsYXllci5pc0ludnVsbmVyYWJsZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBwbGF5ZXIuY29sbGlkZXIuY29sbGlkZVdpdGhFbmVteVNoaXAoKTtcclxuICAgICAgICBlbmVteS5jb2xsaWRlckNvbXBvbmVudC5jb2xsaWRlV2l0aEVuZW15U2hpcCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZVBsYXllckJ1bGxldEhpdCA9IChlbmVteU9iajogdW5rbm93biwgYnVsbGV0T2JqOiB1bmtub3duKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZW5lbXkgPSBlbmVteU9iaiBhcyBCYXNlRW5lbXk7XHJcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gYnVsbGV0T2JqIGFzIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGU7XHJcblxyXG4gICAgICAgIGlmICghZW5lbXkuYWN0aXZlIHx8ICFidWxsZXQuYWN0aXZlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGRhbWFnZSA9IGJ1bGxldC5nZXREYXRhKCdkYW1hZ2UnKSB8fCAxO1xyXG4gICAgICAgIHRoaXMucGxheWVyLndlYXBvbi5kZXN0cm95QnVsbGV0KGJ1bGxldCk7XHJcbiAgICAgICAgZW5lbXkuY29sbGlkZXJDb21wb25lbnQuY29sbGlkZVdpdGhFbmVteVByb2plY3RpbGUoZGFtYWdlKTtcclxuICAgICAgICBFdmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuRU5FTVlfSElUKTtcclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVMYXNlckNvbGxpc2lvbnMgPSAodGltZTogbnVtYmVyLCBkZWx0YTogbnVtYmVyKTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnBsYXllci53ZWFwb24uaXNMYXNlckFjdGl2ZSgpKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5sYXNlckRhbWFnZVRpbWVyICs9IGRlbHRhO1xyXG4gICAgICAgIGlmICh0aGlzLmxhc2VyRGFtYWdlVGltZXIgPj0gdGhpcy5MQVNFUl9EQU1BR0VfQ09PTERPV04pIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVMYXNlckNvbGxpc2lvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5sYXNlckRhbWFnZVRpbWVyID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlTGFzZXJDb2xsaXNpb25zID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMucGxheWVyLndlYXBvbjtcclxuICAgICAgICBpZiAoIXdlYXBvbi5pc0xhc2VyQWN0aXZlKCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgbGFzZXJIaXRBcmVhID0gd2VhcG9uLmxhc2VySGl0QXJlYTtcclxuICAgICAgICBjb25zdCBkYW1hZ2UgPSB3ZWFwb24ubGFzZXJEYW1hZ2VQZXJUaWNrO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCf0YDQvtCy0LXRgNC60LAg0YEg0L7QsdGL0YfQvdGL0LzQuCDQstGA0LDQs9Cw0LzQuFxyXG4gICAgICAgIGNvbnN0IGVuZW15R3JvdXBzID0gdGhpcy5zcGF3bmVyTWFuYWdlci5nZXRBbGxTcGF3bmVycygpXHJcbiAgICAgICAgICAgIC5tYXAoc3Bhd25lciA9PiBzcGF3bmVyLnBoYXNlckdyb3VwKTtcclxuXHJcbiAgICAgICAgZW5lbXlHcm91cHMuZm9yRWFjaChncm91cCA9PiB7XHJcbiAgICAgICAgICAgIGdyb3VwLmdldENoaWxkcmVuKCkuZm9yRWFjaChlbmVteSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcHJpdGUgPSBlbmVteSBhcyBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuU3ByaXRlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzcHJpdGUuYWN0aXZlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChsYXNlckhpdEFyZWEuY29udGFpbnMoc3ByaXRlLngsIHNwcml0ZS55KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZW15T2JqID0gc3ByaXRlIGFzIHVua25vd24gYXMgQmFzZUVuZW15O1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZW15T2JqLmNvbGxpZGVyQ29tcG9uZW50LmNvbGxpZGVXaXRoRW5lbXlQcm9qZWN0aWxlKGRhbWFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuRU5FTVlfSElUKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlSG9taW5nQnVsbGV0cygpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUgfHwgIXRoaXMuc2NlbmU/LnNjZW5lPy5pc0FjdGl2ZSgpKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgaG9taW5nQnVsbGV0cyA9IHRoaXMuY3VycmVudEhvbWluZ0dyb3VwO1xyXG4gICAgICAgIGlmICghaG9taW5nQnVsbGV0cyB8fCAhaG9taW5nQnVsbGV0cy5nZXRDaGlsZHJlbikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWhvbWluZ0J1bGxldHMuc2NlbmU/LnNjZW5lPy5pc0FjdGl2ZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEhvbWluZ0dyb3VwID0gdGhpcy5wbGF5ZXIud2VhcG9uLmdldEhvbWluZ0J1bGxldEdyb3VwKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGhvbWluZ0J1bGxldHMuZ2V0Q2hpbGRyZW4oKS5mb3JFYWNoKGJ1bGxldCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwcml0ZSA9IGJ1bGxldCBhcyBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuU3ByaXRlO1xyXG4gICAgICAgICAgICBpZiAoIXNwcml0ZS5hY3RpdmUgfHwgIXNwcml0ZS5ib2R5KSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBob21pbmdEYXRhID0gc3ByaXRlLmdldERhdGEoJ2hvbWluZ0RhdGEnKSBhcyBIb21pbmdCdWxsZXREYXRhO1xyXG4gICAgICAgICAgICBob21pbmdEYXRhLmRlbGF5IC09IHRoaXMuc2NlbmUuZ2FtZS5sb29wLmRlbHRhO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGhvbWluZ0RhdGEuZGVsYXkgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFob21pbmdEYXRhLnRhcmdldCB8fCAhaG9taW5nRGF0YS50YXJnZXQuYWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaG9taW5nRGF0YS50YXJnZXQgPSB0aGlzLmZpbmROZWFyZXN0VGFyZ2V0KHNwcml0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChob21pbmdEYXRhLnRhcmdldD8uYWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVIb21pbmdCZWhhdmlvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ByaXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBob21pbmdEYXRhLnRhcmdldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG9taW5nRGF0YS50dXJuUmF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG9taW5nRGF0YS5zcGVlZFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlVG9Ub3AgPSBQaGFzZXIuTWF0aC5BbmdsZS5CZXR3ZWVuKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUueCwgc3ByaXRlLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZS54LCAtMTAwXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50TW92ZUFuZ2xlID0gTWF0aC5hdGFuMihcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHNwcml0ZS5ib2R5IGFzIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Cb2R5KS52ZWxvY2l0eS55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoc3ByaXRlLmJvZHkgYXMgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkJvZHkpLnZlbG9jaXR5LnhcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld01vdmVBbmdsZSA9IFBoYXNlci5NYXRoLkFuZ2xlLlJvdGF0ZVRvKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50TW92ZUFuZ2xlLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGVUb1RvcCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvbWluZ0RhdGEudHVyblJhdGVcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHNwcml0ZS5ib2R5Py52ZWxvY2l0eS5zZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguY29zKG5ld01vdmVBbmdsZSkgKiBob21pbmdEYXRhLnNwZWVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnNpbihuZXdNb3ZlQW5nbGUpICogaG9taW5nRGF0YS5zcGVlZFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgc3ByaXRlLnNldFJvdGF0aW9uKG5ld01vdmVBbmdsZSArIE1hdGguUEkvMik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmROZWFyZXN0VGFyZ2V0KGJ1bGxldDogUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZSk6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGUgfCBudWxsIHtcclxuICAgICAgICBsZXQgbmVhcmVzdFRhcmdldDogUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZSB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIGxldCBtaW5EaXN0YW5jZSA9IEluZmluaXR5O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDEuINCf0YDQvtCy0LXRgNGP0LXQvCDQsNC60YLQuNCy0L3QvtCz0L4g0LHQvtGB0YHQsCAo0Y/QstC90L7QtSDQv9GA0LjQstC10LTQtdC90LjQtSDRgtC40L/QsClcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVCb3NzPy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgY29uc3QgYm9zc1Nwcml0ZSA9IHRoaXMuYWN0aXZlQm9zcyBhcyB1bmtub3duIGFzIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGU7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gUGhhc2VyLk1hdGguRGlzdGFuY2UuQmV0d2VlbihcclxuICAgICAgICAgICAgICAgIGJ1bGxldC54LCBidWxsZXQueSxcclxuICAgICAgICAgICAgICAgIGJvc3NTcHJpdGUueCwgYm9zc1Nwcml0ZS55XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IG1pbkRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5EaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgbmVhcmVzdFRhcmdldCA9IGJvc3NTcHJpdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gMi4g0J/RgNC+0LLQtdGA0Y/QtdC8INC+0LHRi9GH0L3Ri9GFINCy0YDQsNCz0L7QslxyXG4gICAgICAgIHRoaXMuc3Bhd25lck1hbmFnZXIuZ2V0QWxsU3Bhd25lcnMoKS5mb3JFYWNoKHNwYXduZXIgPT4ge1xyXG4gICAgICAgICAgICBzcGF3bmVyLnBoYXNlckdyb3VwLmdldENoaWxkcmVuKCkuZm9yRWFjaChlbmVteSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbmVteVNwcml0ZSA9IGVuZW15IGFzIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWVuZW15U3ByaXRlLmFjdGl2ZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IFBoYXNlci5NYXRoLkRpc3RhbmNlLkJldHdlZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgYnVsbGV0LngsIGJ1bGxldC55LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZW15U3ByaXRlLngsIGVuZW15U3ByaXRlLnlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IG1pbkRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluRGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBuZWFyZXN0VGFyZ2V0ID0gZW5lbXlTcHJpdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBuZWFyZXN0VGFyZ2V0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlSG9taW5nQnVsbGV0SGl0ID0gKGVuZW15T2JqOiB1bmtub3duLCBidWxsZXRPYmo6IHVua25vd24pOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuc2NlbmU/LnNjZW5lPy5pc0FjdGl2ZSgpKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgaG9taW5nR3JvdXAgPSB0aGlzLmN1cnJlbnRIb21pbmdHcm91cDtcclxuICAgICAgICBpZiAoIWhvbWluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGVuZW15ID0gZW5lbXlPYmogYXMgQmFzZUVuZW15O1xyXG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IGJ1bGxldE9iaiBhcyBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuU3ByaXRlO1xyXG5cclxuICAgICAgICBpZiAoIWVuZW15LmFjdGl2ZSB8fCAhYnVsbGV0LmFjdGl2ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBkYW1hZ2UgPSBidWxsZXQuZ2V0RGF0YSgnZGFtYWdlJykgfHwgMTtcclxuICAgICAgICBidWxsZXQuZGlzYWJsZUJvZHkodHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgZW5lbXkuY29sbGlkZXJDb21wb25lbnQuY29sbGlkZVdpdGhFbmVteVByb2plY3RpbGUoZGFtYWdlKTtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzLmVtaXQoQ1VTVE9NX0VWRU5UUy5FTkVNWV9ISVQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUhvbWluZ0JlaGF2aW9yKFxyXG4gICAgICAgIGJ1bGxldDogUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZSxcclxuICAgICAgICB0YXJnZXQ6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGUsXHJcbiAgICAgICAgdHVyblJhdGU6IG51bWJlcixcclxuICAgICAgICBzcGVlZDogbnVtYmVyXHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBhbmdsZVRvVGFyZ2V0ID0gUGhhc2VyLk1hdGguQW5nbGUuQmV0d2VlbihcclxuICAgICAgICAgICAgYnVsbGV0LngsIGJ1bGxldC55LFxyXG4gICAgICAgICAgICB0YXJnZXQueCwgdGFyZ2V0LnlcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCi0LXQutGD0YnQuNC5INGD0LPQvtC7INC00LLQuNC20LXQvdC40Y8g0L/Rg9C70LggKNC90LUg0YHQv9GA0LDQudGC0LAhKVxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRNb3ZlQW5nbGUgPSBNYXRoLmF0YW4yKFxyXG4gICAgICAgICAgICAoYnVsbGV0LmJvZHkgYXMgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkJvZHkpLnZlbG9jaXR5LnksXHJcbiAgICAgICAgICAgIChidWxsZXQuYm9keSBhcyBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuQm9keSkudmVsb2NpdHkueFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0J/Qu9Cw0LLQvdGL0Lkg0L/QvtCy0L7RgNC+0YIg0Log0YbQtdC70LhcclxuICAgICAgICBjb25zdCBuZXdNb3ZlQW5nbGUgPSBQaGFzZXIuTWF0aC5BbmdsZS5Sb3RhdGVUbyhcclxuICAgICAgICAgICAgY3VycmVudE1vdmVBbmdsZSwgXHJcbiAgICAgICAgICAgIGFuZ2xlVG9UYXJnZXQsIFxyXG4gICAgICAgICAgICB0dXJuUmF0ZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0J7QsdC90L7QstC70Y/QtdC8IHZlbG9jaXR5XHJcbiAgICAgICAgKGJ1bGxldC5ib2R5IGFzIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Cb2R5KS52ZWxvY2l0eS5zZXQoXHJcbiAgICAgICAgICAgIE1hdGguY29zKG5ld01vdmVBbmdsZSkgKiBzcGVlZCxcclxuICAgICAgICAgICAgTWF0aC5zaW4obmV3TW92ZUFuZ2xlKSAqIHNwZWVkXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQn9C+0LLQvtGA0LDRh9C40LLQsNC10Lwg0YHQv9GA0LDQudGCINCyINC90LDQv9GA0LDQstC70LXQvdC40Lgg0LTQstC40LbQtdC90LjRj1xyXG4gICAgICAgIGJ1bGxldC5zZXRSb3RhdGlvbihuZXdNb3ZlQW5nbGUgKyBNYXRoLlBJLzIpOyAvLyArOTDCsCDQtNC70Y8g0L/RgNCw0LLQuNC70YzQvdC+0Lkg0L7RgNC40LXQvdGC0LDRhtC40LhcclxuICAgIH1cclxuXHJcbiAgICBjbGVhbnVwKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQo9C00LDQu9C10L3QuNC1INC60L7Qu9C70LDQudC00LXRgNC+0LJcclxuICAgICAgICB0aGlzLmNvbGxpZGVycy5mb3JFYWNoKGNvbGxpZGVyID0+IHtcclxuICAgICAgICAgICAgY29sbGlkZXIuZGVzdHJveSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29sbGlkZXJzID0gW107XHJcblxyXG4gICAgICAgIC8vINCe0YfQuNGJ0LDQtdC8INCy0YHQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INC70LDQt9C10YDQsFxyXG4gICAgICAgIHRoaXMuYm9zc0xhc2VySGFuZGxlcnMuZm9yRWFjaCgoaGFuZGxlciwgYm9zcykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFudXBCb3NzTGFzZXJIYW5kbGVyKGJvc3MpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCe0YfQuNGJ0LDQtdC8INCy0YHQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC4IGhvbWluZy3Qv9GD0LvRjFxyXG4gICAgICAgIHRoaXMuYm9zc0hvbWluZ0hhbmRsZXJzLmZvckVhY2goKGhhbmRsZXIsIGJvc3MpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhbnVwQm9zc0hvbWluZ0hhbmRsZXIoYm9zcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5ib3NzTGFzZXJIYW5kbGVycy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuYm9zc0hvbWluZ0hhbmRsZXJzLmNsZWFyKCk7XHJcblxyXG4gICAgICAgIC8vINCe0YfQuNGB0YLQutCwINC+0YHQvdC+0LLQvdC+0LPQviDQvtCx0YDQsNCx0L7RgtGH0LjQutCwXHJcbiAgICAgICAgdGhpcy5zY2VuZS5ldmVudHMub2ZmKFBoYXNlci5TY2VuZXMuRXZlbnRzLlVQREFURSwgdGhpcy51cGRhdGVMYXNlckNvbGxpc2lvbnMsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuZXZlbnRzLm9mZihQaGFzZXIuU2NlbmVzLkV2ZW50cy5VUERBVEUsIHRoaXMudXBkYXRlSG9taW5nQnVsbGV0cywgdGhpcyk7XHJcblxyXG4gICAgICAgIC8vINCe0YLQv9C40YHRi9Cy0LDQtdC80YHRjyDQvtGCINGB0L7QsdGL0YLQuNC5XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5FTkVNWV9JTklULCB0aGlzLnNldHVwRW5lbXlDb2xsaXNpb25zLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9mZihDVVNUT01fRVZFTlRTLkJPU1NfSU5JVCwgdGhpcy5zZXR1cEJvc3NDb2xsaXNpb25zLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9mZihDVVNUT01fRVZFTlRTLkJPU1NfREVGRUFURUQsIHRoaXMuY2xlYW51cERlZmVhdGVkQm9zc0hhbmRsZXJzLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9mZihDVVNUT01fRVZFTlRTLldFQVBPTl9QT1dFUl9DSEFOR0VELCB0aGlzLmhhbmRsZVdlYXBvblBvd2VyQ2hhbmdlLCB0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5hY3RpdmVCb3NzID0gbnVsbDtcclxuICAgIH1cclxuXHJcbn0iXSwibmFtZXMiOlsiRXZlbnRCdXMiLCJDVVNUT01fRVZFTlRTIiwiQ09ORklHIiwiU2NvdXRFbmVteSIsIkNvbGxpc2lvbk1hbmFnZXIiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwicGxheWVyIiwic3Bhd25lck1hbmFnZXIiLCJldmVudEJ1cyIsImxhc2VyRGFtYWdlVGltZXIiLCJMQVNFUl9EQU1BR0VfQ09PTERPV04iLCJQTEFZRVJfV0VBUE9OX0NPTkZJRyIsImxhc2VyIiwiZmlyZVJhdGUiLCJib3NzTGFzZXJIYW5kbGVycyIsIk1hcCIsImJvc3NIb21pbmdIYW5kbGVycyIsImFjdGl2ZUJvc3MiLCJjb2xsaWRlcnMiLCJpc0FjdGl2ZSIsImN1cnJlbnRIb21pbmdHcm91cCIsImhhbmRsZUJvbWJCdWxsZXRDbGVhciIsImdldEFsbFNwYXduZXJzIiwiZm9yRWFjaCIsInNwYXduZXIiLCJwaGFzZXJHcm91cCIsImdldENoaWxkcmVuIiwiZW5lbXkiLCJiYXNlRW5lbXkiLCJidWxsZXRTcGF3bmVyIiwiYnVsbGV0Q2xlYXIiLCJoYW5kbGVCb21iRGFtYWdlVGljayIsImNhbWVyYSIsImNhbWVyYXMiLCJtYWluIiwic3ByaXRlIiwiYWN0aXZlIiwid29ybGRWaWV3IiwiY29udGFpbnMiLCJ4IiwieSIsImNvbGxpZGVyQ29tcG9uZW50IiwiY29sbGlkZVdpdGhFbmVteVByb2plY3RpbGUiLCJQTEFZRVJfQk9NQl9DT05GSUciLCJkYW1hZ2UiLCJib3NzU3ByaXRlIiwiZW1pdCIsIkJPU1NfSEVBTFRIX0NIQU5HRSIsImhhbmRsZVdlYXBvblBvd2VyQ2hhbmdlIiwiZGF0YSIsIndlYXBvbiIsImdldEhvbWluZ0J1bGxldEdyb3VwIiwic2V0dXBFbmVteUNvbGxpc2lvbnMiLCJwdXNoIiwicGh5c2ljcyIsImFkZCIsIm92ZXJsYXAiLCJnZXRHcm91cCIsInBsYXllck9iaiIsImJ1bGxldE9iaiIsImRlc3Ryb3lCdWxsZXQiLCJpc0ludnVsbmVyYWJsZSIsImNvbGxpZGVyIiwic2V0dXBCb3NzQ29sbGlzaW9ucyIsImJvc3MiLCJjbGVhbnVwRGVmZWF0ZWRCb3NzSGFuZGxlcnMiLCJib3NzT2JqIiwiaGVhbHRoQ29tcG9uZW50IiwiaXNEZWFkIiwiY29sbGlkZVdpdGhFbmVteVNoaXAiLCJkZXN0cm95Iiwid2VhcG9uR3JvdXAiLCJidWxsZXQiLCJnZXREYXRhIiwiRU5FTVlfSElUIiwibGFzZXJIYW5kbGVyIiwiaXNMYXNlckFjdGl2ZSIsImxhc2VyUmVjdCIsImxhc2VySGl0QXJlYSIsImJvc3NSZWN0IiwiZ2V0Qm91bmRzIiwiY2hlY2tMYXNlckJvc3NDb2xsaXNpb24iLCJsYXNlckRhbWFnZVBlclRpY2siLCJldmVudHMiLCJvbiIsIlBoYXNlciIsIlNjZW5lcyIsIkV2ZW50cyIsIlVQREFURSIsInNldCIsImRpc2FibGVCb2R5IiwiaG9taW5nSGFuZGxlciIsInVwZGF0ZUhvbWluZ0J1bGxldHMiLCJjbGVhbnVwQm9zc0xhc2VySGFuZGxlciIsImNsZWFudXBCb3NzSG9taW5nSGFuZGxlciIsImhhbmRsZVBsYXllckVuZW15Q29sbGlzaW9uIiwiZW5lbXlPYmoiLCJoYW5kbGVQbGF5ZXJCdWxsZXRIaXQiLCJ1cGRhdGVMYXNlckNvbGxpc2lvbnMiLCJ0aW1lIiwiZGVsdGEiLCJoYW5kbGVMYXNlckNvbGxpc2lvbnMiLCJlbmVteUdyb3VwcyIsIm1hcCIsImdyb3VwIiwiaGFuZGxlSG9taW5nQnVsbGV0SGl0IiwiaG9taW5nR3JvdXAiLCJzZXR1cEV2ZW50TGlzdGVuZXJzIiwiRU5FTVlfSU5JVCIsIkJPU1NfSU5JVCIsIkJPU1NfREVGRUFURUQiLCJXRUFQT05fUE9XRVJfQ0hBTkdFRCIsIlBMQVlFUl9CT01CX0FDVElWQVRFRCIsIlBMQVlFUl9CT01CX0RBTUFHRV9USUNLIiwic2V0dXBCYXNlQ29sbGlzaW9ucyIsIndvcmxkIiwicmlnaHQiLCJsZWZ0IiwiYm90dG9tIiwidG9wIiwiaGFuZGxlciIsImdldCIsIm9mZiIsImRlbGV0ZSIsImhvbWluZ0J1bGxldHMiLCJib2R5IiwiaG9taW5nRGF0YSIsImRlbGF5IiwiZ2FtZSIsImxvb3AiLCJ0YXJnZXQiLCJmaW5kTmVhcmVzdFRhcmdldCIsInVwZGF0ZUhvbWluZ0JlaGF2aW9yIiwidHVyblJhdGUiLCJzcGVlZCIsImFuZ2xlVG9Ub3AiLCJNYXRoIiwiQW5nbGUiLCJCZXR3ZWVuIiwiY3VycmVudE1vdmVBbmdsZSIsImF0YW4yIiwidmVsb2NpdHkiLCJuZXdNb3ZlQW5nbGUiLCJSb3RhdGVUbyIsImNvcyIsInNpbiIsInNldFJvdGF0aW9uIiwiUEkiLCJuZWFyZXN0VGFyZ2V0IiwibWluRGlzdGFuY2UiLCJJbmZpbml0eSIsImRpc3RhbmNlIiwiRGlzdGFuY2UiLCJlbmVteVNwcml0ZSIsImFuZ2xlVG9UYXJnZXQiLCJjbGVhbnVwIiwiY2xlYXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/managers/collision-manager.ts\n");

/***/ }),

/***/ "./src/game/managers/enemy-spawner-manager.ts":
/*!****************************************************!*\
  !*** ./src/game/managers/enemy-spawner-manager.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EnemySpawnerManager: () => (/* binding */ EnemySpawnerManager)\n/* harmony export */ });\n/* harmony import */ var _components_spawners_enemy_spawner_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/spawners/enemy-spawner-component */ \"./src/game/components/spawners/enemy-spawner-component.ts\");\n\nclass EnemySpawnerManager {\n    constructor(scene, eventBus){\n        this.spawners = new Map();\n        this.scene = scene;\n        this.eventBus = eventBus;\n    }\n    registerSpawner(enemyType, enemyClass) {\n        const spawner = new _components_spawners_enemy_spawner_component__WEBPACK_IMPORTED_MODULE_0__.EnemySpawnerComponent(this.scene, enemyClass, this.eventBus);\n        this.spawners.set(enemyType, spawner);\n        return spawner;\n    }\n    getSpawner(enemyType) {\n        return this.spawners.get(enemyType);\n    }\n    getAllSpawners() {\n        return Array.from(this.spawners.values());\n    }\n    cleanup() {\n        this.spawners.forEach((spawner)=>spawner.cleanup());\n        this.spawners.clear();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9tYW5hZ2Vycy9lbmVteS1zcGF3bmVyLW1hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDdUY7QUFHaEYsTUFBTUM7SUFLVEMsWUFBWUMsS0FBbUIsRUFBRUMsUUFBMkIsQ0FBRTthQUp0REMsV0FBK0MsSUFBSUM7UUFLdkQsSUFBSSxDQUFDSCxLQUFLLEdBQUdBO1FBQ2IsSUFBSSxDQUFDQyxRQUFRLEdBQUdBO0lBQ3BCO0lBRUFHLGdCQUFnQkMsU0FBaUIsRUFBRUMsVUFBc0IsRUFBeUI7UUFDOUUsTUFBTUMsVUFBVSxJQUFJViwrRkFBcUJBLENBQUMsSUFBSSxDQUFDRyxLQUFLLEVBQUVNLFlBQVksSUFBSSxDQUFDTCxRQUFRO1FBQy9FLElBQUksQ0FBQ0MsUUFBUSxDQUFDTSxHQUFHLENBQUNILFdBQVdFO1FBQzdCLE9BQU9BO0lBQ1g7SUFFQUUsV0FBV0osU0FBaUIsRUFBcUM7UUFDN0QsT0FBTyxJQUFJLENBQUNILFFBQVEsQ0FBQ1EsR0FBRyxDQUFDTDtJQUM3QjtJQUVBTSxpQkFBMEM7UUFDdEMsT0FBT0MsTUFBTUMsSUFBSSxDQUFDLElBQUksQ0FBQ1gsUUFBUSxDQUFDWSxNQUFNO0lBQzFDO0lBRUFDLFVBQWdCO1FBQ1osSUFBSSxDQUFDYixRQUFRLENBQUNjLE9BQU8sQ0FBQ1QsQ0FBQUEsVUFBV0EsUUFBUVEsT0FBTztRQUNoRCxJQUFJLENBQUNiLFFBQVEsQ0FBQ2UsS0FBSztJQUN2QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL21hbmFnZXJzL2VuZW15LXNwYXduZXItbWFuYWdlci50cz8wZmVmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50QnVzQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZXZlbnRzL2V2ZW50LWJ1cy1jb21wb25lbnRcIjtcclxuaW1wb3J0IHsgRW5lbXlTcGF3bmVyQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvc3Bhd25lcnMvZW5lbXktc3Bhd25lci1jb21wb25lbnRcIjtcclxuaW1wb3J0IHsgRW5lbXlDbGFzcyB9IGZyb20gXCIuLi90eXBlcy9pbnRlcmZhY2VzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRW5lbXlTcGF3bmVyTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIHNwYXduZXJzOiBNYXA8c3RyaW5nLCBFbmVteVNwYXduZXJDb21wb25lbnQ+ID0gbmV3IE1hcCgpO1xyXG4gICAgcHJpdmF0ZSBzY2VuZTogUGhhc2VyLlNjZW5lO1xyXG4gICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXNDb21wb25lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFBoYXNlci5TY2VuZSwgZXZlbnRCdXM6IEV2ZW50QnVzQ29tcG9uZW50KSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMgPSBldmVudEJ1cztcclxuICAgIH1cclxuXHJcbiAgICByZWdpc3RlclNwYXduZXIoZW5lbXlUeXBlOiBzdHJpbmcsIGVuZW15Q2xhc3M6IEVuZW15Q2xhc3MpOiBFbmVteVNwYXduZXJDb21wb25lbnQge1xyXG4gICAgICAgIGNvbnN0IHNwYXduZXIgPSBuZXcgRW5lbXlTcGF3bmVyQ29tcG9uZW50KHRoaXMuc2NlbmUsIGVuZW15Q2xhc3MsIHRoaXMuZXZlbnRCdXMpO1xyXG4gICAgICAgIHRoaXMuc3Bhd25lcnMuc2V0KGVuZW15VHlwZSwgc3Bhd25lcik7XHJcbiAgICAgICAgcmV0dXJuIHNwYXduZXI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3Bhd25lcihlbmVteVR5cGU6IHN0cmluZyk6IEVuZW15U3Bhd25lckNvbXBvbmVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Bhd25lcnMuZ2V0KGVuZW15VHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsU3Bhd25lcnMoKTogRW5lbXlTcGF3bmVyQ29tcG9uZW50W10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuc3Bhd25lcnMudmFsdWVzKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFudXAoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zcGF3bmVycy5mb3JFYWNoKHNwYXduZXIgPT4gc3Bhd25lci5jbGVhbnVwKCkpO1xyXG4gICAgICAgIHRoaXMuc3Bhd25lcnMuY2xlYXIoKTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJFbmVteVNwYXduZXJDb21wb25lbnQiLCJFbmVteVNwYXduZXJNYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJzY2VuZSIsImV2ZW50QnVzIiwic3Bhd25lcnMiLCJNYXAiLCJyZWdpc3RlclNwYXduZXIiLCJlbmVteVR5cGUiLCJlbmVteUNsYXNzIiwic3Bhd25lciIsInNldCIsImdldFNwYXduZXIiLCJnZXQiLCJnZXRBbGxTcGF3bmVycyIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImNsZWFudXAiLCJmb3JFYWNoIiwiY2xlYXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/managers/enemy-spawner-manager.ts\n");

/***/ }),

/***/ "./src/game/managers/item-manager.ts":
/*!*******************************************!*\
  !*** ./src/game/managers/item-manager.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ItemManager: () => (/* binding */ ItemManager)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _configs_items_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../configs/items-config */ \"./src/game/configs/items-config.ts\");\n/* harmony import */ var _entities_items_score_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../entities/items/score-item */ \"./src/game/entities/items/score-item.ts\");\n/* harmony import */ var _entities_items_power_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/items/power-item */ \"./src/game/entities/items/power-item.ts\");\n/* harmony import */ var _entities_items_health_item__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/items/health-item */ \"./src/game/entities/items/health-item.ts\");\n/* harmony import */ var _entities_items_bomb_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/items/bomb-item */ \"./src/game/entities/items/bomb-item.ts\");\n/* harmony import */ var _types_custom_events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../types/custom-events */ \"./src/game/types/custom-events.ts\");\n\n\n\n\n\n\n\nclass ItemManager {\n    constructor(scene, eventBus, player){\n        this.enemyKillCount = 0;\n        this.lastDropCount = 0;\n        this.handleEnemyDestroyed = (enemy)=>{\n            this.enemyKillCount++;\n            // Проверяем, есть ли у врага специфичный дроп\n            if (enemy.dropConfig) {\n                this.tryDropSpecificItems(enemy);\n                return;\n            }\n            // Проверяем глобальный дроп\n            this.tryDropGlobalItems(enemy.x, enemy.y);\n        };\n        this.handleBossPhaseChange = (boss)=>{\n            // Получаем предыдущую фазу\n            const previousPhaseIndex = boss.currentPhaseIndex - 1;\n            const phases = boss[\"_phases\"];\n            const previousPhaseData = phases[previousPhaseIndex];\n            // Очищаем предыдущие предметы\n            this.clearAllItems();\n            // Если фаза имеет свой дроп\n            if (previousPhaseData.dropItems) {\n                this.dropBossPhaseItems(boss, previousPhaseData);\n            } else {\n                // Стандартный дроп (если не указано иное)\n                this.dropDefaultBossItems(boss);\n            }\n        };\n        this.scene = scene;\n        this.eventBus = eventBus;\n        this.player = player;\n        this.itemsGroup = this.scene.physics.add.group({\n            classType: (phaser__WEBPACK_IMPORTED_MODULE_0___default().GameObjects).Sprite,\n            maxSize: 40,\n            runChildUpdate: true // Важно: для автоматического вызова update у предметов\n        });\n        this.setupEventListeners();\n        this.scene.events.on((phaser__WEBPACK_IMPORTED_MODULE_0___default().Scenes).Events.UPDATE, this.update, this);\n    }\n    setupEventListeners() {\n        this.eventBus.on(\"ENEMY_DESTROYED\", this.handleEnemyDestroyed, this);\n        this.eventBus.on(\"BOSS_PHASE_CHANGE\", this.handleBossPhaseChange, this);\n        this.eventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_6__.CUSTOM_EVENTS.BOSS_DEFEATED, this.handleBossPhaseChange, this);\n    }\n    update() {\n        if (!this.itemsGroup) return;\n        this.itemsGroup.getChildren().forEach((item)=>{\n            const sprite = item;\n            if (!sprite.active) return;\n            if (sprite.y > this.scene.scale.height + 50) {\n                sprite.destroy();\n                return;\n            }\n            if (this.player.canPickup(sprite)) {\n                const baseItem = sprite;\n                baseItem.onCollect(this.player);\n                sprite.destroy();\n            }\n        });\n    }\n    // Метод для очистки всех предметов\n    clearAllItems() {\n        if (!this.itemsGroup || this.itemsGroup.scene?.scene.isPaused()) return;\n        const children = this.itemsGroup?.getChildren().slice();\n        children.forEach((child)=>{\n            if (child instanceof (phaser__WEBPACK_IMPORTED_MODULE_0___default().GameObjects).GameObject) {\n                child.destroy(true);\n            }\n        });\n        this.itemsGroup.clear(true, true);\n    }\n    tryDropSpecificItems(enemy) {\n        enemy.dropConfig.items.forEach((item)=>{\n            if (phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.FloatBetween(0, 1) <= item.chance) {\n                this.dropItem(item.type, enemy.x, enemy.y);\n            }\n        });\n    }\n    tryDropGlobalItems(x, y) {\n        // Проверяем гарантированный дроп\n        for (const [type, config] of Object.entries(_configs_items_config__WEBPACK_IMPORTED_MODULE_1__.ITEMS_CONFIG)){\n            if (this.enemyKillCount - this.lastDropCount >= config.guaranteedDropEvery) {\n                this.dropItem(type, x, y);\n                this.lastDropCount = this.enemyKillCount;\n                return;\n            }\n        }\n        // Проверяем случайный дроп\n        for (const [type, config] of Object.entries(_configs_items_config__WEBPACK_IMPORTED_MODULE_1__.ITEMS_CONFIG)){\n            if (this.enemyKillCount - this.lastDropCount >= config.minDropInterval && phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.FloatBetween(0, 1) <= config.dropChance) {\n                this.dropItem(type, x, y);\n                this.lastDropCount = this.enemyKillCount;\n                break;\n            }\n        }\n    }\n    dropBossPhaseItems(boss, phase) {\n        const centerX = boss.x;\n        const centerY = boss.y - 100;\n        // Угловой сдвиг для каждого типа предметов\n        let typeAngleOffset = 0;\n        phase.dropItems?.forEach((config)=>{\n            for(let i = 0; i < config.count; i++){\n                const angle = i / config.count * Math.PI * 2 + typeAngleOffset;\n                const x = centerX + Math.cos(angle) * config.spread;\n                const y = centerY + Math.sin(angle) * config.spread;\n                this.dropItem(config.type, x, y);\n            }\n            // Сдвигаем угол для следующего типа предметов\n            typeAngleOffset += Math.PI / (phase.dropItems?.length || 1);\n        });\n    }\n    dropDefaultBossItems(boss) {\n        const centerX = boss.x;\n        const centerY = boss.y - 100;\n        const spread = 60;\n        // Разные углы для разных типов предметов\n        const dropConfigs = [\n            {\n                type: \"SCORE\",\n                count: 5,\n                angleOffset: 0\n            },\n            {\n                type: \"POWER\",\n                count: 5,\n                angleOffset: Math.PI / 5\n            }\n        ];\n        dropConfigs.forEach((config)=>{\n            for(let i = 0; i < config.count; i++){\n                const angle = i / config.count * Math.PI * 2 + config.angleOffset;\n                const x = centerX + Math.cos(angle) * spread;\n                const y = centerY + Math.sin(angle) * spread;\n                this.dropItem(config.type, x, y);\n            }\n        });\n    }\n    dropItem(type, x, y) {\n        let item;\n        switch(type){\n            case \"SCORE\":\n                item = new _entities_items_score_item__WEBPACK_IMPORTED_MODULE_2__.ScoreItem(this.scene, x, y);\n                break;\n            case \"POWER\":\n                item = new _entities_items_power_item__WEBPACK_IMPORTED_MODULE_3__.PowerItem(this.scene, x, y);\n                break;\n            case \"HEALTH\":\n                item = new _entities_items_health_item__WEBPACK_IMPORTED_MODULE_4__.HealthItem(this.scene, x, y);\n                break;\n            case \"BOMB\":\n                item = new _entities_items_bomb_item__WEBPACK_IMPORTED_MODULE_5__.BombItem(this.scene, x, y);\n                break;\n            default:\n                return;\n        }\n        item.init(this.eventBus);\n        this.itemsGroup.add(item);\n    }\n    cleanup() {\n        this.clearAllItems();\n        this.scene.events.off((phaser__WEBPACK_IMPORTED_MODULE_0___default().Scenes).Events.UPDATE, this.update, this);\n        this.eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_6__.CUSTOM_EVENTS.ENEMY_DESTROYED, this.handleEnemyDestroyed, this);\n        this.eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_6__.CUSTOM_EVENTS.BOSS_PHASE_CHANGE, this.handleBossPhaseChange, this);\n        this.eventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_6__.CUSTOM_EVENTS.BOSS_DEFEATED, this.handleBossPhaseChange, this);\n        if (this.itemsGroup) {\n            this.itemsGroup.destroy();\n            this.itemsGroup = null;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O2dCQUNJO1FBQ1I7UUFFQThCLEtBQUt5QyxJQUFJLENBQUMsSUFBSSxDQUFDakYsUUFBUTtRQUN2QixJQUFJLENBQUNxQixVQUFVLENBQUNFLEdBQUcsQ0FBQ2lCO0lBQ3hCO0lBRU8wQyxVQUFnQjtRQUNuQixJQUFJLENBQUNqRSxhQUFhO1FBQ2xCLElBQUksQ0FBQ2xCLEtBQUssQ0FBQ2dDLE1BQU0sQ0FBQ29ELEdBQUcsQ0FBQzdGLHNEQUFhLENBQUM0QyxNQUFNLENBQUNDLE1BQU0sRUFBRSxJQUFJLENBQUNDLE1BQU0sRUFBRSxJQUFJO1FBQ3BFLElBQUksQ0FBQ3BDLFFBQVEsQ0FBQ21GLEdBQUcsQ0FBQ3ZGLCtEQUFhQSxDQUFDd0YsZUFBZSxFQUFFLElBQUksQ0FBQ2hGLG9CQUFvQixFQUFFLElBQUk7UUFDaEYsSUFBSSxDQUFDSixRQUFRLENBQUNtRixHQUFHLENBQUN2RiwrREFBYUEsQ0FBQ3lGLGlCQUFpQixFQUFFLElBQUksQ0FBQzFFLHFCQUFxQixFQUFFLElBQUk7UUFDbkYsSUFBSSxDQUFDWCxRQUFRLENBQUNtRixHQUFHLENBQUN2RiwrREFBYUEsQ0FBQ3lDLGFBQWEsRUFBRSxJQUFJLENBQUMxQixxQkFBcUIsRUFBRSxJQUFJO1FBRS9FLElBQUksSUFBSSxDQUFDVSxVQUFVLEVBQUU7WUFDakIsSUFBSSxDQUFDQSxVQUFVLENBQUN3QixPQUFPO1lBQ3ZCLElBQUksQ0FBQ3hCLFVBQVUsR0FBRztRQUN0QjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvbWFuYWdlcnMvaXRlbS1tYW5hZ2VyLnRzPzE4YTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgeyBFdmVudEJ1c0NvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvZXZlbnRzL2V2ZW50LWJ1cy1jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBJVEVNU19DT05GSUcsIEl0ZW1Db25maWcgfSBmcm9tICcuLi9jb25maWdzL2l0ZW1zLWNvbmZpZyc7XHJcbmltcG9ydCB7IEJvc3NQaGFzZSwgSXRlbVR5cGUgfSBmcm9tICcuLi90eXBlcy9pbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgQmFzZUl0ZW0gfSBmcm9tICcuLi9lbnRpdGllcy9pdGVtcy9iYXNlLWl0ZW0nO1xyXG5pbXBvcnQgeyBTY29yZUl0ZW0gfSBmcm9tICcuLi9lbnRpdGllcy9pdGVtcy9zY29yZS1pdGVtJztcclxuaW1wb3J0IHsgUG93ZXJJdGVtIH0gZnJvbSAnLi4vZW50aXRpZXMvaXRlbXMvcG93ZXItaXRlbSc7XHJcbmltcG9ydCB7IEhlYWx0aEl0ZW0gfSBmcm9tICcuLi9lbnRpdGllcy9pdGVtcy9oZWFsdGgtaXRlbSc7XHJcbmltcG9ydCB7IEJvbWJJdGVtIH0gZnJvbSAnLi4vZW50aXRpZXMvaXRlbXMvYm9tYi1pdGVtJztcclxuaW1wb3J0IHsgQ1VTVE9NX0VWRU5UUyB9IGZyb20gJy4uL3R5cGVzL2N1c3RvbS1ldmVudHMnO1xyXG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tICcuLi9lbnRpdGllcy9wbGF5ZXInO1xyXG5pbXBvcnQgeyBCb3NzRW5lbXkgfSBmcm9tICcuLi9lbnRpdGllcy9lbmVtaWVzL2Jvc3Nlcy9iYXNlLWJvc3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEl0ZW1NYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgc2NlbmU6IFBoYXNlci5TY2VuZTtcclxuICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzQ29tcG9uZW50O1xyXG4gICAgcHJpdmF0ZSBpdGVtc0dyb3VwOiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuR3JvdXA7XHJcbiAgICBwcml2YXRlIHBsYXllcjogUGxheWVyO1xyXG4gICAgcHJpdmF0ZSBlbmVteUtpbGxDb3VudDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgbGFzdERyb3BDb3VudDogbnVtYmVyID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogUGhhc2VyLlNjZW5lLCBldmVudEJ1czogRXZlbnRCdXNDb21wb25lbnQsIHBsYXllcjogUGxheWVyKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMgPSBldmVudEJ1cztcclxuICAgICAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLml0ZW1zR3JvdXAgPSB0aGlzLnNjZW5lLnBoeXNpY3MuYWRkLmdyb3VwKHtcclxuICAgICAgICAgICAgY2xhc3NUeXBlOiBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlLFxyXG4gICAgICAgICAgICBtYXhTaXplOiA0MCwgLy/QvNCw0LrRgdC40LzRg9C8INC+0LHRgNCw0LHQsNGC0YvQstCw0LXQvNGL0YUg0L/RgNC10LTQvNC10YLQvtCyINC90LAg0Y3QutGA0LDQvdC1XHJcbiAgICAgICAgICAgIHJ1bkNoaWxkVXBkYXRlOiB0cnVlIC8vINCS0LDQttC90L46INC00LvRjyDQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQvtCz0L4g0LLRi9C30L7QstCwIHVwZGF0ZSDRgyDQv9GA0LXQtNC80LXRgtC+0LJcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNldHVwRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLnNjZW5lLmV2ZW50cy5vbihQaGFzZXIuU2NlbmVzLkV2ZW50cy5VUERBVEUsIHRoaXMudXBkYXRlLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldHVwRXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbignRU5FTVlfREVTVFJPWUVEJywgdGhpcy5oYW5kbGVFbmVteURlc3Ryb3llZCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbignQk9TU19QSEFTRV9DSEFOR0UnLCB0aGlzLmhhbmRsZUJvc3NQaGFzZUNoYW5nZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihDVVNUT01fRVZFTlRTLkJPU1NfREVGRUFURUQsIHRoaXMuaGFuZGxlQm9zc1BoYXNlQ2hhbmdlLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXRlbXNHcm91cCkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuaXRlbXNHcm91cC5nZXRDaGlsZHJlbigpLmZvckVhY2goKGl0ZW06IFBoYXNlci5HYW1lT2JqZWN0cy5HYW1lT2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwcml0ZSA9IGl0ZW0gYXMgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghc3ByaXRlLmFjdGl2ZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHNwcml0ZS55ID4gdGhpcy5zY2VuZS5zY2FsZS5oZWlnaHQgKyA1MCkge1xyXG4gICAgICAgICAgICAgICAgc3ByaXRlLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyLmNhblBpY2t1cChzcHJpdGUpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlSXRlbSA9IHNwcml0ZSBhcyB1bmtub3duIGFzIEJhc2VJdGVtO1xyXG4gICAgICAgICAgICAgICAgYmFzZUl0ZW0ub25Db2xsZWN0KHRoaXMucGxheWVyKTtcclxuICAgICAgICAgICAgICAgIHNwcml0ZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQnNC10YLQvtC0INC00LvRjyDQvtGH0LjRgdGC0LrQuCDQstGB0LXRhSDQv9GA0LXQtNC80LXRgtC+0LJcclxuICAgIHB1YmxpYyBjbGVhckFsbEl0ZW1zKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5pdGVtc0dyb3VwIHx8IHRoaXMuaXRlbXNHcm91cC5zY2VuZT8uc2NlbmUuaXNQYXVzZWQoKSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5pdGVtc0dyb3VwPy5nZXRDaGlsZHJlbigpLnNsaWNlKCk7XHJcbiAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFBoYXNlci5HYW1lT2JqZWN0cy5HYW1lT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5kZXN0cm95KHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pdGVtc0dyb3VwLmNsZWFyKHRydWUsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlRW5lbXlEZXN0cm95ZWQgPSAoZW5lbXk6IGFueSk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRoaXMuZW5lbXlLaWxsQ291bnQrKztcclxuICAgICAgICBcclxuICAgICAgICAvLyDQn9GA0L7QstC10YDRj9C10LwsINC10YHRgtGMINC70Lgg0YMg0LLRgNCw0LPQsCDRgdC/0LXRhtC40YTQuNGH0L3Ri9C5INC00YDQvtC/XHJcbiAgICAgICAgaWYgKGVuZW15LmRyb3BDb25maWcpIHtcclxuICAgICAgICAgICAgdGhpcy50cnlEcm9wU3BlY2lmaWNJdGVtcyhlbmVteSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDQs9C70L7QsdCw0LvRjNC90YvQuSDQtNGA0L7Qv1xyXG4gICAgICAgIHRoaXMudHJ5RHJvcEdsb2JhbEl0ZW1zKGVuZW15LngsIGVuZW15LnkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHRyeURyb3BTcGVjaWZpY0l0ZW1zKGVuZW15OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBlbmVteS5kcm9wQ29uZmlnLml0ZW1zLmZvckVhY2goKGl0ZW06IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoUGhhc2VyLk1hdGguRmxvYXRCZXR3ZWVuKDAsIDEpIDw9IGl0ZW0uY2hhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3BJdGVtKGl0ZW0udHlwZSwgZW5lbXkueCwgZW5lbXkueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRyeURyb3BHbG9iYWxJdGVtcyh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDQs9Cw0YDQsNC90YLQuNGA0L7QstCw0L3QvdGL0Lkg0LTRgNC+0L9cclxuICAgICAgICBmb3IgKGNvbnN0IFt0eXBlLCBjb25maWddIG9mIE9iamVjdC5lbnRyaWVzKElURU1TX0NPTkZJRykgYXMgW0l0ZW1UeXBlLCBJdGVtQ29uZmlnXVtdKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVuZW15S2lsbENvdW50IC0gdGhpcy5sYXN0RHJvcENvdW50ID49IGNvbmZpZy5ndWFyYW50ZWVkRHJvcEV2ZXJ5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3BJdGVtKHR5cGUsIHgsIHkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0RHJvcENvdW50ID0gdGhpcy5lbmVteUtpbGxDb3VudDtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INGB0LvRg9GH0LDQudC90YvQuSDQtNGA0L7Qv1xyXG4gICAgICAgIGZvciAoY29uc3QgW3R5cGUsIGNvbmZpZ10gb2YgT2JqZWN0LmVudHJpZXMoSVRFTVNfQ09ORklHKSBhcyBbSXRlbVR5cGUsIEl0ZW1Db25maWddW10pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZW5lbXlLaWxsQ291bnQgLSB0aGlzLmxhc3REcm9wQ291bnQgPj0gY29uZmlnLm1pbkRyb3BJbnRlcnZhbCAmJiBcclxuICAgICAgICAgICAgICAgIFBoYXNlci5NYXRoLkZsb2F0QmV0d2VlbigwLCAxKSA8PSBjb25maWcuZHJvcENoYW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wSXRlbSh0eXBlLCB4LCB5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdERyb3BDb3VudCA9IHRoaXMuZW5lbXlLaWxsQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZUJvc3NQaGFzZUNoYW5nZSA9IChib3NzOiBCb3NzRW5lbXkpOiB2b2lkID0+IHtcclxuICAgICAgICAvLyDQn9C+0LvRg9GH0LDQtdC8INC/0YDQtdC00YvQtNGD0YnRg9GOINGE0LDQt9GDXHJcbiAgICAgICAgY29uc3QgcHJldmlvdXNQaGFzZUluZGV4ID0gYm9zcy5jdXJyZW50UGhhc2VJbmRleCAtIDE7XHJcbiAgICAgICAgY29uc3QgcGhhc2VzID0gYm9zc1snX3BoYXNlcyddO1xyXG4gICAgICAgIGNvbnN0IHByZXZpb3VzUGhhc2VEYXRhID0gcGhhc2VzW3ByZXZpb3VzUGhhc2VJbmRleF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0J7Rh9C40YnQsNC10Lwg0L/RgNC10LTRi9C00YPRidC40LUg0L/RgNC10LTQvNC10YLRi1xyXG4gICAgICAgIHRoaXMuY2xlYXJBbGxJdGVtcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCV0YHQu9C4INGE0LDQt9CwINC40LzQtdC10YIg0YHQstC+0Lkg0LTRgNC+0L9cclxuICAgICAgICBpZiAocHJldmlvdXNQaGFzZURhdGEuZHJvcEl0ZW1zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJvcEJvc3NQaGFzZUl0ZW1zKGJvc3MsIHByZXZpb3VzUGhhc2VEYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDQodGC0LDQvdC00LDRgNGC0L3Ri9C5INC00YDQvtC/ICjQtdGB0LvQuCDQvdC1INGD0LrQsNC30LDQvdC+INC40L3QvtC1KVxyXG4gICAgICAgICAgICB0aGlzLmRyb3BEZWZhdWx0Qm9zc0l0ZW1zKGJvc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBkcm9wQm9zc1BoYXNlSXRlbXMoYm9zczogQm9zc0VuZW15LCBwaGFzZTogQm9zc1BoYXNlKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY2VudGVyWCA9IGJvc3MueDtcclxuICAgICAgICBjb25zdCBjZW50ZXJZID0gYm9zcy55IC0gMTAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCj0LPQu9C+0LLQvtC5INGB0LTQstC40LMg0LTQu9GPINC60LDQttC00L7Qs9C+INGC0LjQv9CwINC/0YDQtdC00LzQtdGC0L7QslxyXG4gICAgICAgIGxldCB0eXBlQW5nbGVPZmZzZXQgPSAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHBoYXNlLmRyb3BJdGVtcz8uZm9yRWFjaChjb25maWcgPT4ge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbmZpZy5jb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbmdsZSA9IChpIC8gY29uZmlnLmNvdW50KSAqIE1hdGguUEkgKiAyICsgdHlwZUFuZ2xlT2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeCA9IGNlbnRlclggKyBNYXRoLmNvcyhhbmdsZSkgKiBjb25maWcuc3ByZWFkO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IGNlbnRlclkgKyBNYXRoLnNpbihhbmdsZSkgKiBjb25maWcuc3ByZWFkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wSXRlbShjb25maWcudHlwZSwgeCwgeSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vINCh0LTQstC40LPQsNC10Lwg0YPQs9C+0Lsg0LTQu9GPINGB0LvQtdC00YPRjtGJ0LXQs9C+INGC0LjQv9CwINC/0YDQtdC00LzQtdGC0L7QslxyXG4gICAgICAgICAgICB0eXBlQW5nbGVPZmZzZXQgKz0gTWF0aC5QSSAvIChwaGFzZS5kcm9wSXRlbXM/Lmxlbmd0aCB8fCAxKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRyb3BEZWZhdWx0Qm9zc0l0ZW1zKGJvc3M6IEJvc3NFbmVteSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGNlbnRlclggPSBib3NzLng7XHJcbiAgICAgICAgY29uc3QgY2VudGVyWSA9IGJvc3MueSAtIDEwMDtcclxuICAgICAgICBjb25zdCBzcHJlYWQgPSA2MDtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQoNCw0LfQvdGL0LUg0YPQs9C70Ysg0LTQu9GPINGA0LDQt9C90YvRhSDRgtC40L/QvtCyINC/0YDQtdC00LzQtdGC0L7QslxyXG4gICAgICAgIGNvbnN0IGRyb3BDb25maWdzID0gW1xyXG4gICAgICAgICAgICB7IHR5cGU6ICdTQ09SRScgYXMgSXRlbVR5cGUsIGNvdW50OiA1LCBhbmdsZU9mZnNldDogMCB9LFxyXG4gICAgICAgICAgICB7IHR5cGU6ICdQT1dFUicgYXMgSXRlbVR5cGUsIGNvdW50OiA1LCBhbmdsZU9mZnNldDogTWF0aC5QSS81IH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGRyb3BDb25maWdzLmZvckVhY2goY29uZmlnID0+IHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25maWcuY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSAoaSAvIGNvbmZpZy5jb3VudCkgKiBNYXRoLlBJICogMiArIGNvbmZpZy5hbmdsZU9mZnNldDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBjZW50ZXJYICsgTWF0aC5jb3MoYW5nbGUpICogc3ByZWFkO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IGNlbnRlclkgKyBNYXRoLnNpbihhbmdsZSkgKiBzcHJlYWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3BJdGVtKGNvbmZpZy50eXBlLCB4LCB5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZHJvcEl0ZW0odHlwZTogSXRlbVR5cGUsIHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGl0ZW06IEJhc2VJdGVtO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdTQ09SRSc6XHJcbiAgICAgICAgICAgICAgICBpdGVtID0gbmV3IFNjb3JlSXRlbSh0aGlzLnNjZW5lLCB4LCB5KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdQT1dFUic6XHJcbiAgICAgICAgICAgICAgICBpdGVtID0gbmV3IFBvd2VySXRlbSh0aGlzLnNjZW5lLCB4LCB5KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdIRUFMVEgnOlxyXG4gICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBIZWFsdGhJdGVtKHRoaXMuc2NlbmUsIHgsIHkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0JPTUInOlxyXG4gICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBCb21iSXRlbSh0aGlzLnNjZW5lLCB4LCB5KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpdGVtLmluaXQodGhpcy5ldmVudEJ1cyk7XHJcbiAgICAgICAgdGhpcy5pdGVtc0dyb3VwLmFkZChpdGVtKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xlYW51cCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNsZWFyQWxsSXRlbXMoKTtcclxuICAgICAgICB0aGlzLnNjZW5lLmV2ZW50cy5vZmYoUGhhc2VyLlNjZW5lcy5FdmVudHMuVVBEQVRFLCB0aGlzLnVwZGF0ZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5FTkVNWV9ERVNUUk9ZRUQsIHRoaXMuaGFuZGxlRW5lbXlEZXN0cm95ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub2ZmKENVU1RPTV9FVkVOVFMuQk9TU19QSEFTRV9DSEFOR0UsIHRoaXMuaGFuZGxlQm9zc1BoYXNlQ2hhbmdlLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9mZihDVVNUT01fRVZFTlRTLkJPU1NfREVGRUFURUQsIHRoaXMuaGFuZGxlQm9zc1BoYXNlQ2hhbmdlLCB0aGlzKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5pdGVtc0dyb3VwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXNHcm91cC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXNHcm91cCA9IG51bGwhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJQaGFzZXIiLCJJVEVNU19DT05GSUciLCJTY29yZUl0ZW0iLCJQb3dlckl0ZW0iLCJIZWFsdGhJdGVtIiwiQm9tYkl0ZW0iLCJDVVNUT01fRVZFTlRTIiwiSXRlbU1hbmFnZXIiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwiZXZlbnRCdXMiLCJwbGF5ZXIiLCJlbmVteUtpbGxDb3VudCIsImxhc3REcm9wQ291bnQiLCJoYW5kbGVFbmVteURlc3Ryb3llZCIsImVuZW15IiwiZHJvcENvbmZpZyIsInRyeURyb3BTcGVjaWZpY0l0ZW1zIiwidHJ5RHJvcEdsb2JhbEl0ZW1zIiwieCIsInkiLCJoYW5kbGVCb3NzUGhhc2VDaGFuZ2UiLCJib3NzIiwicHJldmlvdXNQaGFzZUluZGV4IiwiY3VycmVudFBoYXNlSW5kZXgiLCJwaGFzZXMiLCJwcmV2aW91c1BoYXNlRGF0YSIsImNsZWFyQWxsSXRlbXMiLCJkcm9wSXRlbXMiLCJkcm9wQm9zc1BoYXNlSXRlbXMiLCJkcm9wRGVmYXVsdEJvc3NJdGVtcyIsIml0ZW1zR3JvdXAiLCJwaHlzaWNzIiwiYWRkIiwiZ3JvdXAiLCJjbGFzc1R5cGUiLCJHYW1lT2JqZWN0cyIsIlNwcml0ZSIsIm1heFNpemUiLCJydW5DaGlsZFVwZGF0ZSIsInNldHVwRXZlbnRMaXN0ZW5lcnMiLCJldmVudHMiLCJvbiIsIlNjZW5lcyIsIkV2ZW50cyIsIlVQREFURSIsInVwZGF0ZSIsIkJPU1NfREVGRUFURUQiLCJnZXRDaGlsZHJlbiIsImZvckVhY2giLCJpdGVtIiwic3ByaXRlIiwiYWN0aXZlIiwic2NhbGUiLCJoZWlnaHQiLCJkZXN0cm95IiwiY2FuUGlja3VwIiwiYmFzZUl0ZW0iLCJvbkNvbGxlY3QiLCJpc1BhdXNlZCIsImNoaWxkcmVuIiwic2xpY2UiLCJjaGlsZCIsIkdhbWVPYmplY3QiLCJjbGVhciIsIml0ZW1zIiwiTWF0aCIsIkZsb2F0QmV0d2VlbiIsImNoYW5jZSIsImRyb3BJdGVtIiwidHlwZSIsImNvbmZpZyIsIk9iamVjdCIsImVudHJpZXMiLCJndWFyYW50ZWVkRHJvcEV2ZXJ5IiwibWluRHJvcEludGVydmFsIiwiZHJvcENoYW5jZSIsInBoYXNlIiwiY2VudGVyWCIsImNlbnRlclkiLCJ0eXBlQW5nbGVPZmZzZXQiLCJpIiwiY291bnQiLCJhbmdsZSIsIlBJIiwiY29zIiwic3ByZWFkIiwic2luIiwibGVuZ3RoIiwiZHJvcENvbmZpZ3MiLCJhbmdsZU9mZnNldCIsImluaXQiLCJjbGVhbnVwIiwib2ZmIiwiRU5FTVlfREVTVFJPWUVEIiwiQk9TU19QSEFTRV9DSEFOR0UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/managers/item-manager.ts\n");

/***/ }),

/***/ "./src/game/managers/level-manager.ts":
/*!********************************************!*\
  !*** ./src/game/managers/level-manager.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LevelManager: () => (/* binding */ LevelManager)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../event-bus */ \"./src/game/event-bus.ts\");\n/* harmony import */ var _types_custom_events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _entities_enemies_bosses_first_boss_enemy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/enemies/bosses/first-boss-enemy */ \"./src/game/entities/enemies/bosses/first-boss-enemy.ts\");\n/* harmony import */ var _entities_ui_boss_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/ui/boss-ui */ \"./src/game/entities/ui/boss-ui.ts\");\n\n\n\n\n\nclass LevelManager {\n    constructor(scene, levels){\n        this.currentLevel = 0;\n        this.currentWave = 0;\n        this.enemiesAlive = 0;\n        this.hasLimitedSpawners = false;\n        this.scene = scene;\n        this.levels = levels;\n        this.levelsCount = levels.length;\n        this.setupEventListeners();\n        scene.events.once((phaser__WEBPACK_IMPORTED_MODULE_0___default().Scenes).Events.CREATE, ()=>{\n            this.playerRef = scene.registry.get(\"player\");\n        });\n        this.bossUI = new _entities_ui_boss_ui__WEBPACK_IMPORTED_MODULE_4__.BossUI(this.scene);\n    }\n    startLevel(levelIndex) {\n        this.currentLevel = levelIndex;\n        this.currentWave = 0;\n        this.startWave();\n    }\n    startWave() {\n        this.waveConfig = this.levels[this.currentLevel].waves[this.currentWave];\n        const initialDelay = this.waveConfig.initialDelay || 0;\n        if (initialDelay > 0) {\n            this.scene.time.delayedCall(initialDelay, ()=>{\n                this.startWaveImmediately();\n            });\n        } else {\n            this.startWaveImmediately();\n        }\n    }\n    startWaveImmediately() {\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.RESET_ALL_SPAWNERS);\n        this.waveConfig = this.levels[this.currentLevel].waves[this.currentWave];\n        this.enemiesAlive = 0;\n        // Проверяем, есть ли спавнеры с ограниченным количеством врагов\n        this.hasLimitedSpawners = this.waveConfig.spawners.some((spawner)=>spawner.count !== undefined);\n        console.log(`Starting wave ${this.currentWave + 1} of level ${this.currentLevel + 1}`);\n        // Подписываемся на события создания и уничтожения врагов\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.ENEMY_INIT, this.onEnemySpawned, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.ENEMY_DESTROYED, this.onEnemyDestroyed, this);\n        this.waveConfig.spawners.forEach((spawnerConfig)=>{\n            _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.START_SPAWNER, spawnerConfig);\n        });\n        this.waveTimer = this.scene.time.delayedCall(this.waveConfig.duration, ()=>{\n            this.endWave(this.waveConfig.delayAfter);\n        });\n    }\n    onEnemySpawned() {\n        this.enemiesAlive++;\n    }\n    onEnemyDestroyed() {\n        this.enemiesAlive--;\n        // Для волн с ограниченным количеством врагов проверяем завершение\n        if (this.hasLimitedSpawners && this.enemiesAlive <= 0) {\n            this.earlyWaveCompletion();\n        }\n    }\n    earlyWaveCompletion() {\n        // Отменяем текущий таймер волны, если он есть\n        if (this.waveTimer) {\n            this.waveTimer.destroy();\n        }\n        // Завершаем волну досрочно\n        this.endWave(this.waveConfig.delayAfter);\n    }\n    endWave(delayAfter) {\n        // Отписываемся от событий врагов\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.ENEMY_INIT, this.onEnemySpawned, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.ENEMY_DESTROYED, this.onEnemyDestroyed, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.STOP_ALL_SPAWNERS);\n        if (this.currentWave < this.levels[this.currentLevel].waves.length - 1) {\n            this.currentWave++;\n            this.scene.time.delayedCall(delayAfter, this.startWave, [], this);\n        } else {\n            this.scene.time.delayedCall(delayAfter, this.startBossFight, [], this);\n        }\n    }\n    startBossFight() {\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.RESET_ALL_SPAWNERS);\n        const bossConfig = this.levels[this.currentLevel].boss;\n        if (!bossConfig) {\n            this.levelComplete();\n            return;\n        }\n        this.currentBoss = this.createBoss(bossConfig.enemyType);\n        if (!this.currentBoss) return;\n        this.currentBoss.init(_event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus, ()=>this.playerRef);\n        if (this.bossUI) {\n            this.bossUI.setBoss(this.currentBoss);\n        }\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.BOSS_INIT, this.currentBoss);\n    }\n    createBoss(type) {\n        switch(type){\n            case \"firstBoss\":\n                return new _entities_enemies_bosses_first_boss_enemy__WEBPACK_IMPORTED_MODULE_3__.FirstBoss(this.scene, this.scene.scale.width / 2, -100);\n            default:\n                console.error(`Unknown boss type: ${type}`);\n                return null;\n        }\n    }\n    levelComplete() {\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.LEVEL_COMPLETE, {\n            level: this.currentLevel\n        });\n    }\n    setupEventListeners() {\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.BOSS_DEFEATED, ()=>{\n            if (this.bossUI) {\n                this.bossUI.destroy();\n                this.bossUI = new _entities_ui_boss_ui__WEBPACK_IMPORTED_MODULE_4__.BossUI(this.scene);\n            }\n            this.levelComplete();\n        });\n    }\n    cleanup() {\n        if (this.waveTimer) {\n            this.waveTimer.destroy();\n        }\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_2__.CUSTOM_EVENTS.BOSS_DEFEATED);\n        if (this.bossUI) {\n            this.bossUI.destroy();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxnREFBUUEsQ0FBQ2lDLElBQUksQ0FBQ2hDLCtEQUFhQSxDQUFDdUUsY0FBYyxFQUFFO1lBQ3hDQyxPQUFPLElBQUksQ0FBQ2pFLFlBQVk7UUFDNUI7SUFDSjtJQUVRTSxzQkFBc0I7UUFDMUJkLGdEQUFRQSxDQUFDMEMsRUFBRSxDQUFDekMsK0RBQWFBLENBQUN5RSxhQUFhLEVBQUU7WUFDckMsSUFBSSxJQUFJLENBQUNuRCxNQUFNLEVBQUU7Z0JBQ2IsSUFBSSxDQUFDQSxNQUFNLENBQUNnQyxPQUFPO2dCQUNuQixJQUFJLENBQUNoQyxNQUFNLEdBQUcsSUFBSXBCLHdEQUFNQSxDQUFDLElBQUksQ0FBQ0csS0FBSztZQUN2QztZQUNBLElBQUksQ0FBQ3VELGFBQWE7UUFDdEI7SUFDSjtJQUVBYyxVQUFVO1FBQ04sSUFBSSxJQUFJLENBQUN6QixTQUFTLEVBQUU7WUFDaEIsSUFBSSxDQUFDQSxTQUFTLENBQUNLLE9BQU87UUFDMUI7UUFDQXZELGdEQUFRQSxDQUFDd0QsR0FBRyxDQUFDdkQsK0RBQWFBLENBQUN5RSxhQUFhO1FBQ3hDLElBQUksSUFBSSxDQUFDbkQsTUFBTSxFQUFFO1lBQ2IsSUFBSSxDQUFDQSxNQUFNLENBQUNnQyxPQUFPO1FBQ3ZCO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9tYW5hZ2Vycy9sZXZlbC1tYW5hZ2VyLnRzP2Q1MzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJy4uL2V2ZW50LWJ1cyc7XHJcbmltcG9ydCB7IExldmVsQ29uZmlnLCBTcGF3bmVyQ29uZmlnLCBXYXZlQ29uZmlnICB9IGZyb20gJy4uL3R5cGVzL2ludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBDVVNUT01fRVZFTlRTIH0gZnJvbSAnLi4vdHlwZXMvY3VzdG9tLWV2ZW50cyc7XHJcbmltcG9ydCB7IEJvc3NFbmVteSB9IGZyb20gJy4uL2VudGl0aWVzL2VuZW1pZXMvYm9zc2VzL2Jhc2UtYm9zcyc7XHJcbmltcG9ydCB7IEZpcnN0Qm9zcyB9IGZyb20gJy4uL2VudGl0aWVzL2VuZW1pZXMvYm9zc2VzL2ZpcnN0LWJvc3MtZW5lbXknO1xyXG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tICcuLi9lbnRpdGllcy9wbGF5ZXInO1xyXG5pbXBvcnQgeyBCb3NzVUkgfSBmcm9tICcuLi9lbnRpdGllcy91aS9ib3NzLXVpJztcclxuXHJcbmV4cG9ydCBjbGFzcyBMZXZlbE1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBzY2VuZTogUGhhc2VyLlNjZW5lO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50TGV2ZWwgPSAwO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50V2F2ZSA9IDA7XHJcbiAgICBwcml2YXRlIGxldmVsczogTGV2ZWxDb25maWdbXTtcclxuICAgIHByaXZhdGUgd2F2ZVRpbWVyPzogUGhhc2VyLlRpbWUuVGltZXJFdmVudDtcclxuICAgIHByaXZhdGUgY3VycmVudEJvc3M/OiBCb3NzRW5lbXkgfCBudWxsO1xyXG4gICAgcHJpdmF0ZSBwbGF5ZXJSZWY/OiBQbGF5ZXI7XHJcbiAgICBwcml2YXRlIGJvc3NVST86IEJvc3NVSTtcclxuICAgIHByaXZhdGUgZW5lbWllc0FsaXZlID0gMDtcclxuICAgIHByaXZhdGUgd2F2ZUNvbmZpZz86IFdhdmVDb25maWc7XHJcbiAgICBwdWJsaWMgbGV2ZWxzQ291bnQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgaGFzTGltaXRlZFNwYXduZXJzOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFBoYXNlci5TY2VuZSwgbGV2ZWxzOiBMZXZlbENvbmZpZ1tdKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMubGV2ZWxzID0gbGV2ZWxzO1xyXG4gICAgICAgIHRoaXMubGV2ZWxzQ291bnQgPSBsZXZlbHMubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHNjZW5lLmV2ZW50cy5vbmNlKFBoYXNlci5TY2VuZXMuRXZlbnRzLkNSRUFURSwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllclJlZiA9IHNjZW5lLnJlZ2lzdHJ5LmdldCgncGxheWVyJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5ib3NzVUkgPSBuZXcgQm9zc1VJKHRoaXMuc2NlbmUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0TGV2ZWwobGV2ZWxJbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TGV2ZWwgPSBsZXZlbEluZGV4O1xyXG4gICAgICAgIHRoaXMuY3VycmVudFdhdmUgPSAwO1xyXG4gICAgICAgIHRoaXMuc3RhcnRXYXZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGFydFdhdmUoKSB7XHJcbiAgICAgICAgdGhpcy53YXZlQ29uZmlnID0gdGhpcy5sZXZlbHNbdGhpcy5jdXJyZW50TGV2ZWxdLndhdmVzW3RoaXMuY3VycmVudFdhdmVdO1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxEZWxheSA9IHRoaXMud2F2ZUNvbmZpZy5pbml0aWFsRGVsYXkgfHwgMDtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoaW5pdGlhbERlbGF5ID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnRpbWUuZGVsYXllZENhbGwoaW5pdGlhbERlbGF5LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0V2F2ZUltbWVkaWF0ZWx5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRXYXZlSW1tZWRpYXRlbHkoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGFydFdhdmVJbW1lZGlhdGVseSgpIHtcclxuICAgICAgICBFdmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuUkVTRVRfQUxMX1NQQVdORVJTKTtcclxuICAgICAgICB0aGlzLndhdmVDb25maWcgPSB0aGlzLmxldmVsc1t0aGlzLmN1cnJlbnRMZXZlbF0ud2F2ZXNbdGhpcy5jdXJyZW50V2F2ZV07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5lbmVtaWVzQWxpdmUgPSAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0LXRgdGC0Ywg0LvQuCDRgdC/0LDQstC90LXRgNGLINGBINC+0LPRgNCw0L3QuNGH0LXQvdC90YvQvCDQutC+0LvQuNGH0LXRgdGC0LLQvtC8INCy0YDQsNCz0L7QslxyXG4gICAgICAgIHRoaXMuaGFzTGltaXRlZFNwYXduZXJzID0gdGhpcy53YXZlQ29uZmlnLnNwYXduZXJzLnNvbWUoXHJcbiAgICAgICAgICAgIChzcGF3bmVyOiBTcGF3bmVyQ29uZmlnKSA9PiBzcGF3bmVyLmNvdW50ICE9PSB1bmRlZmluZWRcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBTdGFydGluZyB3YXZlICR7dGhpcy5jdXJyZW50V2F2ZSArIDF9IG9mIGxldmVsICR7dGhpcy5jdXJyZW50TGV2ZWwgKyAxfWApO1xyXG5cclxuICAgICAgICAvLyDQn9C+0LTQv9C40YHRi9Cy0LDQtdC80YHRjyDQvdCwINGB0L7QsdGL0YLQuNGPINGB0L7Qt9C00LDQvdC40Y8g0Lgg0YPQvdC40YfRgtC+0LbQtdC90LjRjyDQstGA0LDQs9C+0LJcclxuICAgICAgICBFdmVudEJ1cy5vbihDVVNUT01fRVZFTlRTLkVORU1ZX0lOSVQsIHRoaXMub25FbmVteVNwYXduZWQsIHRoaXMpO1xyXG4gICAgICAgIEV2ZW50QnVzLm9uKENVU1RPTV9FVkVOVFMuRU5FTVlfREVTVFJPWUVELCB0aGlzLm9uRW5lbXlEZXN0cm95ZWQsIHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLndhdmVDb25maWcuc3Bhd25lcnMuZm9yRWFjaCgoc3Bhd25lckNvbmZpZzogU3Bhd25lckNvbmZpZykgPT4ge1xyXG4gICAgICAgICAgICBFdmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuU1RBUlRfU1BBV05FUiwgc3Bhd25lckNvbmZpZyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMud2F2ZVRpbWVyID0gdGhpcy5zY2VuZS50aW1lLmRlbGF5ZWRDYWxsKHRoaXMud2F2ZUNvbmZpZy5kdXJhdGlvbiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVuZFdhdmUodGhpcy53YXZlQ29uZmlnIS5kZWxheUFmdGVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uRW5lbXlTcGF3bmVkKCkge1xyXG4gICAgICAgIHRoaXMuZW5lbWllc0FsaXZlKys7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbkVuZW15RGVzdHJveWVkKCkge1xyXG4gICAgICAgIHRoaXMuZW5lbWllc0FsaXZlLS07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0JTQu9GPINCy0L7Qu9C9INGBINC+0LPRgNCw0L3QuNGH0LXQvdC90YvQvCDQutC+0LvQuNGH0LXRgdGC0LLQvtC8INCy0YDQsNCz0L7QsiDQv9GA0L7QstC10YDRj9C10Lwg0LfQsNCy0LXRgNGI0LXQvdC40LVcclxuICAgICAgICBpZiAodGhpcy5oYXNMaW1pdGVkU3Bhd25lcnMgJiYgdGhpcy5lbmVtaWVzQWxpdmUgPD0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmVhcmx5V2F2ZUNvbXBsZXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlYXJseVdhdmVDb21wbGV0aW9uKCkge1xyXG4gICAgICAgIC8vINCe0YLQvNC10L3Rj9C10Lwg0YLQtdC60YPRidC40Lkg0YLQsNC50LzQtdGAINCy0L7Qu9C90YssINC10YHQu9C4INC+0L0g0LXRgdGC0YxcclxuICAgICAgICBpZiAodGhpcy53YXZlVGltZXIpIHtcclxuICAgICAgICAgICAgdGhpcy53YXZlVGltZXIuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDQl9Cw0LLQtdGA0YjQsNC10Lwg0LLQvtC70L3RgyDQtNC+0YHRgNC+0YfQvdC+XHJcbiAgICAgICAgdGhpcy5lbmRXYXZlKHRoaXMud2F2ZUNvbmZpZyEuZGVsYXlBZnRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbmRXYXZlKGRlbGF5QWZ0ZXI6IG51bWJlcikge1xyXG4gICAgICAgIC8vINCe0YLQv9C40YHRi9Cy0LDQtdC80YHRjyDQvtGCINGB0L7QsdGL0YLQuNC5INCy0YDQsNCz0L7QslxyXG4gICAgICAgIEV2ZW50QnVzLm9mZihDVVNUT01fRVZFTlRTLkVORU1ZX0lOSVQsIHRoaXMub25FbmVteVNwYXduZWQsIHRoaXMpO1xyXG4gICAgICAgIEV2ZW50QnVzLm9mZihDVVNUT01fRVZFTlRTLkVORU1ZX0RFU1RST1lFRCwgdGhpcy5vbkVuZW15RGVzdHJveWVkLCB0aGlzKTtcclxuXHJcbiAgICAgICAgRXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLlNUT1BfQUxMX1NQQVdORVJTKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFdhdmUgPCB0aGlzLmxldmVsc1t0aGlzLmN1cnJlbnRMZXZlbF0ud2F2ZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRXYXZlKys7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUudGltZS5kZWxheWVkQ2FsbChkZWxheUFmdGVyLCB0aGlzLnN0YXJ0V2F2ZSwgW10sIHRoaXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUudGltZS5kZWxheWVkQ2FsbChkZWxheUFmdGVyLCB0aGlzLnN0YXJ0Qm9zc0ZpZ2h0LCBbXSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhcnRCb3NzRmlnaHQoKSB7XHJcbiAgICAgICAgRXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLlJFU0VUX0FMTF9TUEFXTkVSUyk7XHJcbiAgICAgICAgY29uc3QgYm9zc0NvbmZpZyA9IHRoaXMubGV2ZWxzW3RoaXMuY3VycmVudExldmVsXS5ib3NzO1xyXG4gICAgICAgIGlmICghYm9zc0NvbmZpZykge1xyXG4gICAgICAgICAgICB0aGlzLmxldmVsQ29tcGxldGUoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50Qm9zcyA9IHRoaXMuY3JlYXRlQm9zcyhib3NzQ29uZmlnLmVuZW15VHlwZSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRCb3NzKSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudEJvc3MuaW5pdChFdmVudEJ1cywgKCkgPT4gdGhpcy5wbGF5ZXJSZWYpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ib3NzVUkpIHtcclxuICAgICAgICAgICAgdGhpcy5ib3NzVUkuc2V0Qm9zcyh0aGlzLmN1cnJlbnRCb3NzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEV2ZW50QnVzLmVtaXQoQ1VTVE9NX0VWRU5UUy5CT1NTX0lOSVQsIHRoaXMuY3VycmVudEJvc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQm9zcyh0eXBlOiBzdHJpbmcpOiBCb3NzRW5lbXkgfCBudWxsIHtcclxuICAgICAgICBzd2l0Y2godHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdmaXJzdEJvc3MnOiBcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmlyc3RCb3NzKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zY2FsZS53aWR0aCAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgLTEwMFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZGVmYXVsdDogXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBVbmtub3duIGJvc3MgdHlwZTogJHt0eXBlfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbGV2ZWxDb21wbGV0ZSgpIHtcclxuICAgICAgICBFdmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuTEVWRUxfQ09NUExFVEUsIHtcclxuICAgICAgICAgICAgbGV2ZWw6IHRoaXMuY3VycmVudExldmVsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIEV2ZW50QnVzLm9uKENVU1RPTV9FVkVOVFMuQk9TU19ERUZFQVRFRCwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ib3NzVUkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9zc1VJLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9zc1VJID0gbmV3IEJvc3NVSSh0aGlzLnNjZW5lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxldmVsQ29tcGxldGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhbnVwKCkge1xyXG4gICAgICAgIGlmICh0aGlzLndhdmVUaW1lcikge1xyXG4gICAgICAgICAgICB0aGlzLndhdmVUaW1lci5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEV2ZW50QnVzLm9mZihDVVNUT01fRVZFTlRTLkJPU1NfREVGRUFURUQpO1xyXG4gICAgICAgIGlmICh0aGlzLmJvc3NVSSkge1xyXG4gICAgICAgICAgICB0aGlzLmJvc3NVSS5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIlBoYXNlciIsIkV2ZW50QnVzIiwiQ1VTVE9NX0VWRU5UUyIsIkZpcnN0Qm9zcyIsIkJvc3NVSSIsIkxldmVsTWFuYWdlciIsImNvbnN0cnVjdG9yIiwic2NlbmUiLCJsZXZlbHMiLCJjdXJyZW50TGV2ZWwiLCJjdXJyZW50V2F2ZSIsImVuZW1pZXNBbGl2ZSIsImhhc0xpbWl0ZWRTcGF3bmVycyIsImxldmVsc0NvdW50IiwibGVuZ3RoIiwic2V0dXBFdmVudExpc3RlbmVycyIsImV2ZW50cyIsIm9uY2UiLCJTY2VuZXMiLCJFdmVudHMiLCJDUkVBVEUiLCJwbGF5ZXJSZWYiLCJyZWdpc3RyeSIsImdldCIsImJvc3NVSSIsInN0YXJ0TGV2ZWwiLCJsZXZlbEluZGV4Iiwic3RhcnRXYXZlIiwid2F2ZUNvbmZpZyIsIndhdmVzIiwiaW5pdGlhbERlbGF5IiwidGltZSIsImRlbGF5ZWRDYWxsIiwic3RhcnRXYXZlSW1tZWRpYXRlbHkiLCJlbWl0IiwiUkVTRVRfQUxMX1NQQVdORVJTIiwic3Bhd25lcnMiLCJzb21lIiwic3Bhd25lciIsImNvdW50IiwidW5kZWZpbmVkIiwiY29uc29sZSIsImxvZyIsIm9uIiwiRU5FTVlfSU5JVCIsIm9uRW5lbXlTcGF3bmVkIiwiRU5FTVlfREVTVFJPWUVEIiwib25FbmVteURlc3Ryb3llZCIsImZvckVhY2giLCJzcGF3bmVyQ29uZmlnIiwiU1RBUlRfU1BBV05FUiIsIndhdmVUaW1lciIsImR1cmF0aW9uIiwiZW5kV2F2ZSIsImRlbGF5QWZ0ZXIiLCJlYXJseVdhdmVDb21wbGV0aW9uIiwiZGVzdHJveSIsIm9mZiIsIlNUT1BfQUxMX1NQQVdORVJTIiwic3RhcnRCb3NzRmlnaHQiLCJib3NzQ29uZmlnIiwiYm9zcyIsImxldmVsQ29tcGxldGUiLCJjdXJyZW50Qm9zcyIsImNyZWF0ZUJvc3MiLCJlbmVteVR5cGUiLCJpbml0Iiwic2V0Qm9zcyIsIkJPU1NfSU5JVCIsInR5cGUiLCJzY2FsZSIsIndpZHRoIiwiZXJyb3IiLCJMRVZFTF9DT01QTEVURSIsImxldmVsIiwiQk9TU19ERUZFQVRFRCIsImNsZWFudXAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/managers/level-manager.ts\n");

/***/ }),

/***/ "./src/game/managers/local-storage-manager.ts":
/*!****************************************************!*\
  !*** ./src/game/managers/local-storage-manager.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocalStorageManager: () => (/* binding */ LocalStorageManager)\n/* harmony export */ });\nconst SETTINGS_KEY = \"game_settings\";\nconst HIGHSCORES_KEY = \"game_highscores\";\nclass LocalStorageManager {\n    // Загрузка настроек\n    static loadSettings() {\n        const defaultSettings = this.getDefaultConfig();\n        try {\n            const saved = localStorage.getItem(SETTINGS_KEY);\n            return saved ? {\n                ...defaultSettings,\n                ...JSON.parse(saved)\n            } : defaultSettings;\n        } catch (e) {\n            console.error(\"Failed to load settings\", e);\n            return defaultSettings;\n        }\n    }\n    static getDefaultConfig() {\n        return {\n            musicVolume: 0.5,\n            sfxVolume: 0.1,\n            showFPS: true,\n            weaponType: \"wide\"\n        };\n    }\n    // Сохранение настроек\n    static saveSettings(settings) {\n        try {\n            localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));\n        } catch (e) {\n            console.error(\"Failed to save settings\", e);\n        }\n    }\n    // Загрузка таблицы рекордов\n    static loadHighScores() {\n        const defaultHighScores = Array(10).fill(null).map((_, i)=>({\n                name: `NoEntry`,\n                score: (10 - i) * 1000,\n                level: 10 - i >= 3 ? \"All\" : 10 - i,\n                date: new Date(Date.now() - i * 86400000).toISOString()\n            }));\n        try {\n            const saved = localStorage.getItem(HIGHSCORES_KEY);\n            return saved ? JSON.parse(saved) : defaultHighScores;\n        } catch (e) {\n            console.error(\"Failed to load highscores\", e);\n            return defaultHighScores;\n        }\n    }\n    // Сохранение таблицы рекордов\n    static saveHighScores(records) {\n        try {\n            // Сортируем по убыванию и берем топ-10\n            const sorted = [\n                ...records\n            ].sort((a, b)=>b.score - a.score).slice(0, 10);\n            localStorage.setItem(HIGHSCORES_KEY, JSON.stringify(sorted));\n        } catch (e) {\n            console.error(\"Failed to save highscores\", e);\n        }\n    }\n    // Добавление нового рекорда\n    static addHighScore(record) {\n        const records = this.loadHighScores();\n        const newRecord = {\n            ...record,\n            date: new Date().toISOString()\n        };\n        const updatedRecords = [\n            ...records,\n            newRecord\n        ].sort((a, b)=>b.score - a.score).slice(0, 10);\n        this.saveHighScores(updatedRecords);\n        return updatedRecords;\n    }\n    static isScoreInTop(score) {\n        const records = this.loadHighScores();\n        return records.length < 10 || score > records[records.length - 1].score;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9tYW5hZ2Vycy9sb2NhbC1zdG9yYWdlLW1hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUVBLE1BQU1BLGVBQWU7QUFDckIsTUFBTUMsaUJBQWlCO0FBRWhCLE1BQU1DO0lBQ1Qsb0JBQW9CO0lBQ3BCLE9BQU9DLGVBQTZCO1FBQ2hDLE1BQU1DLGtCQUFrQixJQUFJLENBQUNDLGdCQUFnQjtRQUU3QyxJQUFJO1lBQ0EsTUFBTUMsUUFBUUMsYUFBYUMsT0FBTyxDQUFDUjtZQUNuQyxPQUFPTSxRQUFRO2dCQUFFLEdBQUdGLGVBQWU7Z0JBQUUsR0FBR0ssS0FBS0MsS0FBSyxDQUFDSixNQUFNO1lBQUMsSUFBSUY7UUFDbEUsRUFBRSxPQUFPTyxHQUFHO1lBQ1JDLFFBQVFDLEtBQUssQ0FBQywyQkFBMkJGO1lBQ3pDLE9BQU9QO1FBQ1g7SUFDSjtJQUVBLE9BQU9DLG1CQUFpQztRQUNwQyxPQUFPO1lBQ0hTLGFBQWE7WUFDYkMsV0FBVztZQUNYQyxTQUFTO1lBQ1RDLFlBQVk7UUFDaEI7SUFDSjtJQUVBLHNCQUFzQjtJQUN0QixPQUFPQyxhQUFhQyxRQUFzQixFQUFRO1FBQzlDLElBQUk7WUFDQVosYUFBYWEsT0FBTyxDQUFDcEIsY0FBY1MsS0FBS1ksU0FBUyxDQUFDRjtRQUN0RCxFQUFFLE9BQU9SLEdBQUc7WUFDUkMsUUFBUUMsS0FBSyxDQUFDLDJCQUEyQkY7UUFDN0M7SUFDSjtJQUVBLDRCQUE0QjtJQUM1QixPQUFPVyxpQkFBb0M7UUFDdkMsTUFBTUMsb0JBQXVDQyxNQUFNLElBQUlDLElBQUksQ0FBQyxNQUFNQyxHQUFHLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTztnQkFDN0VDLE1BQU0sQ0FBQyxPQUFPLENBQUM7Z0JBQ2ZDLE9BQU8sQ0FBQyxLQUFLRixDQUFBQSxJQUFLO2dCQUNsQkcsT0FBTyxLQUFNSCxLQUFNLElBQUksUUFBUyxLQUFLQTtnQkFDckNJLE1BQU0sSUFBSUMsS0FBS0EsS0FBS0MsR0FBRyxLQUFNTixJQUFJLFVBQVdPLFdBQVc7WUFDM0Q7UUFFQSxJQUFJO1lBQ0EsTUFBTTdCLFFBQVFDLGFBQWFDLE9BQU8sQ0FBQ1A7WUFDbkMsT0FBT0ssUUFBUUcsS0FBS0MsS0FBSyxDQUFDSixTQUFTaUI7UUFDdkMsRUFBRSxPQUFPWixHQUFHO1lBQ1JDLFFBQVFDLEtBQUssQ0FBQyw2QkFBNkJGO1lBQzNDLE9BQU9ZO1FBQ1g7SUFDSjtJQUVBLDhCQUE4QjtJQUM5QixPQUFPYSxlQUFlQyxPQUEwQixFQUFRO1FBQ3BELElBQUk7WUFDQSx1Q0FBdUM7WUFDdkMsTUFBTUMsU0FBUzttQkFBSUQ7YUFBUSxDQUN0QkUsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1BLEVBQUVYLEtBQUssR0FBR1UsRUFBRVYsS0FBSyxFQUNoQ1ksS0FBSyxDQUFDLEdBQUc7WUFFZG5DLGFBQWFhLE9BQU8sQ0FBQ25CLGdCQUFnQlEsS0FBS1ksU0FBUyxDQUFDaUI7UUFDeEQsRUFBRSxPQUFPM0IsR0FBRztZQUNSQyxRQUFRQyxLQUFLLENBQUMsNkJBQTZCRjtRQUMvQztJQUNKO0lBRUEsNEJBQTRCO0lBQzVCLE9BQU9nQyxhQUFhQyxNQUFxQyxFQUFxQjtRQUMxRSxNQUFNUCxVQUFVLElBQUksQ0FBQ2YsY0FBYztRQUNuQyxNQUFNdUIsWUFBWTtZQUNkLEdBQUdELE1BQU07WUFDVFosTUFBTSxJQUFJQyxPQUFPRSxXQUFXO1FBQ2hDO1FBRUEsTUFBTVcsaUJBQWlCO2VBQUlUO1lBQVNRO1NBQVUsQ0FDekNOLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNQSxFQUFFWCxLQUFLLEdBQUdVLEVBQUVWLEtBQUssRUFDaENZLEtBQUssQ0FBQyxHQUFHO1FBRWQsSUFBSSxDQUFDTixjQUFjLENBQUNVO1FBQ3BCLE9BQU9BO0lBQ1g7SUFFQSxPQUFPQyxhQUFhakIsS0FBYSxFQUFXO1FBQ3hDLE1BQU1PLFVBQVUsSUFBSSxDQUFDZixjQUFjO1FBQ25DLE9BQU9lLFFBQVFXLE1BQU0sR0FBRyxNQUFNbEIsUUFBUU8sT0FBTyxDQUFDQSxRQUFRVyxNQUFNLEdBQUcsRUFBRSxDQUFDbEIsS0FBSztJQUMzRTtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL21hbmFnZXJzL2xvY2FsLXN0b3JhZ2UtbWFuYWdlci50cz9iZGFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWVTZXR0aW5ncywgSGlnaFNjb3JlUmVjb3JkIH0gZnJvbSAnLi4vdHlwZXMvaW50ZXJmYWNlcyc7XHJcblxyXG5jb25zdCBTRVRUSU5HU19LRVkgPSAnZ2FtZV9zZXR0aW5ncyc7XHJcbmNvbnN0IEhJR0hTQ09SRVNfS0VZID0gJ2dhbWVfaGlnaHNjb3Jlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTG9jYWxTdG9yYWdlTWFuYWdlciB7XHJcbiAgICAvLyDQl9Cw0LPRgNGD0LfQutCwINC90LDRgdGC0YDQvtC10LpcclxuICAgIHN0YXRpYyBsb2FkU2V0dGluZ3MoKTogR2FtZVNldHRpbmdzIHtcclxuICAgICAgICBjb25zdCBkZWZhdWx0U2V0dGluZ3MgPSB0aGlzLmdldERlZmF1bHRDb25maWcoKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgc2F2ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTRVRUSU5HU19LRVkpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2F2ZWQgPyB7IC4uLmRlZmF1bHRTZXR0aW5ncywgLi4uSlNPTi5wYXJzZShzYXZlZCkgfSA6IGRlZmF1bHRTZXR0aW5ncztcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHNldHRpbmdzJywgZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0U2V0dGluZ3M7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXREZWZhdWx0Q29uZmlnKCk6IEdhbWVTZXR0aW5ncyB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbXVzaWNWb2x1bWU6IDAuNSxcclxuICAgICAgICAgICAgc2Z4Vm9sdW1lOiAwLjEsXHJcbiAgICAgICAgICAgIHNob3dGUFM6IHRydWUsXHJcbiAgICAgICAgICAgIHdlYXBvblR5cGU6ICd3aWRlJ1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0KHQvtGF0YDQsNC90LXQvdC40LUg0L3QsNGB0YLRgNC+0LXQulxyXG4gICAgc3RhdGljIHNhdmVTZXR0aW5ncyhzZXR0aW5nczogR2FtZVNldHRpbmdzKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU0VUVElOR1NfS0VZLCBKU09OLnN0cmluZ2lmeShzZXR0aW5ncykpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgc2V0dGluZ3MnLCBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0JfQsNCz0YDRg9C30LrQsCDRgtCw0LHQu9C40YbRiyDRgNC10LrQvtGA0LTQvtCyXHJcbiAgICBzdGF0aWMgbG9hZEhpZ2hTY29yZXMoKTogSGlnaFNjb3JlUmVjb3JkW10ge1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRIaWdoU2NvcmVzOiBIaWdoU2NvcmVSZWNvcmRbXSA9IEFycmF5KDEwKS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gKHtcclxuICAgICAgICAgICAgbmFtZTogYE5vRW50cnlgLFxyXG4gICAgICAgICAgICBzY29yZTogKDEwIC0gaSkgKiAxMDAwLFxyXG4gICAgICAgICAgICBsZXZlbDogKDEwIC0gaSkgPj0gMyA/ICdBbGwnIDogKDEwIC0gaSkgYXMgbnVtYmVyLFxyXG4gICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gKGkgKiA4NjQwMDAwMCkpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oSElHSFNDT1JFU19LRVkpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2F2ZWQgPyBKU09OLnBhcnNlKHNhdmVkKSA6IGRlZmF1bHRIaWdoU2NvcmVzO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgaGlnaHNjb3JlcycsIGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdEhpZ2hTY29yZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vINCh0L7RhdGA0LDQvdC10L3QuNC1INGC0LDQsdC70LjRhtGLINGA0LXQutC+0YDQtNC+0LJcclxuICAgIHN0YXRpYyBzYXZlSGlnaFNjb3JlcyhyZWNvcmRzOiBIaWdoU2NvcmVSZWNvcmRbXSk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vINCh0L7RgNGC0LjRgNGD0LXQvCDQv9C+INGD0LHRi9Cy0LDQvdC40Y4g0Lgg0LHQtdGA0LXQvCDRgtC+0L8tMTBcclxuICAgICAgICAgICAgY29uc3Qgc29ydGVkID0gWy4uLnJlY29yZHNdXHJcbiAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMTApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEhJR0hTQ09SRVNfS0VZLCBKU09OLnN0cmluZ2lmeShzb3J0ZWQpKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGhpZ2hzY29yZXMnLCBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7Qs9C+INGA0LXQutC+0YDQtNCwXHJcbiAgICBzdGF0aWMgYWRkSGlnaFNjb3JlKHJlY29yZDogT21pdDxIaWdoU2NvcmVSZWNvcmQsICdkYXRlJz4pOiBIaWdoU2NvcmVSZWNvcmRbXSB7XHJcbiAgICAgICAgY29uc3QgcmVjb3JkcyA9IHRoaXMubG9hZEhpZ2hTY29yZXMoKTtcclxuICAgICAgICBjb25zdCBuZXdSZWNvcmQgPSB7XHJcbiAgICAgICAgICAgIC4uLnJlY29yZCxcclxuICAgICAgICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB1cGRhdGVkUmVjb3JkcyA9IFsuLi5yZWNvcmRzLCBuZXdSZWNvcmRdXHJcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnNjb3JlIC0gYS5zY29yZSlcclxuICAgICAgICAgICAgLnNsaWNlKDAsIDEwKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zYXZlSGlnaFNjb3Jlcyh1cGRhdGVkUmVjb3Jkcyk7XHJcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWRSZWNvcmRzO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpc1Njb3JlSW5Ub3Aoc2NvcmU6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHJlY29yZHMgPSB0aGlzLmxvYWRIaWdoU2NvcmVzKCk7XHJcbiAgICAgICAgcmV0dXJuIHJlY29yZHMubGVuZ3RoIDwgMTAgfHwgc2NvcmUgPiByZWNvcmRzW3JlY29yZHMubGVuZ3RoIC0gMV0uc2NvcmU7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiU0VUVElOR1NfS0VZIiwiSElHSFNDT1JFU19LRVkiLCJMb2NhbFN0b3JhZ2VNYW5hZ2VyIiwibG9hZFNldHRpbmdzIiwiZGVmYXVsdFNldHRpbmdzIiwiZ2V0RGVmYXVsdENvbmZpZyIsInNhdmVkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJtdXNpY1ZvbHVtZSIsInNmeFZvbHVtZSIsInNob3dGUFMiLCJ3ZWFwb25UeXBlIiwic2F2ZVNldHRpbmdzIiwic2V0dGluZ3MiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwibG9hZEhpZ2hTY29yZXMiLCJkZWZhdWx0SGlnaFNjb3JlcyIsIkFycmF5IiwiZmlsbCIsIm1hcCIsIl8iLCJpIiwibmFtZSIsInNjb3JlIiwibGV2ZWwiLCJkYXRlIiwiRGF0ZSIsIm5vdyIsInRvSVNPU3RyaW5nIiwic2F2ZUhpZ2hTY29yZXMiLCJyZWNvcmRzIiwic29ydGVkIiwic29ydCIsImEiLCJiIiwic2xpY2UiLCJhZGRIaWdoU2NvcmUiLCJyZWNvcmQiLCJuZXdSZWNvcmQiLCJ1cGRhdGVkUmVjb3JkcyIsImlzU2NvcmVJblRvcCIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/managers/local-storage-manager.ts\n");

/***/ }),

/***/ "./src/game/managers/spawn-manager.ts":
/*!********************************************!*\
  !*** ./src/game/managers/spawn-manager.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SpawnManager: () => (/* binding */ SpawnManager)\n/* harmony export */ });\nclass SpawnManager {\n    static getSpawnPositions(patternType, params, groupSize) {\n        switch(patternType){\n            case \"random\":\n                return this.getRandomPositions(params, groupSize);\n            case \"line\":\n                return this.getLinePositions(params, groupSize);\n            case \"direct\":\n                return this.getDirectPositions(params, groupSize);\n            case \"spiral\":\n                return this.getSpiralPositions(params, groupSize);\n            case \"circle\":\n                return this.getCirclePositions(params, groupSize);\n            case \"wave\":\n                return this.getWavePositions(params, groupSize);\n            default:\n                console.warn(`Unknown pattern type: ${patternType}, using random`);\n                return this.getRandomPositions({\n                    minX: 0,\n                    maxX: 800,\n                    minY: -50,\n                    maxY: -20\n                }, groupSize);\n        }\n    }\n    static getRandomPositions(params, groupSize) {\n        const positions = [];\n        for(let i = 0; i < groupSize; i++){\n            positions.push({\n                x: Phaser.Math.Between(params.minX, params.maxX),\n                y: Phaser.Math.Between(params.minY, params.maxY)\n            });\n        }\n        return positions;\n    }\n    static getLinePositions(params, groupSize) {\n        const positions = [];\n        let currentX = params.startX;\n        let currentY = params.startY;\n        for(let i = 0; i < groupSize; i++){\n            positions.push({\n                x: currentX,\n                y: currentY\n            });\n            currentX += params.stepX;\n            currentY += params.stepY;\n        }\n        return positions;\n    }\n    static getDirectPositions(params, groupSize) {\n        return params.positions.slice(0, groupSize);\n    }\n    static getSpiralPositions(params, groupSize) {\n        const positions = [];\n        let radius = params.initialRadius || 0;\n        let angle = params.initialAngle || 0;\n        for(let i = 0; i < groupSize; i++){\n            positions.push({\n                x: params.centerX + Math.cos(angle) * radius,\n                y: params.centerY + Math.sin(angle) * radius\n            });\n            radius += params.radiusStep;\n            angle += params.angleStep;\n        }\n        return positions;\n    }\n    static getCirclePositions(params, groupSize) {\n        const positions = [];\n        const angleStep = (params.fullCircle ? Math.PI * 2 : Math.PI) / groupSize;\n        let angle = params.startAngle || 0;\n        for(let i = 0; i < groupSize; i++){\n            positions.push({\n                x: params.centerX + Math.cos(angle) * params.radius,\n                y: params.centerY + Math.sin(angle) * params.radius\n            });\n            angle += angleStep;\n        }\n        return positions;\n    }\n    static getWavePositions(params, groupSize) {\n        const positions = [];\n        let x = params.startX;\n        let y = params.startY;\n        for(let i = 0; i < groupSize; i++){\n            positions.push({\n                x,\n                y\n            });\n            if (params.direction === \"horizontal\") {\n                x += params.wavelength;\n                y = params.startY + Math.sin(i * 0.5) * params.amplitude;\n            } else {\n                y += params.wavelength;\n                x = params.startX + Math.sin(i * 0.5) * params.amplitude;\n            }\n        }\n        return positions;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL21hbmFnZXJzL3NwYXduLW1hbmFnZXIudHM/MjhiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYXR0ZXJuVHlwZSwgUmFuZG9tUGF0dGVyblBhcmFtcywgTGluZVBhdHRlcm5QYXJhbXMsIERpcmVjdFBhdHRlcm5QYXJhbXMsIENpcmNsZVBhdHRlcm5QYXJhbXMsIFBhdHRlcm5QYXJhbXMsIFNwaXJhbFBhdHRlcm5QYXJhbXMsIFdhdmVQYXR0ZXJuUGFyYW1zIH0gZnJvbSAnLi4vdHlwZXMvaW50ZXJmYWNlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3Bhd25NYW5hZ2VyIHtcclxuICAgIHN0YXRpYyBnZXRTcGF3blBvc2l0aW9ucyhcclxuICAgICAgICBwYXR0ZXJuVHlwZTogUGF0dGVyblR5cGUsXHJcbiAgICAgICAgcGFyYW1zOiBQYXR0ZXJuUGFyYW1zWydwYXJhbXMnXSxcclxuICAgICAgICBncm91cFNpemU6IG51bWJlclxyXG4gICAgKTogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9W10ge1xyXG4gICAgICAgIHN3aXRjaCAocGF0dGVyblR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAncmFuZG9tJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFJhbmRvbVBvc2l0aW9ucyhwYXJhbXMgYXMgUmFuZG9tUGF0dGVyblBhcmFtcywgZ3JvdXBTaXplKTtcclxuICAgICAgICAgICAgY2FzZSAnbGluZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRMaW5lUG9zaXRpb25zKHBhcmFtcyBhcyBMaW5lUGF0dGVyblBhcmFtcywgZ3JvdXBTaXplKTtcclxuICAgICAgICAgICAgY2FzZSAnZGlyZWN0JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERpcmVjdFBvc2l0aW9ucyhwYXJhbXMgYXMgRGlyZWN0UGF0dGVyblBhcmFtcywgZ3JvdXBTaXplKTtcclxuICAgICAgICAgICAgY2FzZSAnc3BpcmFsJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNwaXJhbFBvc2l0aW9ucyhwYXJhbXMgYXMgU3BpcmFsUGF0dGVyblBhcmFtcywgZ3JvdXBTaXplKTtcclxuICAgICAgICAgICAgY2FzZSAnY2lyY2xlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENpcmNsZVBvc2l0aW9ucyhwYXJhbXMgYXMgQ2lyY2xlUGF0dGVyblBhcmFtcywgZ3JvdXBTaXplKTtcclxuICAgICAgICAgICAgY2FzZSAnd2F2ZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRXYXZlUG9zaXRpb25zKHBhcmFtcyBhcyBXYXZlUGF0dGVyblBhcmFtcywgZ3JvdXBTaXplKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5rbm93biBwYXR0ZXJuIHR5cGU6ICR7cGF0dGVyblR5cGV9LCB1c2luZyByYW5kb21gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFJhbmRvbVBvc2l0aW9ucyhcclxuICAgICAgICAgICAgICAgICAgICB7IG1pblg6IDAsIG1heFg6IDgwMCwgbWluWTogLTUwLCBtYXhZOiAtMjAgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBTaXplXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRSYW5kb21Qb3NpdGlvbnMocGFyYW1zOiBSYW5kb21QYXR0ZXJuUGFyYW1zLCBncm91cFNpemU6IG51bWJlcik6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfVtdIHtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbnM6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfVtdID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cFNpemU7IGkrKykge1xyXG4gICAgICAgICAgICBwb3NpdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB4OiBQaGFzZXIuTWF0aC5CZXR3ZWVuKHBhcmFtcy5taW5YLCBwYXJhbXMubWF4WCksXHJcbiAgICAgICAgICAgICAgICB5OiBQaGFzZXIuTWF0aC5CZXR3ZWVuKHBhcmFtcy5taW5ZLCBwYXJhbXMubWF4WSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwb3NpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0TGluZVBvc2l0aW9ucyhwYXJhbXM6IExpbmVQYXR0ZXJuUGFyYW1zLCBncm91cFNpemU6IG51bWJlcik6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfVtdIHtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbnM6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfVtdID0gW107XHJcbiAgICAgICAgbGV0IGN1cnJlbnRYID0gcGFyYW1zLnN0YXJ0WDtcclxuICAgICAgICBsZXQgY3VycmVudFkgPSBwYXJhbXMuc3RhcnRZO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBTaXplOyBpKyspIHtcclxuICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goeyB4OiBjdXJyZW50WCwgeTogY3VycmVudFkgfSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRYICs9IHBhcmFtcy5zdGVwWDtcclxuICAgICAgICAgICAgY3VycmVudFkgKz0gcGFyYW1zLnN0ZXBZO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcG9zaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldERpcmVjdFBvc2l0aW9ucyhwYXJhbXM6IERpcmVjdFBhdHRlcm5QYXJhbXMsIGdyb3VwU2l6ZTogbnVtYmVyKTogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9W10ge1xyXG4gICAgICAgIHJldHVybiBwYXJhbXMucG9zaXRpb25zLnNsaWNlKDAsIGdyb3VwU2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0U3BpcmFsUG9zaXRpb25zKFxyXG4gICAgICAgIHBhcmFtczogU3BpcmFsUGF0dGVyblBhcmFtcywgXHJcbiAgICAgICAgZ3JvdXBTaXplOiBudW1iZXJcclxuICAgICk6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfVtdIHtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbnM6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfVtdID0gW107XHJcbiAgICAgICAgbGV0IHJhZGl1cyA9IHBhcmFtcy5pbml0aWFsUmFkaXVzIHx8IDA7XHJcbiAgICAgICAgbGV0IGFuZ2xlID0gcGFyYW1zLmluaXRpYWxBbmdsZSB8fCAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyb3VwU2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHg6IHBhcmFtcy5jZW50ZXJYICsgTWF0aC5jb3MoYW5nbGUpICogcmFkaXVzLFxyXG4gICAgICAgICAgICAgICAgeTogcGFyYW1zLmNlbnRlclkgKyBNYXRoLnNpbihhbmdsZSkgKiByYWRpdXNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByYWRpdXMgKz0gcGFyYW1zLnJhZGl1c1N0ZXA7XHJcbiAgICAgICAgICAgIGFuZ2xlICs9IHBhcmFtcy5hbmdsZVN0ZXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcG9zaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldENpcmNsZVBvc2l0aW9ucyhcclxuICAgICAgICBwYXJhbXM6IENpcmNsZVBhdHRlcm5QYXJhbXMsIFxyXG4gICAgICAgIGdyb3VwU2l6ZTogbnVtYmVyXHJcbiAgICApOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH1bXSB7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25zOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH1bXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGFuZ2xlU3RlcCA9IChwYXJhbXMuZnVsbENpcmNsZSA/IE1hdGguUEkgKiAyIDogTWF0aC5QSSkgLyBncm91cFNpemU7XHJcbiAgICAgICAgbGV0IGFuZ2xlID0gcGFyYW1zLnN0YXJ0QW5nbGUgfHwgMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cFNpemU7IGkrKykge1xyXG4gICAgICAgICAgICBwb3NpdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB4OiBwYXJhbXMuY2VudGVyWCArIE1hdGguY29zKGFuZ2xlKSAqIHBhcmFtcy5yYWRpdXMsXHJcbiAgICAgICAgICAgICAgICB5OiBwYXJhbXMuY2VudGVyWSArIE1hdGguc2luKGFuZ2xlKSAqIHBhcmFtcy5yYWRpdXNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhbmdsZSArPSBhbmdsZVN0ZXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcG9zaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldFdhdmVQb3NpdGlvbnMoXHJcbiAgICAgICAgcGFyYW1zOiBXYXZlUGF0dGVyblBhcmFtcywgXHJcbiAgICAgICAgZ3JvdXBTaXplOiBudW1iZXJcclxuICAgICk6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfVtdIHtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbnM6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfVtdID0gW107XHJcbiAgICAgICAgbGV0IHggPSBwYXJhbXMuc3RhcnRYO1xyXG4gICAgICAgIGxldCB5ID0gcGFyYW1zLnN0YXJ0WTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cFNpemU7IGkrKykge1xyXG4gICAgICAgICAgICBwb3NpdGlvbnMucHVzaCh7IHgsIHkgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XHJcbiAgICAgICAgICAgICAgICB4ICs9IHBhcmFtcy53YXZlbGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgeSA9IHBhcmFtcy5zdGFydFkgKyBNYXRoLnNpbihpICogMC41KSAqIHBhcmFtcy5hbXBsaXR1ZGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB5ICs9IHBhcmFtcy53YXZlbGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgeCA9IHBhcmFtcy5zdGFydFggKyBNYXRoLnNpbihpICogMC41KSAqIHBhcmFtcy5hbXBsaXR1ZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwb3NpdGlvbnM7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiU3Bhd25NYW5hZ2VyIiwiZ2V0U3Bhd25Qb3NpdGlvbnMiLCJwYXR0ZXJuVHlwZSIsInBhcmFtcyIsImdyb3VwU2l6ZSIsImdldFJhbmRvbVBvc2l0aW9ucyIsImdldExpbmVQb3NpdGlvbnMiLCJnZXREaXJlY3RQb3NpdGlvbnMiLCJnZXRTcGlyYWxQb3NpdGlvbnMiLCJnZXRDaXJjbGVQb3NpdGlvbnMiLCJnZXRXYXZlUG9zaXRpb25zIiwiY29uc29sZSIsIndhcm4iLCJtaW5YIiwibWF4WCIsIm1pblkiLCJtYXhZIiwicG9zaXRpb25zIiwiaSIsInB1c2giLCJ4IiwiUGhhc2VyIiwiTWF0aCIsIkJldHdlZW4iLCJ5IiwiY3VycmVudFgiLCJzdGFydFgiLCJjdXJyZW50WSIsInN0YXJ0WSIsInN0ZXBYIiwic3RlcFkiLCJzbGljZSIsInJhZGl1cyIsImluaXRpYWxSYWRpdXMiLCJhbmdsZSIsImluaXRpYWxBbmdsZSIsImNlbnRlclgiLCJjb3MiLCJjZW50ZXJZIiwic2luIiwicmFkaXVzU3RlcCIsImFuZ2xlU3RlcCIsImZ1bGxDaXJjbGUiLCJQSSIsInN0YXJ0QW5nbGUiLCJkaXJlY3Rpb24iLCJ3YXZlbGVuZ3RoIiwiYW1wbGl0dWRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/managers/spawn-manager.ts\n");

/***/ }),

/***/ "./src/game/phaser-game-wrapper.tsx":
/*!******************************************!*\
  !*** ./src/game/phaser-game-wrapper.tsx ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PhaserGame: () => (/* binding */ PhaserGame)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./main */ \"./src/game/main.ts\");\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./event-bus */ \"./src/game/event-bus.ts\");\n\n\n\n\nconst PhaserGame = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function PhaserGame({ currentActiveScene }, ref) {\n    const game = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>{\n        if (game.current === null) {\n            game.current = (0,_main__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\"game-container\");\n            if (typeof ref === \"function\") {\n                ref({\n                    game: game.current,\n                    scene: null\n                });\n            } else if (ref) {\n                ref.current = {\n                    game: game.current,\n                    scene: null\n                };\n            }\n        }\n        return ()=>{\n            if (game.current) {\n                game.current.destroy(true);\n                if (game.current !== null) {\n                    game.current = null;\n                }\n            }\n        };\n    }, [\n        ref\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        _event_bus__WEBPACK_IMPORTED_MODULE_3__.EventBus.on(\"current-scene-ready\", (scene_instance)=>{\n            if (currentActiveScene && typeof currentActiveScene === \"function\") {\n                currentActiveScene(scene_instance);\n            }\n            if (typeof ref === \"function\") {\n                ref({\n                    game: game.current,\n                    scene: scene_instance\n                });\n            } else if (ref) {\n                ref.current = {\n                    game: game.current,\n                    scene: scene_instance\n                };\n            }\n        });\n        return ()=>{\n            _event_bus__WEBPACK_IMPORTED_MODULE_3__.EventBus.removeListener(\"current-scene-ready\");\n        };\n    }, [\n        currentActiveScene,\n        ref\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        id: \"game-container\"\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Acaride\\\\Desktop\\\\LaDiplomaNext\\\\EoC\\\\src\\\\game\\\\phaser-game-wrapper.tsx\",\n        lineNumber: 83,\n        columnNumber: 9\n    }, this);\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9waGFzZXItZ2FtZS13cmFwcGVyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF1RTtBQUN4QztBQUNRO0FBYWhDLE1BQU1NLDJCQUFhTixpREFBVUEsQ0FBeUIsU0FBU00sV0FBVyxFQUFFQyxrQkFBa0IsRUFBRSxFQUFFQyxHQUFHO0lBRXhHLE1BQU1DLE9BQU9OLDZDQUFNQSxDQUFxQjtJQUV4Q0Qsc0RBQWVBLENBQUM7UUFFWixJQUFJTyxLQUFLQyxPQUFPLEtBQUssTUFDckI7WUFFSUQsS0FBS0MsT0FBTyxHQUFHTixpREFBU0EsQ0FBQztZQUV6QixJQUFJLE9BQU9JLFFBQVEsWUFDbkI7Z0JBQ0lBLElBQUk7b0JBQUVDLE1BQU1BLEtBQUtDLE9BQU87b0JBQUVDLE9BQU87Z0JBQUs7WUFDMUMsT0FBTyxJQUFJSCxLQUNYO2dCQUNJQSxJQUFJRSxPQUFPLEdBQUc7b0JBQUVELE1BQU1BLEtBQUtDLE9BQU87b0JBQUVDLE9BQU87Z0JBQUs7WUFDcEQ7UUFFSjtRQUVBLE9BQU87WUFFSCxJQUFJRixLQUFLQyxPQUFPLEVBQ2hCO2dCQUNJRCxLQUFLQyxPQUFPLENBQUNFLE9BQU8sQ0FBQztnQkFDckIsSUFBSUgsS0FBS0MsT0FBTyxLQUFLLE1BQ3JCO29CQUNJRCxLQUFLQyxPQUFPLEdBQUc7Z0JBQ25CO1lBQ0o7UUFDSjtJQUNKLEdBQUc7UUFBQ0Y7S0FBSTtJQUVSUCxnREFBU0EsQ0FBQztRQUVOSSxnREFBUUEsQ0FBQ1EsRUFBRSxDQUFDLHVCQUF1QixDQUFDQztZQUVoQyxJQUFJUCxzQkFBc0IsT0FBT0EsdUJBQXVCLFlBQ3hEO2dCQUVJQSxtQkFBbUJPO1lBRXZCO1lBRUEsSUFBSSxPQUFPTixRQUFRLFlBQ25CO2dCQUVJQSxJQUFJO29CQUFFQyxNQUFNQSxLQUFLQyxPQUFPO29CQUFFQyxPQUFPRztnQkFBZTtZQUVwRCxPQUFPLElBQUlOLEtBQ1g7Z0JBRUlBLElBQUlFLE9BQU8sR0FBRztvQkFBRUQsTUFBTUEsS0FBS0MsT0FBTztvQkFBRUMsT0FBT0c7Z0JBQWU7WUFFOUQ7UUFFSjtRQUNBLE9BQU87WUFHSFQsZ0RBQVFBLENBQUNVLGNBQWMsQ0FBQztRQUU1QjtJQUNKLEdBQUc7UUFBQ1I7UUFBb0JDO0tBQUk7SUFFNUIscUJBQ0ksOERBQUNRO1FBQUlDLElBQUc7Ozs7OztBQUdoQixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL3BoYXNlci1nYW1lLXdyYXBwZXIudHN4PzY0YmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9yd2FyZFJlZiwgdXNlRWZmZWN0LCB1c2VMYXlvdXRFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBTdGFydEdhbWUgZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnLi9ldmVudC1idXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElSZWZQaGFzZXJHYW1lXG57XG4gICAgZ2FtZTogUGhhc2VyLkdhbWUgfCBudWxsO1xuICAgIHNjZW5lOiBQaGFzZXIuU2NlbmUgfCBudWxsO1xufVxuXG5pbnRlcmZhY2UgSVByb3BzXG57XG4gICAgY3VycmVudEFjdGl2ZVNjZW5lPzogKHNjZW5lX2luc3RhbmNlOiBQaGFzZXIuU2NlbmUpID0+IHZvaWRcbn1cblxuZXhwb3J0IGNvbnN0IFBoYXNlckdhbWUgPSBmb3J3YXJkUmVmPElSZWZQaGFzZXJHYW1lLCBJUHJvcHM+KGZ1bmN0aW9uIFBoYXNlckdhbWUoeyBjdXJyZW50QWN0aXZlU2NlbmUgfSwgcmVmKVxue1xuICAgIGNvbnN0IGdhbWUgPSB1c2VSZWY8UGhhc2VyLkdhbWUgfCBudWxsPihudWxsISk7XG5cbiAgICB1c2VMYXlvdXRFZmZlY3QoKCkgPT5cbiAgICB7XG4gICAgICAgIGlmIChnYW1lLmN1cnJlbnQgPT09IG51bGwpXG4gICAgICAgIHtcblxuICAgICAgICAgICAgZ2FtZS5jdXJyZW50ID0gU3RhcnRHYW1lKFwiZ2FtZS1jb250YWluZXJcIik7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVmID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlZih7IGdhbWU6IGdhbWUuY3VycmVudCwgc2NlbmU6IG51bGwgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlZilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZWYuY3VycmVudCA9IHsgZ2FtZTogZ2FtZS5jdXJyZW50LCBzY2VuZTogbnVsbCB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKCkgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGdhbWUuY3VycmVudClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBnYW1lLmN1cnJlbnQuZGVzdHJveSh0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5jdXJyZW50ICE9PSBudWxsKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCBbcmVmXSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT5cbiAgICB7XG4gICAgICAgIEV2ZW50QnVzLm9uKCdjdXJyZW50LXNjZW5lLXJlYWR5JywgKHNjZW5lX2luc3RhbmNlOiBQaGFzZXIuU2NlbmUpID0+XG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50QWN0aXZlU2NlbmUgJiYgdHlwZW9mIGN1cnJlbnRBY3RpdmVTY2VuZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIHtcblxuICAgICAgICAgICAgICAgIGN1cnJlbnRBY3RpdmVTY2VuZShzY2VuZV9pbnN0YW5jZSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiByZWYgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICB7XG5cbiAgICAgICAgICAgICAgICByZWYoeyBnYW1lOiBnYW1lLmN1cnJlbnQsIHNjZW5lOiBzY2VuZV9pbnN0YW5jZSB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWYpXG4gICAgICAgICAgICB7XG5cbiAgICAgICAgICAgICAgICByZWYuY3VycmVudCA9IHsgZ2FtZTogZ2FtZS5jdXJyZW50LCBzY2VuZTogc2NlbmVfaW5zdGFuY2UgfTtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gKCkgPT5cbiAgICAgICAge1xuXG4gICAgICAgICAgICBFdmVudEJ1cy5yZW1vdmVMaXN0ZW5lcignY3VycmVudC1zY2VuZS1yZWFkeScpO1xuICAgICAgICBcbiAgICAgICAgfVxuICAgIH0sIFtjdXJyZW50QWN0aXZlU2NlbmUsIHJlZl0pO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBpZD1cImdhbWUtY29udGFpbmVyXCI+PC9kaXY+XG4gICAgKTtcblxufSk7XG4iXSwibmFtZXMiOlsiZm9yd2FyZFJlZiIsInVzZUVmZmVjdCIsInVzZUxheW91dEVmZmVjdCIsInVzZVJlZiIsIlN0YXJ0R2FtZSIsIkV2ZW50QnVzIiwiUGhhc2VyR2FtZSIsImN1cnJlbnRBY3RpdmVTY2VuZSIsInJlZiIsImdhbWUiLCJjdXJyZW50Iiwic2NlbmUiLCJkZXN0cm95Iiwib24iLCJzY2VuZV9pbnN0YW5jZSIsInJlbW92ZUxpc3RlbmVyIiwiZGl2IiwiaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/phaser-game-wrapper.tsx\n");

/***/ }),

/***/ "./src/game/scenes/boot-scene.ts":
/*!***************************************!*\
  !*** ./src/game/scenes/boot-scene.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BootScene: () => (/* binding */ BootScene)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../event-bus */ \"./src/game/event-bus.ts\");\n\n\nclass BootScene extends (phaser__WEBPACK_IMPORTED_MODULE_0___default().Scene) {\n    constructor(){\n        super({\n            key: \"BootScene\"\n        });\n    }\n    preload() {\n        // Загрузка конфигурации анимаций\n        this.load.json(\"animations_json\", \"assets/data/animations.json\");\n        this.createProgressBar();\n    }\n    create() {\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(\"current-scene-ready\", this);\n        // Переход к сцене загрузки\n        this.scene.start(\"PreloadScene\");\n    }\n    createProgressBar() {\n        const { width, height } = this.cameras.main;\n        const progressBar = this.add.graphics();\n        const progressBox = this.add.graphics();\n        progressBox.fillStyle(0x222222, 0.8);\n        progressBox.fillRect(width / 4, height / 2 - 30, width / 2, 50);\n        this.load.on(\"progress\", (value)=>{\n            progressBar.clear();\n            progressBar.fillStyle(0xffffff, 1);\n            progressBar.fillRect(width / 4 + 10, height / 2 - 20, (width / 2 - 20) * value, 30);\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9zY2VuZXMvYm9vdC1zY2VuZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTRCO0FBQ1k7QUFFakMsTUFBTUUsa0JBQWtCRixxREFBWTtJQUN2Q0ksYUFBYztRQUNWLEtBQUssQ0FBQztZQUFFQyxLQUFLO1FBQVk7SUFDN0I7SUFFQUMsVUFBZ0I7UUFDWixpQ0FBaUM7UUFDakMsSUFBSSxDQUFDQyxJQUFJLENBQUNDLElBQUksQ0FBQyxtQkFBbUI7UUFFbEMsSUFBSSxDQUFDQyxpQkFBaUI7SUFDMUI7SUFFQUMsU0FBZTtRQUVYVCxnREFBUUEsQ0FBQ1UsSUFBSSxDQUFDLHVCQUF1QixJQUFJO1FBQ3pDLDJCQUEyQjtRQUMzQixJQUFJLENBQUNDLEtBQUssQ0FBQ0MsS0FBSyxDQUFDO0lBQ3JCO0lBRVFKLG9CQUEwQjtRQUM5QixNQUFNLEVBQUVLLEtBQUssRUFBRUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDQyxPQUFPLENBQUNDLElBQUk7UUFDM0MsTUFBTUMsY0FBYyxJQUFJLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUTtRQUNyQyxNQUFNQyxjQUFjLElBQUksQ0FBQ0YsR0FBRyxDQUFDQyxRQUFRO1FBRXJDQyxZQUFZQyxTQUFTLENBQUMsVUFBVTtRQUNoQ0QsWUFBWUUsUUFBUSxDQUFDVCxRQUFRLEdBQUdDLFNBQVMsSUFBSSxJQUFJRCxRQUFRLEdBQUc7UUFFNUQsSUFBSSxDQUFDUCxJQUFJLENBQUNpQixFQUFFLENBQUMsWUFBWSxDQUFDQztZQUN0QlAsWUFBWVEsS0FBSztZQUNqQlIsWUFBWUksU0FBUyxDQUFDLFVBQVU7WUFDaENKLFlBQVlLLFFBQVEsQ0FDaEJULFFBQVEsSUFBSSxJQUNaQyxTQUFTLElBQUksSUFDYixDQUFDRCxRQUFRLElBQUksRUFBQyxJQUFLVyxPQUNuQjtRQUVSO0lBQ0o7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9zY2VuZXMvYm9vdC1zY2VuZS50cz9lNzZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnLi4vZXZlbnQtYnVzJztcblxuZXhwb3J0IGNsYXNzIEJvb3RTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKHsga2V5OiAnQm9vdFNjZW5lJyB9KTtcbiAgICB9XG5cbiAgICBwcmVsb2FkKCk6IHZvaWQge1xuICAgICAgICAvLyDQl9Cw0LPRgNGD0LfQutCwINC60L7QvdGE0LjQs9GD0YDQsNGG0LjQuCDQsNC90LjQvNCw0YbQuNC5XG4gICAgICAgIHRoaXMubG9hZC5qc29uKCdhbmltYXRpb25zX2pzb24nLCAnYXNzZXRzL2RhdGEvYW5pbWF0aW9ucy5qc29uJyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNyZWF0ZVByb2dyZXNzQmFyKCk7XG4gICAgfVxuXG4gICAgY3JlYXRlKCk6IHZvaWQge1xuICAgICAgICBcbiAgICAgICAgRXZlbnRCdXMuZW1pdCgnY3VycmVudC1zY2VuZS1yZWFkeScsIHRoaXMpO1xuICAgICAgICAvLyDQn9C10YDQtdGF0L7QtCDQuiDRgdGG0LXQvdC1INC30LDQs9GA0YPQt9C60LhcbiAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnUHJlbG9hZFNjZW5lJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVQcm9ncmVzc0JhcigpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLmNhbWVyYXMubWFpbjtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBjb25zdCBwcm9ncmVzc0JveCA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIFxuICAgICAgICBwcm9ncmVzc0JveC5maWxsU3R5bGUoMHgyMjIyMjIsIDAuOCk7XG4gICAgICAgIHByb2dyZXNzQm94LmZpbGxSZWN0KHdpZHRoIC8gNCwgaGVpZ2h0IC8gMiAtIDMwLCB3aWR0aCAvIDIsIDUwKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubG9hZC5vbigncHJvZ3Jlc3MnLCAodmFsdWU6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgcHJvZ3Jlc3NCYXIuY2xlYXIoKTtcbiAgICAgICAgICAgIHByb2dyZXNzQmFyLmZpbGxTdHlsZSgweGZmZmZmZiwgMSk7XG4gICAgICAgICAgICBwcm9ncmVzc0Jhci5maWxsUmVjdChcbiAgICAgICAgICAgICAgICB3aWR0aCAvIDQgKyAxMCxcbiAgICAgICAgICAgICAgICBoZWlnaHQgLyAyIC0gMjAsXG4gICAgICAgICAgICAgICAgKHdpZHRoIC8gMiAtIDIwKSAqIHZhbHVlLFxuICAgICAgICAgICAgICAgIDMwXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbn1cbiJdLCJuYW1lcyI6WyJQaGFzZXIiLCJFdmVudEJ1cyIsIkJvb3RTY2VuZSIsIlNjZW5lIiwiY29uc3RydWN0b3IiLCJrZXkiLCJwcmVsb2FkIiwibG9hZCIsImpzb24iLCJjcmVhdGVQcm9ncmVzc0JhciIsImNyZWF0ZSIsImVtaXQiLCJzY2VuZSIsInN0YXJ0Iiwid2lkdGgiLCJoZWlnaHQiLCJjYW1lcmFzIiwibWFpbiIsInByb2dyZXNzQmFyIiwiYWRkIiwiZ3JhcGhpY3MiLCJwcm9ncmVzc0JveCIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwib24iLCJ2YWx1ZSIsImNsZWFyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/scenes/boot-scene.ts\n");

/***/ }),

/***/ "./src/game/scenes/game-over-scene.ts":
/*!********************************************!*\
  !*** ./src/game/scenes/game-over-scene.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GameOver: () => (/* binding */ GameOver)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../event-bus */ \"./src/game/event-bus.ts\");\n/* harmony import */ var _components_input_human_menu_input_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/input/human/menu-input-component */ \"./src/game/components/input/human/menu-input-component.ts\");\n/* harmony import */ var _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../managers/local-storage-manager */ \"./src/game/managers/local-storage-manager.ts\");\n\n\n\n\nclass GameOver extends (phaser__WEBPACK_IMPORTED_MODULE_0___default().Scene) {\n    constructor(){\n        super(\"GameOver\");\n        this.menuItems = [];\n        this.selectedItemIndex = 0;\n        this.lastInputTime = 0;\n        this.inputDelay = 200;\n        this.score = 0;\n    }\n    init(data) {\n        this.score = data.score || 0;\n        this.selectedItemIndex = 0;\n        this.lastInputTime = 0;\n    }\n    create() {\n        this.cameras.main.fadeIn(500, 0, 0, 0);\n        this.createBackground();\n        this.createTitle();\n        this.createScoreDisplay();\n        this.createMenuItems();\n        this.setupInput();\n        this.selectMenuItem(0);\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(\"current-scene-ready\", this);\n    }\n    createBackground() {\n        this.add.rectangle(0, 0, this.cameras.main.width, this.cameras.main.height, 0x000000, 0.7).setOrigin(0);\n    }\n    createTitle() {\n        this.add.text(this.cameras.main.width / 2, 100, \"GAME OVER\", {\n            fontSize: \"48px\",\n            color: \"#ff0000\",\n            fontFamily: \"Arial\",\n            stroke: \"#000000\",\n            strokeThickness: 4\n        }).setOrigin(0.5);\n    }\n    createScoreDisplay() {\n        this.add.text(this.cameras.main.width / 2, 200, `FINAL SCORE: ${this.score}`, {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5);\n    }\n    createMenuItems() {\n        this.menuItems = [\n            this.createMenuItem(300, \"CONTINUE\", \"#00ff00\", ()=>{\n                _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(\"continue-game\");\n                this.scene.stop();\n            }),\n            this.createMenuItem(400, \"PLAY AGAIN\", \"#ffffff\", ()=>{\n                this.sound.stopAll();\n                this.scene.stop();\n                _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(\"restart-game\");\n            }),\n            this.createMenuItem(500, \"SAVE RESULT\", \"#ffffff\", ()=>{\n                if (_managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_3__.LocalStorageManager.isScoreInTop(this.score)) {\n                    this.scene.launch(\"InputScene\", {\n                        score: this.score,\n                        level: this.registry.get(\"currentLevel\") || 1\n                    });\n                } else {\n                    this.showMessage(\"Score too low for top 10\");\n                }\n            }),\n            this.createMenuItem(600, \"MAIN MENU\", \"#ffffff\", ()=>{\n                this.sound.stopAll();\n                this.scene.stop();\n                _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(\"main-menu-from-game-over\");\n            })\n        ];\n    }\n    showMessage(text) {\n        // Удаляем предыдущее сообщение, если оно есть\n        const existingMessage = this.children.getByName(\"statusMessage\");\n        if (existingMessage) {\n            existingMessage.destroy();\n        }\n        // Создаем новое сообщение с именем для последующего удаления\n        const message = this.add.text(this.cameras.main.width / 2, this.cameras.main.height / 2, text, {\n            fontFamily: \"Arial\",\n            fontSize: \"28px\",\n            color: \"#ff0000\",\n            backgroundColor: \"#333333\",\n            padding: {\n                left: 20,\n                right: 20,\n                top: 10,\n                bottom: 10\n            },\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5).setDepth(100) // Устанавливаем высокий depth чтобы было поверх других элементов\n        .setName(\"statusMessage\"); // Даем имя для последующего поиска\n        // Анимация появления\n        message.setAlpha(0);\n        this.tweens.add({\n            targets: message,\n            alpha: 1,\n            duration: 300,\n            ease: \"Linear\"\n        });\n        // Автоматическое исчезновение через 2 секунды с анимацией\n        this.time.delayedCall(2000, ()=>{\n            this.tweens.add({\n                targets: message,\n                alpha: 0,\n                duration: 500,\n                ease: \"Linear\",\n                onComplete: ()=>message.destroy()\n            });\n        });\n    }\n    createMenuItem(y, text, color, action) {\n        const menuItem = this.add.text(this.cameras.main.width / 2, y, text, {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: color,\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5).setInteractive();\n        menuItem.on(\"pointerover\", ()=>{\n            this.selectedItemIndex = this.menuItems.indexOf(menuItem);\n            this.selectMenuItem(this.selectedItemIndex);\n        });\n        menuItem.on(\"pointerout\", ()=>{\n            menuItem.setColor(color);\n        });\n        menuItem.on(\"pointerdown\", action);\n        return menuItem;\n    }\n    setupInput() {\n        this.menuInput = new _components_input_human_menu_input_component__WEBPACK_IMPORTED_MODULE_2__.MenuInputComponent(this);\n        // Добавляем поддержку мыши\n        this.input.on(\"pointermove\", (pointer)=>{\n            if (!pointer.isDown) return;\n            const item = this.menuItems.find((item)=>item.getBounds().contains(pointer.x, pointer.y));\n            if (item) {\n                this.selectedItemIndex = this.menuItems.indexOf(item);\n                this.selectMenuItem(this.selectedItemIndex);\n                item.emit(\"pointerdown\");\n            }\n        });\n    }\n    update(time) {\n        if (!this.menuInput || this.isInputSceneActive()) return;\n        this.menuInput.update();\n        this.handleNavigation(time);\n        this.handleSelection();\n        this.handleThirdAction();\n    }\n    isInputSceneActive() {\n        return this.scene.isActive(\"InputScene\");\n    }\n    handleNavigation(time) {\n        if (time - this.lastInputTime < this.inputDelay) return;\n        if (this.menuInput.downIsDown) {\n            this.changeSelectedItem(1);\n            this.lastInputTime = time;\n        } else if (this.menuInput.upIsDown) {\n            this.changeSelectedItem(-1);\n            this.lastInputTime = time;\n        }\n    }\n    changeSelectedItem(direction) {\n        this.selectedItemIndex = (this.selectedItemIndex + direction + this.menuItems.length) % this.menuItems.length;\n        this.selectMenuItem(this.selectedItemIndex);\n    }\n    handleSelection() {\n        if (this.menuInput.primaryActionIsDown) {\n            this.menuItems[this.selectedItemIndex].emit(\"pointerdown\");\n        }\n    }\n    handleThirdAction() {\n        if (this.menuInput.thirdActionIsDown) {\n            this.registry.get(\"onRestart\")();\n        }\n    }\n    selectMenuItem(index) {\n        this.menuItems.forEach((item, i)=>{\n            item.setColor(i === index ? \"#ff0\" : \"#fff\");\n            item.setScale(i === index ? 1.1 : 1.0);\n        });\n    }\n    shutdown() {\n        const message = this.children.getByName(\"statusMessage\");\n        if (message) {\n            message.destroy();\n        }\n        this.menuInput?.cleanup();\n        this.input.off(\"pointermove\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN3RixNQUFNO1FBQzdHLElBQUksQ0FBQ3hFLGNBQWMsQ0FBQyxJQUFJLENBQUNmLGlCQUFpQjtJQUM5QztJQUVRZ0Ysa0JBQWtCO1FBQ3RCLElBQUksSUFBSSxDQUFDWixTQUFTLENBQUNvQixtQkFBbUIsRUFBRTtZQUNwQyxJQUFJLENBQUN6RixTQUFTLENBQUMsSUFBSSxDQUFDQyxpQkFBaUIsQ0FBQyxDQUFDZ0IsSUFBSSxDQUFDO1FBQ2hEO0lBQ0o7SUFFUWlFLG9CQUFvQjtRQUN4QixJQUFJLElBQUksQ0FBQ2IsU0FBUyxDQUFDcUIsaUJBQWlCLEVBQUU7WUFDbEMsSUFBSSxDQUFDckQsUUFBUSxDQUFDQyxHQUFHLENBQUM7UUFDdEI7SUFDSjtJQUVRdEIsZUFBZTJFLEtBQWEsRUFBRTtRQUNsQyxJQUFJLENBQUMzRixTQUFTLENBQUM0RixPQUFPLENBQUMsQ0FBQ25CLE1BQU1vQjtZQUMxQnBCLEtBQUtMLFFBQVEsQ0FBQ3lCLE1BQU1GLFFBQVEsU0FBUztZQUNyQ2xCLEtBQUtxQixRQUFRLENBQUNELE1BQU1GLFFBQVEsTUFBTTtRQUN0QztJQUNKO0lBRUFJLFdBQVc7UUFDUCxNQUFNbkQsVUFBVSxJQUFJLENBQUNILFFBQVEsQ0FBQ0MsU0FBUyxDQUFDO1FBQ3hDLElBQUlFLFNBQVM7WUFDVEEsUUFBUUQsT0FBTztRQUNuQjtRQUVBLElBQUksQ0FBQzBCLFNBQVMsRUFBRTJCO1FBQ2hCLElBQUksQ0FBQzFCLEtBQUssQ0FBQzJCLEdBQUcsQ0FBQztJQUNuQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL3NjZW5lcy9nYW1lLW92ZXItc2NlbmUudHM/YzY0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJy4uL2V2ZW50LWJ1cyc7XG5pbXBvcnQgeyBNZW51SW5wdXRDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL2lucHV0L2h1bWFuL21lbnUtaW5wdXQtY29tcG9uZW50JztcbmltcG9ydCB7IExvY2FsU3RvcmFnZU1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycy9sb2NhbC1zdG9yYWdlLW1hbmFnZXInO1xuXG5leHBvcnQgY2xhc3MgR2FtZU92ZXIgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xuICAgIHByaXZhdGUgbWVudUlucHV0ITogTWVudUlucHV0Q29tcG9uZW50O1xuICAgIHByaXZhdGUgbWVudUl0ZW1zOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dFtdID0gW107XG4gICAgcHJpdmF0ZSBzZWxlY3RlZEl0ZW1JbmRleCA9IDA7XG4gICAgcHJpdmF0ZSBsYXN0SW5wdXRUaW1lID0gMDtcbiAgICBwcml2YXRlIGlucHV0RGVsYXkgPSAyMDA7XG4gICAgcHJpdmF0ZSBzY29yZTogbnVtYmVyID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignR2FtZU92ZXInKTtcbiAgICB9XG5cbiAgICBpbml0KGRhdGE6IHsgc2NvcmU6IG51bWJlciB9KSB7XG4gICAgICAgIHRoaXMuc2NvcmUgPSBkYXRhLnNjb3JlIHx8IDA7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggPSAwO1xuICAgICAgICB0aGlzLmxhc3RJbnB1dFRpbWUgPSAwO1xuICAgIH1cblxuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4uZmFkZUluKDUwMCwgMCwgMCwgMCk7XG4gICAgICAgIHRoaXMuY3JlYXRlQmFja2dyb3VuZCgpO1xuICAgICAgICB0aGlzLmNyZWF0ZVRpdGxlKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlU2NvcmVEaXNwbGF5KCk7XG4gICAgICAgIHRoaXMuY3JlYXRlTWVudUl0ZW1zKCk7XG4gICAgICAgIHRoaXMuc2V0dXBJbnB1dCgpO1xuICAgICAgICB0aGlzLnNlbGVjdE1lbnVJdGVtKDApO1xuXG4gICAgICAgIEV2ZW50QnVzLmVtaXQoJ2N1cnJlbnQtc2NlbmUtcmVhZHknLCB0aGlzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUJhY2tncm91bmQoKSB7XG4gICAgICAgIHRoaXMuYWRkLnJlY3RhbmdsZShcbiAgICAgICAgICAgIDAsIDAsIFxuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4ud2lkdGgsIFxuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4uaGVpZ2h0LCBcbiAgICAgICAgICAgIDB4MDAwMDAwLCAwLjdcbiAgICAgICAgKS5zZXRPcmlnaW4oMCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVUaXRsZSgpIHtcbiAgICAgICAgdGhpcy5hZGQudGV4dChcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLndpZHRoIC8gMiwgXG4gICAgICAgICAgICAxMDAsIFxuICAgICAgICAgICAgJ0dBTUUgT1ZFUicsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICc0OHB4JyxcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNmZjAwMDAnLFxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXG4gICAgICAgICAgICAgICAgc3Ryb2tlVGhpY2tuZXNzOiA0XG4gICAgICAgICAgICB9XG4gICAgICAgICkuc2V0T3JpZ2luKDAuNSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVTY29yZURpc3BsYXkoKSB7XG4gICAgICAgIHRoaXMuYWRkLnRleHQoXG4gICAgICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi53aWR0aCAvIDIsIFxuICAgICAgICAgICAgMjAwLCBcbiAgICAgICAgICAgIGBGSU5BTCBTQ09SRTogJHt0aGlzLnNjb3JlfWAsIFxuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLCBcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzMycHgnLCBcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLFxuICAgICAgICAgICAgICAgIHN0cm9rZVRoaWNrbmVzczogMlxuICAgICAgICAgICAgfVxuICAgICAgICApLnNldE9yaWdpbigwLjUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlTWVudUl0ZW1zKCkge1xuICAgICAgICB0aGlzLm1lbnVJdGVtcyA9IFtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTWVudUl0ZW0oMzAwLCAnQ09OVElOVUUnLCAnIzAwZmYwMCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBFdmVudEJ1cy5lbWl0KCdjb250aW51ZS1nYW1lJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdG9wKCk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTWVudUl0ZW0oNDAwLCAnUExBWSBBR0FJTicsICcjZmZmZmZmJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc291bmQuc3RvcEFsbCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RvcCgpO1xuICAgICAgICAgICAgICAgIEV2ZW50QnVzLmVtaXQoJ3Jlc3RhcnQtZ2FtZScpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU1lbnVJdGVtKDUwMCwgJ1NBVkUgUkVTVUxUJywgJyNmZmZmZmYnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKExvY2FsU3RvcmFnZU1hbmFnZXIuaXNTY29yZUluVG9wKHRoaXMuc2NvcmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUubGF1bmNoKCdJbnB1dFNjZW5lJywgeyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlOiB0aGlzLnNjb3JlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiB0aGlzLnJlZ2lzdHJ5LmdldCgnY3VycmVudExldmVsJykgfHwgMVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdTY29yZSB0b28gbG93IGZvciB0b3AgMTAnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTWVudUl0ZW0oNjAwLCAnTUFJTiBNRU5VJywgJyNmZmZmZmYnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zb3VuZC5zdG9wQWxsKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgRXZlbnRCdXMuZW1pdCgnbWFpbi1tZW51LWZyb20tZ2FtZS1vdmVyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICBdO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd01lc3NhZ2UodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIC8vINCj0LTQsNC70Y/QtdC8INC/0YDQtdC00YvQtNGD0YnQtdC1INGB0L7QvtCx0YnQtdC90LjQtSwg0LXRgdC70Lgg0L7QvdC+INC10YHRgtGMXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nTWVzc2FnZSA9IHRoaXMuY2hpbGRyZW4uZ2V0QnlOYW1lKCdzdGF0dXNNZXNzYWdlJyk7XG4gICAgICAgIGlmIChleGlzdGluZ01lc3NhZ2UpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nTWVzc2FnZS5kZXN0cm95KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDQodC+0LfQtNCw0LXQvCDQvdC+0LLQvtC1INGB0L7QvtCx0YnQtdC90LjQtSDRgSDQuNC80LXQvdC10Lwg0LTQu9GPINC/0L7RgdC70LXQtNGD0Y7RidC10LPQviDRg9C00LDQu9C10L3QuNGPXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmFkZC50ZXh0KFxuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4ud2lkdGggLyAyLFxuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4uaGVpZ2h0IC8gMixcbiAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzI4cHgnLFxuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmMDAwMCcsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzMzMzMzMycsXG4gICAgICAgICAgICAgICAgcGFkZGluZzogeyBsZWZ0OiAyMCwgcmlnaHQ6IDIwLCB0b3A6IDEwLCBib3R0b206IDEwIH0sXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXG4gICAgICAgICAgICAgICAgc3Ryb2tlVGhpY2tuZXNzOiAyXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgLnNldE9yaWdpbigwLjUpXG4gICAgICAgIC5zZXREZXB0aCgxMDApIC8vINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INCy0YvRgdC+0LrQuNC5IGRlcHRoINGH0YLQvtCx0Ysg0LHRi9C70L4g0L/QvtCy0LXRgNGFINC00YDRg9Cz0LjRhSDRjdC70LXQvNC10L3RgtC+0LJcbiAgICAgICAgLnNldE5hbWUoJ3N0YXR1c01lc3NhZ2UnKTsgLy8g0JTQsNC10Lwg0LjQvNGPINC00LvRjyDQv9C+0YHQu9C10LTRg9GO0YnQtdCz0L4g0L/QvtC40YHQutCwXG5cbiAgICAgICAgLy8g0JDQvdC40LzQsNGG0LjRjyDQv9C+0Y/QstC70LXQvdC40Y9cbiAgICAgICAgbWVzc2FnZS5zZXRBbHBoYSgwKTtcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IG1lc3NhZ2UsXG4gICAgICAgICAgICBhbHBoYTogMSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICBlYXNlOiAnTGluZWFyJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyDQkNCy0YLQvtC80LDRgtC40YfQtdGB0LrQvtC1INC40YHRh9C10LfQvdC+0LLQtdC90LjQtSDRh9C10YDQtdC3IDIg0YHQtdC60YPQvdC00Ysg0YEg0LDQvdC40LzQsNGG0LjQtdC5XG4gICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCgyMDAwLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgICAgIHRhcmdldHM6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgYWxwaGE6IDAsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgICAgICBlYXNlOiAnTGluZWFyJyxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiBtZXNzYWdlLmRlc3Ryb3koKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlTWVudUl0ZW0oeTogbnVtYmVyLCB0ZXh0OiBzdHJpbmcsIGNvbG9yOiBzdHJpbmcsIGFjdGlvbjogKCkgPT4gdm9pZCk6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0IHtcbiAgICAgICAgY29uc3QgbWVudUl0ZW0gPSB0aGlzLmFkZC50ZXh0KFxuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4ud2lkdGggLyAyLCBcbiAgICAgICAgICAgIHksIFxuICAgICAgICAgICAgdGV4dCwgXG4gICAgICAgICAgICB7IFxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsIFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMzJweCcsIFxuICAgICAgICAgICAgICAgIGNvbG9yOiBjb2xvcixcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwMDAwJyxcbiAgICAgICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDJcbiAgICAgICAgICAgIH1cbiAgICAgICAgKS5zZXRPcmlnaW4oMC41KS5zZXRJbnRlcmFjdGl2ZSgpO1xuXG4gICAgICAgIG1lbnVJdGVtLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggPSB0aGlzLm1lbnVJdGVtcy5pbmRleE9mKG1lbnVJdGVtKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TWVudUl0ZW0odGhpcy5zZWxlY3RlZEl0ZW1JbmRleCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1lbnVJdGVtLm9uKCdwb2ludGVyb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgbWVudUl0ZW0uc2V0Q29sb3IoY29sb3IpO1xuICAgICAgICB9KTtcblxuICAgICAgICBtZW51SXRlbS5vbigncG9pbnRlcmRvd24nLCBhY3Rpb24pO1xuXG4gICAgICAgIHJldHVybiBtZW51SXRlbTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwSW5wdXQoKSB7XG4gICAgICAgIHRoaXMubWVudUlucHV0ID0gbmV3IE1lbnVJbnB1dENvbXBvbmVudCh0aGlzKTtcbiAgICAgICAgXG4gICAgICAgIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDQv9C+0LTQtNC10YDQttC60YMg0LzRi9GI0LhcbiAgICAgICAgdGhpcy5pbnB1dC5vbigncG9pbnRlcm1vdmUnLCAocG9pbnRlcjogUGhhc2VyLklucHV0LlBvaW50ZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghcG9pbnRlci5pc0Rvd24pIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMubWVudUl0ZW1zLmZpbmQoaXRlbSA9PiBcbiAgICAgICAgICAgICAgICBpdGVtLmdldEJvdW5kcygpLmNvbnRhaW5zKHBvaW50ZXIueCwgcG9pbnRlci55KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbUluZGV4ID0gdGhpcy5tZW51SXRlbXMuaW5kZXhPZihpdGVtKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1lbnVJdGVtKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXgpO1xuICAgICAgICAgICAgICAgIGl0ZW0uZW1pdCgncG9pbnRlcmRvd24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdXBkYXRlKHRpbWU6IG51bWJlcikge1xuICAgICAgICBpZiAoIXRoaXMubWVudUlucHV0IHx8IHRoaXMuaXNJbnB1dFNjZW5lQWN0aXZlKCkpIHJldHVybjtcblxuICAgICAgICB0aGlzLm1lbnVJbnB1dC51cGRhdGUoKTtcblxuICAgICAgICB0aGlzLmhhbmRsZU5hdmlnYXRpb24odGltZSk7XG4gICAgICAgIHRoaXMuaGFuZGxlU2VsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlVGhpcmRBY3Rpb24oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzSW5wdXRTY2VuZUFjdGl2ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmUuaXNBY3RpdmUoJ0lucHV0U2NlbmUnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZU5hdmlnYXRpb24odGltZTogbnVtYmVyKSB7XG4gICAgICAgIGlmICh0aW1lIC0gdGhpcy5sYXN0SW5wdXRUaW1lIDwgdGhpcy5pbnB1dERlbGF5KSByZXR1cm47XG5cbiAgICAgICAgaWYgKHRoaXMubWVudUlucHV0LmRvd25Jc0Rvd24pIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU2VsZWN0ZWRJdGVtKDEpO1xuICAgICAgICAgICAgdGhpcy5sYXN0SW5wdXRUaW1lID0gdGltZTtcbiAgICAgICAgfSBcbiAgICAgICAgZWxzZSBpZiAodGhpcy5tZW51SW5wdXQudXBJc0Rvd24pIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU2VsZWN0ZWRJdGVtKC0xKTtcbiAgICAgICAgICAgIHRoaXMubGFzdElucHV0VGltZSA9IHRpbWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNoYW5nZVNlbGVjdGVkSXRlbShkaXJlY3Rpb246IG51bWJlcikge1xuICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbUluZGV4ID0gKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggKyBkaXJlY3Rpb24gKyB0aGlzLm1lbnVJdGVtcy5sZW5ndGgpICUgdGhpcy5tZW51SXRlbXMubGVuZ3RoO1xuICAgICAgICB0aGlzLnNlbGVjdE1lbnVJdGVtKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlU2VsZWN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5tZW51SW5wdXQucHJpbWFyeUFjdGlvbklzRG93bikge1xuICAgICAgICAgICAgdGhpcy5tZW51SXRlbXNbdGhpcy5zZWxlY3RlZEl0ZW1JbmRleF0uZW1pdCgncG9pbnRlcmRvd24nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlVGhpcmRBY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLm1lbnVJbnB1dC50aGlyZEFjdGlvbklzRG93bikge1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS5nZXQoJ29uUmVzdGFydCcpKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNlbGVjdE1lbnVJdGVtKGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5tZW51SXRlbXMuZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgaXRlbS5zZXRDb2xvcihpID09PSBpbmRleCA/ICcjZmYwJyA6ICcjZmZmJyk7XG4gICAgICAgICAgICBpdGVtLnNldFNjYWxlKGkgPT09IGluZGV4ID8gMS4xIDogMS4wKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmNoaWxkcmVuLmdldEJ5TmFtZSgnc3RhdHVzTWVzc2FnZScpO1xuICAgICAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICAgICAgbWVzc2FnZS5kZXN0cm95KCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1lbnVJbnB1dD8uY2xlYW51cCgpO1xuICAgICAgICB0aGlzLmlucHV0Lm9mZigncG9pbnRlcm1vdmUnKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUGhhc2VyIiwiRXZlbnRCdXMiLCJNZW51SW5wdXRDb21wb25lbnQiLCJMb2NhbFN0b3JhZ2VNYW5hZ2VyIiwiR2FtZU92ZXIiLCJTY2VuZSIsImNvbnN0cnVjdG9yIiwibWVudUl0ZW1zIiwic2VsZWN0ZWRJdGVtSW5kZXgiLCJsYXN0SW5wdXRUaW1lIiwiaW5wdXREZWxheSIsInNjb3JlIiwiaW5pdCIsImRhdGEiLCJjcmVhdGUiLCJjYW1lcmFzIiwibWFpbiIsImZhZGVJbiIsImNyZWF0ZUJhY2tncm91bmQiLCJjcmVhdGVUaXRsZSIsImNyZWF0ZVNjb3JlRGlzcGxheSIsImNyZWF0ZU1lbnVJdGVtcyIsInNldHVwSW5wdXQiLCJzZWxlY3RNZW51SXRlbSIsImVtaXQiLCJhZGQiLCJyZWN0YW5nbGUiLCJ3aWR0aCIsImhlaWdodCIsInNldE9yaWdpbiIsInRleHQiLCJmb250U2l6ZSIsImNvbG9yIiwiZm9udEZhbWlseSIsInN0cm9rZSIsInN0cm9rZVRoaWNrbmVzcyIsImNyZWF0ZU1lbnVJdGVtIiwic2NlbmUiLCJzdG9wIiwic291bmQiLCJzdG9wQWxsIiwiaXNTY29yZUluVG9wIiwibGF1bmNoIiwibGV2ZWwiLCJyZWdpc3RyeSIsImdldCIsInNob3dNZXNzYWdlIiwiZXhpc3RpbmdNZXNzYWdlIiwiY2hpbGRyZW4iLCJnZXRCeU5hbWUiLCJkZXN0cm95IiwibWVzc2FnZSIsImJhY2tncm91bmRDb2xvciIsInBhZGRpbmciLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJzZXREZXB0aCIsInNldE5hbWUiLCJzZXRBbHBoYSIsInR3ZWVucyIsInRhcmdldHMiLCJhbHBoYSIsImR1cmF0aW9uIiwiZWFzZSIsInRpbWUiLCJkZWxheWVkQ2FsbCIsIm9uQ29tcGxldGUiLCJ5IiwiYWN0aW9uIiwibWVudUl0ZW0iLCJzZXRJbnRlcmFjdGl2ZSIsIm9uIiwiaW5kZXhPZiIsInNldENvbG9yIiwibWVudUlucHV0IiwiaW5wdXQiLCJwb2ludGVyIiwiaXNEb3duIiwiaXRlbSIsImZpbmQiLCJnZXRCb3VuZHMiLCJjb250YWlucyIsIngiLCJ1cGRhdGUiLCJpc0lucHV0U2NlbmVBY3RpdmUiLCJoYW5kbGVOYXZpZ2F0aW9uIiwiaGFuZGxlU2VsZWN0aW9uIiwiaGFuZGxlVGhpcmRBY3Rpb24iLCJpc0FjdGl2ZSIsImRvd25Jc0Rvd24iLCJjaGFuZ2VTZWxlY3RlZEl0ZW0iLCJ1cElzRG93biIsImRpcmVjdGlvbiIsImxlbmd0aCIsInByaW1hcnlBY3Rpb25Jc0Rvd24iLCJ0aGlyZEFjdGlvbklzRG93biIsImluZGV4IiwiZm9yRWFjaCIsImkiLCJzZXRTY2FsZSIsInNodXRkb3duIiwiY2xlYW51cCIsIm9mZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/scenes/game-over-scene.ts\n");

/***/ }),

/***/ "./src/game/scenes/game-scene.ts":
/*!***************************************!*\
  !*** ./src/game/scenes/game-scene.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GameScene: () => (/* binding */ GameScene)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _entities_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../entities/player */ \"./src/game/entities/player.ts\");\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../event-bus */ \"./src/game/event-bus.ts\");\n/* harmony import */ var _components_spawners_enemy_destroyed_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/spawners/enemy-destroyed-component */ \"./src/game/components/spawners/enemy-destroyed-component.ts\");\n/* harmony import */ var _entities_ui_score__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/ui/score */ \"./src/game/entities/ui/score.ts\");\n/* harmony import */ var _entities_ui_lives__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/ui/lives */ \"./src/game/entities/ui/lives.ts\");\n/* harmony import */ var _managers_level_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../managers/level-manager */ \"./src/game/managers/level-manager.ts\");\n/* harmony import */ var _configs_game_config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../configs/game-config */ \"./src/game/configs/game-config.ts\");\n/* harmony import */ var _types_custom_events__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _entities_enemies_common_fighter_enemy__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../entities/enemies/common/fighter-enemy */ \"./src/game/entities/enemies/common/fighter-enemy.ts\");\n/* harmony import */ var _entities_enemies_common_scout_enemy__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../entities/enemies/common/scout-enemy */ \"./src/game/entities/enemies/common/scout-enemy.ts\");\n/* harmony import */ var _managers_collision_manager__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../managers/collision-manager */ \"./src/game/managers/collision-manager.ts\");\n/* harmony import */ var _managers_enemy_spawner_manager__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../managers/enemy-spawner-manager */ \"./src/game/managers/enemy-spawner-manager.ts\");\n/* harmony import */ var _entities_ui_bombs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../entities/ui/bombs */ \"./src/game/entities/ui/bombs.ts\");\n/* harmony import */ var _entities_ui_weapon__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../entities/ui/weapon */ \"./src/game/entities/ui/weapon.ts\");\n/* harmony import */ var _entities_ui_fps_display__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../entities/ui/fps-display */ \"./src/game/entities/ui/fps-display.ts\");\n/* harmony import */ var _managers_item_manager__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../managers/item-manager */ \"./src/game/managers/item-manager.ts\");\n/* harmony import */ var _entities_enemies_common_circular_fighter_enemy__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../entities/enemies/common/circular-fighter-enemy */ \"./src/game/entities/enemies/common/circular-fighter-enemy.ts\");\n/* harmony import */ var _managers_audio_manager__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../managers/audio-manager */ \"./src/game/managers/audio-manager.ts\");\n/* harmony import */ var _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../managers/local-storage-manager */ \"./src/game/managers/local-storage-manager.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass GameScene extends (phaser__WEBPACK_IMPORTED_MODULE_0___default().Scene) {\n    constructor(){\n        super({\n            key: \"GameScene\"\n        });\n        this.isPaused = false;\n        this.backgrounds = [];\n        this.continueCount = 0;\n        this.startLevel = ()=>{\n            console.log(`[GameScene] Starting level ${this.currentLevel + 1}`);\n            this.registry.set(\"currentLevel\", this.currentLevel + 1);\n            this.levelManager.startLevel(this.currentLevel);\n        };\n        this.handleLevelComplete = (data)=>{\n            if (data.level + 1 < this.levelManager.levelsCount) {\n                this.time.delayedCall(5000, ()=>{\n                    // Переход на следующий уровень\n                    this.scene.launch(\"LevelComplete\", {\n                        level: data.level,\n                        lives: this.livesSystem.livesCount\n                    });\n                });\n                this.time.delayedCall(9000, ()=>{\n                    this.prepareNextLevel(data.level + 1);\n                });\n            } else {\n                // Финальная победа\n                _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.GAME_COMPLETE);\n                this.scene.launch(\"Victory\", {\n                    score: this.registry.get(\"score\"),\n                    lives: this.livesSystem.livesCount\n                });\n            }\n        };\n        this.handleGameOver = ()=>{\n            this.time.delayedCall(500, ()=>{\n                this.physics.world.pause();\n                this.time.paused = true;\n                this.scene.launch(\"GameOver\", {\n                    score: this.registry.get(\"score\")\n                });\n                this.scene.pause();\n            });\n        };\n    }\n    create() {\n        this.cleanup();\n        this.currentSettings = _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_19__.LocalStorageManager.loadSettings();\n        this.isPaused = false;\n        this.time.paused = false;\n        this.physics.world.resume();\n        this.initGameSystems();\n        this.initUI();\n        this.createBackgrounds();\n        this.input.keyboard?.removeKey((phaser__WEBPACK_IMPORTED_MODULE_0___default().Input).Keyboard.KeyCodes.ESC);\n        this.pauseKey = this.input.keyboard.addKey((phaser__WEBPACK_IMPORTED_MODULE_0___default().Input).Keyboard.KeyCodes.ESC);\n        this.pauseKey.reset();\n        const levels = this.createLevels();\n        this.levelManager = new _managers_level_manager__WEBPACK_IMPORTED_MODULE_6__.LevelManager(this, levels);\n        this.setupEventListeners();\n        this.time.delayedCall(1000, ()=>{\n            _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.PLAYER_READY);\n        });\n        this.currentLevel = 0;\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.emit(\"current-scene-ready\", this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.POWER_CHANGED, 0);\n    }\n    createLevels() {\n        return _configs_game_config__WEBPACK_IMPORTED_MODULE_7__.levels;\n    }\n    createBackgrounds() {\n        this.audioManager.playMusic(\"bg\");\n        // Удаляем старые фоны, если они есть\n        this.backgrounds.forEach((bg)=>bg.destroy());\n        this.backgrounds = [];\n        // Создаем несколько слоев фона с разной скоростью для параллакс-эффекта\n        const bgConfigs = [\n            {\n                key: \"bg1\",\n                speed: 0.5,\n                alpha: 0.7,\n                scale: 1.25\n            },\n            {\n                key: \"bg2\",\n                speed: 1.0,\n                alpha: 0.7,\n                scale: 1.25\n            },\n            {\n                key: \"bg3\",\n                speed: 1.5,\n                alpha: 0.7,\n                scale: 1.25\n            }\n        ];\n        bgConfigs.forEach((bg, index)=>{\n            // Создаем TileSprite вместо обычного Sprite\n            const background = this.add.tileSprite(0, 0, this.scale.width, this.scale.height, bg.key // ключ текстуры\n            );\n            background.setOrigin(0, 0).setAlpha(bg.alpha).setScale(bg.scale).setDepth(-10 + index);\n            this.backgrounds.push(background);\n        });\n    }\n    setupEventListeners() {\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.LEVEL_COMPLETE, this.handleLevelComplete, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.PLAYER_READY, this.startLevel, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.GAME_OVER, this.handleGameOver, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.RESTART_GAME, this.restartGame, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.CONTINUE_GAME, this.continueGame, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.CLEANUP_GAME, this.cleanup, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.on(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.MAIM_MENU_FROM_GAME_OVER, this.returnToMainMenu, this);\n    }\n    initGameSystems() {\n        this.player = new _entities_player__WEBPACK_IMPORTED_MODULE_1__.Player(this, _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus);\n        this.registry.set(\"player\", this.player);\n        this.spawnerManager = new _managers_enemy_spawner_manager__WEBPACK_IMPORTED_MODULE_12__.EnemySpawnerManager(this, _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus);\n        this.initializeSpawners();\n        new _components_spawners_enemy_destroyed_component__WEBPACK_IMPORTED_MODULE_3__.EnemyDestroyedComponent(this, _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus);\n        this.itemManager = new _managers_item_manager__WEBPACK_IMPORTED_MODULE_16__.ItemManager(this, _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus, this.player);\n        this.audioManager = new _managers_audio_manager__WEBPACK_IMPORTED_MODULE_18__.AudioManager(this, _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus);\n    }\n    prepareNextLevel(nextLevel) {\n        // Очистка текущего уровня\n        this.cleanupLevel();\n        this.initializeSpawners();\n        // Запуск нового уровня\n        this.currentLevel = nextLevel;\n        this.startLevel();\n    }\n    cleanupLevel() {\n        // Уничтожение всех врагов и пуль\n        this.spawnerManager.getAllSpawners().forEach((spawner)=>spawner.cleanup());\n        this.itemManager?.clearAllItems();\n    }\n    initializeSpawners() {\n        this.cleanupLevel();\n        this.spawnerManager.cleanup();\n        if (this.collisionManager) {\n            this.collisionManager.cleanup();\n        }\n        const enemyTypes = [\n            {\n                type: \"scout\",\n                class: _entities_enemies_common_scout_enemy__WEBPACK_IMPORTED_MODULE_10__.ScoutEnemy\n            },\n            {\n                type: \"fighter\",\n                class: _entities_enemies_common_fighter_enemy__WEBPACK_IMPORTED_MODULE_9__.FighterEnemy\n            },\n            {\n                type: \"circular_fighter\",\n                class: _entities_enemies_common_circular_fighter_enemy__WEBPACK_IMPORTED_MODULE_17__.CircularFighterEnemy\n            }\n        ];\n        enemyTypes.forEach(({ type, class: enemyClass })=>{\n            this.spawnerManager.registerSpawner(type, enemyClass);\n        });\n        this.collisionManager = new _managers_collision_manager__WEBPACK_IMPORTED_MODULE_11__.CollisionManager(this, this.player, this.spawnerManager, _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus);\n        this.collisionManager.setupBaseCollisions();\n    }\n    initUI() {\n        this.scoreSystem = new _entities_ui_score__WEBPACK_IMPORTED_MODULE_4__.Score(this, _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus);\n        this.livesSystem = new _entities_ui_lives__WEBPACK_IMPORTED_MODULE_5__.Lives(this, _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus);\n        this.bombCounter = new _entities_ui_bombs__WEBPACK_IMPORTED_MODULE_13__.Bombs(this, _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus);\n        this.weaponDisplay = new _entities_ui_weapon__WEBPACK_IMPORTED_MODULE_14__.Weapons(this, _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus);\n        if (this.currentSettings.showFPS) {\n            this.fpsDisplay = new _entities_ui_fps_display__WEBPACK_IMPORTED_MODULE_15__.FPSDisplay(this, 470, 630);\n        }\n    }\n    update() {\n        if (!this.scene.isActive() || this.isGameplayBlocked()) {\n            return;\n        }\n        // Обновляем положение фона (прокрутка)\n        this.backgrounds.forEach((bg, index)=>{\n            // Прокручиваем фон с разной скоростью для параллакс-эффекта\n            const speed = [\n                0.5,\n                1.0,\n                1.5\n            ][index] || 1.0;\n            bg.tilePositionY -= speed;\n        });\n        if (phaser__WEBPACK_IMPORTED_MODULE_0___default().Input.Keyboard.JustDown(this.pauseKey)) {\n            this.togglePause();\n        }\n        if (this.currentSettings.showFPS) {\n            this.fpsDisplay.update();\n        }\n        this.registry.set(\"player\", this.player);\n    }\n    isGameplayBlocked() {\n        return this.scene.isActive(\"LevelComplete\") || this.scene.isActive(\"Victory\") || this.scene.isActive(\"PauseMenu\");\n    }\n    togglePause() {\n        if (this.isGameplayBlocked()) return;\n        this.isPaused = !this.isPaused;\n        if (this.isPaused) {\n            this.pauseGame();\n        } else {\n            this.resumeGame();\n        }\n    }\n    pauseGame() {\n        // Приостанавливаем физику и таймеры\n        this.physics.world.pause();\n        this.time.paused = true;\n        // Запускаем сцену паузы\n        this.scene.launch(\"PauseMenu\", {\n            onResume: ()=>this.resumeGame(),\n            onRestart: ()=>this.restartGame(),\n            onMainMenu: ()=>this.returnToMainMenu()\n        });\n        // Приостанавливаем текущую сцену\n        this.scene.pause();\n    }\n    resumeGame() {\n        // Возобновляем физику и таймеры\n        this.physics.world.resume();\n        this.time.paused = false;\n        // Закрываем меню паузы\n        if (this.scene.isActive(\"PauseMenu\")) {\n            this.scene.stop(\"PauseMenu\");\n        }\n        // Возобновляем текущую сцену\n        this.scene.resume();\n        this.isPaused = false;\n    }\n    restartGame() {\n        this.scene.stop(\"PauseMenu\");\n        this.scene.stop(\"GameOver\");\n        this.cleanup();\n        this.scene.restart();\n    }\n    returnToMainMenu() {\n        this.cleanup();\n        this.scene.stop(\"PauseMenu\");\n        this.scene.stop(\"GameScene\");\n        this.scene.start(\"MainMenu\");\n    }\n    continueGame() {\n        // Сбрасываем жизни\n        if (this.livesSystem) {\n            this.livesSystem.resetLives();\n        }\n        // Обнуляем счет + добавляем количество продолжений\n        if (this.continueCount < 9) {\n            this.continueCount++;\n        }\n        if (this.scoreSystem) {\n            this.scoreSystem.resetScore(this.continueCount);\n        }\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.PLAYER_SPAWN);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.RESUME_GAME);\n        this.cameras.main.fadeIn(300);\n        this.physics.world.resume();\n        this.time.paused = false;\n        if (this.scene.isActive(\"GameOver\")) {\n            this.scene.stop(\"GameOver\");\n        }\n        this.scene.resume();\n        this.isPaused = false;\n    }\n    cleanup() {\n        this.sound.stopAll();\n        this.audioManager?.destroy();\n        this.itemManager?.clearAllItems();\n        this.itemManager?.cleanup();\n        this.levelManager?.cleanup();\n        this.collisionManager?.cleanup();\n        this.spawnerManager?.cleanup();\n        if (this.player) {\n            this.player?.weapon?.cleanup();\n            this.player.cleanup();\n        }\n        this.bombCounter?.destroy();\n        this.weaponDisplay?.destroy();\n        this.physics.world.shutdown();\n        if (this.scoreSystem) {\n            this.scoreSystem.destroy();\n        }\n        if (this.livesSystem) {\n            this.livesSystem.destroy();\n        }\n        this.backgrounds.forEach((bg)=>bg.destroy());\n        this.backgrounds = [];\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.LEVEL_COMPLETE, this.handleLevelComplete, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.PLAYER_READY, this.startLevel, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.GAME_OVER, this.handleGameOver, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.RESTART_GAME, this.restartGame, this);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.off(_types_custom_events__WEBPACK_IMPORTED_MODULE_8__.CUSTOM_EVENTS.CONTINUE_GAME, this.continueGame, this);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixJQUFJLENBQUNtRCxNQUFNLENBQUNuRCxPQUFPO1FBQ3ZCO1FBRUEsSUFBSSxDQUFDb0UsV0FBVyxFQUFFM0M7UUFDbEIsSUFBSSxDQUFDNEMsYUFBYSxFQUFFNUM7UUFFcEIsSUFBSSxDQUFDOUIsT0FBTyxDQUFDQyxLQUFLLENBQUNvRyxRQUFRO1FBRTNCLElBQUksSUFBSSxDQUFDN0IsV0FBVyxFQUFFO1lBQ2xCLElBQUksQ0FBQ0EsV0FBVyxDQUFDMUMsT0FBTztRQUM1QjtRQUVBLElBQUksSUFBSSxDQUFDdEMsV0FBVyxFQUFFO1lBQ2xCLElBQUksQ0FBQ0EsV0FBVyxDQUFDc0MsT0FBTztRQUM1QjtRQUVBLElBQUksQ0FBQ3hELFdBQVcsQ0FBQ3NELE9BQU8sQ0FBQ0MsQ0FBQUEsS0FBTUEsR0FBR0MsT0FBTztRQUN6QyxJQUFJLENBQUN4RCxXQUFXLEdBQUcsRUFBRTtRQUVyQnZCLGdEQUFRQSxDQUFDdUosR0FBRyxDQUFDakosK0RBQWFBLENBQUMwRixjQUFjLEVBQUUsSUFBSSxDQUFDaEUsbUJBQW1CLEVBQUUsSUFBSTtRQUN6RWhDLGdEQUFRQSxDQUFDdUosR0FBRyxDQUFDakosK0RBQWFBLENBQUNtRSxZQUFZLEVBQUUsSUFBSSxDQUFDaEQsVUFBVSxFQUFFLElBQUk7UUFDOUR6QixnREFBUUEsQ0FBQ3VKLEdBQUcsQ0FBQ2pKLCtEQUFhQSxDQUFDMkYsU0FBUyxFQUFFLElBQUksQ0FBQ2pELGNBQWMsRUFBRSxJQUFJO1FBQy9EaEQsZ0RBQVFBLENBQUN1SixHQUFHLENBQUNqSiwrREFBYUEsQ0FBQzRGLFlBQVksRUFBRSxJQUFJLENBQUNDLFdBQVcsRUFBRSxJQUFJO1FBQy9EbkcsZ0RBQVFBLENBQUN1SixHQUFHLENBQUNqSiwrREFBYUEsQ0FBQzhGLGFBQWEsRUFBRSxJQUFJLENBQUNDLFlBQVksRUFBRSxJQUFJO0lBQ3JFO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvc2NlbmVzL2dhbWUtc2NlbmUudHM/MDUzYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tICcuLi9lbnRpdGllcy9wbGF5ZXInO1xuaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICcuLi9ldmVudC1idXMnO1xuaW1wb3J0IHsgRW5lbXlEZXN0cm95ZWRDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL3NwYXduZXJzL2VuZW15LWRlc3Ryb3llZC1jb21wb25lbnQnO1xuaW1wb3J0IHsgU2NvcmUgfSBmcm9tICcuLi9lbnRpdGllcy91aS9zY29yZSc7XG5pbXBvcnQgeyBMaXZlcyB9IGZyb20gJy4uL2VudGl0aWVzL3VpL2xpdmVzJztcbmltcG9ydCB7IExldmVsTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzL2xldmVsLW1hbmFnZXInO1xuaW1wb3J0IHsgR2FtZVNldHRpbmdzLCBMZXZlbENvbmZpZyB9IGZyb20gJy4uL3R5cGVzL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgbGV2ZWxzIH0gZnJvbSAnLi4vY29uZmlncy9nYW1lLWNvbmZpZyc7XG5pbXBvcnQgeyBDVVNUT01fRVZFTlRTIH0gZnJvbSAnLi4vdHlwZXMvY3VzdG9tLWV2ZW50cyc7XG5pbXBvcnQgeyBGaWdodGVyRW5lbXkgfSBmcm9tICcuLi9lbnRpdGllcy9lbmVtaWVzL2NvbW1vbi9maWdodGVyLWVuZW15JztcbmltcG9ydCB7IFNjb3V0RW5lbXkgfSBmcm9tICcuLi9lbnRpdGllcy9lbmVtaWVzL2NvbW1vbi9zY291dC1lbmVteSc7XG5pbXBvcnQgeyBDb2xsaXNpb25NYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMvY29sbGlzaW9uLW1hbmFnZXInO1xuaW1wb3J0IHsgRW5lbXlTcGF3bmVyTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzL2VuZW15LXNwYXduZXItbWFuYWdlcic7XG5pbXBvcnQgeyBCb21icyB9IGZyb20gJy4uL2VudGl0aWVzL3VpL2JvbWJzJztcbmltcG9ydCB7IFdlYXBvbnMgfSBmcm9tICcuLi9lbnRpdGllcy91aS93ZWFwb24nO1xuaW1wb3J0IHsgRlBTRGlzcGxheSB9IGZyb20gJy4uL2VudGl0aWVzL3VpL2Zwcy1kaXNwbGF5JztcbmltcG9ydCB7IEl0ZW1NYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMvaXRlbS1tYW5hZ2VyJztcbmltcG9ydCB7IENpcmN1bGFyRmlnaHRlckVuZW15IH0gZnJvbSAnLi4vZW50aXRpZXMvZW5lbWllcy9jb21tb24vY2lyY3VsYXItZmlnaHRlci1lbmVteSc7XG5pbXBvcnQgeyBBdWRpb01hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycy9hdWRpby1tYW5hZ2VyJztcbmltcG9ydCB7IExvY2FsU3RvcmFnZU1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycy9sb2NhbC1zdG9yYWdlLW1hbmFnZXInO1xuXG5leHBvcnQgY2xhc3MgR2FtZVNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcbiAgICBwcml2YXRlIHBsYXllciE6IFBsYXllcjtcbiAgICBwcml2YXRlIGlzUGF1c2VkOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBwYXVzZUtleSE6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXk7XG4gICAgcHJpdmF0ZSBiYWNrZ3JvdW5kczogUGhhc2VyLkdhbWVPYmplY3RzLlRpbGVTcHJpdGVbXSA9IFtdO1xuICAgIHByaXZhdGUgbGl2ZXNTeXN0ZW0hOiBMaXZlcztcbiAgICBwcml2YXRlIHNjb3JlU3lzdGVtITogU2NvcmU7XG4gICAgcHJpdmF0ZSBjb250aW51ZUNvdW50OiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgbGV2ZWxNYW5hZ2VyITogTGV2ZWxNYW5hZ2VyO1xuICAgIHByaXZhdGUgY3VycmVudExldmVsOiBudW1iZXI7XG5cbiAgICBwcml2YXRlIHNwYXduZXJNYW5hZ2VyITogRW5lbXlTcGF3bmVyTWFuYWdlcjtcbiAgICBwcml2YXRlIGNvbGxpc2lvbk1hbmFnZXIhOiBDb2xsaXNpb25NYW5hZ2VyO1xuICAgIHByaXZhdGUgYXVkaW9NYW5hZ2VyITogQXVkaW9NYW5hZ2VyO1xuXG4gICAgcHJpdmF0ZSBib21iQ291bnRlciE6IEJvbWJzO1xuICAgIHByaXZhdGUgd2VhcG9uRGlzcGxheSE6IFdlYXBvbnM7XG4gICAgcHJpdmF0ZSBmcHNEaXNwbGF5ITogRlBTRGlzcGxheTtcbiAgICBwcml2YXRlIGl0ZW1NYW5hZ2VyITogSXRlbU1hbmFnZXI7XG5cbiAgICBwcml2YXRlIGN1cnJlbnRTZXR0aW5nczogR2FtZVNldHRpbmdzO1xuXG4gICAgXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKHsga2V5OiAnR2FtZVNjZW5lJyB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIHRoaXMuY2xlYW51cCgpO1xuICAgICAgICB0aGlzLmN1cnJlbnRTZXR0aW5ncyA9IExvY2FsU3RvcmFnZU1hbmFnZXIubG9hZFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuaXNQYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50aW1lLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBoeXNpY3Mud29ybGQucmVzdW1lKCk7XG5cbiAgICAgICAgdGhpcy5pbml0R2FtZVN5c3RlbXMoKTtcbiAgICAgICAgdGhpcy5pbml0VUkoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVCYWNrZ3JvdW5kcygpO1xuXG4gICAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQ/LnJlbW92ZUtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuRVNDKTtcbiAgICAgICAgdGhpcy5wYXVzZUtleSA9IHRoaXMuaW5wdXQua2V5Ym9hcmQhLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuRVNDKTtcbiAgICAgICAgdGhpcy5wYXVzZUtleS5yZXNldCgpO1xuXG4gICAgICAgIGNvbnN0IGxldmVsczogTGV2ZWxDb25maWdbXSA9IHRoaXMuY3JlYXRlTGV2ZWxzKCk7XG4gICAgICAgIHRoaXMubGV2ZWxNYW5hZ2VyID0gbmV3IExldmVsTWFuYWdlcih0aGlzLCBsZXZlbHMpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDEwMDAsICgpID0+IHtcbiAgICAgICAgICAgIEV2ZW50QnVzLmVtaXQoQ1VTVE9NX0VWRU5UUy5QTEFZRVJfUkVBRFkpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmN1cnJlbnRMZXZlbCA9IDA7XG5cbiAgICAgICAgRXZlbnRCdXMuZW1pdCgnY3VycmVudC1zY2VuZS1yZWFkeScsIHRoaXMpO1xuICAgICAgICBFdmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuUE9XRVJfQ0hBTkdFRCwgMCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVMZXZlbHMoKTogTGV2ZWxDb25maWdbXSB7XG4gICAgICAgIHJldHVybiBsZXZlbHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVCYWNrZ3JvdW5kcygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hdWRpb01hbmFnZXIucGxheU11c2ljKCdiZycpO1xuICAgICAgICAvLyDQo9C00LDQu9GP0LXQvCDRgdGC0LDRgNGL0LUg0YTQvtC90YssINC10YHQu9C4INC+0L3QuCDQtdGB0YLRjFxuICAgICAgICB0aGlzLmJhY2tncm91bmRzLmZvckVhY2goYmcgPT4gYmcuZGVzdHJveSgpKTtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kcyA9IFtdO1xuXG4gICAgICAgIC8vINCh0L7Qt9C00LDQtdC8INC90LXRgdC60L7Qu9GM0LrQviDRgdC70L7QtdCyINGE0L7QvdCwINGBINGA0LDQt9C90L7QuSDRgdC60L7RgNC+0YHRgtGM0Y4g0LTQu9GPINC/0LDRgNCw0LvQu9Cw0LrRgS3RjdGE0YTQtdC60YLQsFxuICAgICAgICBjb25zdCBiZ0NvbmZpZ3MgPSBbXG4gICAgICAgICAgICB7IGtleTogJ2JnMScsIHNwZWVkOiAwLjUsIGFscGhhOiAwLjcsIHNjYWxlOiAxLjI1IH0sXG4gICAgICAgICAgICB7IGtleTogJ2JnMicsIHNwZWVkOiAxLjAsIGFscGhhOiAwLjcsIHNjYWxlOiAxLjI1IH0sXG4gICAgICAgICAgICB7IGtleTogJ2JnMycsIHNwZWVkOiAxLjUsIGFscGhhOiAwLjcsIHNjYWxlOiAxLjI1IH1cbiAgICAgICAgXTtcblxuICAgICAgICBiZ0NvbmZpZ3MuZm9yRWFjaCgoYmcsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyDQodC+0LfQtNCw0LXQvCBUaWxlU3ByaXRlINCy0LzQtdGB0YLQviDQvtCx0YvRh9C90L7Qs9C+IFNwcml0ZVxuICAgICAgICAgICAgY29uc3QgYmFja2dyb3VuZCA9IHRoaXMuYWRkLnRpbGVTcHJpdGUoXG4gICAgICAgICAgICAgICAgMCwgLy8geFxuICAgICAgICAgICAgICAgIDAsIC8vIHlcbiAgICAgICAgICAgICAgICB0aGlzLnNjYWxlLndpZHRoLCAvLyDRiNC40YDQuNC90LBcbiAgICAgICAgICAgICAgICB0aGlzLnNjYWxlLmhlaWdodCwgLy8g0LLRi9GB0L7RgtCwXG4gICAgICAgICAgICAgICAgYmcua2V5IC8vINC60LvRjtGHINGC0LXQutGB0YLRg9GA0YtcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgICAuc2V0T3JpZ2luKDAsIDApXG4gICAgICAgICAgICAgICAgLnNldEFscGhhKGJnLmFscGhhKVxuICAgICAgICAgICAgICAgIC5zZXRTY2FsZShiZy5zY2FsZSlcbiAgICAgICAgICAgICAgICAuc2V0RGVwdGgoLTEwICsgaW5kZXgpO1xuXG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmRzLnB1c2goYmFja2dyb3VuZCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgICAgICAgRXZlbnRCdXMub24oQ1VTVE9NX0VWRU5UUy5MRVZFTF9DT01QTEVURSwgdGhpcy5oYW5kbGVMZXZlbENvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgRXZlbnRCdXMub24oQ1VTVE9NX0VWRU5UUy5QTEFZRVJfUkVBRFksIHRoaXMuc3RhcnRMZXZlbCwgdGhpcyk7XG4gICAgICAgIEV2ZW50QnVzLm9uKENVU1RPTV9FVkVOVFMuR0FNRV9PVkVSLCB0aGlzLmhhbmRsZUdhbWVPdmVyLCB0aGlzKTtcbiAgICAgICAgRXZlbnRCdXMub24oQ1VTVE9NX0VWRU5UUy5SRVNUQVJUX0dBTUUsIHRoaXMucmVzdGFydEdhbWUsIHRoaXMpO1xuICAgICAgICBFdmVudEJ1cy5vbihDVVNUT01fRVZFTlRTLkNPTlRJTlVFX0dBTUUsIHRoaXMuY29udGludWVHYW1lLCB0aGlzKTtcbiAgICAgICAgRXZlbnRCdXMub24oQ1VTVE9NX0VWRU5UUy5DTEVBTlVQX0dBTUUsIHRoaXMuY2xlYW51cCwgdGhpcylcbiAgICAgICAgRXZlbnRCdXMub24oQ1VTVE9NX0VWRU5UUy5NQUlNX01FTlVfRlJPTV9HQU1FX09WRVIsIHRoaXMucmV0dXJuVG9NYWluTWVudSwgdGhpcylcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRHYW1lU3lzdGVtcygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBuZXcgUGxheWVyKHRoaXMsIEV2ZW50QnVzKTtcbiAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ3BsYXllcicsIHRoaXMucGxheWVyKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc3Bhd25lck1hbmFnZXIgPSBuZXcgRW5lbXlTcGF3bmVyTWFuYWdlcih0aGlzLCBFdmVudEJ1cyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNwYXduZXJzKCk7XG4gICAgICAgIFxuICAgICAgICBuZXcgRW5lbXlEZXN0cm95ZWRDb21wb25lbnQodGhpcywgRXZlbnRCdXMpO1xuICAgICAgICB0aGlzLml0ZW1NYW5hZ2VyID0gbmV3IEl0ZW1NYW5hZ2VyKHRoaXMsIEV2ZW50QnVzLCB0aGlzLnBsYXllcik7XG4gICAgICAgIHRoaXMuYXVkaW9NYW5hZ2VyID0gbmV3IEF1ZGlvTWFuYWdlcih0aGlzLCBFdmVudEJ1cyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGFydExldmVsID0gKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgW0dhbWVTY2VuZV0gU3RhcnRpbmcgbGV2ZWwgJHt0aGlzLmN1cnJlbnRMZXZlbCArIDF9YCk7XG4gICAgICAgIHRoaXMucmVnaXN0cnkuc2V0KCdjdXJyZW50TGV2ZWwnLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpO1xuICAgICAgICB0aGlzLmxldmVsTWFuYWdlci5zdGFydExldmVsKHRoaXMuY3VycmVudExldmVsKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBoYW5kbGVMZXZlbENvbXBsZXRlID0gKGRhdGE6IHsgbGV2ZWw6IG51bWJlciB9KSA9PiB7XG4gICAgICAgIGlmIChkYXRhLmxldmVsICsgMSA8IHRoaXMubGV2ZWxNYW5hZ2VyLmxldmVsc0NvdW50KSB7XG5cbiAgICAgICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCg1MDAwLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8g0J/QtdGA0LXRhdC+0LQg0L3QsCDRgdC70LXQtNGD0Y7RidC40Lkg0YPRgNC+0LLQtdC90YxcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmxhdW5jaCgnTGV2ZWxDb21wbGV0ZScsIHtcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IGRhdGEubGV2ZWwsXG4gICAgICAgICAgICAgICAgICAgIGxpdmVzOiB0aGlzLmxpdmVzU3lzdGVtLmxpdmVzQ291bnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoOTAwMCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJlcGFyZU5leHRMZXZlbChkYXRhLmxldmVsICsgMSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vINCk0LjQvdCw0LvRjNC90LDRjyDQv9C+0LHQtdC00LBcbiAgICAgICAgICAgIEV2ZW50QnVzLmVtaXQoQ1VTVE9NX0VWRU5UUy5HQU1FX0NPTVBMRVRFKTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUubGF1bmNoKCdWaWN0b3J5JywgeyBcbiAgICAgICAgICAgICAgICBzY29yZTogdGhpcy5yZWdpc3RyeS5nZXQoJ3Njb3JlJyksXG4gICAgICAgICAgICAgICAgbGl2ZXM6IHRoaXMubGl2ZXNTeXN0ZW0ubGl2ZXNDb3VudCBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByaXZhdGUgcHJlcGFyZU5leHRMZXZlbChuZXh0TGV2ZWw6IG51bWJlcikge1xuICAgICAgICAvLyDQntGH0LjRgdGC0LrQsCDRgtC10LrRg9GJ0LXQs9C+INGD0YDQvtCy0L3Rj1xuICAgICAgICB0aGlzLmNsZWFudXBMZXZlbCgpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5pbml0aWFsaXplU3Bhd25lcnMoKTtcblxuICAgICAgICAvLyDQl9Cw0L/Rg9GB0Log0L3QvtCy0L7Qs9C+INGD0YDQvtCy0L3Rj1xuICAgICAgICB0aGlzLmN1cnJlbnRMZXZlbCA9IG5leHRMZXZlbDtcbiAgICAgICAgdGhpcy5zdGFydExldmVsKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbGVhbnVwTGV2ZWwoKSB7XG4gICAgICAgIC8vINCj0L3QuNGH0YLQvtC20LXQvdC40LUg0LLRgdC10YUg0LLRgNCw0LPQvtCyINC4INC/0YPQu9GMXG4gICAgICAgIHRoaXMuc3Bhd25lck1hbmFnZXIuZ2V0QWxsU3Bhd25lcnMoKS5mb3JFYWNoKHNwYXduZXIgPT4gc3Bhd25lci5jbGVhbnVwKCkpO1xuICAgICAgICB0aGlzLml0ZW1NYW5hZ2VyPy5jbGVhckFsbEl0ZW1zKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplU3Bhd25lcnMoKSB7XG4gICAgICAgIHRoaXMuY2xlYW51cExldmVsKCk7XG4gICAgICAgIHRoaXMuc3Bhd25lck1hbmFnZXIuY2xlYW51cCgpO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbGxpc2lvbk1hbmFnZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uTWFuYWdlci5jbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGVuZW15VHlwZXMgPSBbXG4gICAgICAgICAgICB7IHR5cGU6ICdzY291dCcsIGNsYXNzOiBTY291dEVuZW15IH0sXG4gICAgICAgICAgICB7IHR5cGU6ICdmaWdodGVyJywgY2xhc3M6IEZpZ2h0ZXJFbmVteSB9LFxuICAgICAgICAgICAgeyB0eXBlOiAnY2lyY3VsYXJfZmlnaHRlcicsIGNsYXNzOiBDaXJjdWxhckZpZ2h0ZXJFbmVteSB9XG4gICAgICAgIF07XG4gICAgICAgIFxuICAgICAgICBlbmVteVR5cGVzLmZvckVhY2goKHsgdHlwZSwgY2xhc3M6IGVuZW15Q2xhc3MgfSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zcGF3bmVyTWFuYWdlci5yZWdpc3RlclNwYXduZXIodHlwZSwgZW5lbXlDbGFzcyk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jb2xsaXNpb25NYW5hZ2VyID0gbmV3IENvbGxpc2lvbk1hbmFnZXIodGhpcywgdGhpcy5wbGF5ZXIsIHRoaXMuc3Bhd25lck1hbmFnZXIsIEV2ZW50QnVzKTtcbiAgICAgICAgdGhpcy5jb2xsaXNpb25NYW5hZ2VyLnNldHVwQmFzZUNvbGxpc2lvbnMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUdhbWVPdmVyID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoNTAwLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBoeXNpY3Mud29ybGQucGF1c2UoKTtcbiAgICAgICAgICAgIHRoaXMudGltZS5wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zY2VuZS5sYXVuY2goJ0dhbWVPdmVyJywgeyBzY29yZTogdGhpcy5yZWdpc3RyeS5nZXQoJ3Njb3JlJykgfSk7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLnBhdXNlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBwcml2YXRlIGluaXRVSSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zY29yZVN5c3RlbSA9IG5ldyBTY29yZSh0aGlzLCBFdmVudEJ1cyk7XG4gICAgICAgIHRoaXMubGl2ZXNTeXN0ZW0gPSBuZXcgTGl2ZXModGhpcywgRXZlbnRCdXMpO1xuICAgICAgICB0aGlzLmJvbWJDb3VudGVyID0gbmV3IEJvbWJzKHRoaXMsIEV2ZW50QnVzKTtcbiAgICAgICAgdGhpcy53ZWFwb25EaXNwbGF5ID0gbmV3IFdlYXBvbnModGhpcywgRXZlbnRCdXMpO1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2V0dGluZ3Muc2hvd0ZQUykge1xuICAgICAgICAgICAgdGhpcy5mcHNEaXNwbGF5ID0gbmV3IEZQU0Rpc3BsYXkodGhpcywgNDcwLCA2MzApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuc2NlbmUuaXNBY3RpdmUoKSB8fCB0aGlzLmlzR2FtZXBsYXlCbG9ja2VkKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDQv9C+0LvQvtC20LXQvdC40LUg0YTQvtC90LAgKNC/0YDQvtC60YDRg9GC0LrQsClcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kcy5mb3JFYWNoKChiZywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vINCf0YDQvtC60YDRg9GH0LjQstCw0LXQvCDRhNC+0L0g0YEg0YDQsNC30L3QvtC5INGB0LrQvtGA0L7RgdGC0YzRjiDQtNC70Y8g0L/QsNGA0LDQu9C70LDQutGBLdGN0YTRhNC10LrRgtCwXG4gICAgICAgICAgICBjb25zdCBzcGVlZCA9IFswLjUsIDEuMCwgMS41XVtpbmRleF0gfHwgMS4wO1xuICAgICAgICAgICAgYmcudGlsZVBvc2l0aW9uWSAtPSBzcGVlZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKFBoYXNlci5JbnB1dC5LZXlib2FyZC5KdXN0RG93bih0aGlzLnBhdXNlS2V5KSkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQYXVzZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNldHRpbmdzLnNob3dGUFMpIHtcbiAgICAgICAgICAgIHRoaXMuZnBzRGlzcGxheS51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ3BsYXllcicsIHRoaXMucGxheWVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzR2FtZXBsYXlCbG9ja2VkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZS5pc0FjdGl2ZSgnTGV2ZWxDb21wbGV0ZScpIHx8IFxuICAgICAgICAgICAgdGhpcy5zY2VuZS5pc0FjdGl2ZSgnVmljdG9yeScpIHx8IFxuICAgICAgICAgICAgdGhpcy5zY2VuZS5pc0FjdGl2ZSgnUGF1c2VNZW51Jyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0b2dnbGVQYXVzZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaXNHYW1lcGxheUJsb2NrZWQoKSkgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzUGF1c2VkID0gIXRoaXMuaXNQYXVzZWQ7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5pc1BhdXNlZCkge1xuICAgICAgICAgICAgdGhpcy5wYXVzZUdhbWUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdW1lR2FtZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXVzZUdhbWUoKTogdm9pZCB7XG4gICAgICAgIC8vINCf0YDQuNC+0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INGE0LjQt9C40LrRgyDQuCDRgtCw0LnQvNC10YDRi1xuICAgICAgICB0aGlzLnBoeXNpY3Mud29ybGQucGF1c2UoKTtcbiAgICAgICAgdGhpcy50aW1lLnBhdXNlZCA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICAvLyDQl9Cw0L/Rg9GB0LrQsNC10Lwg0YHRhtC10L3RgyDQv9Cw0YPQt9GLXG4gICAgICAgIHRoaXMuc2NlbmUubGF1bmNoKCdQYXVzZU1lbnUnLCB7IFxuICAgICAgICAgICAgb25SZXN1bWU6ICgpID0+IHRoaXMucmVzdW1lR2FtZSgpLFxuICAgICAgICAgICAgb25SZXN0YXJ0OiAoKSA9PiB0aGlzLnJlc3RhcnRHYW1lKCksXG4gICAgICAgICAgICBvbk1haW5NZW51OiAoKSA9PiB0aGlzLnJldHVyblRvTWFpbk1lbnUoKVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vINCf0YDQuNC+0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INGC0LXQutGD0YnRg9GOINGB0YbQtdC90YNcbiAgICAgICAgdGhpcy5zY2VuZS5wYXVzZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzdW1lR2FtZSgpOiB2b2lkIHtcbiAgICAgICAgLy8g0JLQvtC30L7QsdC90L7QstC70Y/QtdC8INGE0LjQt9C40LrRgyDQuCDRgtCw0LnQvNC10YDRi1xuICAgICAgICB0aGlzLnBoeXNpY3Mud29ybGQucmVzdW1lKCk7XG4gICAgICAgIHRoaXMudGltZS5wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIC8vINCX0LDQutGA0YvQstCw0LXQvCDQvNC10L3RjiDQv9Cw0YPQt9GLXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLmlzQWN0aXZlKCdQYXVzZU1lbnUnKSkge1xuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdG9wKCdQYXVzZU1lbnUnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g0JLQvtC30L7QsdC90L7QstC70Y/QtdC8INGC0LXQutGD0YnRg9GOINGB0YbQtdC90YNcbiAgICAgICAgdGhpcy5zY2VuZS5yZXN1bWUoKTtcbiAgICAgICAgdGhpcy5pc1BhdXNlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzdGFydEdhbWUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2NlbmUuc3RvcCgnUGF1c2VNZW51Jyk7XG4gICAgICAgIHRoaXMuc2NlbmUuc3RvcCgnR2FtZU92ZXInKTtcbiAgICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgICAgIHRoaXMuc2NlbmUucmVzdGFydCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmV0dXJuVG9NYWluTWVudSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgICAgIHRoaXMuc2NlbmUuc3RvcCgnUGF1c2VNZW51Jyk7XG4gICAgICAgIHRoaXMuc2NlbmUuc3RvcCgnR2FtZVNjZW5lJyk7XG4gICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ01haW5NZW51Jyk7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbnRpbnVlR2FtZSgpIHtcbiAgICAgICAgLy8g0KHQsdGA0LDRgdGL0LLQsNC10Lwg0LbQuNC30L3QuFxuICAgICAgICBpZiAodGhpcy5saXZlc1N5c3RlbSkge1xuICAgICAgICAgICAgdGhpcy5saXZlc1N5c3RlbS5yZXNldExpdmVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vINCe0LHQvdGD0LvRj9C10Lwg0YHRh9C10YIgKyDQtNC+0LHQsNCy0LvRj9C10Lwg0LrQvtC70LjRh9C10YHRgtCy0L4g0L/RgNC+0LTQvtC70LbQtdC90LjQuVxuICAgICAgICBpZih0aGlzLmNvbnRpbnVlQ291bnQgPCA5KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNvbnRpbnVlQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zY29yZVN5c3RlbSkge1xuICAgICAgICAgICAgdGhpcy5zY29yZVN5c3RlbS5yZXNldFNjb3JlKHRoaXMuY29udGludWVDb3VudCk7XG4gICAgICAgIH1cblxuICAgICAgICBFdmVudEJ1cy5lbWl0KENVU1RPTV9FVkVOVFMuUExBWUVSX1NQQVdOKTtcbiAgICAgICAgRXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLlJFU1VNRV9HQU1FKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLmZhZGVJbigzMDApO1xuXG4gICAgICAgIHRoaXMucGh5c2ljcy53b3JsZC5yZXN1bWUoKTtcbiAgICAgICAgdGhpcy50aW1lLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuaXNBY3RpdmUoJ0dhbWVPdmVyJykpIHtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RvcCgnR2FtZU92ZXInKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zY2VuZS5yZXN1bWUoKTtcbiAgICAgICAgdGhpcy5pc1BhdXNlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2xlYW51cCgpIHtcbiAgICAgICAgdGhpcy5zb3VuZC5zdG9wQWxsKCk7XG4gICAgICAgIHRoaXMuYXVkaW9NYW5hZ2VyPy5kZXN0cm95KCk7XG5cbiAgICAgICAgdGhpcy5pdGVtTWFuYWdlcj8uY2xlYXJBbGxJdGVtcygpO1xuICAgICAgICB0aGlzLml0ZW1NYW5hZ2VyPy5jbGVhbnVwKCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmxldmVsTWFuYWdlcj8uY2xlYW51cCgpO1xuXG4gICAgICAgIHRoaXMuY29sbGlzaW9uTWFuYWdlcj8uY2xlYW51cCgpO1xuICAgIFxuICAgICAgICB0aGlzLnNwYXduZXJNYW5hZ2VyPy5jbGVhbnVwKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5wbGF5ZXIpIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyPy53ZWFwb24/LmNsZWFudXAoKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyLmNsZWFudXAoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYm9tYkNvdW50ZXI/LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy53ZWFwb25EaXNwbGF5Py5kZXN0cm95KCk7XG5cbiAgICAgICAgdGhpcy5waHlzaWNzLndvcmxkLnNodXRkb3duKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2NvcmVTeXN0ZW0pIHtcbiAgICAgICAgICAgIHRoaXMuc2NvcmVTeXN0ZW0uZGVzdHJveSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubGl2ZXNTeXN0ZW0pIHtcbiAgICAgICAgICAgIHRoaXMubGl2ZXNTeXN0ZW0uZGVzdHJveSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kcy5mb3JFYWNoKGJnID0+IGJnLmRlc3Ryb3koKSk7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZHMgPSBbXTtcblxuICAgICAgICBFdmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5MRVZFTF9DT01QTEVURSwgdGhpcy5oYW5kbGVMZXZlbENvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgRXZlbnRCdXMub2ZmKENVU1RPTV9FVkVOVFMuUExBWUVSX1JFQURZLCB0aGlzLnN0YXJ0TGV2ZWwsIHRoaXMpO1xuICAgICAgICBFdmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5HQU1FX09WRVIsIHRoaXMuaGFuZGxlR2FtZU92ZXIsIHRoaXMpO1xuICAgICAgICBFdmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5SRVNUQVJUX0dBTUUsIHRoaXMucmVzdGFydEdhbWUsIHRoaXMpO1xuICAgICAgICBFdmVudEJ1cy5vZmYoQ1VTVE9NX0VWRU5UUy5DT05USU5VRV9HQU1FLCB0aGlzLmNvbnRpbnVlR2FtZSwgdGhpcyk7XG4gICAgfVxufSJdLCJuYW1lcyI6WyJQaGFzZXIiLCJQbGF5ZXIiLCJFdmVudEJ1cyIsIkVuZW15RGVzdHJveWVkQ29tcG9uZW50IiwiU2NvcmUiLCJMaXZlcyIsIkxldmVsTWFuYWdlciIsImxldmVscyIsIkNVU1RPTV9FVkVOVFMiLCJGaWdodGVyRW5lbXkiLCJTY291dEVuZW15IiwiQ29sbGlzaW9uTWFuYWdlciIsIkVuZW15U3Bhd25lck1hbmFnZXIiLCJCb21icyIsIldlYXBvbnMiLCJGUFNEaXNwbGF5IiwiSXRlbU1hbmFnZXIiLCJDaXJjdWxhckZpZ2h0ZXJFbmVteSIsIkF1ZGlvTWFuYWdlciIsIkxvY2FsU3RvcmFnZU1hbmFnZXIiLCJHYW1lU2NlbmUiLCJTY2VuZSIsImNvbnN0cnVjdG9yIiwia2V5IiwiaXNQYXVzZWQiLCJiYWNrZ3JvdW5kcyIsImNvbnRpbnVlQ291bnQiLCJzdGFydExldmVsIiwiY29uc29sZSIsImxvZyIsImN1cnJlbnRMZXZlbCIsInJlZ2lzdHJ5Iiwic2V0IiwibGV2ZWxNYW5hZ2VyIiwiaGFuZGxlTGV2ZWxDb21wbGV0ZSIsImRhdGEiLCJsZXZlbCIsImxldmVsc0NvdW50IiwidGltZSIsImRlbGF5ZWRDYWxsIiwic2NlbmUiLCJsYXVuY2giLCJsaXZlcyIsImxpdmVzU3lzdGVtIiwibGl2ZXNDb3VudCIsInByZXBhcmVOZXh0TGV2ZWwiLCJlbWl0IiwiR0FNRV9DT01QTEVURSIsInNjb3JlIiwiZ2V0IiwiaGFuZGxlR2FtZU92ZXIiLCJwaHlzaWNzIiwid29ybGQiLCJwYXVzZSIsInBhdXNlZCIsImNyZWF0ZSIsImNsZWFudXAiLCJjdXJyZW50U2V0dGluZ3MiLCJsb2FkU2V0dGluZ3MiLCJyZXN1bWUiLCJpbml0R2FtZVN5c3RlbXMiLCJpbml0VUkiLCJjcmVhdGVCYWNrZ3JvdW5kcyIsImlucHV0Iiwia2V5Ym9hcmQiLCJyZW1vdmVLZXkiLCJJbnB1dCIsIktleWJvYXJkIiwiS2V5Q29kZXMiLCJFU0MiLCJwYXVzZUtleSIsImFkZEtleSIsInJlc2V0IiwiY3JlYXRlTGV2ZWxzIiwic2V0dXBFdmVudExpc3RlbmVycyIsIlBMQVlFUl9SRUFEWSIsIlBPV0VSX0NIQU5HRUQiLCJhdWRpb01hbmFnZXIiLCJwbGF5TXVzaWMiLCJmb3JFYWNoIiwiYmciLCJkZXN0cm95IiwiYmdDb25maWdzIiwic3BlZWQiLCJhbHBoYSIsInNjYWxlIiwiaW5kZXgiLCJiYWNrZ3JvdW5kIiwiYWRkIiwidGlsZVNwcml0ZSIsIndpZHRoIiwiaGVpZ2h0Iiwic2V0T3JpZ2luIiwic2V0QWxwaGEiLCJzZXRTY2FsZSIsInNldERlcHRoIiwicHVzaCIsIm9uIiwiTEVWRUxfQ09NUExFVEUiLCJHQU1FX09WRVIiLCJSRVNUQVJUX0dBTUUiLCJyZXN0YXJ0R2FtZSIsIkNPTlRJTlVFX0dBTUUiLCJjb250aW51ZUdhbWUiLCJDTEVBTlVQX0dBTUUiLCJNQUlNX01FTlVfRlJPTV9HQU1FX09WRVIiLCJyZXR1cm5Ub01haW5NZW51IiwicGxheWVyIiwic3Bhd25lck1hbmFnZXIiLCJpbml0aWFsaXplU3Bhd25lcnMiLCJpdGVtTWFuYWdlciIsIm5leHRMZXZlbCIsImNsZWFudXBMZXZlbCIsImdldEFsbFNwYXduZXJzIiwic3Bhd25lciIsImNsZWFyQWxsSXRlbXMiLCJjb2xsaXNpb25NYW5hZ2VyIiwiZW5lbXlUeXBlcyIsInR5cGUiLCJjbGFzcyIsImVuZW15Q2xhc3MiLCJyZWdpc3RlclNwYXduZXIiLCJzZXR1cEJhc2VDb2xsaXNpb25zIiwic2NvcmVTeXN0ZW0iLCJib21iQ291bnRlciIsIndlYXBvbkRpc3BsYXkiLCJzaG93RlBTIiwiZnBzRGlzcGxheSIsInVwZGF0ZSIsImlzQWN0aXZlIiwiaXNHYW1lcGxheUJsb2NrZWQiLCJ0aWxlUG9zaXRpb25ZIiwiSnVzdERvd24iLCJ0b2dnbGVQYXVzZSIsInBhdXNlR2FtZSIsInJlc3VtZUdhbWUiLCJvblJlc3VtZSIsIm9uUmVzdGFydCIsIm9uTWFpbk1lbnUiLCJzdG9wIiwicmVzdGFydCIsInN0YXJ0IiwicmVzZXRMaXZlcyIsInJlc2V0U2NvcmUiLCJQTEFZRVJfU1BBV04iLCJSRVNVTUVfR0FNRSIsImNhbWVyYXMiLCJtYWluIiwiZmFkZUluIiwic291bmQiLCJzdG9wQWxsIiwid2VhcG9uIiwic2h1dGRvd24iLCJvZmYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/scenes/game-scene.ts\n");

/***/ }),

/***/ "./src/game/scenes/input-scene.ts":
/*!****************************************!*\
  !*** ./src/game/scenes/input-scene.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InputScene: () => (/* binding */ InputScene)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../managers/local-storage-manager */ \"./src/game/managers/local-storage-manager.ts\");\n\n\nclass InputScene extends (phaser__WEBPACK_IMPORTED_MODULE_0___default().Scene) {\n    constructor(){\n        super({\n            key: \"InputScene\"\n        });\n        this.inputActive = true;\n        this.inputElements = [];\n        this.recordsElements = [];\n        this.showingRecords = false;\n    }\n    init(data) {\n        this.score = data.score;\n        this.level = data.level;\n    }\n    create() {\n        this.background = this.add.rectangle(0, 0, this.cameras.main.width, this.cameras.main.height, 0x000000, 0.8).setOrigin(0).setDepth(0);\n        this.createInputUI();\n    }\n    createInputUI() {\n        this.clearInputElements();\n        this.inputActive = true;\n        this.showingRecords = false;\n        const title = this.add.text(this.cameras.main.width / 2, 150, \"NEW HIGH SCORE!\", {\n            fontFamily: \"Arial\",\n            fontSize: \"36px\",\n            color: \"#ffcc00\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5);\n        const scoreText = this.add.text(this.cameras.main.width / 2, 200, `SCORE: ${this.score}`, {\n            fontFamily: \"Arial\",\n            fontSize: \"28px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5);\n        const prompt = this.add.text(this.cameras.main.width / 2, 280, \"ENTER YOUR NAME:\", {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\"\n        }).setOrigin(0.5);\n        this.inputText = this.add.text(this.cameras.main.width / 2, 350, \"\", {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffff00\",\n            backgroundColor: \"#333333\",\n            padding: {\n                left: 10,\n                right: 10,\n                top: 5,\n                bottom: 5\n            }\n        }).setOrigin(0.5);\n        const hint1 = this.add.text(this.cameras.main.width / 2, 400, \"(MAX 12 CHARACTERS, NO SPACES)\", {\n            fontFamily: \"Arial\",\n            fontSize: \"24px\",\n            color: \"#aaaaaa\"\n        }).setOrigin(0.5);\n        const hint2 = this.add.text(this.cameras.main.width / 2, 440, \"ESC TO CANCEL\", {\n            fontFamily: \"Arial\",\n            fontSize: \"24px\",\n            color: \"#ff5555\"\n        }).setOrigin(0.5);\n        this.inputElements = [\n            title,\n            scoreText,\n            prompt,\n            this.inputText,\n            hint1,\n            hint2\n        ];\n        this.input.keyboard?.on(\"keydown\", this.handleKeyInput, this);\n    }\n    handleKeyInput(event) {\n        if (!this.inputActive) return;\n        if (event.key === \"Escape\") {\n            this.cleanupAndClose();\n            return;\n        }\n        if (this.showingRecords) {\n            this.cleanupAndClose();\n            return;\n        }\n        // Разрешаем только английские буквы, цифры и управляющие клавиши\n        const allowedKeys = [\n            \"Enter\",\n            \"Backspace\",\n            \"Delete\",\n            \"ArrowLeft\",\n            \"ArrowRight\",\n            \"ArrowUp\",\n            \"ArrowDown\",\n            \"Home\",\n            \"End\",\n            \"Tab\"\n        ];\n        const isAllowedControlKey = allowedKeys.includes(event.key);\n        const isLetter = /^[a-zA-Z]$/.test(event.key);\n        const isNumber = /^[0-9]$/.test(event.key);\n        if (event.key === \"Enter\") {\n            this.saveScore();\n        } else if (event.key === \"Backspace\") {\n            this.inputText.text = this.inputText.text.slice(0, -1);\n        } else if ((isLetter || isNumber || isAllowedControlKey) && this.inputText.text.length < 12) {\n            // Для букв преобразуем в верхний регистр\n            const charToAdd = isLetter ? event.key.toUpperCase() : event.key;\n            this.inputText.text += charToAdd;\n        }\n    }\n    saveScore() {\n        const name = this.inputText.text || \"PLAYER\";\n        _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_1__.LocalStorageManager.addHighScore({\n            name: name.substring(0, 12).replace(/\\s/g, \"\"),\n            score: this.score,\n            level: this.level\n        });\n        this.inputActive = false;\n        this.clearInputElements();\n        this.showHighScores();\n    }\n    showHighScores() {\n        this.clearRecordsElements();\n        this.showingRecords = true;\n        const records = _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_1__.LocalStorageManager.loadHighScores();\n        const title = this.add.text(this.cameras.main.width / 2, 30, \"HIGH SCORES\", {\n            fontFamily: \"Arial\",\n            fontSize: \"28px\",\n            color: \"#ffcc00\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5);\n        const rankHeader = this.add.text(20, 70, \"RANK\", {\n            fontFamily: \"Arial\",\n            fontSize: \"16px\",\n            color: \"#ffffff\"\n        });\n        const nameHeader = this.add.text(80, 70, \"NAME\", {\n            fontFamily: \"Arial\",\n            fontSize: \"16px\",\n            color: \"#ffffff\"\n        });\n        const scoreHeader = this.add.text(220, 70, \"SCORE\", {\n            fontFamily: \"Arial\",\n            fontSize: \"16px\",\n            color: \"#ffffff\"\n        });\n        const levelHeader = this.add.text(360, 70, \"LVL\", {\n            fontFamily: \"Arial\",\n            fontSize: \"16px\",\n            color: \"#ffffff\"\n        });\n        const dateHeader = this.add.text(400, 70, \"DATE\", {\n            fontFamily: \"Arial\",\n            fontSize: \"16px\",\n            color: \"#ffffff\"\n        });\n        this.recordsElements.push(title, rankHeader, nameHeader, scoreHeader, levelHeader, dateHeader);\n        records.forEach((record, index)=>{\n            const yPos = 100 + index * 30;\n            const rankText = this.add.text(20, yPos, `${index + 1}.`, {\n                fontFamily: \"Arial\",\n                fontSize: \"16px\",\n                color: \"#ffffff\"\n            });\n            const nameText = this.add.text(80, yPos, record.name, {\n                fontFamily: \"Arial\",\n                fontSize: \"16px\",\n                color: \"#ffff00\"\n            });\n            const scoreText = this.add.text(220, yPos, record.score.toString(), {\n                fontFamily: \"Arial\",\n                fontSize: \"16px\",\n                color: \"#ffffff\"\n            });\n            const levelText = this.add.text(360, yPos, typeof record.level === \"number\" ? record.level.toString() : \"All\", {\n                fontFamily: \"Arial\",\n                fontSize: \"16px\",\n                color: \"#aaaaaa\"\n            });\n            const date = new Date(record.date);\n            const dateText = this.add.text(400, yPos, `${date.getDate()}.${date.getMonth() + 1}.${date.getFullYear()}`, {\n                fontFamily: \"Arial\",\n                fontSize: \"16px\",\n                color: \"#aaaaaa\"\n            });\n            this.recordsElements.push(rankText, nameText, scoreText, levelText, dateText);\n        });\n        const continueText = this.add.text(this.cameras.main.width / 2, 450, \"PRESS ANY KEY TO CONTINUE\", {\n            fontFamily: \"Arial\",\n            fontSize: \"20px\",\n            color: \"#00ff00\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5);\n        this.recordsElements.push(continueText);\n        this.input.keyboard?.once(\"keydown\", ()=>{\n            this.cleanupAndClose();\n        });\n    }\n    clearInputElements() {\n        this.inputElements.forEach((element)=>{\n            if (element?.destroy) element.destroy();\n        });\n        this.inputElements = [];\n        this.input.keyboard?.off(\"keydown\", this.handleKeyInput);\n    }\n    clearRecordsElements() {\n        this.recordsElements.forEach((element)=>{\n            if (element?.destroy) element.destroy();\n        });\n        this.recordsElements = [];\n    }\n    cleanupAndClose() {\n        this.clearInputElements();\n        this.clearRecordsElements();\n        if (this.background?.destroy) {\n            this.background.destroy();\n        }\n        this.input.keyboard?.off(\"keydown\");\n        this.scene.stop();\n    }\n    shutdown() {\n        this.cleanupAndClose();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixJQUFJLENBQUNxQyxLQUFLLENBQUNDLFFBQVEsRUFBRWdELElBQUksV0FBVyxJQUFJLENBQUM5QyxjQUFjO0lBQzNEO0lBRVFtQix1QkFBdUI7UUFDM0IsSUFBSSxDQUFDMUQsZUFBZSxDQUFDbUUsT0FBTyxDQUFDZ0IsQ0FBQUE7WUFDekIsSUFBSUEsU0FBU0MsU0FBU0QsUUFBUUMsT0FBTztRQUN6QztRQUNBLElBQUksQ0FBQ3BGLGVBQWUsR0FBRyxFQUFFO0lBQzdCO0lBRVF5QyxrQkFBa0I7UUFDdEIsSUFBSSxDQUFDeEIsa0JBQWtCO1FBQ3ZCLElBQUksQ0FBQ3lDLG9CQUFvQjtRQUV6QixJQUFJLElBQUksQ0FBQ25ELFVBQVUsRUFBRTZFLFNBQVM7WUFDMUIsSUFBSSxDQUFDN0UsVUFBVSxDQUFDNkUsT0FBTztRQUMzQjtRQUVBLElBQUksQ0FBQ2hELEtBQUssQ0FBQ0MsUUFBUSxFQUFFZ0QsSUFBSTtRQUN6QixJQUFJLENBQUNDLEtBQUssQ0FBQ0MsSUFBSTtJQUNuQjtJQUVBQyxXQUFXO1FBQ1AsSUFBSSxDQUFDL0MsZUFBZTtJQUN4QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL3NjZW5lcy9pbnB1dC1zY2VuZS50cz9iZTU3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IHsgTG9jYWxTdG9yYWdlTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzL2xvY2FsLXN0b3JhZ2UtbWFuYWdlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgSW5wdXRTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgICBwcml2YXRlIGlucHV0VGV4dDogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XHJcbiAgICBwcml2YXRlIHNjb3JlOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGxldmVsOiBudW1iZXIgfCAnQWxsJztcclxuICAgIHByaXZhdGUgaW5wdXRBY3RpdmU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBiYWNrZ3JvdW5kOiBQaGFzZXIuR2FtZU9iamVjdHMuUmVjdGFuZ2xlO1xyXG4gICAgcHJpdmF0ZSBpbnB1dEVsZW1lbnRzOiBQaGFzZXIuR2FtZU9iamVjdHMuR2FtZU9iamVjdFtdID0gW107XHJcbiAgICBwcml2YXRlIHJlY29yZHNFbGVtZW50czogUGhhc2VyLkdhbWVPYmplY3RzLkdhbWVPYmplY3RbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzaG93aW5nUmVjb3JkczogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKHsga2V5OiAnSW5wdXRTY2VuZScgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdChkYXRhOiB7IHNjb3JlOiBudW1iZXIsIGxldmVsOiBudW1iZXIgfCAnQWxsJyB9KSB7XHJcbiAgICAgICAgdGhpcy5zY29yZSA9IGRhdGEuc2NvcmU7XHJcbiAgICAgICAgdGhpcy5sZXZlbCA9IGRhdGEubGV2ZWw7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCB0aGlzLmNhbWVyYXMubWFpbi53aWR0aCwgdGhpcy5jYW1lcmFzLm1haW4uaGVpZ2h0LCAweDAwMDAwMCwgMC44KVxyXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDApXHJcbiAgICAgICAgICAgIC5zZXREZXB0aCgwKTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVJbnB1dFVJKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVJbnB1dFVJKCkge1xyXG4gICAgICAgIHRoaXMuY2xlYXJJbnB1dEVsZW1lbnRzKCk7XHJcbiAgICAgICAgdGhpcy5pbnB1dEFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zaG93aW5nUmVjb3JkcyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMuYWRkLnRleHQodGhpcy5jYW1lcmFzLm1haW4ud2lkdGggLyAyLCAxNTAsICdORVcgSElHSCBTQ09SRSEnLCB7XHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMzZweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmY2MwMCcsXHJcbiAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLFxyXG4gICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDJcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2NvcmVUZXh0ID0gdGhpcy5hZGQudGV4dCh0aGlzLmNhbWVyYXMubWFpbi53aWR0aCAvIDIsIDIwMCwgYFNDT1JFOiAke3RoaXMuc2NvcmV9YCwge1xyXG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogJzI4cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnLFxyXG4gICAgICAgICAgICBzdHJva2U6ICcjMDAwMDAwJyxcclxuICAgICAgICAgICAgc3Ryb2tlVGhpY2tuZXNzOiAyXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHByb21wdCA9IHRoaXMuYWRkLnRleHQodGhpcy5jYW1lcmFzLm1haW4ud2lkdGggLyAyLCAyODAsICdFTlRFUiBZT1VSIE5BTUU6Jywge1xyXG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogJzMycHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0ID0gdGhpcy5hZGQudGV4dCh0aGlzLmNhbWVyYXMubWFpbi53aWR0aCAvIDIsIDM1MCwgJycsIHtcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgZm9udFNpemU6ICczMnB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZjAwJyxcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzMzMzMzMycsXHJcbiAgICAgICAgICAgIHBhZGRpbmc6IHsgbGVmdDogMTAsIHJpZ2h0OiAxMCwgdG9wOiA1LCBib3R0b206IDUgfVxyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICBjb25zdCBoaW50MSA9IHRoaXMuYWRkLnRleHQoXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLndpZHRoIC8gMiwgXHJcbiAgICAgICAgICAgIDQwMCwgXHJcbiAgICAgICAgICAgICcoTUFYIDEyIENIQVJBQ1RFUlMsIE5PIFNQQUNFUyknLCBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMjRweCcsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNhYWFhYWEnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICBjb25zdCBoaW50MiA9IHRoaXMuYWRkLnRleHQoXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLndpZHRoIC8gMiwgXHJcbiAgICAgICAgICAgIDQ0MCwgXHJcbiAgICAgICAgICAgICdFU0MgVE8gQ0FOQ0VMJywgXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzI0cHgnLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjZmY1NTU1J1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnRzID0gW3RpdGxlLCBzY29yZVRleHQsIHByb21wdCwgdGhpcy5pbnB1dFRleHQsIGhpbnQxLCBoaW50Ml07XHJcblxyXG4gICAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQ/Lm9uKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlJbnB1dCwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVLZXlJbnB1dChldmVudDogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pbnB1dEFjdGl2ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFudXBBbmRDbG9zZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93aW5nUmVjb3Jkcykge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFudXBBbmRDbG9zZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDQoNCw0LfRgNC10YjQsNC10Lwg0YLQvtC70YzQutC+INCw0L3Qs9C70LjQudGB0LrQuNC1INCx0YPQutCy0YssINGG0LjRhNGA0Ysg0Lgg0YPQv9GA0LDQstC70Y/RjtGJ0LjQtSDQutC70LDQstC40YjQuFxyXG4gICAgICAgIGNvbnN0IGFsbG93ZWRLZXlzID0gW1xyXG4gICAgICAgICAgICAnRW50ZXInLCAnQmFja3NwYWNlJywgJ0RlbGV0ZScsICdBcnJvd0xlZnQnLCAnQXJyb3dSaWdodCcsIFxyXG4gICAgICAgICAgICAnQXJyb3dVcCcsICdBcnJvd0Rvd24nLCAnSG9tZScsICdFbmQnLCAnVGFiJ1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGNvbnN0IGlzQWxsb3dlZENvbnRyb2xLZXkgPSBhbGxvd2VkS2V5cy5pbmNsdWRlcyhldmVudC5rZXkpO1xyXG4gICAgICAgIGNvbnN0IGlzTGV0dGVyID0gL15bYS16QS1aXSQvLnRlc3QoZXZlbnQua2V5KTtcclxuICAgICAgICBjb25zdCBpc051bWJlciA9IC9eWzAtOV0kLy50ZXN0KGV2ZW50LmtleSk7XHJcblxyXG4gICAgICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU2NvcmUoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gJ0JhY2tzcGFjZScpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnB1dFRleHQudGV4dCA9IHRoaXMuaW5wdXRUZXh0LnRleHQuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoKGlzTGV0dGVyIHx8IGlzTnVtYmVyIHx8IGlzQWxsb3dlZENvbnRyb2xLZXkpICYmIFxyXG4gICAgICAgICAgICAgICAgICB0aGlzLmlucHV0VGV4dC50ZXh0Lmxlbmd0aCA8IDEyKSB7XHJcbiAgICAgICAgICAgIC8vINCU0LvRjyDQsdGD0LrQsiDQv9GA0LXQvtCx0YDQsNC30YPQtdC8INCyINCy0LXRgNGF0L3QuNC5INGA0LXQs9C40YHRgtGAXHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXJUb0FkZCA9IGlzTGV0dGVyID8gZXZlbnQua2V5LnRvVXBwZXJDYXNlKCkgOiBldmVudC5rZXk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUZXh0LnRleHQgKz0gY2hhclRvQWRkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNhdmVTY29yZSgpIHtcclxuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5pbnB1dFRleHQudGV4dCB8fCAnUExBWUVSJztcclxuICAgICAgICBMb2NhbFN0b3JhZ2VNYW5hZ2VyLmFkZEhpZ2hTY29yZSh7XHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWUuc3Vic3RyaW5nKDAsIDEyKS5yZXBsYWNlKC9cXHMvZywgJycpLFxyXG4gICAgICAgICAgICBzY29yZTogdGhpcy5zY29yZSxcclxuICAgICAgICAgICAgbGV2ZWw6IHRoaXMubGV2ZWxcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmlucHV0QWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jbGVhcklucHV0RWxlbWVudHMoKTtcclxuICAgICAgICB0aGlzLnNob3dIaWdoU2NvcmVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93SGlnaFNjb3JlcygpIHtcclxuICAgICAgICB0aGlzLmNsZWFyUmVjb3Jkc0VsZW1lbnRzKCk7XHJcbiAgICAgICAgdGhpcy5zaG93aW5nUmVjb3JkcyA9IHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlY29yZHMgPSBMb2NhbFN0b3JhZ2VNYW5hZ2VyLmxvYWRIaWdoU2NvcmVzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSB0aGlzLmFkZC50ZXh0KHRoaXMuY2FtZXJhcy5tYWluLndpZHRoIC8gMiwgMzAsICdISUdIIFNDT1JFUycsIHtcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgZm9udFNpemU6ICcyOHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZjYzAwJyxcclxuICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXHJcbiAgICAgICAgICAgIHN0cm9rZVRoaWNrbmVzczogMlxyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICBjb25zdCByYW5rSGVhZGVyID0gdGhpcy5hZGQudGV4dCgyMCwgNzAsICdSQU5LJywge1xyXG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogJzE2cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5hbWVIZWFkZXIgPSB0aGlzLmFkZC50ZXh0KDgwLCA3MCwgJ05BTUUnLCB7XHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2NvcmVIZWFkZXIgPSB0aGlzLmFkZC50ZXh0KDIyMCwgNzAsICdTQ09SRScsIHtcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgZm9udFNpemU6ICcxNnB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBsZXZlbEhlYWRlciA9IHRoaXMuYWRkLnRleHQoMzYwLCA3MCwgJ0xWTCcsIHtcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgZm9udFNpemU6ICcxNnB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRlSGVhZGVyID0gdGhpcy5hZGQudGV4dCg0MDAsIDcwLCAnREFURScsIHtcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgZm9udFNpemU6ICcxNnB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJlY29yZHNFbGVtZW50cy5wdXNoKHRpdGxlLCByYW5rSGVhZGVyLCBuYW1lSGVhZGVyLCBzY29yZUhlYWRlciwgbGV2ZWxIZWFkZXIsIGRhdGVIZWFkZXIpO1xyXG5cclxuICAgICAgICByZWNvcmRzLmZvckVhY2goKHJlY29yZCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeVBvcyA9IDEwMCArIGluZGV4ICogMzA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByYW5rVGV4dCA9IHRoaXMuYWRkLnRleHQoMjAsIHlQb3MsIGAke2luZGV4ICsgMX0uYCwge1xyXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbmFtZVRleHQgPSB0aGlzLmFkZC50ZXh0KDgwLCB5UG9zLCByZWNvcmQubmFtZSwge1xyXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNmZmZmMDAnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgc2NvcmVUZXh0ID0gdGhpcy5hZGQudGV4dCgyMjAsIHlQb3MsIHJlY29yZC5zY29yZS50b1N0cmluZygpLCB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxyXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICcxNnB4JyxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBsZXZlbFRleHQgPSB0aGlzLmFkZC50ZXh0KDM2MCwgeVBvcywgXHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgcmVjb3JkLmxldmVsID09PSAnbnVtYmVyJyA/IHJlY29yZC5sZXZlbC50b1N0cmluZygpIDogJ0FsbCcsIFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6ICcxNnB4JyxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNhYWFhYWEnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUocmVjb3JkLmRhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlVGV4dCA9IHRoaXMuYWRkLnRleHQoNDAwLCB5UG9zLCBcclxuICAgICAgICAgICAgICAgIGAke2RhdGUuZ2V0RGF0ZSgpfS4ke2RhdGUuZ2V0TW9udGgoKSsxfS4ke2RhdGUuZ2V0RnVsbFllYXIoKX1gLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6ICcxNnB4JyxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNhYWFhYWEnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlY29yZHNFbGVtZW50cy5wdXNoKHJhbmtUZXh0LCBuYW1lVGV4dCwgc2NvcmVUZXh0LCBsZXZlbFRleHQsIGRhdGVUZXh0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY29udGludWVUZXh0ID0gdGhpcy5hZGQudGV4dChcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4ud2lkdGggLyAyLCBcclxuICAgICAgICAgICAgNDUwLCBcclxuICAgICAgICAgICAgJ1BSRVNTIEFOWSBLRVkgVE8gQ09OVElOVUUnLCBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMjBweCcsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyMwMGZmMDAnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVjb3Jkc0VsZW1lbnRzLnB1c2goY29udGludWVUZXh0KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnB1dC5rZXlib2FyZD8ub25jZSgna2V5ZG93bicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhbnVwQW5kQ2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNsZWFySW5wdXRFbGVtZW50cygpIHtcclxuICAgICAgICB0aGlzLmlucHV0RWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQ/LmRlc3Ryb3kpIGVsZW1lbnQuZGVzdHJveSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW5wdXRFbGVtZW50cyA9IFtdO1xyXG4gICAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQ/Lm9mZigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5SW5wdXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2xlYXJSZWNvcmRzRWxlbWVudHMoKSB7XHJcbiAgICAgICAgdGhpcy5yZWNvcmRzRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQ/LmRlc3Ryb3kpIGVsZW1lbnQuZGVzdHJveSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucmVjb3Jkc0VsZW1lbnRzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjbGVhbnVwQW5kQ2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhcklucHV0RWxlbWVudHMoKTtcclxuICAgICAgICB0aGlzLmNsZWFyUmVjb3Jkc0VsZW1lbnRzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZD8uZGVzdHJveSkge1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmQuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmlucHV0LmtleWJvYXJkPy5vZmYoJ2tleWRvd24nKTtcclxuICAgICAgICB0aGlzLnNjZW5lLnN0b3AoKTtcclxuICAgIH1cclxuXHJcbiAgICBzaHV0ZG93bigpIHtcclxuICAgICAgICB0aGlzLmNsZWFudXBBbmRDbG9zZSgpO1xyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIlBoYXNlciIsIkxvY2FsU3RvcmFnZU1hbmFnZXIiLCJJbnB1dFNjZW5lIiwiU2NlbmUiLCJjb25zdHJ1Y3RvciIsImtleSIsImlucHV0QWN0aXZlIiwiaW5wdXRFbGVtZW50cyIsInJlY29yZHNFbGVtZW50cyIsInNob3dpbmdSZWNvcmRzIiwiaW5pdCIsImRhdGEiLCJzY29yZSIsImxldmVsIiwiY3JlYXRlIiwiYmFja2dyb3VuZCIsImFkZCIsInJlY3RhbmdsZSIsImNhbWVyYXMiLCJtYWluIiwid2lkdGgiLCJoZWlnaHQiLCJzZXRPcmlnaW4iLCJzZXREZXB0aCIsImNyZWF0ZUlucHV0VUkiLCJjbGVhcklucHV0RWxlbWVudHMiLCJ0aXRsZSIsInRleHQiLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJjb2xvciIsInN0cm9rZSIsInN0cm9rZVRoaWNrbmVzcyIsInNjb3JlVGV4dCIsInByb21wdCIsImlucHV0VGV4dCIsImJhY2tncm91bmRDb2xvciIsInBhZGRpbmciLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJoaW50MSIsImhpbnQyIiwiaW5wdXQiLCJrZXlib2FyZCIsIm9uIiwiaGFuZGxlS2V5SW5wdXQiLCJldmVudCIsImNsZWFudXBBbmRDbG9zZSIsImFsbG93ZWRLZXlzIiwiaXNBbGxvd2VkQ29udHJvbEtleSIsImluY2x1ZGVzIiwiaXNMZXR0ZXIiLCJ0ZXN0IiwiaXNOdW1iZXIiLCJzYXZlU2NvcmUiLCJzbGljZSIsImxlbmd0aCIsImNoYXJUb0FkZCIsInRvVXBwZXJDYXNlIiwibmFtZSIsImFkZEhpZ2hTY29yZSIsInN1YnN0cmluZyIsInJlcGxhY2UiLCJzaG93SGlnaFNjb3JlcyIsImNsZWFyUmVjb3Jkc0VsZW1lbnRzIiwicmVjb3JkcyIsImxvYWRIaWdoU2NvcmVzIiwicmFua0hlYWRlciIsIm5hbWVIZWFkZXIiLCJzY29yZUhlYWRlciIsImxldmVsSGVhZGVyIiwiZGF0ZUhlYWRlciIsInB1c2giLCJmb3JFYWNoIiwicmVjb3JkIiwiaW5kZXgiLCJ5UG9zIiwicmFua1RleHQiLCJuYW1lVGV4dCIsInRvU3RyaW5nIiwibGV2ZWxUZXh0IiwiZGF0ZSIsIkRhdGUiLCJkYXRlVGV4dCIsImdldERhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiY29udGludWVUZXh0Iiwib25jZSIsImVsZW1lbnQiLCJkZXN0cm95Iiwib2ZmIiwic2NlbmUiLCJzdG9wIiwic2h1dGRvd24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/scenes/input-scene.ts\n");

/***/ }),

/***/ "./src/game/scenes/level-complete-scene.ts":
/*!*************************************************!*\
  !*** ./src/game/scenes/level-complete-scene.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LevelCompleteScene: () => (/* binding */ LevelCompleteScene)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _types_custom_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _configs_game_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../configs/game-config */ \"./src/game/configs/game-config.ts\");\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../event-bus */ \"./src/game/event-bus.ts\");\n\n\n\n\nclass LevelCompleteScene extends (phaser__WEBPACK_IMPORTED_MODULE_0___default().Scene) {\n    constructor(){\n        super({\n            key: \"LevelComplete\"\n        });\n        this.levelBonus = 0;\n        this.currentLevel = 0;\n    }\n    init(data) {\n        this.currentLevel = data.level;\n        this.levelBonus = data.lives * _configs_game_config__WEBPACK_IMPORTED_MODULE_2__.LIFE_BONUS_VALUE;\n    }\n    create() {\n        // Затемнение фона\n        const overlay = this.add.rectangle(0, 0, this.scale.width, this.scale.height, 0x000000).setOrigin(0);\n        // Текст \"STAGE COMPLETE\"\n        const completeText = this.add.text(this.scale.width / 2, this.scale.height / 2 - 50, \"STAGE COMPLETE\", {\n            fontSize: \"48px\",\n            color: \"#ffffff\"\n        }).setOrigin(0.5).setDepth(11);\n        // Текст бонуса\n        const bonusText = this.add.text(this.scale.width / 2, this.scale.height / 2 + 20, \"LIFE BONUS\", {\n            fontSize: \"32px\",\n            color: \"#ffffff\"\n        }).setOrigin(0.5).setAlpha(0).setDepth(11);\n        // Число бонуса\n        const bonusValue = this.add.text(this.scale.width / 2, this.scale.height / 2 + 60, this.levelBonus.toString(), {\n            fontSize: \"40px\",\n            color: \"#ffcc00\"\n        }).setOrigin(0.5).setAlpha(0).setDepth(11);\n        // Анимация появления текста\n        this.tweens.add({\n            targets: bonusText,\n            alpha: 1,\n            duration: 1000,\n            delay: 1000,\n            onComplete: ()=>{\n                this.tweens.add({\n                    targets: bonusValue,\n                    alpha: 1,\n                    duration: 800,\n                    onComplete: ()=>{\n                        // Обновляем счет\n                        _event_bus__WEBPACK_IMPORTED_MODULE_3__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_1__.CUSTOM_EVENTS.ADD_BONUS_SCORE, this.levelBonus);\n                        // Переход к следующему уровню через 5 секунд\n                        this.time.delayedCall(5000, ()=>{\n                            this.scene.stop();\n                            this.scene.get(\"GameScene\").events.emit(\"level-transition\", this.currentLevel);\n                        });\n                    }\n                });\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9zY2VuZXMvbGV2ZWwtY29tcGxldGUtc2NlbmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTRCO0FBQzJCO0FBQ047QUFDVDtBQUVqQyxNQUFNSSwyQkFBMkJKLHFEQUFZO0lBSWhETSxhQUFjO1FBQ1YsS0FBSyxDQUFDO1lBQUVDLEtBQUs7UUFBZ0I7YUFKekJDLGFBQWE7YUFDYkMsZUFBZTtJQUl2QjtJQUVBQyxLQUFLQyxJQUFzQyxFQUFFO1FBQ3pDLElBQUksQ0FBQ0YsWUFBWSxHQUFHRSxLQUFLQyxLQUFLO1FBQzlCLElBQUksQ0FBQ0osVUFBVSxHQUFHRyxLQUFLRSxLQUFLLEdBQUdYLGtFQUF1QjtJQUMxRDtJQUVBYSxTQUFTO1FBQ0wsa0JBQWtCO1FBQ2xCLE1BQU1DLFVBQVUsSUFBSSxDQUFDQyxHQUFHLENBQUNDLFNBQVMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDQyxLQUFLLENBQUNDLEtBQUssRUFBRSxJQUFJLENBQUNELEtBQUssQ0FBQ0UsTUFBTSxFQUFFLFVBQVVDLFNBQVMsQ0FBQztRQUVsRyx5QkFBeUI7UUFDekIsTUFBTUMsZUFBZSxJQUFJLENBQUNOLEdBQUcsQ0FBQ08sSUFBSSxDQUM5QixJQUFJLENBQUNMLEtBQUssQ0FBQ0MsS0FBSyxHQUFHLEdBQ25CLElBQUksQ0FBQ0QsS0FBSyxDQUFDRSxNQUFNLEdBQUcsSUFBSSxJQUN4QixrQkFDQTtZQUFFSSxVQUFVO1lBQVFDLE9BQU87UUFBVSxHQUN2Q0osU0FBUyxDQUFDLEtBQUtLLFFBQVEsQ0FBQztRQUUxQixlQUFlO1FBQ2YsTUFBTUMsWUFBWSxJQUFJLENBQUNYLEdBQUcsQ0FBQ08sSUFBSSxDQUMzQixJQUFJLENBQUNMLEtBQUssQ0FBQ0MsS0FBSyxHQUFHLEdBQ25CLElBQUksQ0FBQ0QsS0FBSyxDQUFDRSxNQUFNLEdBQUcsSUFBSSxJQUN4QixjQUNBO1lBQUVJLFVBQVU7WUFBUUMsT0FBTztRQUFVLEdBQ3ZDSixTQUFTLENBQUMsS0FBS08sUUFBUSxDQUFDLEdBQUdGLFFBQVEsQ0FBQztRQUV0QyxlQUFlO1FBQ2YsTUFBTUcsYUFBYSxJQUFJLENBQUNiLEdBQUcsQ0FBQ08sSUFBSSxDQUM1QixJQUFJLENBQUNMLEtBQUssQ0FBQ0MsS0FBSyxHQUFHLEdBQ25CLElBQUksQ0FBQ0QsS0FBSyxDQUFDRSxNQUFNLEdBQUcsSUFBSSxJQUN4QixJQUFJLENBQUNiLFVBQVUsQ0FBQ3VCLFFBQVEsSUFDeEI7WUFBRU4sVUFBVTtZQUFRQyxPQUFPO1FBQVUsR0FDdkNKLFNBQVMsQ0FBQyxLQUFLTyxRQUFRLENBQUMsR0FBR0YsUUFBUSxDQUFDO1FBRXRDLDRCQUE0QjtRQUM1QixJQUFJLENBQUNLLE1BQU0sQ0FBQ2YsR0FBRyxDQUFDO1lBQ1pnQixTQUFTTDtZQUNUTSxPQUFPO1lBQ1BDLFVBQVU7WUFDVkMsT0FBTztZQUNQQyxZQUFZO2dCQUNSLElBQUksQ0FBQ0wsTUFBTSxDQUFDZixHQUFHLENBQUM7b0JBQ1pnQixTQUFTSDtvQkFDVEksT0FBTztvQkFDUEMsVUFBVTtvQkFDVkUsWUFBWTt3QkFDUixpQkFBaUI7d0JBQ2pCbEMsZ0RBQVFBLENBQUNtQyxJQUFJLENBQ1RyQywrREFBYUEsQ0FBQ3NDLGVBQWUsRUFDN0IsSUFBSSxDQUFDL0IsVUFBVTt3QkFHbkIsNkNBQTZDO3dCQUM3QyxJQUFJLENBQUNnQyxJQUFJLENBQUNDLFdBQVcsQ0FBQyxNQUFNOzRCQUN4QixJQUFJLENBQUNDLEtBQUssQ0FBQ0MsSUFBSTs0QkFDZixJQUFJLENBQUNELEtBQUssQ0FBQ0UsR0FBRyxDQUFDLGFBQWFDLE1BQU0sQ0FBQ1AsSUFBSSxDQUFDLG9CQUFvQixJQUFJLENBQUM3QixZQUFZO3dCQUNqRjtvQkFDSjtnQkFDSjtZQUNKO1FBQ0o7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL3NjZW5lcy9sZXZlbC1jb21wbGV0ZS1zY2VuZS50cz81Njc0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IHsgQ1VTVE9NX0VWRU5UUyB9IGZyb20gJy4uL3R5cGVzL2N1c3RvbS1ldmVudHMnO1xyXG5pbXBvcnQgKiBhcyBDT05GSUcgZnJvbSAnLi4vY29uZmlncy9nYW1lLWNvbmZpZyc7XHJcbmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnLi4vZXZlbnQtYnVzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBMZXZlbENvbXBsZXRlU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgcHJpdmF0ZSBsZXZlbEJvbnVzID0gMDtcclxuICAgIHByaXZhdGUgY3VycmVudExldmVsID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcih7IGtleTogJ0xldmVsQ29tcGxldGUnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoZGF0YTogeyBsZXZlbDogbnVtYmVyLCBsaXZlczogbnVtYmVyIH0pIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRMZXZlbCA9IGRhdGEubGV2ZWw7XHJcbiAgICAgICAgdGhpcy5sZXZlbEJvbnVzID0gZGF0YS5saXZlcyAqIENPTkZJRy5MSUZFX0JPTlVTX1ZBTFVFO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICAvLyDQl9Cw0YLQtdC80L3QtdC90LjQtSDRhNC+0L3QsFxyXG4gICAgICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgdGhpcy5zY2FsZS53aWR0aCwgdGhpcy5zY2FsZS5oZWlnaHQsIDB4MDAwMDAwKS5zZXRPcmlnaW4oMCk7XHJcblxyXG4gICAgICAgIC8vINCi0LXQutGB0YIgXCJTVEFHRSBDT01QTEVURVwiXHJcbiAgICAgICAgY29uc3QgY29tcGxldGVUZXh0ID0gdGhpcy5hZGQudGV4dChcclxuICAgICAgICAgICAgdGhpcy5zY2FsZS53aWR0aCAvIDIsXHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGUuaGVpZ2h0IC8gMiAtIDUwLFxyXG4gICAgICAgICAgICAnU1RBR0UgQ09NUExFVEUnLFxyXG4gICAgICAgICAgICB7IGZvbnRTaXplOiAnNDhweCcsIGNvbG9yOiAnI2ZmZmZmZicgfVxyXG4gICAgICAgICkuc2V0T3JpZ2luKDAuNSkuc2V0RGVwdGgoMTEpO1xyXG5cclxuICAgICAgICAvLyDQotC10LrRgdGCINCx0L7QvdGD0YHQsFxyXG4gICAgICAgIGNvbnN0IGJvbnVzVGV4dCA9IHRoaXMuYWRkLnRleHQoXHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGUud2lkdGggLyAyLFxyXG4gICAgICAgICAgICB0aGlzLnNjYWxlLmhlaWdodCAvIDIgKyAyMCxcclxuICAgICAgICAgICAgJ0xJRkUgQk9OVVMnLFxyXG4gICAgICAgICAgICB7IGZvbnRTaXplOiAnMzJweCcsIGNvbG9yOiAnI2ZmZmZmZicgfVxyXG4gICAgICAgICkuc2V0T3JpZ2luKDAuNSkuc2V0QWxwaGEoMCkuc2V0RGVwdGgoMTEpO1xyXG5cclxuICAgICAgICAvLyDQp9C40YHQu9C+INCx0L7QvdGD0YHQsFxyXG4gICAgICAgIGNvbnN0IGJvbnVzVmFsdWUgPSB0aGlzLmFkZC50ZXh0KFxyXG4gICAgICAgICAgICB0aGlzLnNjYWxlLndpZHRoIC8gMixcclxuICAgICAgICAgICAgdGhpcy5zY2FsZS5oZWlnaHQgLyAyICsgNjAsXHJcbiAgICAgICAgICAgIHRoaXMubGV2ZWxCb251cy50b1N0cmluZygpLFxyXG4gICAgICAgICAgICB7IGZvbnRTaXplOiAnNDBweCcsIGNvbG9yOiAnI2ZmY2MwMCcgfVxyXG4gICAgICAgICkuc2V0T3JpZ2luKDAuNSkuc2V0QWxwaGEoMCkuc2V0RGVwdGgoMTEpO1xyXG5cclxuICAgICAgICAvLyDQkNC90LjQvNCw0YbQuNGPINC/0L7Rj9Cy0LvQtdC90LjRjyDRgtC10LrRgdGC0LBcclxuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xyXG4gICAgICAgICAgICB0YXJnZXRzOiBib251c1RleHQsXHJcbiAgICAgICAgICAgIGFscGhhOiAxLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogMTAwMCxcclxuICAgICAgICAgICAgZGVsYXk6IDEwMDAsXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0czogYm9udXNWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBhbHBoYTogMSxcclxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogODAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g0J7QsdC90L7QstC70Y/QtdC8INGB0YfQtdGCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLmVtaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDVVNUT01fRVZFTlRTLkFERF9CT05VU19TQ09SRSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxldmVsQm9udXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINCf0LXRgNC10YXQvtC0INC6INGB0LvQtdC00YPRjtGJ0LXQvNGDINGD0YDQvtCy0L3RjiDRh9C10YDQtdC3IDUg0YHQtdC60YPQvdC0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCg1MDAwLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2V0KCdHYW1lU2NlbmUnKS5ldmVudHMuZW1pdCgnbGV2ZWwtdHJhbnNpdGlvbicsIHRoaXMuY3VycmVudExldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJQaGFzZXIiLCJDVVNUT01fRVZFTlRTIiwiQ09ORklHIiwiRXZlbnRCdXMiLCJMZXZlbENvbXBsZXRlU2NlbmUiLCJTY2VuZSIsImNvbnN0cnVjdG9yIiwia2V5IiwibGV2ZWxCb251cyIsImN1cnJlbnRMZXZlbCIsImluaXQiLCJkYXRhIiwibGV2ZWwiLCJsaXZlcyIsIkxJRkVfQk9OVVNfVkFMVUUiLCJjcmVhdGUiLCJvdmVybGF5IiwiYWRkIiwicmVjdGFuZ2xlIiwic2NhbGUiLCJ3aWR0aCIsImhlaWdodCIsInNldE9yaWdpbiIsImNvbXBsZXRlVGV4dCIsInRleHQiLCJmb250U2l6ZSIsImNvbG9yIiwic2V0RGVwdGgiLCJib251c1RleHQiLCJzZXRBbHBoYSIsImJvbnVzVmFsdWUiLCJ0b1N0cmluZyIsInR3ZWVucyIsInRhcmdldHMiLCJhbHBoYSIsImR1cmF0aW9uIiwiZGVsYXkiLCJvbkNvbXBsZXRlIiwiZW1pdCIsIkFERF9CT05VU19TQ09SRSIsInRpbWUiLCJkZWxheWVkQ2FsbCIsInNjZW5lIiwic3RvcCIsImdldCIsImV2ZW50cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/scenes/level-complete-scene.ts\n");

/***/ }),

/***/ "./src/game/scenes/main-menu-scene.ts":
/*!********************************************!*\
  !*** ./src/game/scenes/main-menu-scene.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MainMenu: () => (/* binding */ MainMenu)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../event-bus */ \"./src/game/event-bus.ts\");\n/* harmony import */ var _components_input_human_menu_input_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/input/human/menu-input-component */ \"./src/game/components/input/human/menu-input-component.ts\");\n\n\n\nclass MainMenu extends (phaser__WEBPACK_IMPORTED_MODULE_0___default().Scene) {\n    constructor(){\n        super(\"MainMenu\");\n        this.menuItems = [];\n        this.selectedItemIndex = 0;\n        this.lastInputTime = 0;\n        this.inputDelay = 200;\n    }\n    create() {\n        // Сохраняем выбранный индекс при перезаходе\n        this.selectedItemIndex = this.registry.get(\"selectedMenuItemIndex\") || 0;\n        this.add.rectangle(0, 0, 50, 50, 0x000000).setOrigin(0).setDepth(1000);\n        this.createBackground();\n        this.createTitle();\n        this.createMenuItems();\n        this.setupInput();\n        this.selectMenuItem(this.selectedItemIndex);\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(\"current-scene-ready\", this);\n    }\n    createBackground() {\n        this.add.image(0, 0, \"background\").setOrigin(0).setScale(1.25);\n    }\n    createTitle() {\n        this.title = this.add.text(this.cameras.main.width / 2, 150, \"End of Course\", {\n            fontFamily: \"Arial\",\n            fontSize: \"48px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 4\n        }).setOrigin(0.5);\n    }\n    createMenuItems() {\n        this.menuItems = [\n            this.createMenuItem(300, \"Game Start\", ()=>{\n                this.registry.set(\"selectedMenuItemIndex\", 0);\n                this.scene.start(\"GameScene\");\n            }),\n            this.createMenuItem(400, \"Records\", ()=>{\n                this.registry.set(\"selectedMenuItemIndex\", 1);\n                this.scene.start(\"RecordsScene\");\n            }),\n            this.createMenuItem(500, \"Options\", ()=>{\n                this.registry.set(\"selectedMenuItemIndex\", 2);\n                this.scene.start(\"OptionsScene\");\n            })\n        ];\n    }\n    createMenuItem(y, text, action) {\n        const menuItem = this.add.text(this.cameras.main.width / 2, y, text, {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5).setInteractive();\n        menuItem.on(\"pointerover\", ()=>{\n            this.selectedItemIndex = this.menuItems.indexOf(menuItem);\n            this.selectMenuItem(this.selectedItemIndex);\n        });\n        menuItem.on(\"pointerout\", ()=>{\n            menuItem.setColor(\"#ffffff\");\n        });\n        menuItem.on(\"pointerdown\", action);\n        return menuItem;\n    }\n    setupInput() {\n        this.menuInput = new _components_input_human_menu_input_component__WEBPACK_IMPORTED_MODULE_2__.MenuInputComponent(this);\n        this.input.on(\"pointermove\", (pointer)=>{\n            if (!pointer.isDown) return;\n            const item = this.menuItems.find((item)=>item.getBounds().contains(pointer.x, pointer.y));\n            if (item) {\n                this.selectedItemIndex = this.menuItems.indexOf(item);\n                this.selectMenuItem(this.selectedItemIndex);\n                item.emit(\"pointerdown\");\n            }\n        });\n    }\n    update(time) {\n        if (!this.menuInput) return;\n        this.menuInput.update();\n        this.handleNavigation(time);\n        this.handleSelection();\n        this.handleSecondaryAction();\n    }\n    handleNavigation(time) {\n        if (time - this.lastInputTime < this.inputDelay) return;\n        if (this.menuInput.downIsDown) {\n            this.changeSelectedItem(1);\n            this.lastInputTime = time;\n        } else if (this.menuInput.upIsDown) {\n            this.changeSelectedItem(-1);\n            this.lastInputTime = time;\n        }\n    }\n    changeSelectedItem(direction) {\n        this.selectedItemIndex = (this.selectedItemIndex + direction + this.menuItems.length) % this.menuItems.length;\n        this.selectMenuItem(this.selectedItemIndex);\n    }\n    handleSelection() {\n        if (this.menuInput.primaryActionIsDown) {\n            this.menuItems[this.selectedItemIndex].emit(\"pointerdown\");\n        }\n    }\n    handleSecondaryAction() {\n        if (this.menuInput.secondaryActionIsDown) {\n            // Дополнительное действие (например, выход в главное меню)\n            console.log(\"Secondary action triggered\");\n        }\n    }\n    selectMenuItem(index) {\n        this.menuItems.forEach((item, i)=>{\n            item.setColor(i === index ? \"#ff0\" : \"#fff\");\n            item.setScale(i === index ? 1.1 : 1.0);\n        });\n    }\n    shutdown() {\n        this.menuInput.cleanup();\n        this.input.off(\"pointermove\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxDQUFDO1lBQ3pCLElBQUksQ0FBQ3JELGFBQWEsR0FBR2dEO1FBQ3pCO0lBQ0o7SUFFUUssbUJBQW1CRSxTQUFpQixFQUFFO1FBQzFDLElBQUksQ0FBQ3hELGlCQUFpQixHQUFHLENBQUMsSUFBSSxDQUFDQSxpQkFBaUIsR0FBR3dELFlBQVksSUFBSSxDQUFDekQsU0FBUyxDQUFDMEQsTUFBTSxJQUFJLElBQUksQ0FBQzFELFNBQVMsQ0FBQzBELE1BQU07UUFDN0csSUFBSSxDQUFDM0MsY0FBYyxDQUFDLElBQUksQ0FBQ2QsaUJBQWlCO0lBQzlDO0lBRVFtRCxrQkFBa0I7UUFDdEIsSUFBSSxJQUFJLENBQUNaLFNBQVMsQ0FBQ21CLG1CQUFtQixFQUFFO1lBQ3BDLElBQUksQ0FBQzNELFNBQVMsQ0FBQyxJQUFJLENBQUNDLGlCQUFpQixDQUFDLENBQUNlLElBQUksQ0FBQztRQUNoRDtJQUNKO0lBRVFxQyx3QkFBd0I7UUFDNUIsSUFBSSxJQUFJLENBQUNiLFNBQVMsQ0FBQ29CLHFCQUFxQixFQUFFO1lBQ3RDLDJEQUEyRDtZQUMzREMsUUFBUUMsR0FBRyxDQUFDO1FBQ2hCO0lBQ0o7SUFFUS9DLGVBQWVnRCxLQUFhLEVBQUU7UUFDbEMsSUFBSSxDQUFDL0QsU0FBUyxDQUFDZ0UsT0FBTyxDQUFDLENBQUNwQixNQUFNcUI7WUFDMUJyQixLQUFLTCxRQUFRLENBQUMwQixNQUFNRixRQUFRLFNBQVM7WUFDckNuQixLQUFLMUIsUUFBUSxDQUFDK0MsTUFBTUYsUUFBUSxNQUFNO1FBQ3RDO0lBQ0o7SUFFQUcsV0FBVztRQUNQLElBQUksQ0FBQzFCLFNBQVMsQ0FBQzJCLE9BQU87UUFDdEIsSUFBSSxDQUFDMUIsS0FBSyxDQUFDMkIsR0FBRyxDQUFDO0lBQ25CO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvc2NlbmVzL21haW4tbWVudS1zY2VuZS50cz8zOTg0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnLi4vZXZlbnQtYnVzJztcbmltcG9ydCB7IE1lbnVJbnB1dENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvaW5wdXQvaHVtYW4vbWVudS1pbnB1dC1jb21wb25lbnQnO1xuXG5leHBvcnQgY2xhc3MgTWFpbk1lbnUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xuICAgIHByaXZhdGUgbWVudUlucHV0ITogTWVudUlucHV0Q29tcG9uZW50O1xuICAgIHByaXZhdGUgbWVudUl0ZW1zOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dFtdID0gW107XG4gICAgcHJpdmF0ZSBzZWxlY3RlZEl0ZW1JbmRleCA9IDA7XG4gICAgcHJpdmF0ZSBsYXN0SW5wdXRUaW1lID0gMDtcbiAgICBwcml2YXRlIGlucHV0RGVsYXkgPSAyMDA7XG4gICAgcHJpdmF0ZSB0aXRsZSE6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdNYWluTWVudScpO1xuICAgIH1cblxuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INCy0YvQsdGA0LDQvdC90YvQuSDQuNC90LTQtdC60YEg0L/RgNC4INC/0LXRgNC10LfQsNGF0L7QtNC1XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggPSB0aGlzLnJlZ2lzdHJ5LmdldCgnc2VsZWN0ZWRNZW51SXRlbUluZGV4JykgfHwgMDtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCA1MCwgNTAsIDB4MDAwMDAwKVxuICAgICAgICAgICAgLnNldE9yaWdpbigwKVxuICAgICAgICAgICAgLnNldERlcHRoKDEwMDApO1xuICAgICAgICAgICAgXG4gICAgICAgIHRoaXMuY3JlYXRlQmFja2dyb3VuZCgpO1xuICAgICAgICB0aGlzLmNyZWF0ZVRpdGxlKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlTWVudUl0ZW1zKCk7XG4gICAgICAgIHRoaXMuc2V0dXBJbnB1dCgpO1xuICAgICAgICB0aGlzLnNlbGVjdE1lbnVJdGVtKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXgpO1xuXG4gICAgICAgIEV2ZW50QnVzLmVtaXQoJ2N1cnJlbnQtc2NlbmUtcmVhZHknLCB0aGlzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUJhY2tncm91bmQoKSB7XG4gICAgICAgIHRoaXMuYWRkLmltYWdlKDAsIDAsICdiYWNrZ3JvdW5kJylcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMClcbiAgICAgICAgICAgIC5zZXRTY2FsZSgxLjI1KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVRpdGxlKCkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGhpcy5hZGQudGV4dChcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLndpZHRoIC8gMiwgXG4gICAgICAgICAgICAxNTAsIFxuICAgICAgICAgICAgJ0VuZCBvZiBDb3Vyc2UnLCBcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJywgXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICc0OHB4JywgXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJyxcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwMDAwJyxcbiAgICAgICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDRcbiAgICAgICAgICAgIH1cbiAgICAgICAgKS5zZXRPcmlnaW4oMC41KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZU1lbnVJdGVtcygpIHtcbiAgICAgICAgdGhpcy5tZW51SXRlbXMgPSBbXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU1lbnVJdGVtKDMwMCwgJ0dhbWUgU3RhcnQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ3NlbGVjdGVkTWVudUl0ZW1JbmRleCcsIDApO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ0dhbWVTY2VuZScpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU1lbnVJdGVtKDQwMCwgJ1JlY29yZHMnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ3NlbGVjdGVkTWVudUl0ZW1JbmRleCcsIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ1JlY29yZHNTY2VuZScpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU1lbnVJdGVtKDUwMCwgJ09wdGlvbnMnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ3NlbGVjdGVkTWVudUl0ZW1JbmRleCcsIDIpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ09wdGlvbnNTY2VuZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZU1lbnVJdGVtKHk6IG51bWJlciwgdGV4dDogc3RyaW5nLCBhY3Rpb246ICgpID0+IHZvaWQpOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dCB7XG4gICAgICAgIGNvbnN0IG1lbnVJdGVtID0gdGhpcy5hZGQudGV4dChcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLndpZHRoIC8gMiwgXG4gICAgICAgICAgICB5LCBcbiAgICAgICAgICAgIHRleHQsIFxuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLCBcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzMycHgnLCBcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLFxuICAgICAgICAgICAgICAgIHN0cm9rZVRoaWNrbmVzczogMlxuICAgICAgICAgICAgfVxuICAgICAgICApLnNldE9yaWdpbigwLjUpLnNldEludGVyYWN0aXZlKCk7XG5cbiAgICAgICAgbWVudUl0ZW0ub24oJ3BvaW50ZXJvdmVyJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1JbmRleCA9IHRoaXMubWVudUl0ZW1zLmluZGV4T2YobWVudUl0ZW0pO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RNZW51SXRlbSh0aGlzLnNlbGVjdGVkSXRlbUluZGV4KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWVudUl0ZW0ub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICBtZW51SXRlbS5zZXRDb2xvcignI2ZmZmZmZicpO1xuICAgICAgICB9KTtcblxuICAgICAgICBtZW51SXRlbS5vbigncG9pbnRlcmRvd24nLCBhY3Rpb24pO1xuXG4gICAgICAgIHJldHVybiBtZW51SXRlbTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwSW5wdXQoKSB7XG4gICAgICAgIHRoaXMubWVudUlucHV0ID0gbmV3IE1lbnVJbnB1dENvbXBvbmVudCh0aGlzKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW5wdXQub24oJ3BvaW50ZXJtb3ZlJywgKHBvaW50ZXI6IFBoYXNlci5JbnB1dC5Qb2ludGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXBvaW50ZXIuaXNEb3duKSByZXR1cm47XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLm1lbnVJdGVtcy5maW5kKGl0ZW0gPT4gXG4gICAgICAgICAgICAgICAgaXRlbS5nZXRCb3VuZHMoKS5jb250YWlucyhwb2ludGVyLngsIHBvaW50ZXIueSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1JbmRleCA9IHRoaXMubWVudUl0ZW1zLmluZGV4T2YoaXRlbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNZW51SXRlbSh0aGlzLnNlbGVjdGVkSXRlbUluZGV4KTtcbiAgICAgICAgICAgICAgICBpdGVtLmVtaXQoJ3BvaW50ZXJkb3duJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHVwZGF0ZSh0aW1lOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1lbnVJbnB1dCkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMubWVudUlucHV0LnVwZGF0ZSgpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlTmF2aWdhdGlvbih0aW1lKTtcbiAgICAgICAgdGhpcy5oYW5kbGVTZWxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy5oYW5kbGVTZWNvbmRhcnlBY3Rpb24oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZU5hdmlnYXRpb24odGltZTogbnVtYmVyKSB7XG4gICAgICAgIGlmICh0aW1lIC0gdGhpcy5sYXN0SW5wdXRUaW1lIDwgdGhpcy5pbnB1dERlbGF5KSByZXR1cm47XG5cbiAgICAgICAgaWYgKHRoaXMubWVudUlucHV0LmRvd25Jc0Rvd24pIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU2VsZWN0ZWRJdGVtKDEpO1xuICAgICAgICAgICAgdGhpcy5sYXN0SW5wdXRUaW1lID0gdGltZTtcbiAgICAgICAgfSBcbiAgICAgICAgZWxzZSBpZiAodGhpcy5tZW51SW5wdXQudXBJc0Rvd24pIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU2VsZWN0ZWRJdGVtKC0xKTtcbiAgICAgICAgICAgIHRoaXMubGFzdElucHV0VGltZSA9IHRpbWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNoYW5nZVNlbGVjdGVkSXRlbShkaXJlY3Rpb246IG51bWJlcikge1xuICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbUluZGV4ID0gKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggKyBkaXJlY3Rpb24gKyB0aGlzLm1lbnVJdGVtcy5sZW5ndGgpICUgdGhpcy5tZW51SXRlbXMubGVuZ3RoO1xuICAgICAgICB0aGlzLnNlbGVjdE1lbnVJdGVtKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlU2VsZWN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5tZW51SW5wdXQucHJpbWFyeUFjdGlvbklzRG93bikge1xuICAgICAgICAgICAgdGhpcy5tZW51SXRlbXNbdGhpcy5zZWxlY3RlZEl0ZW1JbmRleF0uZW1pdCgncG9pbnRlcmRvd24nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlU2Vjb25kYXJ5QWN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5tZW51SW5wdXQuc2Vjb25kYXJ5QWN0aW9uSXNEb3duKSB7XG4gICAgICAgICAgICAvLyDQlNC+0L/QvtC70L3QuNGC0LXQu9GM0L3QvtC1INC00LXQudGB0YLQstC40LUgKNC90LDQv9GA0LjQvNC10YAsINCy0YvRhdC+0LQg0LIg0LPQu9Cw0LLQvdC+0LUg0LzQtdC90Y4pXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2Vjb25kYXJ5IGFjdGlvbiB0cmlnZ2VyZWQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2VsZWN0TWVudUl0ZW0oaW5kZXg6IG51bWJlcikge1xuICAgICAgICB0aGlzLm1lbnVJdGVtcy5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XG4gICAgICAgICAgICBpdGVtLnNldENvbG9yKGkgPT09IGluZGV4ID8gJyNmZjAnIDogJyNmZmYnKTtcbiAgICAgICAgICAgIGl0ZW0uc2V0U2NhbGUoaSA9PT0gaW5kZXggPyAxLjEgOiAxLjApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5tZW51SW5wdXQuY2xlYW51cCgpO1xuICAgICAgICB0aGlzLmlucHV0Lm9mZigncG9pbnRlcm1vdmUnKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUGhhc2VyIiwiRXZlbnRCdXMiLCJNZW51SW5wdXRDb21wb25lbnQiLCJNYWluTWVudSIsIlNjZW5lIiwiY29uc3RydWN0b3IiLCJtZW51SXRlbXMiLCJzZWxlY3RlZEl0ZW1JbmRleCIsImxhc3RJbnB1dFRpbWUiLCJpbnB1dERlbGF5IiwiY3JlYXRlIiwicmVnaXN0cnkiLCJnZXQiLCJhZGQiLCJyZWN0YW5nbGUiLCJzZXRPcmlnaW4iLCJzZXREZXB0aCIsImNyZWF0ZUJhY2tncm91bmQiLCJjcmVhdGVUaXRsZSIsImNyZWF0ZU1lbnVJdGVtcyIsInNldHVwSW5wdXQiLCJzZWxlY3RNZW51SXRlbSIsImVtaXQiLCJpbWFnZSIsInNldFNjYWxlIiwidGl0bGUiLCJ0ZXh0IiwiY2FtZXJhcyIsIm1haW4iLCJ3aWR0aCIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImNvbG9yIiwic3Ryb2tlIiwic3Ryb2tlVGhpY2tuZXNzIiwiY3JlYXRlTWVudUl0ZW0iLCJzZXQiLCJzY2VuZSIsInN0YXJ0IiwieSIsImFjdGlvbiIsIm1lbnVJdGVtIiwic2V0SW50ZXJhY3RpdmUiLCJvbiIsImluZGV4T2YiLCJzZXRDb2xvciIsIm1lbnVJbnB1dCIsImlucHV0IiwicG9pbnRlciIsImlzRG93biIsIml0ZW0iLCJmaW5kIiwiZ2V0Qm91bmRzIiwiY29udGFpbnMiLCJ4IiwidXBkYXRlIiwidGltZSIsImhhbmRsZU5hdmlnYXRpb24iLCJoYW5kbGVTZWxlY3Rpb24iLCJoYW5kbGVTZWNvbmRhcnlBY3Rpb24iLCJkb3duSXNEb3duIiwiY2hhbmdlU2VsZWN0ZWRJdGVtIiwidXBJc0Rvd24iLCJkaXJlY3Rpb24iLCJsZW5ndGgiLCJwcmltYXJ5QWN0aW9uSXNEb3duIiwic2Vjb25kYXJ5QWN0aW9uSXNEb3duIiwiY29uc29sZSIsImxvZyIsImluZGV4IiwiZm9yRWFjaCIsImkiLCJzaHV0ZG93biIsImNsZWFudXAiLCJvZmYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/scenes/main-menu-scene.ts\n");

/***/ }),

/***/ "./src/game/scenes/options-scene.ts":
/*!******************************************!*\
  !*** ./src/game/scenes/options-scene.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OptionsScene: () => (/* binding */ OptionsScene)\n/* harmony export */ });\n/* harmony import */ var _components_input_human_menu_input_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/input/human/menu-input-component */ \"./src/game/components/input/human/menu-input-component.ts\");\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../event-bus */ \"./src/game/event-bus.ts\");\n/* harmony import */ var _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../managers/local-storage-manager */ \"./src/game/managers/local-storage-manager.ts\");\n/* harmony import */ var _types_custom_events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../types/custom-events */ \"./src/game/types/custom-events.ts\");\n\n\n\n\nclass OptionsScene extends Phaser.Scene {\n    constructor(){\n        super(\"OptionsScene\");\n        this.menuItems = [];\n        this.settingItems = [];\n        this.selectedItemIndex = 0;\n        this.lastInputTime = 0;\n        this.inputDelay = 200;\n    }\n    create() {\n        this.events.once(\"shutdown\", this.shutdown, this);\n        this.currentSettings = _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_2__.LocalStorageManager.loadSettings();\n        this.add.rectangle(0, 0, 50, 50, 0x000000).setOrigin(0).setDepth(1000);\n        this.createBackground();\n        this.createTitle();\n        this.createSettingsMenu();\n        this.setupInput();\n        this.selectMenuItem(0);\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(\"current-scene-ready\", this);\n    }\n    createBackground() {\n        this.add.image(0, 0, \"background\").setOrigin(0).setScale(1.25);\n    }\n    createTitle() {\n        this.add.text(this.cameras.main.width / 2, 100, \"OPTIONS\", {\n            fontFamily: \"Arial\",\n            fontSize: \"48px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 4\n        }).setOrigin(0.5);\n    }\n    getVolumeBars(volume) {\n        return \"■\".repeat(Math.floor(volume * 10)) + \"□\".repeat(10 - Math.floor(volume * 10));\n    }\n    createSettingsMenu() {\n        const centerX = this.cameras.main.width / 2;\n        let y = 200;\n        // Music Volume\n        const musicItem = this.add.text(centerX, y, `Music: [${this.getVolumeBars(this.currentSettings.musicVolume)}]`, {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\"\n        }).setOrigin(0.5);\n        this.settingItems.push(musicItem);\n        y += 60;\n        // SFX Volume\n        const sfxItem = this.add.text(centerX, y, `SFX: [${this.getVolumeBars(this.currentSettings.sfxVolume)}]`, {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\"\n        }).setOrigin(0.5);\n        this.settingItems.push(sfxItem);\n        y += 60;\n        // Show FPS\n        const fpsItem = this.add.text(centerX, y, `Show FPS: ${this.currentSettings.showFPS ? \"ON\" : \"OFF\"}`, {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\"\n        }).setOrigin(0.5);\n        this.settingItems.push(fpsItem);\n        y += 60;\n        // Weapon Type\n        const weaponItem = this.add.text(centerX, y, `Weapon: ${this.currentSettings.weaponType.toUpperCase()}`, {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\"\n        }).setOrigin(0.5);\n        this.settingItems.push(weaponItem);\n        y += 100;\n        const resetButton = this.add.text(centerX, y, \"RESET TO DEFAULTS\", {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\"\n        }).setOrigin(0.5).setInteractive();\n        this.menuItems.push(resetButton);\n        resetButton.on(\"pointerover\", ()=>{\n            this.selectedItemIndex = this.settingItems.length;\n            this.selectMenuItem(this.selectedItemIndex);\n        });\n        resetButton.on(\"pointerout\", ()=>{\n            resetButton.setColor(\"#ffffff\");\n        });\n        resetButton.on(\"pointerdown\", ()=>this.resetToDefaults());\n        y += 60;\n        // Back button\n        const backButton = this.add.text(centerX, y, \"BACK TO MENU\", {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\"\n        }).setOrigin(0.5).setInteractive();\n        this.menuItems.push(backButton);\n        backButton.on(\"pointerover\", ()=>{\n            this.selectedItemIndex = this.settingItems.length;\n            this.selectMenuItem(this.selectedItemIndex);\n        });\n        backButton.on(\"pointerout\", ()=>{\n            backButton.setColor(\"#ffffff\");\n        });\n        backButton.on(\"pointerdown\", ()=>this.returnToMenu());\n    }\n    resetToDefaults() {\n        this.currentSettings = _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_2__.LocalStorageManager.getDefaultConfig();\n        this.settingItems[0].setText(`Music: [${this.getVolumeBars(this.currentSettings.musicVolume)}]`);\n        this.settingItems[1].setText(`SFX: [${this.getVolumeBars(this.currentSettings.sfxVolume)}]`);\n        this.settingItems[2].setText(`Show FPS: ${this.currentSettings.showFPS ? \"ON\" : \"OFF\"}`);\n        this.settingItems[3].setText(`Weapon: ${this.currentSettings.weaponType.toUpperCase()}`);\n        this.applySettings();\n    }\n    setupInput() {\n        this.menuInput = new _components_input_human_menu_input_component__WEBPACK_IMPORTED_MODULE_0__.MenuInputComponent(this);\n    }\n    update(time) {\n        if (!this.menuInput) return;\n        this.menuInput.update();\n        if (time - this.lastInputTime < this.inputDelay) return;\n        // Вертикальная навигация\n        if (this.menuInput.downIsDown) {\n            this.changeSelectedItem(1);\n            this.lastInputTime = time;\n        } else if (this.menuInput.upIsDown) {\n            this.changeSelectedItem(-1);\n            this.lastInputTime = time;\n        } else if (this.menuInput.rightIsDown && this.selectedItemIndex < this.settingItems.length) {\n            this.adjustSetting(1);\n            this.lastInputTime = time;\n        } else if (this.menuInput.leftIsDown && this.selectedItemIndex < this.settingItems.length) {\n            this.adjustSetting(-1);\n            this.lastInputTime = time;\n        } else if (this.menuInput.primaryActionIsDown) {\n            const resetIndex = this.settingItems.length;\n            const backIndex = this.settingItems.length + 1;\n            if (this.selectedItemIndex === resetIndex) {\n                this.resetToDefaults();\n            } else if (this.selectedItemIndex === backIndex) {\n                this.returnToMenu();\n            }\n        }\n        this.handleSecondaryAction();\n    }\n    adjustSetting(direction) {\n        switch(this.selectedItemIndex){\n            case 0:\n                this.currentSettings.musicVolume = Phaser.Math.Clamp(this.currentSettings.musicVolume + direction * 0.1, 0, 1);\n                this.settingItems[0].setText(`Music: [${this.getVolumeBars(this.currentSettings.musicVolume)}]`);\n                break;\n            case 1:\n                this.currentSettings.sfxVolume = Phaser.Math.Clamp(this.currentSettings.sfxVolume + direction * 0.1, 0, 1);\n                this.settingItems[1].setText(`SFX: [${this.getVolumeBars(this.currentSettings.sfxVolume)}]`);\n                break;\n            case 2:\n                this.currentSettings.showFPS = !this.currentSettings.showFPS;\n                this.settingItems[2].setText(`Show FPS: ${this.currentSettings.showFPS ? \"ON\" : \"OFF\"}`);\n                break;\n            case 3:\n                const types = [\n                    \"wide\",\n                    \"laser\",\n                    \"rockets\"\n                ];\n                const currentIndex = types.indexOf(this.currentSettings.weaponType);\n                const newIndex = (currentIndex + direction + types.length) % types.length;\n                this.currentSettings.weaponType = types[newIndex];\n                this.settingItems[3].setText(`Weapon: ${this.currentSettings.weaponType.toUpperCase()}`);\n                break;\n        }\n        this.applySettings();\n    }\n    handleSecondaryAction() {\n        if (this.menuInput.secondaryActionIsDown) {\n            this.returnToMenu();\n        }\n    }\n    returnToMenu() {\n        this.applySettings();\n        this.scene.start(\"MainMenu\");\n    }\n    changeSelectedItem(direction) {\n        const itemCount = this.settingItems.length + 2; // Настройки + кнопки\n        this.selectedItemIndex = (this.selectedItemIndex + direction + itemCount) % itemCount;\n        this.selectMenuItem(this.selectedItemIndex);\n    }\n    selectMenuItem(index) {\n        // Подсветка элементов настроек\n        this.settingItems.forEach((item, i)=>{\n            item.setColor(i === index ? \"#ff0\" : \"#ffffff\");\n        });\n        // Подсветка элементов меню (BACK, RESET)\n        this.menuItems.forEach((item, i)=>{\n            const menuIndex = this.settingItems.length + i;\n            item.setColor(index === menuIndex ? \"#ff0\" : \"#ffffff\");\n        });\n    }\n    applySettings() {\n        _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_2__.LocalStorageManager.saveSettings(this.currentSettings);\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_3__.CUSTOM_EVENTS.SETTINGS_CHANGED, this.currentSettings);\n    }\n    shutdown() {\n        this.menuInput.cleanup();\n        this.settingItems.forEach((item)=>item.destroy());\n        this.menuItems.forEach((item)=>item.destroy());\n        this.settingItems = [];\n        this.menuItems = [];\n        this.input.off(\"pointermove\");\n        this.selectedItemIndex = 0;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9zY2VuZXMvb3B0aW9ucy1zY2VuZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFvRjtBQUM1QztBQUNnQztBQUNqQjtBQUdoRCxNQUFNSSxxQkFBcUJDLE9BQU9DLEtBQUs7SUFTMUNDLGFBQWM7UUFDVixLQUFLLENBQUM7YUFSRkMsWUFBdUMsRUFBRTthQUN6Q0MsZUFBMEMsRUFBRTthQUM1Q0Msb0JBQW9CO2FBQ3BCQyxnQkFBZ0I7YUFDaEJDLGFBQWE7SUFLckI7SUFFQUMsU0FBUztRQUNMLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUMsWUFBWSxJQUFJLENBQUNDLFFBQVEsRUFBRSxJQUFJO1FBQ2hELElBQUksQ0FBQ0MsZUFBZSxHQUFHZixnRkFBbUJBLENBQUNnQixZQUFZO1FBRXZELElBQUksQ0FBQ0MsR0FBRyxDQUFDQyxTQUFTLENBQUMsR0FBRyxHQUFHLElBQUksSUFBSSxVQUM1QkMsU0FBUyxDQUFDLEdBQ1ZDLFFBQVEsQ0FBQztRQUVkLElBQUksQ0FBQ0MsZ0JBQWdCO1FBQ3JCLElBQUksQ0FBQ0MsV0FBVztRQUNoQixJQUFJLENBQUNDLGtCQUFrQjtRQUN2QixJQUFJLENBQUNDLFVBQVU7UUFFZixJQUFJLENBQUNDLGNBQWMsQ0FBQztRQUNwQjFCLGdEQUFRQSxDQUFDMkIsSUFBSSxDQUFDLHVCQUF1QixJQUFJO0lBQzdDO0lBRVFMLG1CQUFtQjtRQUN2QixJQUFJLENBQUNKLEdBQUcsQ0FBQ1UsS0FBSyxDQUFDLEdBQUcsR0FBRyxjQUNoQlIsU0FBUyxDQUFDLEdBQ1ZTLFFBQVEsQ0FBQztJQUNsQjtJQUVRTixjQUFjO1FBQ2xCLElBQUksQ0FBQ0wsR0FBRyxDQUFDWSxJQUFJLENBQ1QsSUFBSSxDQUFDQyxPQUFPLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxHQUFHLEdBQzFCLEtBQ0EsV0FDQTtZQUNJQyxZQUFZO1lBQ1pDLFVBQVU7WUFDVkMsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLGlCQUFpQjtRQUNyQixHQUNGbEIsU0FBUyxDQUFDO0lBQ2hCO0lBRVFtQixjQUFjQyxNQUFjLEVBQVU7UUFDMUMsT0FBTyxJQUFJQyxNQUFNLENBQUNDLEtBQUtDLEtBQUssQ0FBQ0gsU0FBUyxPQUFPLElBQUlDLE1BQU0sQ0FBQyxLQUFLQyxLQUFLQyxLQUFLLENBQUNILFNBQVM7SUFDckY7SUFFUWhCLHFCQUFxQjtRQUN6QixNQUFNb0IsVUFBVSxJQUFJLENBQUNiLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLEdBQUc7UUFDMUMsSUFBSVksSUFBSTtRQUVSLGVBQWU7UUFDZixNQUFNQyxZQUFZLElBQUksQ0FBQzVCLEdBQUcsQ0FBQ1ksSUFBSSxDQUMzQmMsU0FDQUMsR0FDQSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUNOLGFBQWEsQ0FBQyxJQUFJLENBQUN2QixlQUFlLENBQUMrQixXQUFXLEVBQUUsQ0FBQyxDQUFDLEVBQ2xFO1lBQUViLFlBQVk7WUFBU0MsVUFBVTtZQUFRQyxPQUFPO1FBQVUsR0FDNURoQixTQUFTLENBQUM7UUFDWixJQUFJLENBQUNaLFlBQVksQ0FBQ3dDLElBQUksQ0FBQ0Y7UUFDdkJELEtBQUs7UUFFTCxhQUFhO1FBQ2IsTUFBTUksVUFBVSxJQUFJLENBQUMvQixHQUFHLENBQUNZLElBQUksQ0FDekJjLFNBQ0FDLEdBQ0EsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDTixhQUFhLENBQUMsSUFBSSxDQUFDdkIsZUFBZSxDQUFDa0MsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUM5RDtZQUFFaEIsWUFBWTtZQUFTQyxVQUFVO1lBQVFDLE9BQU87UUFBVSxHQUM1RGhCLFNBQVMsQ0FBQztRQUNaLElBQUksQ0FBQ1osWUFBWSxDQUFDd0MsSUFBSSxDQUFDQztRQUN2QkosS0FBSztRQUVMLFdBQVc7UUFDWCxNQUFNTSxVQUFVLElBQUksQ0FBQ2pDLEdBQUcsQ0FBQ1ksSUFBSSxDQUN6QmMsU0FDQUMsR0FDQSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUM3QixlQUFlLENBQUNvQyxPQUFPLEdBQUcsT0FBTyxNQUFNLENBQUMsRUFDMUQ7WUFBRWxCLFlBQVk7WUFBU0MsVUFBVTtZQUFRQyxPQUFPO1FBQVUsR0FDNURoQixTQUFTLENBQUM7UUFDWixJQUFJLENBQUNaLFlBQVksQ0FBQ3dDLElBQUksQ0FBQ0c7UUFDdkJOLEtBQUs7UUFFTCxjQUFjO1FBQ2QsTUFBTVEsYUFBYSxJQUFJLENBQUNuQyxHQUFHLENBQUNZLElBQUksQ0FDNUJjLFNBQ0FDLEdBQ0EsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDN0IsZUFBZSxDQUFDc0MsVUFBVSxDQUFDQyxXQUFXLEdBQUcsQ0FBQyxFQUMxRDtZQUFFckIsWUFBWTtZQUFTQyxVQUFVO1lBQVFDLE9BQU87UUFBVSxHQUM1RGhCLFNBQVMsQ0FBQztRQUNaLElBQUksQ0FBQ1osWUFBWSxDQUFDd0MsSUFBSSxDQUFDSztRQUN2QlIsS0FBSztRQUVMLE1BQU1XLGNBQWMsSUFBSSxDQUFDdEMsR0FBRyxDQUFDWSxJQUFJLENBQzdCYyxTQUNBQyxHQUNBLHFCQUNBO1lBQUVYLFlBQVk7WUFBU0MsVUFBVTtZQUFRQyxPQUFPO1FBQVUsR0FDNURoQixTQUFTLENBQUMsS0FBS3FDLGNBQWM7UUFDL0IsSUFBSSxDQUFDbEQsU0FBUyxDQUFDeUMsSUFBSSxDQUFDUTtRQUVwQkEsWUFBWUUsRUFBRSxDQUFDLGVBQWU7WUFDMUIsSUFBSSxDQUFDakQsaUJBQWlCLEdBQUcsSUFBSSxDQUFDRCxZQUFZLENBQUNtRCxNQUFNO1lBQ2pELElBQUksQ0FBQ2pDLGNBQWMsQ0FBQyxJQUFJLENBQUNqQixpQkFBaUI7UUFDOUM7UUFFQStDLFlBQVlFLEVBQUUsQ0FBQyxjQUFjO1lBQ3pCRixZQUFZSSxRQUFRLENBQUM7UUFDekI7UUFFQUosWUFBWUUsRUFBRSxDQUFDLGVBQWUsSUFBTSxJQUFJLENBQUNHLGVBQWU7UUFFeERoQixLQUFLO1FBRUwsY0FBYztRQUNkLE1BQU1pQixhQUFhLElBQUksQ0FBQzVDLEdBQUcsQ0FBQ1ksSUFBSSxDQUM1QmMsU0FDQUMsR0FDQSxnQkFDQTtZQUFFWCxZQUFZO1lBQVNDLFVBQVU7WUFBUUMsT0FBTztRQUFVLEdBQzVEaEIsU0FBUyxDQUFDLEtBQUtxQyxjQUFjO1FBQy9CLElBQUksQ0FBQ2xELFNBQVMsQ0FBQ3lDLElBQUksQ0FBQ2M7UUFFcEJBLFdBQVdKLEVBQUUsQ0FBQyxlQUFlO1lBQ3pCLElBQUksQ0FBQ2pELGlCQUFpQixHQUFHLElBQUksQ0FBQ0QsWUFBWSxDQUFDbUQsTUFBTTtZQUNqRCxJQUFJLENBQUNqQyxjQUFjLENBQUMsSUFBSSxDQUFDakIsaUJBQWlCO1FBQzlDO1FBRUFxRCxXQUFXSixFQUFFLENBQUMsY0FBYztZQUN4QkksV0FBV0YsUUFBUSxDQUFDO1FBQ3hCO1FBRUFFLFdBQVdKLEVBQUUsQ0FBQyxlQUFlLElBQU0sSUFBSSxDQUFDSyxZQUFZO0lBQ3hEO0lBRVFGLGtCQUFrQjtRQUN0QixJQUFJLENBQUM3QyxlQUFlLEdBQUdmLGdGQUFtQkEsQ0FBQytELGdCQUFnQjtRQUMzRCxJQUFJLENBQUN4RCxZQUFZLENBQUMsRUFBRSxDQUFDeUQsT0FBTyxDQUFDLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQzFCLGFBQWEsQ0FBQyxJQUFJLENBQUN2QixlQUFlLENBQUMrQixXQUFXLEVBQUUsQ0FBQyxDQUFDO1FBQy9GLElBQUksQ0FBQ3ZDLFlBQVksQ0FBQyxFQUFFLENBQUN5RCxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDMUIsYUFBYSxDQUFDLElBQUksQ0FBQ3ZCLGVBQWUsQ0FBQ2tDLFNBQVMsRUFBRSxDQUFDLENBQUM7UUFDM0YsSUFBSSxDQUFDMUMsWUFBWSxDQUFDLEVBQUUsQ0FBQ3lELE9BQU8sQ0FBQyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUNqRCxlQUFlLENBQUNvQyxPQUFPLEdBQUcsT0FBTyxNQUFNLENBQUM7UUFDdkYsSUFBSSxDQUFDNUMsWUFBWSxDQUFDLEVBQUUsQ0FBQ3lELE9BQU8sQ0FBQyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUNqRCxlQUFlLENBQUNzQyxVQUFVLENBQUNDLFdBQVcsR0FBRyxDQUFDO1FBQ3ZGLElBQUksQ0FBQ1csYUFBYTtJQUN0QjtJQUdRekMsYUFBYTtRQUNqQixJQUFJLENBQUMwQyxTQUFTLEdBQUcsSUFBSXBFLDRGQUFrQkEsQ0FBQyxJQUFJO0lBQ2hEO0lBRUFxRSxPQUFPQyxJQUFZLEVBQUU7UUFDakIsSUFBSSxDQUFDLElBQUksQ0FBQ0YsU0FBUyxFQUFFO1FBQ3JCLElBQUksQ0FBQ0EsU0FBUyxDQUFDQyxNQUFNO1FBRXJCLElBQUlDLE9BQU8sSUFBSSxDQUFDM0QsYUFBYSxHQUFHLElBQUksQ0FBQ0MsVUFBVSxFQUFFO1FBRWpELHlCQUF5QjtRQUN6QixJQUFJLElBQUksQ0FBQ3dELFNBQVMsQ0FBQ0csVUFBVSxFQUFFO1lBQzNCLElBQUksQ0FBQ0Msa0JBQWtCLENBQUM7WUFDeEIsSUFBSSxDQUFDN0QsYUFBYSxHQUFHMkQ7UUFDekIsT0FDSyxJQUFJLElBQUksQ0FBQ0YsU0FBUyxDQUFDSyxRQUFRLEVBQUU7WUFDOUIsSUFBSSxDQUFDRCxrQkFBa0IsQ0FBQyxDQUFDO1lBQ3pCLElBQUksQ0FBQzdELGFBQWEsR0FBRzJEO1FBQ3pCLE9BRUssSUFBSSxJQUFJLENBQUNGLFNBQVMsQ0FBQ00sV0FBVyxJQUFJLElBQUksQ0FBQ2hFLGlCQUFpQixHQUFHLElBQUksQ0FBQ0QsWUFBWSxDQUFDbUQsTUFBTSxFQUFFO1lBQ3RGLElBQUksQ0FBQ2UsYUFBYSxDQUFDO1lBQ25CLElBQUksQ0FBQ2hFLGFBQWEsR0FBRzJEO1FBQ3pCLE9BQ0ssSUFBSSxJQUFJLENBQUNGLFNBQVMsQ0FBQ1EsVUFBVSxJQUFJLElBQUksQ0FBQ2xFLGlCQUFpQixHQUFHLElBQUksQ0FBQ0QsWUFBWSxDQUFDbUQsTUFBTSxFQUFFO1lBQ3JGLElBQUksQ0FBQ2UsYUFBYSxDQUFDLENBQUM7WUFDcEIsSUFBSSxDQUFDaEUsYUFBYSxHQUFHMkQ7UUFDekIsT0FFSyxJQUFJLElBQUksQ0FBQ0YsU0FBUyxDQUFDUyxtQkFBbUIsRUFBRTtZQUN6QyxNQUFNQyxhQUFhLElBQUksQ0FBQ3JFLFlBQVksQ0FBQ21ELE1BQU07WUFDM0MsTUFBTW1CLFlBQVksSUFBSSxDQUFDdEUsWUFBWSxDQUFDbUQsTUFBTSxHQUFHO1lBRTdDLElBQUksSUFBSSxDQUFDbEQsaUJBQWlCLEtBQUtvRSxZQUFZO2dCQUN2QyxJQUFJLENBQUNoQixlQUFlO1lBQ3hCLE9BQU8sSUFBSSxJQUFJLENBQUNwRCxpQkFBaUIsS0FBS3FFLFdBQVc7Z0JBQzdDLElBQUksQ0FBQ2YsWUFBWTtZQUNyQjtRQUNKO1FBRUEsSUFBSSxDQUFDZ0IscUJBQXFCO0lBQzlCO0lBRVFMLGNBQWNNLFNBQWlCLEVBQUU7UUFDckMsT0FBUSxJQUFJLENBQUN2RSxpQkFBaUI7WUFDMUIsS0FBSztnQkFDRCxJQUFJLENBQUNPLGVBQWUsQ0FBQytCLFdBQVcsR0FBRzNDLE9BQU9zQyxJQUFJLENBQUN1QyxLQUFLLENBQ2hELElBQUksQ0FBQ2pFLGVBQWUsQ0FBQytCLFdBQVcsR0FBR2lDLFlBQVksS0FBSyxHQUFHO2dCQUUzRCxJQUFJLENBQUN4RSxZQUFZLENBQUMsRUFBRSxDQUFDeUQsT0FBTyxDQUFDLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQzFCLGFBQWEsQ0FBQyxJQUFJLENBQUN2QixlQUFlLENBQUMrQixXQUFXLEVBQUUsQ0FBQyxDQUFDO2dCQUMvRjtZQUVKLEtBQUs7Z0JBQ0QsSUFBSSxDQUFDL0IsZUFBZSxDQUFDa0MsU0FBUyxHQUFHOUMsT0FBT3NDLElBQUksQ0FBQ3VDLEtBQUssQ0FDOUMsSUFBSSxDQUFDakUsZUFBZSxDQUFDa0MsU0FBUyxHQUFHOEIsWUFBWSxLQUFLLEdBQUc7Z0JBRXpELElBQUksQ0FBQ3hFLFlBQVksQ0FBQyxFQUFFLENBQUN5RCxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDMUIsYUFBYSxDQUFDLElBQUksQ0FBQ3ZCLGVBQWUsQ0FBQ2tDLFNBQVMsRUFBRSxDQUFDLENBQUM7Z0JBQzNGO1lBRUosS0FBSztnQkFDRCxJQUFJLENBQUNsQyxlQUFlLENBQUNvQyxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUNwQyxlQUFlLENBQUNvQyxPQUFPO2dCQUM1RCxJQUFJLENBQUM1QyxZQUFZLENBQUMsRUFBRSxDQUFDeUQsT0FBTyxDQUFDLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQ2pELGVBQWUsQ0FBQ29DLE9BQU8sR0FBRyxPQUFPLE1BQU0sQ0FBQztnQkFDdkY7WUFFSixLQUFLO2dCQUNELE1BQU04QixRQUEwQztvQkFBQztvQkFBUTtvQkFBUztpQkFBVTtnQkFDNUUsTUFBTUMsZUFBZUQsTUFBTUUsT0FBTyxDQUFDLElBQUksQ0FBQ3BFLGVBQWUsQ0FBQ3NDLFVBQVU7Z0JBQ2xFLE1BQU0rQixXQUFXLENBQUNGLGVBQWVILFlBQVlFLE1BQU12QixNQUFNLElBQUl1QixNQUFNdkIsTUFBTTtnQkFDekUsSUFBSSxDQUFDM0MsZUFBZSxDQUFDc0MsVUFBVSxHQUFHNEIsS0FBSyxDQUFDRyxTQUFTO2dCQUNqRCxJQUFJLENBQUM3RSxZQUFZLENBQUMsRUFBRSxDQUFDeUQsT0FBTyxDQUFDLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQ2pELGVBQWUsQ0FBQ3NDLFVBQVUsQ0FBQ0MsV0FBVyxHQUFHLENBQUM7Z0JBQ3ZGO1FBQ1I7UUFFQSxJQUFJLENBQUNXLGFBQWE7SUFDdEI7SUFFUWEsd0JBQXdCO1FBQzVCLElBQUksSUFBSSxDQUFDWixTQUFTLENBQUNtQixxQkFBcUIsRUFBRTtZQUN0QyxJQUFJLENBQUN2QixZQUFZO1FBQ3JCO0lBQ0o7SUFFUUEsZUFBZTtRQUNuQixJQUFJLENBQUNHLGFBQWE7UUFDbEIsSUFBSSxDQUFDcUIsS0FBSyxDQUFDQyxLQUFLLENBQUM7SUFDckI7SUFFUWpCLG1CQUFtQlMsU0FBaUIsRUFBRTtRQUMxQyxNQUFNUyxZQUFZLElBQUksQ0FBQ2pGLFlBQVksQ0FBQ21ELE1BQU0sR0FBRyxHQUFHLHFCQUFxQjtRQUNyRSxJQUFJLENBQUNsRCxpQkFBaUIsR0FBRyxDQUFDLElBQUksQ0FBQ0EsaUJBQWlCLEdBQUd1RSxZQUFZUyxTQUFRLElBQUtBO1FBQzVFLElBQUksQ0FBQy9ELGNBQWMsQ0FBQyxJQUFJLENBQUNqQixpQkFBaUI7SUFDOUM7SUFFUWlCLGVBQWVnRSxLQUFhLEVBQUU7UUFDbEMsK0JBQStCO1FBQy9CLElBQUksQ0FBQ2xGLFlBQVksQ0FBQ21GLE9BQU8sQ0FBQyxDQUFDQyxNQUFNQztZQUM3QkQsS0FBS2hDLFFBQVEsQ0FBQ2lDLE1BQU1ILFFBQVEsU0FBUztRQUN6QztRQUVBLHlDQUF5QztRQUN6QyxJQUFJLENBQUNuRixTQUFTLENBQUNvRixPQUFPLENBQUMsQ0FBQ0MsTUFBTUM7WUFDMUIsTUFBTUMsWUFBWSxJQUFJLENBQUN0RixZQUFZLENBQUNtRCxNQUFNLEdBQUdrQztZQUM3Q0QsS0FBS2hDLFFBQVEsQ0FBQzhCLFVBQVVJLFlBQVksU0FBUztRQUNqRDtJQUNKO0lBR1E1QixnQkFBZ0I7UUFDcEJqRSxnRkFBbUJBLENBQUM4RixZQUFZLENBQUMsSUFBSSxDQUFDL0UsZUFBZTtRQUNyRGhCLGdEQUFRQSxDQUFDMkIsSUFBSSxDQUFDekIsK0RBQWFBLENBQUM4RixnQkFBZ0IsRUFBRSxJQUFJLENBQUNoRixlQUFlO0lBQ3RFO0lBRUFELFdBQVc7UUFDUCxJQUFJLENBQUNvRCxTQUFTLENBQUM4QixPQUFPO1FBQ3RCLElBQUksQ0FBQ3pGLFlBQVksQ0FBQ21GLE9BQU8sQ0FBQ0MsQ0FBQUEsT0FBUUEsS0FBS00sT0FBTztRQUM5QyxJQUFJLENBQUMzRixTQUFTLENBQUNvRixPQUFPLENBQUNDLENBQUFBLE9BQVFBLEtBQUtNLE9BQU87UUFDM0MsSUFBSSxDQUFDMUYsWUFBWSxHQUFHLEVBQUU7UUFDdEIsSUFBSSxDQUFDRCxTQUFTLEdBQUcsRUFBRTtRQUNuQixJQUFJLENBQUM0RixLQUFLLENBQUNDLEdBQUcsQ0FBQztRQUNmLElBQUksQ0FBQzNGLGlCQUFpQixHQUFHO0lBQzdCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvc2NlbmVzL29wdGlvbnMtc2NlbmUudHM/MWM3MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNZW51SW5wdXRDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9pbnB1dC9odW1hbi9tZW51LWlucHV0LWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gXCIuLi9ldmVudC1idXNcIjtcclxuaW1wb3J0IHsgTG9jYWxTdG9yYWdlTWFuYWdlciB9IGZyb20gXCIuLi9tYW5hZ2Vycy9sb2NhbC1zdG9yYWdlLW1hbmFnZXJcIjtcclxuaW1wb3J0IHsgQ1VTVE9NX0VWRU5UUyB9IGZyb20gXCIuLi90eXBlcy9jdXN0b20tZXZlbnRzXCI7XHJcbmltcG9ydCB7IEdhbWVTZXR0aW5ncyB9IGZyb20gXCIuLi90eXBlcy9pbnRlcmZhY2VzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgT3B0aW9uc1NjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICAgIHByaXZhdGUgbWVudUlucHV0ITogTWVudUlucHV0Q29tcG9uZW50O1xyXG4gICAgcHJpdmF0ZSBtZW51SXRlbXM6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0W10gPSBbXTtcclxuICAgIHByaXZhdGUgc2V0dGluZ0l0ZW1zOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dFtdID0gW107XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkSXRlbUluZGV4ID0gMDtcclxuICAgIHByaXZhdGUgbGFzdElucHV0VGltZSA9IDA7XHJcbiAgICBwcml2YXRlIGlucHV0RGVsYXkgPSAyMDA7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRTZXR0aW5ncyE6IEdhbWVTZXR0aW5ncztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignT3B0aW9uc1NjZW5lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRzLm9uY2UoJ3NodXRkb3duJywgdGhpcy5zaHV0ZG93biwgdGhpcyk7IFxyXG4gICAgICAgIHRoaXMuY3VycmVudFNldHRpbmdzID0gTG9jYWxTdG9yYWdlTWFuYWdlci5sb2FkU2V0dGluZ3MoKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgNTAsIDUwLCAweDAwMDAwMClcclxuICAgICAgICAgICAgLnNldE9yaWdpbigwKVxyXG4gICAgICAgICAgICAuc2V0RGVwdGgoMTAwMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jcmVhdGVCYWNrZ3JvdW5kKCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVUaXRsZSgpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlU2V0dGluZ3NNZW51KCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cElucHV0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0TWVudUl0ZW0oMCk7XHJcbiAgICAgICAgRXZlbnRCdXMuZW1pdCgnY3VycmVudC1zY2VuZS1yZWFkeScsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQmFja2dyb3VuZCgpIHtcclxuICAgICAgICB0aGlzLmFkZC5pbWFnZSgwLCAwLCAnYmFja2dyb3VuZCcpXHJcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMClcclxuICAgICAgICAgICAgLnNldFNjYWxlKDEuMjUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlVGl0bGUoKSB7XHJcbiAgICAgICAgdGhpcy5hZGQudGV4dChcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4ud2lkdGggLyAyLCBcclxuICAgICAgICAgICAgMTAwLCBcclxuICAgICAgICAgICAgJ09QVElPTlMnLCBcclxuICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsIFxyXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICc0OHB4JywgXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICkuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRWb2x1bWVCYXJzKHZvbHVtZTogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ+KWoCcucmVwZWF0KE1hdGguZmxvb3Iodm9sdW1lICogMTApKSArICfilqEnLnJlcGVhdCgxMCAtIE1hdGguZmxvb3Iodm9sdW1lICogMTApKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVNldHRpbmdzTWVudSgpIHtcclxuICAgICAgICBjb25zdCBjZW50ZXJYID0gdGhpcy5jYW1lcmFzLm1haW4ud2lkdGggLyAyO1xyXG4gICAgICAgIGxldCB5ID0gMjAwO1xyXG5cclxuICAgICAgICAvLyBNdXNpYyBWb2x1bWVcclxuICAgICAgICBjb25zdCBtdXNpY0l0ZW0gPSB0aGlzLmFkZC50ZXh0KFxyXG4gICAgICAgICAgICBjZW50ZXJYLFxyXG4gICAgICAgICAgICB5LFxyXG4gICAgICAgICAgICBgTXVzaWM6IFske3RoaXMuZ2V0Vm9sdW1lQmFycyh0aGlzLmN1cnJlbnRTZXR0aW5ncy5tdXNpY1ZvbHVtZSl9XWAsXHJcbiAgICAgICAgICAgIHsgZm9udEZhbWlseTogJ0FyaWFsJywgZm9udFNpemU6ICczMnB4JywgY29sb3I6ICcjZmZmZmZmJyB9XHJcbiAgICAgICAgKS5zZXRPcmlnaW4oMC41KTtcclxuICAgICAgICB0aGlzLnNldHRpbmdJdGVtcy5wdXNoKG11c2ljSXRlbSk7XHJcbiAgICAgICAgeSArPSA2MDtcclxuXHJcbiAgICAgICAgLy8gU0ZYIFZvbHVtZVxyXG4gICAgICAgIGNvbnN0IHNmeEl0ZW0gPSB0aGlzLmFkZC50ZXh0KFxyXG4gICAgICAgICAgICBjZW50ZXJYLFxyXG4gICAgICAgICAgICB5LFxyXG4gICAgICAgICAgICBgU0ZYOiBbJHt0aGlzLmdldFZvbHVtZUJhcnModGhpcy5jdXJyZW50U2V0dGluZ3Muc2Z4Vm9sdW1lKX1dYCxcclxuICAgICAgICAgICAgeyBmb250RmFtaWx5OiAnQXJpYWwnLCBmb250U2l6ZTogJzMycHgnLCBjb2xvcjogJyNmZmZmZmYnIH1cclxuICAgICAgICApLnNldE9yaWdpbigwLjUpO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ0l0ZW1zLnB1c2goc2Z4SXRlbSk7XHJcbiAgICAgICAgeSArPSA2MDtcclxuXHJcbiAgICAgICAgLy8gU2hvdyBGUFNcclxuICAgICAgICBjb25zdCBmcHNJdGVtID0gdGhpcy5hZGQudGV4dChcclxuICAgICAgICAgICAgY2VudGVyWCxcclxuICAgICAgICAgICAgeSxcclxuICAgICAgICAgICAgYFNob3cgRlBTOiAke3RoaXMuY3VycmVudFNldHRpbmdzLnNob3dGUFMgPyAnT04nIDogJ09GRid9YCxcclxuICAgICAgICAgICAgeyBmb250RmFtaWx5OiAnQXJpYWwnLCBmb250U2l6ZTogJzMycHgnLCBjb2xvcjogJyNmZmZmZmYnIH1cclxuICAgICAgICApLnNldE9yaWdpbigwLjUpO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ0l0ZW1zLnB1c2goZnBzSXRlbSk7XHJcbiAgICAgICAgeSArPSA2MDtcclxuXHJcbiAgICAgICAgLy8gV2VhcG9uIFR5cGVcclxuICAgICAgICBjb25zdCB3ZWFwb25JdGVtID0gdGhpcy5hZGQudGV4dChcclxuICAgICAgICAgICAgY2VudGVyWCxcclxuICAgICAgICAgICAgeSxcclxuICAgICAgICAgICAgYFdlYXBvbjogJHt0aGlzLmN1cnJlbnRTZXR0aW5ncy53ZWFwb25UeXBlLnRvVXBwZXJDYXNlKCl9YCxcclxuICAgICAgICAgICAgeyBmb250RmFtaWx5OiAnQXJpYWwnLCBmb250U2l6ZTogJzMycHgnLCBjb2xvcjogJyNmZmZmZmYnIH1cclxuICAgICAgICApLnNldE9yaWdpbigwLjUpO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ0l0ZW1zLnB1c2god2VhcG9uSXRlbSk7XHJcbiAgICAgICAgeSArPSAxMDA7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc2V0QnV0dG9uID0gdGhpcy5hZGQudGV4dChcclxuICAgICAgICAgICAgY2VudGVyWCxcclxuICAgICAgICAgICAgeSxcclxuICAgICAgICAgICAgJ1JFU0VUIFRPIERFRkFVTFRTJyxcclxuICAgICAgICAgICAgeyBmb250RmFtaWx5OiAnQXJpYWwnLCBmb250U2l6ZTogJzMycHgnLCBjb2xvcjogJyNmZmZmZmYnIH1cclxuICAgICAgICApLnNldE9yaWdpbigwLjUpLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICAgICAgdGhpcy5tZW51SXRlbXMucHVzaChyZXNldEJ1dHRvbik7XHJcblxyXG4gICAgICAgIHJlc2V0QnV0dG9uLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1JbmRleCA9IHRoaXMuc2V0dGluZ0l0ZW1zLmxlbmd0aDtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNZW51SXRlbSh0aGlzLnNlbGVjdGVkSXRlbUluZGV4KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmVzZXRCdXR0b24ub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc2V0QnV0dG9uLnNldENvbG9yKCcjZmZmZmZmJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJlc2V0QnV0dG9uLm9uKCdwb2ludGVyZG93bicsICgpID0+IHRoaXMucmVzZXRUb0RlZmF1bHRzKCkpO1xyXG5cclxuICAgICAgICB5ICs9IDYwO1xyXG5cclxuICAgICAgICAvLyBCYWNrIGJ1dHRvblxyXG4gICAgICAgIGNvbnN0IGJhY2tCdXR0b24gPSB0aGlzLmFkZC50ZXh0KFxyXG4gICAgICAgICAgICBjZW50ZXJYLFxyXG4gICAgICAgICAgICB5LFxyXG4gICAgICAgICAgICAnQkFDSyBUTyBNRU5VJyxcclxuICAgICAgICAgICAgeyBmb250RmFtaWx5OiAnQXJpYWwnLCBmb250U2l6ZTogJzMycHgnLCBjb2xvcjogJyNmZmZmZmYnIH1cclxuICAgICAgICApLnNldE9yaWdpbigwLjUpLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICAgICAgdGhpcy5tZW51SXRlbXMucHVzaChiYWNrQnV0dG9uKTtcclxuXHJcbiAgICAgICAgYmFja0J1dHRvbi5vbigncG9pbnRlcm92ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggPSB0aGlzLnNldHRpbmdJdGVtcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TWVudUl0ZW0odGhpcy5zZWxlY3RlZEl0ZW1JbmRleCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJhY2tCdXR0b24ub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGJhY2tCdXR0b24uc2V0Q29sb3IoJyNmZmZmZmYnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYmFja0J1dHRvbi5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB0aGlzLnJldHVyblRvTWVudSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc2V0VG9EZWZhdWx0cygpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZXR0aW5ncyA9IExvY2FsU3RvcmFnZU1hbmFnZXIuZ2V0RGVmYXVsdENvbmZpZygpO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ0l0ZW1zWzBdLnNldFRleHQoYE11c2ljOiBbJHt0aGlzLmdldFZvbHVtZUJhcnModGhpcy5jdXJyZW50U2V0dGluZ3MubXVzaWNWb2x1bWUpfV1gKTtcclxuICAgICAgICB0aGlzLnNldHRpbmdJdGVtc1sxXS5zZXRUZXh0KGBTRlg6IFske3RoaXMuZ2V0Vm9sdW1lQmFycyh0aGlzLmN1cnJlbnRTZXR0aW5ncy5zZnhWb2x1bWUpfV1gKTtcclxuICAgICAgICB0aGlzLnNldHRpbmdJdGVtc1syXS5zZXRUZXh0KGBTaG93IEZQUzogJHt0aGlzLmN1cnJlbnRTZXR0aW5ncy5zaG93RlBTID8gJ09OJyA6ICdPRkYnfWApO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ0l0ZW1zWzNdLnNldFRleHQoYFdlYXBvbjogJHt0aGlzLmN1cnJlbnRTZXR0aW5ncy53ZWFwb25UeXBlLnRvVXBwZXJDYXNlKCl9YCk7XHJcbiAgICAgICAgdGhpcy5hcHBseVNldHRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgc2V0dXBJbnB1dCgpIHtcclxuICAgICAgICB0aGlzLm1lbnVJbnB1dCA9IG5ldyBNZW51SW5wdXRDb21wb25lbnQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHRpbWU6IG51bWJlcikge1xyXG4gICAgICAgIGlmICghdGhpcy5tZW51SW5wdXQpIHJldHVybjtcclxuICAgICAgICB0aGlzLm1lbnVJbnB1dC51cGRhdGUoKTtcclxuXHJcbiAgICAgICAgaWYgKHRpbWUgLSB0aGlzLmxhc3RJbnB1dFRpbWUgPCB0aGlzLmlucHV0RGVsYXkpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8g0JLQtdGA0YLQuNC60LDQu9GM0L3QsNGPINC90LDQstC40LPQsNGG0LjRj1xyXG4gICAgICAgIGlmICh0aGlzLm1lbnVJbnB1dC5kb3duSXNEb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU2VsZWN0ZWRJdGVtKDEpO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RJbnB1dFRpbWUgPSB0aW1lO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5tZW51SW5wdXQudXBJc0Rvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VTZWxlY3RlZEl0ZW0oLTEpO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RJbnB1dFRpbWUgPSB0aW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDQk9C+0YDQuNC30L7QvdGC0LDQu9GM0L3QvtC1INC40LfQvNC10L3QtdC90LjQtSDQvdCw0YHRgtGA0L7QtdC6XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5tZW51SW5wdXQucmlnaHRJc0Rvd24gJiYgdGhpcy5zZWxlY3RlZEl0ZW1JbmRleCA8IHRoaXMuc2V0dGluZ0l0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmFkanVzdFNldHRpbmcoMSk7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdElucHV0VGltZSA9IHRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMubWVudUlucHV0LmxlZnRJc0Rvd24gJiYgdGhpcy5zZWxlY3RlZEl0ZW1JbmRleCA8IHRoaXMuc2V0dGluZ0l0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmFkanVzdFNldHRpbmcoLTEpO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RJbnB1dFRpbWUgPSB0aW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDQntGB0L3QvtCy0L3QvtC1INC00LXQudGB0YLQstC40LUgKEVudGVyKVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMubWVudUlucHV0LnByaW1hcnlBY3Rpb25Jc0Rvd24pIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzZXRJbmRleCA9IHRoaXMuc2V0dGluZ0l0ZW1zLmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYmFja0luZGV4ID0gdGhpcy5zZXR0aW5nSXRlbXMubGVuZ3RoICsgMTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbUluZGV4ID09PSByZXNldEluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0VG9EZWZhdWx0cygpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggPT09IGJhY2tJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXR1cm5Ub01lbnUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5oYW5kbGVTZWNvbmRhcnlBY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkanVzdFNldHRpbmcoZGlyZWN0aW9uOiBudW1iZXIpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXgpIHtcclxuICAgICAgICAgICAgY2FzZSAwOiAvLyBNdXNpYyBWb2x1bWVcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNldHRpbmdzLm11c2ljVm9sdW1lID0gUGhhc2VyLk1hdGguQ2xhbXAoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2V0dGluZ3MubXVzaWNWb2x1bWUgKyBkaXJlY3Rpb24gKiAwLjEsIDAsIDFcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdJdGVtc1swXS5zZXRUZXh0KGBNdXNpYzogWyR7dGhpcy5nZXRWb2x1bWVCYXJzKHRoaXMuY3VycmVudFNldHRpbmdzLm11c2ljVm9sdW1lKX1dYCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgMTogLy8gU0ZYIFZvbHVtZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2V0dGluZ3Muc2Z4Vm9sdW1lID0gUGhhc2VyLk1hdGguQ2xhbXAoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2V0dGluZ3Muc2Z4Vm9sdW1lICsgZGlyZWN0aW9uICogMC4xLCAwLCAxXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nSXRlbXNbMV0uc2V0VGV4dChgU0ZYOiBbJHt0aGlzLmdldFZvbHVtZUJhcnModGhpcy5jdXJyZW50U2V0dGluZ3Muc2Z4Vm9sdW1lKX1dYCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgMjogLy8gU2hvdyBGUFNcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNldHRpbmdzLnNob3dGUFMgPSAhdGhpcy5jdXJyZW50U2V0dGluZ3Muc2hvd0ZQUztcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ0l0ZW1zWzJdLnNldFRleHQoYFNob3cgRlBTOiAke3RoaXMuY3VycmVudFNldHRpbmdzLnNob3dGUFMgPyAnT04nIDogJ09GRid9YCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgMzogLy8gV2VhcG9uIFR5cGVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVzOiAoJ3dpZGUnIHwgJ2xhc2VyJyB8ICdyb2NrZXRzJylbXSA9IFsnd2lkZScsICdsYXNlcicsICdyb2NrZXRzJ107XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0eXBlcy5pbmRleE9mKHRoaXMuY3VycmVudFNldHRpbmdzLndlYXBvblR5cGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3SW5kZXggPSAoY3VycmVudEluZGV4ICsgZGlyZWN0aW9uICsgdHlwZXMubGVuZ3RoKSAlIHR5cGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNldHRpbmdzLndlYXBvblR5cGUgPSB0eXBlc1tuZXdJbmRleF07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdJdGVtc1szXS5zZXRUZXh0KGBXZWFwb246ICR7dGhpcy5jdXJyZW50U2V0dGluZ3Mud2VhcG9uVHlwZS50b1VwcGVyQ2FzZSgpfWApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFwcGx5U2V0dGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZVNlY29uZGFyeUFjdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5tZW51SW5wdXQuc2Vjb25kYXJ5QWN0aW9uSXNEb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVG9NZW51KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmV0dXJuVG9NZW51KCkge1xyXG4gICAgICAgIHRoaXMuYXBwbHlTZXR0aW5ncygpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ01haW5NZW51Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGFuZ2VTZWxlY3RlZEl0ZW0oZGlyZWN0aW9uOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBpdGVtQ291bnQgPSB0aGlzLnNldHRpbmdJdGVtcy5sZW5ndGggKyAyOyAvLyDQndCw0YHRgtGA0L7QudC60LggKyDQutC90L7Qv9C60LhcclxuICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbUluZGV4ID0gKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggKyBkaXJlY3Rpb24gKyBpdGVtQ291bnQpICUgaXRlbUNvdW50O1xyXG4gICAgICAgIHRoaXMuc2VsZWN0TWVudUl0ZW0odGhpcy5zZWxlY3RlZEl0ZW1JbmRleCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZWxlY3RNZW51SXRlbShpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgLy8g0J/QvtC00YHQstC10YLQutCwINGN0LvQtdC80LXQvdGC0L7QsiDQvdCw0YHRgtGA0L7QtdC6XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nSXRlbXMuZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpdGVtLnNldENvbG9yKGkgPT09IGluZGV4ID8gJyNmZjAnIDogJyNmZmZmZmYnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8g0J/QvtC00YHQstC10YLQutCwINGN0LvQtdC80LXQvdGC0L7QsiDQvNC10L3RjiAoQkFDSywgUkVTRVQpXHJcbiAgICAgICAgdGhpcy5tZW51SXRlbXMuZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZW51SW5kZXggPSB0aGlzLnNldHRpbmdJdGVtcy5sZW5ndGggKyBpO1xyXG4gICAgICAgICAgICBpdGVtLnNldENvbG9yKGluZGV4ID09PSBtZW51SW5kZXggPyAnI2ZmMCcgOiAnI2ZmZmZmZicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGFwcGx5U2V0dGluZ3MoKSB7XHJcbiAgICAgICAgTG9jYWxTdG9yYWdlTWFuYWdlci5zYXZlU2V0dGluZ3ModGhpcy5jdXJyZW50U2V0dGluZ3MpO1xyXG4gICAgICAgIEV2ZW50QnVzLmVtaXQoQ1VTVE9NX0VWRU5UUy5TRVRUSU5HU19DSEFOR0VELCB0aGlzLmN1cnJlbnRTZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2h1dGRvd24oKSB7XHJcbiAgICAgICAgdGhpcy5tZW51SW5wdXQuY2xlYW51cCgpO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ0l0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLmRlc3Ryb3koKSk7XHJcbiAgICAgICAgdGhpcy5tZW51SXRlbXMuZm9yRWFjaChpdGVtID0+IGl0ZW0uZGVzdHJveSgpKTtcclxuICAgICAgICB0aGlzLnNldHRpbmdJdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMubWVudUl0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5pbnB1dC5vZmYoJ3BvaW50ZXJtb3ZlJyk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1JbmRleCA9IDA7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiTWVudUlucHV0Q29tcG9uZW50IiwiRXZlbnRCdXMiLCJMb2NhbFN0b3JhZ2VNYW5hZ2VyIiwiQ1VTVE9NX0VWRU5UUyIsIk9wdGlvbnNTY2VuZSIsIlBoYXNlciIsIlNjZW5lIiwiY29uc3RydWN0b3IiLCJtZW51SXRlbXMiLCJzZXR0aW5nSXRlbXMiLCJzZWxlY3RlZEl0ZW1JbmRleCIsImxhc3RJbnB1dFRpbWUiLCJpbnB1dERlbGF5IiwiY3JlYXRlIiwiZXZlbnRzIiwib25jZSIsInNodXRkb3duIiwiY3VycmVudFNldHRpbmdzIiwibG9hZFNldHRpbmdzIiwiYWRkIiwicmVjdGFuZ2xlIiwic2V0T3JpZ2luIiwic2V0RGVwdGgiLCJjcmVhdGVCYWNrZ3JvdW5kIiwiY3JlYXRlVGl0bGUiLCJjcmVhdGVTZXR0aW5nc01lbnUiLCJzZXR1cElucHV0Iiwic2VsZWN0TWVudUl0ZW0iLCJlbWl0IiwiaW1hZ2UiLCJzZXRTY2FsZSIsInRleHQiLCJjYW1lcmFzIiwibWFpbiIsIndpZHRoIiwiZm9udEZhbWlseSIsImZvbnRTaXplIiwiY29sb3IiLCJzdHJva2UiLCJzdHJva2VUaGlja25lc3MiLCJnZXRWb2x1bWVCYXJzIiwidm9sdW1lIiwicmVwZWF0IiwiTWF0aCIsImZsb29yIiwiY2VudGVyWCIsInkiLCJtdXNpY0l0ZW0iLCJtdXNpY1ZvbHVtZSIsInB1c2giLCJzZnhJdGVtIiwic2Z4Vm9sdW1lIiwiZnBzSXRlbSIsInNob3dGUFMiLCJ3ZWFwb25JdGVtIiwid2VhcG9uVHlwZSIsInRvVXBwZXJDYXNlIiwicmVzZXRCdXR0b24iLCJzZXRJbnRlcmFjdGl2ZSIsIm9uIiwibGVuZ3RoIiwic2V0Q29sb3IiLCJyZXNldFRvRGVmYXVsdHMiLCJiYWNrQnV0dG9uIiwicmV0dXJuVG9NZW51IiwiZ2V0RGVmYXVsdENvbmZpZyIsInNldFRleHQiLCJhcHBseVNldHRpbmdzIiwibWVudUlucHV0IiwidXBkYXRlIiwidGltZSIsImRvd25Jc0Rvd24iLCJjaGFuZ2VTZWxlY3RlZEl0ZW0iLCJ1cElzRG93biIsInJpZ2h0SXNEb3duIiwiYWRqdXN0U2V0dGluZyIsImxlZnRJc0Rvd24iLCJwcmltYXJ5QWN0aW9uSXNEb3duIiwicmVzZXRJbmRleCIsImJhY2tJbmRleCIsImhhbmRsZVNlY29uZGFyeUFjdGlvbiIsImRpcmVjdGlvbiIsIkNsYW1wIiwidHlwZXMiLCJjdXJyZW50SW5kZXgiLCJpbmRleE9mIiwibmV3SW5kZXgiLCJzZWNvbmRhcnlBY3Rpb25Jc0Rvd24iLCJzY2VuZSIsInN0YXJ0IiwiaXRlbUNvdW50IiwiaW5kZXgiLCJmb3JFYWNoIiwiaXRlbSIsImkiLCJtZW51SW5kZXgiLCJzYXZlU2V0dGluZ3MiLCJTRVRUSU5HU19DSEFOR0VEIiwiY2xlYW51cCIsImRlc3Ryb3kiLCJpbnB1dCIsIm9mZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/scenes/options-scene.ts\n");

/***/ }),

/***/ "./src/game/scenes/pause-menu-scene.ts":
/*!*********************************************!*\
  !*** ./src/game/scenes/pause-menu-scene.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PauseMenu: () => (/* binding */ PauseMenu)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_input_human_menu_input_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/input/human/menu-input-component */ \"./src/game/components/input/human/menu-input-component.ts\");\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../event-bus */ \"./src/game/event-bus.ts\");\n\n\n\nclass PauseMenu extends (phaser__WEBPACK_IMPORTED_MODULE_0___default().Scene) {\n    constructor(){\n        super(\"PauseMenu\");\n        this.menuItems = [];\n        this.selectedItemIndex = 0;\n        this.lastInputTime = 0;\n        this.inputDelay = 200;\n    }\n    init(data) {\n        this.selectedItemIndex = 0;\n        this.lastInputTime = 0;\n        this.registry.set(\"onResume\", data.onResume);\n        this.registry.set(\"onRestart\", data.onRestart);\n        this.registry.set(\"onMainMenu\", data.onMainMenu);\n    }\n    create() {\n        this.createBackground();\n        this.createTitle();\n        this.createMenuItems();\n        this.setupInput();\n        this.selectMenuItem(0);\n        _event_bus__WEBPACK_IMPORTED_MODULE_2__.EventBus.emit(\"current-scene-ready\", this);\n    }\n    createBackground() {\n        this.add.rectangle(0, 0, this.cameras.main.width, this.cameras.main.height, 0x000000, 0.7).setOrigin(0);\n    }\n    createTitle() {\n        this.add.text(this.cameras.main.width / 2, 200, \"PAUSE\", {\n            fontFamily: \"Arial\",\n            fontSize: \"48px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 4\n        }).setOrigin(0.5);\n    }\n    createMenuItems() {\n        this.menuItems = [\n            this.createButton(\"CONTINUE\", 300, ()=>this.registry.get(\"onResume\")()),\n            this.createButton(\"RESTART\", 400, ()=>this.registry.get(\"onRestart\")()),\n            this.createButton(\"MAIN MENU\", 500, ()=>this.registry.get(\"onMainMenu\")())\n        ];\n    }\n    createButton(text, y, action) {\n        const button = this.add.text(this.cameras.main.width / 2, y, text, {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5).setInteractive();\n        button.on(\"pointerover\", ()=>{\n            this.selectedItemIndex = this.menuItems.indexOf(button);\n            this.selectMenuItem(this.selectedItemIndex);\n        });\n        button.on(\"pointerout\", ()=>{\n            button.setColor(\"#ffffff\");\n        });\n        button.on(\"pointerdown\", action);\n        return button;\n    }\n    setupInput() {\n        this.menuInput = new _components_input_human_menu_input_component__WEBPACK_IMPORTED_MODULE_1__.MenuInputComponent(this);\n        // Добавляем поддержку мыши\n        this.input.on(\"pointermove\", (pointer)=>{\n            if (!pointer.isDown) return;\n            const item = this.menuItems.find((item)=>item.getBounds().contains(pointer.x, pointer.y));\n            if (item) {\n                this.selectedItemIndex = this.menuItems.indexOf(item);\n                this.selectMenuItem(this.selectedItemIndex);\n                item.emit(\"pointerdown\");\n            }\n        });\n    }\n    update(time) {\n        if (!this.menuInput) return;\n        this.menuInput.update();\n        this.handleNavigation(time);\n        this.handleSelection();\n        this.handleSecondaryAction();\n        this.handleTrirdAction();\n    }\n    handleNavigation(time) {\n        if (time - this.lastInputTime < this.inputDelay) return;\n        if (this.menuInput.downIsDown) {\n            this.changeSelectedItem(1);\n            this.lastInputTime = time;\n        } else if (this.menuInput.upIsDown) {\n            this.changeSelectedItem(-1);\n            this.lastInputTime = time;\n        }\n    }\n    changeSelectedItem(direction) {\n        this.selectedItemIndex = (this.selectedItemIndex + direction + this.menuItems.length) % this.menuItems.length;\n        this.selectMenuItem(this.selectedItemIndex);\n    }\n    handleSelection() {\n        if (this.menuInput.primaryActionIsDown) {\n            this.menuItems[this.selectedItemIndex].emit(\"pointerdown\");\n        }\n    }\n    handleSecondaryAction() {\n        if (this.menuInput.secondaryActionIsDown) {\n            this.registry.get(\"onResume\")();\n        }\n    }\n    handleTrirdAction() {\n        if (this.menuInput.thirdActionIsDown) {\n            this.registry.get(\"onRestart\")();\n        }\n    }\n    selectMenuItem(index) {\n        this.menuItems.forEach((item, i)=>{\n            item.setColor(i === index ? \"#ff0\" : \"#fff\");\n            item.setScale(i === index ? 1.1 : 1.0);\n        });\n    }\n    shutdown() {\n        this.menuInput.cleanup();\n        this.registry.remove(\"onResume\");\n        this.registry.remove(\"onRestart\");\n        this.registry.remove(\"onMainMenu\");\n        this.input.off(\"pointermove\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7UUFDckIsSUFBSSxDQUFDL0QsUUFBUSxDQUFDK0QsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQzVCLEtBQUssQ0FBQzZCLEdBQUcsQ0FBQztJQUNuQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL3NjZW5lcy9wYXVzZS1tZW51LXNjZW5lLnRzPzUwODciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgeyBNZW51SW5wdXRDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL2lucHV0L2h1bWFuL21lbnUtaW5wdXQtY29tcG9uZW50JztcclxuaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICcuLi9ldmVudC1idXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhdXNlTWVudSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgICBwcml2YXRlIG1lbnVJbnB1dCE6IE1lbnVJbnB1dENvbXBvbmVudDtcclxuICAgIHByaXZhdGUgbWVudUl0ZW1zOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dFtdID0gW107XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkSXRlbUluZGV4ID0gMDtcclxuICAgIHByaXZhdGUgbGFzdElucHV0VGltZSA9IDA7XHJcbiAgICBwcml2YXRlIGlucHV0RGVsYXkgPSAyMDA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ1BhdXNlTWVudScpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoZGF0YTogeyBcclxuICAgICAgICBvblJlc3VtZTogKCkgPT4gdm9pZCxcclxuICAgICAgICBvblJlc3RhcnQ6ICgpID0+IHZvaWQsXHJcbiAgICAgICAgb25NYWluTWVudTogKCkgPT4gdm9pZFxyXG4gICAgfSkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdElucHV0VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ29uUmVzdW1lJywgZGF0YS5vblJlc3VtZSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ29uUmVzdGFydCcsIGRhdGEub25SZXN0YXJ0KTtcclxuICAgICAgICB0aGlzLnJlZ2lzdHJ5LnNldCgnb25NYWluTWVudScsIGRhdGEub25NYWluTWVudSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlQmFja2dyb3VuZCgpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlVGl0bGUoKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZU1lbnVJdGVtcygpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBJbnB1dCgpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0TWVudUl0ZW0oMCk7XHJcblxyXG4gICAgICAgIEV2ZW50QnVzLmVtaXQoJ2N1cnJlbnQtc2NlbmUtcmVhZHknLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUJhY2tncm91bmQoKSB7XHJcbiAgICAgICAgdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIFxyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi53aWR0aCwgXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLmhlaWdodCwgXHJcbiAgICAgICAgICAgIDB4MDAwMDAwLCAwLjdcclxuICAgICAgICApLnNldE9yaWdpbigwKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVRpdGxlKCkge1xyXG4gICAgICAgIHRoaXMuYWRkLnRleHQoXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLndpZHRoIC8gMiwgXHJcbiAgICAgICAgICAgIDIwMCwgXHJcbiAgICAgICAgICAgICdQQVVTRScsIFxyXG4gICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJywgXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzQ4cHgnLCBcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZicsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVRoaWNrbmVzczogNFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKS5zZXRPcmlnaW4oMC41KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZU1lbnVJdGVtcygpIHtcclxuICAgICAgICB0aGlzLm1lbnVJdGVtcyA9IFtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVCdXR0b24oJ0NPTlRJTlVFJywgMzAwLCAoKSA9PiB0aGlzLnJlZ2lzdHJ5LmdldCgnb25SZXN1bWUnKSgpKSxcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVCdXR0b24oJ1JFU1RBUlQnLCA0MDAsICgpID0+IHRoaXMucmVnaXN0cnkuZ2V0KCdvblJlc3RhcnQnKSgpKSxcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVCdXR0b24oJ01BSU4gTUVOVScsIDUwMCwgKCkgPT4gdGhpcy5yZWdpc3RyeS5nZXQoJ29uTWFpbk1lbnUnKSgpKVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVCdXR0b24odGV4dDogc3RyaW5nLCB5OiBudW1iZXIsIGFjdGlvbjogKCkgPT4gdm9pZCk6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0IHtcclxuICAgICAgICBjb25zdCBidXR0b24gPSB0aGlzLmFkZC50ZXh0KFxyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi53aWR0aCAvIDIsIFxyXG4gICAgICAgICAgICB5LCBcclxuICAgICAgICAgICAgdGV4dCwgXHJcbiAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLCBcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMzJweCcsIFxyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlVGhpY2tuZXNzOiAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApLnNldE9yaWdpbigwLjUpLnNldEludGVyYWN0aXZlKCk7XHJcblxyXG4gICAgICAgIGJ1dHRvbi5vbigncG9pbnRlcm92ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggPSB0aGlzLm1lbnVJdGVtcy5pbmRleE9mKGJ1dHRvbik7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TWVudUl0ZW0odGhpcy5zZWxlY3RlZEl0ZW1JbmRleCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJ1dHRvbi5vbigncG9pbnRlcm91dCcsICgpID0+IHtcclxuICAgICAgICAgICAgYnV0dG9uLnNldENvbG9yKCcjZmZmZmZmJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJ1dHRvbi5vbigncG9pbnRlcmRvd24nLCBhY3Rpb24pO1xyXG5cclxuICAgICAgICByZXR1cm4gYnV0dG9uO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0dXBJbnB1dCgpIHtcclxuICAgICAgICB0aGlzLm1lbnVJbnB1dCA9IG5ldyBNZW51SW5wdXRDb21wb25lbnQodGhpcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC/0L7QtNC00LXRgNC20LrRgyDQvNGL0YjQuFxyXG4gICAgICAgIHRoaXMuaW5wdXQub24oJ3BvaW50ZXJtb3ZlJywgKHBvaW50ZXI6IFBoYXNlci5JbnB1dC5Qb2ludGVyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghcG9pbnRlci5pc0Rvd24pIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLm1lbnVJdGVtcy5maW5kKGl0ZW0gPT4gXHJcbiAgICAgICAgICAgICAgICBpdGVtLmdldEJvdW5kcygpLmNvbnRhaW5zKHBvaW50ZXIueCwgcG9pbnRlci55KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggPSB0aGlzLm1lbnVJdGVtcy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNZW51SXRlbSh0aGlzLnNlbGVjdGVkSXRlbUluZGV4KTtcclxuICAgICAgICAgICAgICAgIGl0ZW0uZW1pdCgncG9pbnRlcmRvd24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSh0aW1lOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMubWVudUlucHV0KSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMubWVudUlucHV0LnVwZGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLmhhbmRsZU5hdmlnYXRpb24odGltZSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVTZWxlY3Rpb24oKTtcclxuICAgICAgICB0aGlzLmhhbmRsZVNlY29uZGFyeUFjdGlvbigpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlVHJpcmRBY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZU5hdmlnYXRpb24odGltZTogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRpbWUgLSB0aGlzLmxhc3RJbnB1dFRpbWUgPCB0aGlzLmlucHV0RGVsYXkpIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWVudUlucHV0LmRvd25Jc0Rvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VTZWxlY3RlZEl0ZW0oMSk7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdElucHV0VGltZSA9IHRpbWU7XHJcbiAgICAgICAgfSBcclxuICAgICAgICBlbHNlIGlmICh0aGlzLm1lbnVJbnB1dC51cElzRG93bikge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVNlbGVjdGVkSXRlbSgtMSk7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdElucHV0VGltZSA9IHRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hhbmdlU2VsZWN0ZWRJdGVtKGRpcmVjdGlvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1JbmRleCA9ICh0aGlzLnNlbGVjdGVkSXRlbUluZGV4ICsgZGlyZWN0aW9uICsgdGhpcy5tZW51SXRlbXMubGVuZ3RoKSAlIHRoaXMubWVudUl0ZW1zLmxlbmd0aDtcclxuICAgICAgICB0aGlzLnNlbGVjdE1lbnVJdGVtKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlU2VsZWN0aW9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1lbnVJbnB1dC5wcmltYXJ5QWN0aW9uSXNEb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVudUl0ZW1zW3RoaXMuc2VsZWN0ZWRJdGVtSW5kZXhdLmVtaXQoJ3BvaW50ZXJkb3duJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlU2Vjb25kYXJ5QWN0aW9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1lbnVJbnB1dC5zZWNvbmRhcnlBY3Rpb25Jc0Rvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS5nZXQoJ29uUmVzdW1lJykoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVUcmlyZEFjdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5tZW51SW5wdXQudGhpcmRBY3Rpb25Jc0Rvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS5nZXQoJ29uUmVzdGFydCcpKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VsZWN0TWVudUl0ZW0oaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMubWVudUl0ZW1zLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcclxuICAgICAgICAgICAgaXRlbS5zZXRDb2xvcihpID09PSBpbmRleCA/ICcjZmYwJyA6ICcjZmZmJyk7XHJcbiAgICAgICAgICAgIGl0ZW0uc2V0U2NhbGUoaSA9PT0gaW5kZXggPyAxLjEgOiAxLjApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNodXRkb3duKCkge1xyXG4gICAgICAgIHRoaXMubWVudUlucHV0LmNsZWFudXAoKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdHJ5LnJlbW92ZSgnb25SZXN1bWUnKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdHJ5LnJlbW92ZSgnb25SZXN0YXJ0Jyk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RyeS5yZW1vdmUoJ29uTWFpbk1lbnUnKTtcclxuICAgICAgICB0aGlzLmlucHV0Lm9mZigncG9pbnRlcm1vdmUnKTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJQaGFzZXIiLCJNZW51SW5wdXRDb21wb25lbnQiLCJFdmVudEJ1cyIsIlBhdXNlTWVudSIsIlNjZW5lIiwiY29uc3RydWN0b3IiLCJtZW51SXRlbXMiLCJzZWxlY3RlZEl0ZW1JbmRleCIsImxhc3RJbnB1dFRpbWUiLCJpbnB1dERlbGF5IiwiaW5pdCIsImRhdGEiLCJyZWdpc3RyeSIsInNldCIsIm9uUmVzdW1lIiwib25SZXN0YXJ0Iiwib25NYWluTWVudSIsImNyZWF0ZSIsImNyZWF0ZUJhY2tncm91bmQiLCJjcmVhdGVUaXRsZSIsImNyZWF0ZU1lbnVJdGVtcyIsInNldHVwSW5wdXQiLCJzZWxlY3RNZW51SXRlbSIsImVtaXQiLCJhZGQiLCJyZWN0YW5nbGUiLCJjYW1lcmFzIiwibWFpbiIsIndpZHRoIiwiaGVpZ2h0Iiwic2V0T3JpZ2luIiwidGV4dCIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImNvbG9yIiwic3Ryb2tlIiwic3Ryb2tlVGhpY2tuZXNzIiwiY3JlYXRlQnV0dG9uIiwiZ2V0IiwieSIsImFjdGlvbiIsImJ1dHRvbiIsInNldEludGVyYWN0aXZlIiwib24iLCJpbmRleE9mIiwic2V0Q29sb3IiLCJtZW51SW5wdXQiLCJpbnB1dCIsInBvaW50ZXIiLCJpc0Rvd24iLCJpdGVtIiwiZmluZCIsImdldEJvdW5kcyIsImNvbnRhaW5zIiwieCIsInVwZGF0ZSIsInRpbWUiLCJoYW5kbGVOYXZpZ2F0aW9uIiwiaGFuZGxlU2VsZWN0aW9uIiwiaGFuZGxlU2Vjb25kYXJ5QWN0aW9uIiwiaGFuZGxlVHJpcmRBY3Rpb24iLCJkb3duSXNEb3duIiwiY2hhbmdlU2VsZWN0ZWRJdGVtIiwidXBJc0Rvd24iLCJkaXJlY3Rpb24iLCJsZW5ndGgiLCJwcmltYXJ5QWN0aW9uSXNEb3duIiwic2Vjb25kYXJ5QWN0aW9uSXNEb3duIiwidGhpcmRBY3Rpb25Jc0Rvd24iLCJpbmRleCIsImZvckVhY2giLCJpIiwic2V0U2NhbGUiLCJzaHV0ZG93biIsImNsZWFudXAiLCJyZW1vdmUiLCJvZmYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/scenes/pause-menu-scene.ts\n");

/***/ }),

/***/ "./src/game/scenes/preload-scene.ts":
/*!******************************************!*\
  !*** ./src/game/scenes/preload-scene.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreloadScene: () => (/* binding */ PreloadScene)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../event-bus */ \"./src/game/event-bus.ts\");\n\n\nclass PreloadScene extends (phaser__WEBPACK_IMPORTED_MODULE_0___default().Scene) {\n    constructor(){\n        super({\n            key: \"PreloadScene\"\n        });\n        this.updateLoadingBar = (value)=>{\n            const { width, height } = this.cameras.main;\n            const loadingBarWidth = width * 0.6;\n            this.progressBar.clear().fillStyle(0xffffff, 1).fillRect((width - loadingBarWidth) / 2, height / 2 - 20, loadingBarWidth * value, 20);\n        };\n        this.onLoadComplete = ()=>{\n            this.loadingBar.destroy();\n            this.progressBar.destroy();\n        };\n    }\n    preload() {\n        this.createLoadingVisuals();\n        // Загрузка основного пакета ассетов\n        this.load.pack(\"asset_pack\", \"assets/data/assets.json\");\n        // Обработчики прогресса\n        this.load.on(\"progress\", this.updateLoadingBar, this);\n        this.load.on(\"complete\", this.onLoadComplete, this);\n    }\n    create() {\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(\"current-scene-ready\", this);\n        this.createAnimations();\n        this.scene.start(\"MainMenu\");\n    }\n    createLoadingVisuals() {\n        const { width, height } = this.cameras.main;\n        const loadingBarWidth = width * 0.6;\n        this.loadingBar = this.add.graphics().fillStyle(0x444444, 1).fillRect((width - loadingBarWidth) / 2, height / 2 - 20, loadingBarWidth, 20);\n        this.progressBar = this.add.graphics();\n    }\n    createAnimations() {\n        const data = this.cache.json.get(\"animations_json\");\n        data.forEach((animation)=>{\n            const frames = animation.frames ? this.anims.generateFrameNumbers(animation.assetKey, {\n                frames: animation.frames\n            }) : this.anims.generateFrameNumbers(animation.assetKey);\n            this.anims.create({\n                key: animation.key,\n                frames,\n                frameRate: animation.frameRate,\n                repeat: animation.repeat,\n                yoyo: animation.repeat === -1 // Для бесконечных анимаций\n            });\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9zY2VuZXMvcHJlbG9hZC1zY2VuZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTRCO0FBQ1k7QUFVakMsTUFBTUUscUJBQXFCRixxREFBWTtJQUkxQ0ksYUFBYztRQUNWLEtBQUssQ0FBQztZQUFFQyxLQUFLO1FBQWU7YUFxQ3hCQyxtQkFBbUIsQ0FBQ0M7WUFDeEIsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxJQUFJO1lBQzNDLE1BQU1DLGtCQUFrQkosUUFBUTtZQUVoQyxJQUFJLENBQUNLLFdBQVcsQ0FDWEMsS0FBSyxHQUNMQyxTQUFTLENBQUMsVUFBVSxHQUNwQkMsUUFBUSxDQUNMLENBQUNSLFFBQVFJLGVBQWMsSUFBSyxHQUM1QkgsU0FBUyxJQUFJLElBQ2JHLGtCQUFrQkwsT0FDbEI7UUFFWjthQUVRVSxpQkFBaUI7WUFDckIsSUFBSSxDQUFDQyxVQUFVLENBQUNDLE9BQU87WUFDdkIsSUFBSSxDQUFDTixXQUFXLENBQUNNLE9BQU87UUFDNUI7SUF0REE7SUFFQUMsVUFBZ0I7UUFDWixJQUFJLENBQUNDLG9CQUFvQjtRQUV6QixvQ0FBb0M7UUFDcEMsSUFBSSxDQUFDQyxJQUFJLENBQUNDLElBQUksQ0FBQyxjQUFjO1FBRTdCLHdCQUF3QjtRQUN4QixJQUFJLENBQUNELElBQUksQ0FBQ0UsRUFBRSxDQUFDLFlBQVksSUFBSSxDQUFDbEIsZ0JBQWdCLEVBQUUsSUFBSTtRQUNwRCxJQUFJLENBQUNnQixJQUFJLENBQUNFLEVBQUUsQ0FBQyxZQUFZLElBQUksQ0FBQ1AsY0FBYyxFQUFFLElBQUk7SUFFdEQ7SUFFQVEsU0FBZTtRQUNYeEIsZ0RBQVFBLENBQUN5QixJQUFJLENBQUMsdUJBQXVCLElBQUk7UUFDekMsSUFBSSxDQUFDQyxnQkFBZ0I7UUFDckIsSUFBSSxDQUFDQyxLQUFLLENBQUNDLEtBQUssQ0FBQztJQUNyQjtJQUVRUix1QkFBNkI7UUFDakMsTUFBTSxFQUFFYixLQUFLLEVBQUVDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxJQUFJO1FBQzNDLE1BQU1DLGtCQUFrQkosUUFBUTtRQUVoQyxJQUFJLENBQUNVLFVBQVUsR0FBRyxJQUFJLENBQUNZLEdBQUcsQ0FBQ0MsUUFBUSxHQUM5QmhCLFNBQVMsQ0FBQyxVQUFVLEdBQ3BCQyxRQUFRLENBQ0wsQ0FBQ1IsUUFBUUksZUFBYyxJQUFLLEdBQzVCSCxTQUFTLElBQUksSUFDYkcsaUJBQ0E7UUFHUixJQUFJLENBQUNDLFdBQVcsR0FBRyxJQUFJLENBQUNpQixHQUFHLENBQUNDLFFBQVE7SUFDeEM7SUFzQlFKLG1CQUF5QjtRQUM3QixNQUFNSyxPQUFPLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxJQUFJLENBQUNDLEdBQUcsQ0FBQztRQUVqQ0gsS0FBS0ksT0FBTyxDQUFDLENBQUNDO1lBQ1YsTUFBTUMsU0FBU0QsVUFBVUMsTUFBTSxHQUN6QixJQUFJLENBQUNDLEtBQUssQ0FBQ0Msb0JBQW9CLENBQUNILFVBQVVJLFFBQVEsRUFBRTtnQkFBRUgsUUFBUUQsVUFBVUMsTUFBTTtZQUFDLEtBQy9FLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxvQkFBb0IsQ0FBQ0gsVUFBVUksUUFBUTtZQUV4RCxJQUFJLENBQUNGLEtBQUssQ0FBQ2QsTUFBTSxDQUFDO2dCQUNkcEIsS0FBS2dDLFVBQVVoQyxHQUFHO2dCQUNsQmlDO2dCQUNBSSxXQUFXTCxVQUFVSyxTQUFTO2dCQUM5QkMsUUFBUU4sVUFBVU0sTUFBTTtnQkFDeEJDLE1BQU1QLFVBQVVNLE1BQU0sS0FBSyxDQUFDLEVBQUUsMkJBQTJCO1lBQzdEO1FBQ0o7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL3NjZW5lcy9wcmVsb2FkLXNjZW5lLnRzPzM0YTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xuaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICcuLi9ldmVudC1idXMnO1xuXG5pbnRlcmZhY2UgQW5pbWF0aW9uRGF0YSB7XG4gICAga2V5OiBzdHJpbmc7XG4gICAgYXNzZXRLZXk6IHN0cmluZztcbiAgICBmcmFtZXM/OiBudW1iZXJbXTtcbiAgICBmcmFtZVJhdGU6IG51bWJlcjtcbiAgICByZXBlYXQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFByZWxvYWRTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XG4gICAgcHJpdmF0ZSBsb2FkaW5nQmFyITogUGhhc2VyLkdhbWVPYmplY3RzLkdyYXBoaWNzO1xuICAgIHByaXZhdGUgcHJvZ3Jlc3NCYXIhOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3M7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoeyBrZXk6ICdQcmVsb2FkU2NlbmUnIH0pO1xuICAgIH1cblxuICAgIHByZWxvYWQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY3JlYXRlTG9hZGluZ1Zpc3VhbHMoKTtcbiAgICAgICAgXG4gICAgICAgIC8vINCX0LDQs9GA0YPQt9C60LAg0L7RgdC90L7QstC90L7Qs9C+INC/0LDQutC10YLQsCDQsNGB0YHQtdGC0L7QslxuICAgICAgICB0aGlzLmxvYWQucGFjaygnYXNzZXRfcGFjaycsICdhc3NldHMvZGF0YS9hc3NldHMuanNvbicpO1xuICAgICAgICBcbiAgICAgICAgLy8g0J7QsdGA0LDQsdC+0YLRh9C40LrQuCDQv9GA0L7Qs9GA0LXRgdGB0LBcbiAgICAgICAgdGhpcy5sb2FkLm9uKCdwcm9ncmVzcycsIHRoaXMudXBkYXRlTG9hZGluZ0JhciwgdGhpcyk7XG4gICAgICAgIHRoaXMubG9hZC5vbignY29tcGxldGUnLCB0aGlzLm9uTG9hZENvbXBsZXRlLCB0aGlzKTtcblxuICAgIH1cblxuICAgIGNyZWF0ZSgpOiB2b2lkIHtcbiAgICAgICAgRXZlbnRCdXMuZW1pdCgnY3VycmVudC1zY2VuZS1yZWFkeScsIHRoaXMpO1xuICAgICAgICB0aGlzLmNyZWF0ZUFuaW1hdGlvbnMoKTtcbiAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnTWFpbk1lbnUnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUxvYWRpbmdWaXN1YWxzKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuY2FtZXJhcy5tYWluO1xuICAgICAgICBjb25zdCBsb2FkaW5nQmFyV2lkdGggPSB3aWR0aCAqIDAuNjtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubG9hZGluZ0JhciA9IHRoaXMuYWRkLmdyYXBoaWNzKClcbiAgICAgICAgICAgIC5maWxsU3R5bGUoMHg0NDQ0NDQsIDEpXG4gICAgICAgICAgICAuZmlsbFJlY3QoXG4gICAgICAgICAgICAgICAgKHdpZHRoIC0gbG9hZGluZ0JhcldpZHRoKSAvIDIsXG4gICAgICAgICAgICAgICAgaGVpZ2h0IC8gMiAtIDIwLFxuICAgICAgICAgICAgICAgIGxvYWRpbmdCYXJXaWR0aCxcbiAgICAgICAgICAgICAgICAyMFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICB0aGlzLnByb2dyZXNzQmFyID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUxvYWRpbmdCYXIgPSAodmFsdWU6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuY2FtZXJhcy5tYWluO1xuICAgICAgICBjb25zdCBsb2FkaW5nQmFyV2lkdGggPSB3aWR0aCAqIDAuNjtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXJcbiAgICAgICAgICAgIC5jbGVhcigpXG4gICAgICAgICAgICAuZmlsbFN0eWxlKDB4ZmZmZmZmLCAxKVxuICAgICAgICAgICAgLmZpbGxSZWN0KFxuICAgICAgICAgICAgICAgICh3aWR0aCAtIGxvYWRpbmdCYXJXaWR0aCkgLyAyLFxuICAgICAgICAgICAgICAgIGhlaWdodCAvIDIgLSAyMCxcbiAgICAgICAgICAgICAgICBsb2FkaW5nQmFyV2lkdGggKiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAyMFxuICAgICAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBvbkxvYWRDb21wbGV0ZSA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5sb2FkaW5nQmFyLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0Jhci5kZXN0cm95KCk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgY3JlYXRlQW5pbWF0aW9ucygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuY2FjaGUuanNvbi5nZXQoJ2FuaW1hdGlvbnNfanNvbicpIGFzIEFuaW1hdGlvbkRhdGFbXTtcbiAgICAgICAgXG4gICAgICAgIGRhdGEuZm9yRWFjaCgoYW5pbWF0aW9uOiBBbmltYXRpb25EYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmcmFtZXMgPSBhbmltYXRpb24uZnJhbWVzXG4gICAgICAgICAgICAgICAgPyB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKGFuaW1hdGlvbi5hc3NldEtleSwgeyBmcmFtZXM6IGFuaW1hdGlvbi5mcmFtZXMgfSlcbiAgICAgICAgICAgICAgICA6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoYW5pbWF0aW9uLmFzc2V0S2V5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIGtleTogYW5pbWF0aW9uLmtleSxcbiAgICAgICAgICAgICAgICBmcmFtZXMsXG4gICAgICAgICAgICAgICAgZnJhbWVSYXRlOiBhbmltYXRpb24uZnJhbWVSYXRlLFxuICAgICAgICAgICAgICAgIHJlcGVhdDogYW5pbWF0aW9uLnJlcGVhdCxcbiAgICAgICAgICAgICAgICB5b3lvOiBhbmltYXRpb24ucmVwZWF0ID09PSAtMSAvLyDQlNC70Y8g0LHQtdGB0LrQvtC90LXRh9C90YvRhSDQsNC90LjQvNCw0YbQuNC5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlBoYXNlciIsIkV2ZW50QnVzIiwiUHJlbG9hZFNjZW5lIiwiU2NlbmUiLCJjb25zdHJ1Y3RvciIsImtleSIsInVwZGF0ZUxvYWRpbmdCYXIiLCJ2YWx1ZSIsIndpZHRoIiwiaGVpZ2h0IiwiY2FtZXJhcyIsIm1haW4iLCJsb2FkaW5nQmFyV2lkdGgiLCJwcm9ncmVzc0JhciIsImNsZWFyIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJvbkxvYWRDb21wbGV0ZSIsImxvYWRpbmdCYXIiLCJkZXN0cm95IiwicHJlbG9hZCIsImNyZWF0ZUxvYWRpbmdWaXN1YWxzIiwibG9hZCIsInBhY2siLCJvbiIsImNyZWF0ZSIsImVtaXQiLCJjcmVhdGVBbmltYXRpb25zIiwic2NlbmUiLCJzdGFydCIsImFkZCIsImdyYXBoaWNzIiwiZGF0YSIsImNhY2hlIiwianNvbiIsImdldCIsImZvckVhY2giLCJhbmltYXRpb24iLCJmcmFtZXMiLCJhbmltcyIsImdlbmVyYXRlRnJhbWVOdW1iZXJzIiwiYXNzZXRLZXkiLCJmcmFtZVJhdGUiLCJyZXBlYXQiLCJ5b3lvIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/scenes/preload-scene.ts\n");

/***/ }),

/***/ "./src/game/scenes/records-scene.ts":
/*!******************************************!*\
  !*** ./src/game/scenes/records-scene.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RecordsScene: () => (/* binding */ RecordsScene)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_input_human_menu_input_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/input/human/menu-input-component */ \"./src/game/components/input/human/menu-input-component.ts\");\n/* harmony import */ var _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../managers/local-storage-manager */ \"./src/game/managers/local-storage-manager.ts\");\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../event-bus */ \"./src/game/event-bus.ts\");\n\n\n\n\nclass RecordsScene extends (phaser__WEBPACK_IMPORTED_MODULE_0___default().Scene) {\n    constructor(){\n        super(\"RecordsScene\");\n        this.recordsElements = [];\n        this.selectedButtonIndex = 0;\n        this.buttons = [];\n        this.lastInputTime = 0;\n        this.inputDelay = 200;\n    }\n    create() {\n        const records = _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_2__.LocalStorageManager.loadHighScores();\n        this.add.rectangle(0, 0, 50, 50, 0x000000).setOrigin(0).setDepth(1000);\n        this.createBackground();\n        this.createRecordsDisplay(records);\n        this.createButtons();\n        this.setupInput();\n        _event_bus__WEBPACK_IMPORTED_MODULE_3__.EventBus.emit(\"current-scene-ready\", this);\n    }\n    createBackground() {\n        this.add.image(0, 0, \"background\").setOrigin(0).setScale(1.25);\n    }\n    createRecordsDisplay(records) {\n        // Очищаем предыдущие элементы\n        this.clearRecordsElements();\n        // Заголовок таблицы\n        const title = this.add.text(this.cameras.main.width / 2, 30, \"HIGH SCORES\", {\n            fontFamily: \"Arial\",\n            fontSize: \"28px\",\n            color: \"#ffcc00\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5);\n        const rankHeader = this.add.text(20, 70, \"RANK\", {\n            fontFamily: \"Arial\",\n            fontSize: \"16px\",\n            color: \"#ffffff\"\n        });\n        const nameHeader = this.add.text(80, 70, \"NAME\", {\n            fontFamily: \"Arial\",\n            fontSize: \"16px\",\n            color: \"#ffffff\"\n        });\n        const scoreHeader = this.add.text(220, 70, \"SCORE\", {\n            fontFamily: \"Arial\",\n            fontSize: \"16px\",\n            color: \"#ffffff\"\n        });\n        const levelHeader = this.add.text(360, 70, \"LVL\", {\n            fontFamily: \"Arial\",\n            fontSize: \"16px\",\n            color: \"#ffffff\"\n        });\n        const dateHeader = this.add.text(400, 70, \"DATE\", {\n            fontFamily: \"Arial\",\n            fontSize: \"16px\",\n            color: \"#ffffff\"\n        });\n        this.recordsElements.push(title, rankHeader, nameHeader, scoreHeader, levelHeader, dateHeader);\n        records.forEach((record, index)=>{\n            const yPos = 100 + index * 30;\n            const rankText = this.add.text(20, yPos, `${index + 1}.`, {\n                fontFamily: \"Arial\",\n                fontSize: \"16px\",\n                color: \"#ffffff\"\n            });\n            const nameText = this.add.text(80, yPos, record.name, {\n                fontFamily: \"Arial\",\n                fontSize: \"16px\",\n                color: \"#ffff00\"\n            });\n            const scoreText = this.add.text(220, yPos, record.score.toString(), {\n                fontFamily: \"Arial\",\n                fontSize: \"16px\",\n                color: \"#ffffff\"\n            });\n            const levelText = this.add.text(360, yPos, typeof record.level === \"number\" ? record.level.toString() : \"All\", {\n                fontFamily: \"Arial\",\n                fontSize: \"16px\",\n                color: \"#aaaaaa\"\n            });\n            const date = new Date(record.date);\n            const dateText = this.add.text(400, yPos, `${date.getDate()}.${date.getMonth() + 1}.${date.getFullYear()}`, {\n                fontFamily: \"Arial\",\n                fontSize: \"16px\",\n                color: \"#aaaaaa\"\n            });\n            this.recordsElements.push(rankText, nameText, scoreText, levelText, dateText);\n        });\n    }\n    createButtons() {\n        this.buttons = [];\n        // Кнопка возврата\n        this.backButton = this.add.text(this.cameras.main.width / 2 - 150, 550, \"BACK\", {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5).setInteractive();\n        // Кнопка сброса рекордов\n        this.resetButton = this.add.text(this.cameras.main.width / 2 + 100, 550, \"RESET SCORES\", {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5).setInteractive();\n        this.buttons.push(this.backButton, this.resetButton);\n        // Обработчики для кнопки BACK\n        this.backButton.on(\"pointerover\", ()=>{\n            this.selectedButtonIndex = 0;\n            this.updateButtonSelection();\n        });\n        this.backButton.on(\"pointerout\", ()=>{\n            this.updateButtonSelection();\n        });\n        this.backButton.on(\"pointerdown\", ()=>{\n            this.scene.start(\"MainMenu\");\n        });\n        // Обработчики для кнопки RESET\n        this.resetButton.on(\"pointerover\", ()=>{\n            this.selectedButtonIndex = 1;\n            this.updateButtonSelection();\n        });\n        this.resetButton.on(\"pointerout\", ()=>{\n            this.updateButtonSelection();\n        });\n        this.resetButton.on(\"pointerdown\", ()=>{\n            this.resetHighScores();\n        });\n        this.updateButtonSelection();\n    }\n    resetHighScores() {\n        _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_2__.LocalStorageManager.saveHighScores(_managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_2__.LocalStorageManager.loadHighScores().map((_, i)=>({\n                name: `NoEntry`,\n                score: (10 - i) * 1000,\n                level: 10 - i >= 3 ? \"All\" : 10 - i,\n                date: new Date(Date.now() - i * 86400000).toISOString()\n            })));\n        this.createRecordsDisplay(_managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_2__.LocalStorageManager.loadHighScores());\n        this.showMessage(\"Scores reset to default\");\n    }\n    showMessage(text) {\n        const message = this.add.text(this.cameras.main.width / 2, 500, text, {\n            fontFamily: \"Arial\",\n            fontSize: \"24px\",\n            color: \"#00ff00\"\n        }).setOrigin(0.5);\n        this.time.delayedCall(2000, ()=>{\n            message.destroy();\n        });\n    }\n    updateButtonSelection() {\n        this.buttons.forEach((button, index)=>{\n            button.setColor(index === this.selectedButtonIndex ? \"#ff0\" : \"#fff\");\n            button.setScale(index === this.selectedButtonIndex ? 1.1 : 1.0);\n        });\n    }\n    setupInput() {\n        this.menuInput = new _components_input_human_menu_input_component__WEBPACK_IMPORTED_MODULE_1__.MenuInputComponent(this);\n        this.backButton.on(\"pointerover\", ()=>{\n            this.selectedButtonIndex = 0;\n            this.updateButtonSelection();\n        });\n        this.resetButton.on(\"pointerover\", ()=>{\n            this.selectedButtonIndex = 1;\n            this.updateButtonSelection();\n        });\n    }\n    clearRecordsElements() {\n        this.recordsElements.forEach((element)=>{\n            if (element?.destroy) element.destroy();\n        });\n        this.recordsElements = [];\n    }\n    update(time) {\n        if (!this.menuInput) return;\n        this.menuInput.update();\n        if (time - this.lastInputTime >= this.inputDelay) {\n            if (this.menuInput.leftIsDown) {\n                this.selectedButtonIndex = (this.selectedButtonIndex - 1 + this.buttons.length) % this.buttons.length;\n                this.updateButtonSelection();\n                this.lastInputTime = time;\n            } else if (this.menuInput.rightIsDown) {\n                this.selectedButtonIndex = (this.selectedButtonIndex + 1) % this.buttons.length;\n                this.updateButtonSelection();\n                this.lastInputTime = time;\n            }\n        }\n        if (this.menuInput.primaryActionIsDown) {\n            this.buttons[this.selectedButtonIndex].emit(\"pointerdown\");\n        }\n        if (this.menuInput.secondaryActionIsDown) {\n            // Возврат в главное меню\n            this.scene.start(\"MainMenu\");\n        }\n    }\n    shutdown() {\n        this.menuInput.cleanup();\n        this.clearRecordsElements();\n        this.input.keyboard?.off(\"keydown\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNLLFNBQVMsQ0FBQ00sbUJBQW1CLEVBQUU7WUFDcEMsSUFBSSxDQUFDL0UsT0FBTyxDQUFDLElBQUksQ0FBQ0QsbUJBQW1CLENBQUMsQ0FBQ2UsSUFBSSxDQUFDO1FBQ2hEO1FBRUEsSUFBSSxJQUFJLENBQUMyRCxTQUFTLENBQUNPLHFCQUFxQixFQUFFO1lBQ3RDLHlCQUF5QjtZQUN6QixJQUFJLENBQUN2QixLQUFLLENBQUNDLEtBQUssQ0FBQztRQUNyQjtJQUNKO0lBRUF1QixXQUFXO1FBQ1AsSUFBSSxDQUFDUixTQUFTLENBQUNTLE9BQU87UUFDdEIsSUFBSSxDQUFDakUsb0JBQW9CO1FBQ3pCLElBQUksQ0FBQ2tFLEtBQUssQ0FBQ0MsUUFBUSxFQUFFQyxJQUFJO0lBQzdCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmQtb2YtY291cnNlLy4vc3JjL2dhbWUvc2NlbmVzL3JlY29yZHMtc2NlbmUudHM/NDE1MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcbmltcG9ydCB7IE1lbnVJbnB1dENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvaW5wdXQvaHVtYW4vbWVudS1pbnB1dC1jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBMb2NhbFN0b3JhZ2VNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMvbG9jYWwtc3RvcmFnZS1tYW5hZ2VyJztcclxuaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICcuLi9ldmVudC1idXMnO1xyXG5pbXBvcnQgeyBIaWdoU2NvcmVSZWNvcmQgfSBmcm9tICcuLi90eXBlcy9pbnRlcmZhY2VzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBSZWNvcmRzU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgcHJpdmF0ZSBtZW51SW5wdXQhOiBNZW51SW5wdXRDb21wb25lbnQ7XHJcbiAgICBwcml2YXRlIGJhY2tCdXR0b24hOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcclxuICAgIHByaXZhdGUgcmVzZXRCdXR0b24hOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcclxuICAgIHByaXZhdGUgcmVjb3Jkc0VsZW1lbnRzOiBQaGFzZXIuR2FtZU9iamVjdHMuR2FtZU9iamVjdFtdID0gW107XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkQnV0dG9uSW5kZXg6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGJ1dHRvbnM6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0W10gPSBbXTtcclxuICAgIHByaXZhdGUgbGFzdElucHV0VGltZSA9IDA7XHJcbnByaXZhdGUgaW5wdXREZWxheSA9IDIwMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignUmVjb3Jkc1NjZW5lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHJlY29yZHMgPSBMb2NhbFN0b3JhZ2VNYW5hZ2VyLmxvYWRIaWdoU2NvcmVzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCA1MCwgNTAsIDB4MDAwMDAwKVxyXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDApXHJcbiAgICAgICAgICAgIC5zZXREZXB0aCgxMDAwKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZUJhY2tncm91bmQoKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVJlY29yZHNEaXNwbGF5KHJlY29yZHMpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlQnV0dG9ucygpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBJbnB1dCgpO1xyXG5cclxuICAgICAgICBFdmVudEJ1cy5lbWl0KCdjdXJyZW50LXNjZW5lLXJlYWR5JywgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVCYWNrZ3JvdW5kKCkge1xyXG4gICAgICAgIHRoaXMuYWRkLmltYWdlKDAsIDAsICdiYWNrZ3JvdW5kJylcclxuICAgICAgICAgICAgLnNldE9yaWdpbigwKVxyXG4gICAgICAgICAgICAuc2V0U2NhbGUoMS4yNSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVSZWNvcmRzRGlzcGxheShyZWNvcmRzOiBIaWdoU2NvcmVSZWNvcmRbXSkge1xyXG4gICAgICAgIC8vINCe0YfQuNGJ0LDQtdC8INC/0YDQtdC00YvQtNGD0YnQuNC1INGN0LvQtdC80LXQvdGC0YtcclxuICAgICAgICB0aGlzLmNsZWFyUmVjb3Jkc0VsZW1lbnRzKCk7XHJcblxyXG4gICAgICAgIC8vINCX0LDQs9C+0LvQvtCy0L7QuiDRgtCw0LHQu9C40YbRi1xyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5hZGQudGV4dCh0aGlzLmNhbWVyYXMubWFpbi53aWR0aCAvIDIsIDMwLCAnSElHSCBTQ09SRVMnLCB7XHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjhweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmY2MwMCcsXHJcbiAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLFxyXG4gICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDJcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmFua0hlYWRlciA9IHRoaXMuYWRkLnRleHQoMjAsIDcwLCAnUkFOSycsIHtcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgZm9udFNpemU6ICcxNnB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBuYW1lSGVhZGVyID0gdGhpcy5hZGQudGV4dCg4MCwgNzAsICdOQU1FJywge1xyXG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogJzE2cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNjb3JlSGVhZGVyID0gdGhpcy5hZGQudGV4dCgyMjAsIDcwLCAnU0NPUkUnLCB7XHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbGV2ZWxIZWFkZXIgPSB0aGlzLmFkZC50ZXh0KDM2MCwgNzAsICdMVkwnLCB7XHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0ZUhlYWRlciA9IHRoaXMuYWRkLnRleHQoNDAwLCA3MCwgJ0RBVEUnLCB7XHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWNvcmRzRWxlbWVudHMucHVzaCh0aXRsZSwgcmFua0hlYWRlciwgbmFtZUhlYWRlciwgc2NvcmVIZWFkZXIsIGxldmVsSGVhZGVyLCBkYXRlSGVhZGVyKTtcclxuXHJcbiAgICAgICAgcmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHlQb3MgPSAxMDAgKyBpbmRleCAqIDMwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmFua1RleHQgPSB0aGlzLmFkZC50ZXh0KDIwLCB5UG9zLCBgJHtpbmRleCArIDF9LmAsIHtcclxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzE2cHgnLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWVUZXh0ID0gdGhpcy5hZGQudGV4dCg4MCwgeVBvcywgcmVjb3JkLm5hbWUsIHtcclxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzE2cHgnLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmZjAwJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHNjb3JlVGV4dCA9IHRoaXMuYWRkLnRleHQoMjIwLCB5UG9zLCByZWNvcmQuc2NvcmUudG9TdHJpbmcoKSwge1xyXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbGV2ZWxUZXh0ID0gdGhpcy5hZGQudGV4dCgzNjAsIHlQb3MsIFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIHJlY29yZC5sZXZlbCA9PT0gJ251bWJlcicgPyByZWNvcmQubGV2ZWwudG9TdHJpbmcoKSA6ICdBbGwnLCBcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjYWFhYWFhJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHJlY29yZC5kYXRlKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVRleHQgPSB0aGlzLmFkZC50ZXh0KDQwMCwgeVBvcywgXHJcbiAgICAgICAgICAgICAgICBgJHtkYXRlLmdldERhdGUoKX0uJHtkYXRlLmdldE1vbnRoKCkrMX0uJHtkYXRlLmdldEZ1bGxZZWFyKCl9YCxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjYWFhYWFhJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWNvcmRzRWxlbWVudHMucHVzaChyYW5rVGV4dCwgbmFtZVRleHQsIHNjb3JlVGV4dCwgbGV2ZWxUZXh0LCBkYXRlVGV4dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVCdXR0b25zKCkge1xyXG4gICAgICAgIHRoaXMuYnV0dG9ucyA9IFtdO1xyXG5cclxuICAgICAgICAvLyDQmtC90L7Qv9C60LAg0LLQvtC30LLRgNCw0YLQsFxyXG4gICAgICAgIHRoaXMuYmFja0J1dHRvbiA9IHRoaXMuYWRkLnRleHQoXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLndpZHRoIC8gMiAtIDE1MCwgXHJcbiAgICAgICAgICAgIDU1MCwgXHJcbiAgICAgICAgICAgICdCQUNLJywgXHJcbiAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLCBcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMzJweCcsIFxyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlVGhpY2tuZXNzOiAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApLnNldE9yaWdpbigwLjUpLnNldEludGVyYWN0aXZlKCk7XHJcblxyXG4gICAgICAgIC8vINCa0L3QvtC/0LrQsCDRgdCx0YDQvtGB0LAg0YDQtdC60L7RgNC00L7QslxyXG4gICAgICAgIHRoaXMucmVzZXRCdXR0b24gPSB0aGlzLmFkZC50ZXh0KFxyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi53aWR0aCAvIDIgKyAxMDAsIFxyXG4gICAgICAgICAgICA1NTAsIFxyXG4gICAgICAgICAgICAnUkVTRVQgU0NPUkVTJywgXHJcbiAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLCBcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMzJweCcsIFxyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlVGhpY2tuZXNzOiAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApLnNldE9yaWdpbigwLjUpLnNldEludGVyYWN0aXZlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuYnV0dG9ucy5wdXNoKHRoaXMuYmFja0J1dHRvbiwgdGhpcy5yZXNldEJ1dHRvbik7XHJcblxyXG4gICAgICAgIC8vINCe0LHRgNCw0LHQvtGC0YfQuNC60Lgg0LTQu9GPINC60L3QvtC/0LrQuCBCQUNLXHJcbiAgICAgICAgdGhpcy5iYWNrQnV0dG9uLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJ1dHRvbkluZGV4ID0gMDtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25TZWxlY3Rpb24oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5iYWNrQnV0dG9uLm9uKCdwb2ludGVyb3V0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1dHRvblNlbGVjdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmJhY2tCdXR0b24ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdNYWluTWVudScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyDQntCx0YDQsNCx0L7RgtGH0LjQutC4INC00LvRjyDQutC90L7Qv9C60LggUkVTRVRcclxuICAgICAgICB0aGlzLnJlc2V0QnV0dG9uLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJ1dHRvbkluZGV4ID0gMTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25TZWxlY3Rpb24oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXNldEJ1dHRvbi5vbigncG9pbnRlcm91dCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25TZWxlY3Rpb24oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXNldEJ1dHRvbi5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRIaWdoU2NvcmVzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlQnV0dG9uU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXNldEhpZ2hTY29yZXMoKSB7XHJcbiAgICAgICAgTG9jYWxTdG9yYWdlTWFuYWdlci5zYXZlSGlnaFNjb3JlcyhMb2NhbFN0b3JhZ2VNYW5hZ2VyLmxvYWRIaWdoU2NvcmVzKCkubWFwKChfLCBpKSA9PiAoe1xyXG4gICAgICAgICAgICBuYW1lOiBgTm9FbnRyeWAsXHJcbiAgICAgICAgICAgIHNjb3JlOiAoMTAgLSBpKSAqIDEwMDAsXHJcbiAgICAgICAgICAgIGxldmVsOiAoMTAgLSBpKSA+PSAzID8gJ0FsbCcgOiAoMTAgLSBpKSBhcyBudW1iZXIsXHJcbiAgICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgLSAoaSAqIDg2NDAwMDAwKSkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0pKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jcmVhdGVSZWNvcmRzRGlzcGxheShMb2NhbFN0b3JhZ2VNYW5hZ2VyLmxvYWRIaWdoU2NvcmVzKCkpO1xyXG4gICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoJ1Njb3JlcyByZXNldCB0byBkZWZhdWx0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93TWVzc2FnZSh0ZXh0OiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5hZGQudGV4dChcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4ud2lkdGggLyAyLFxyXG4gICAgICAgICAgICA1MDAsXHJcbiAgICAgICAgICAgIHRleHQsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzI0cHgnLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjMDBmZjAwJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKS5zZXRPcmlnaW4oMC41KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMjAwMCwgKCkgPT4ge1xyXG4gICAgICAgICAgICBtZXNzYWdlLmRlc3Ryb3koKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUJ1dHRvblNlbGVjdGlvbigpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBidXR0b24uc2V0Q29sb3IoaW5kZXggPT09IHRoaXMuc2VsZWN0ZWRCdXR0b25JbmRleCA/ICcjZmYwJyA6ICcjZmZmJyk7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRTY2FsZShpbmRleCA9PT0gdGhpcy5zZWxlY3RlZEJ1dHRvbkluZGV4ID8gMS4xIDogMS4wKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldHVwSW5wdXQoKSB7XHJcbiAgICAgICAgdGhpcy5tZW51SW5wdXQgPSBuZXcgTWVudUlucHV0Q29tcG9uZW50KHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmJhY2tCdXR0b24ub24oJ3BvaW50ZXJvdmVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQnV0dG9uSW5kZXggPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1dHRvblNlbGVjdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJlc2V0QnV0dG9uLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJ1dHRvbkluZGV4ID0gMTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25TZWxlY3Rpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNsZWFyUmVjb3Jkc0VsZW1lbnRzKCkge1xyXG4gICAgICAgIHRoaXMucmVjb3Jkc0VsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50Py5kZXN0cm95KSBlbGVtZW50LmRlc3Ryb3koKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnJlY29yZHNFbGVtZW50cyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSh0aW1lOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMubWVudUlucHV0KSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMubWVudUlucHV0LnVwZGF0ZSgpO1xyXG5cclxuICAgICAgICBpZiAodGltZSAtIHRoaXMubGFzdElucHV0VGltZSA+PSB0aGlzLmlucHV0RGVsYXkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWVudUlucHV0LmxlZnRJc0Rvd24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCdXR0b25JbmRleCA9ICh0aGlzLnNlbGVjdGVkQnV0dG9uSW5kZXggLSAxICsgdGhpcy5idXR0b25zLmxlbmd0aCkgJSB0aGlzLmJ1dHRvbnMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25TZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdElucHV0VGltZSA9IHRpbWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tZW51SW5wdXQucmlnaHRJc0Rvd24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCdXR0b25JbmRleCA9ICh0aGlzLnNlbGVjdGVkQnV0dG9uSW5kZXggKyAxKSAlIHRoaXMuYnV0dG9ucy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1dHRvblNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0SW5wdXRUaW1lID0gdGltZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1lbnVJbnB1dC5wcmltYXJ5QWN0aW9uSXNEb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uc1t0aGlzLnNlbGVjdGVkQnV0dG9uSW5kZXhdLmVtaXQoJ3BvaW50ZXJkb3duJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tZW51SW5wdXQuc2Vjb25kYXJ5QWN0aW9uSXNEb3duKSB7XHJcbiAgICAgICAgICAgIC8vINCS0L7Qt9Cy0YDQsNGCINCyINCz0LvQsNCy0L3QvtC1INC80LXQvdGOXHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ01haW5NZW51Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNodXRkb3duKCkge1xyXG4gICAgICAgIHRoaXMubWVudUlucHV0LmNsZWFudXAoKTtcclxuICAgICAgICB0aGlzLmNsZWFyUmVjb3Jkc0VsZW1lbnRzKCk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5rZXlib2FyZD8ub2ZmKCdrZXlkb3duJyk7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiUGhhc2VyIiwiTWVudUlucHV0Q29tcG9uZW50IiwiTG9jYWxTdG9yYWdlTWFuYWdlciIsIkV2ZW50QnVzIiwiUmVjb3Jkc1NjZW5lIiwiU2NlbmUiLCJjb25zdHJ1Y3RvciIsInJlY29yZHNFbGVtZW50cyIsInNlbGVjdGVkQnV0dG9uSW5kZXgiLCJidXR0b25zIiwibGFzdElucHV0VGltZSIsImlucHV0RGVsYXkiLCJjcmVhdGUiLCJyZWNvcmRzIiwibG9hZEhpZ2hTY29yZXMiLCJhZGQiLCJyZWN0YW5nbGUiLCJzZXRPcmlnaW4iLCJzZXREZXB0aCIsImNyZWF0ZUJhY2tncm91bmQiLCJjcmVhdGVSZWNvcmRzRGlzcGxheSIsImNyZWF0ZUJ1dHRvbnMiLCJzZXR1cElucHV0IiwiZW1pdCIsImltYWdlIiwic2V0U2NhbGUiLCJjbGVhclJlY29yZHNFbGVtZW50cyIsInRpdGxlIiwidGV4dCIsImNhbWVyYXMiLCJtYWluIiwid2lkdGgiLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJjb2xvciIsInN0cm9rZSIsInN0cm9rZVRoaWNrbmVzcyIsInJhbmtIZWFkZXIiLCJuYW1lSGVhZGVyIiwic2NvcmVIZWFkZXIiLCJsZXZlbEhlYWRlciIsImRhdGVIZWFkZXIiLCJwdXNoIiwiZm9yRWFjaCIsInJlY29yZCIsImluZGV4IiwieVBvcyIsInJhbmtUZXh0IiwibmFtZVRleHQiLCJuYW1lIiwic2NvcmVUZXh0Iiwic2NvcmUiLCJ0b1N0cmluZyIsImxldmVsVGV4dCIsImxldmVsIiwiZGF0ZSIsIkRhdGUiLCJkYXRlVGV4dCIsImdldERhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiYmFja0J1dHRvbiIsInNldEludGVyYWN0aXZlIiwicmVzZXRCdXR0b24iLCJvbiIsInVwZGF0ZUJ1dHRvblNlbGVjdGlvbiIsInNjZW5lIiwic3RhcnQiLCJyZXNldEhpZ2hTY29yZXMiLCJzYXZlSGlnaFNjb3JlcyIsIm1hcCIsIl8iLCJpIiwibm93IiwidG9JU09TdHJpbmciLCJzaG93TWVzc2FnZSIsIm1lc3NhZ2UiLCJ0aW1lIiwiZGVsYXllZENhbGwiLCJkZXN0cm95IiwiYnV0dG9uIiwic2V0Q29sb3IiLCJtZW51SW5wdXQiLCJlbGVtZW50IiwidXBkYXRlIiwibGVmdElzRG93biIsImxlbmd0aCIsInJpZ2h0SXNEb3duIiwicHJpbWFyeUFjdGlvbklzRG93biIsInNlY29uZGFyeUFjdGlvbklzRG93biIsInNodXRkb3duIiwiY2xlYW51cCIsImlucHV0Iiwia2V5Ym9hcmQiLCJvZmYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game/scenes/records-scene.ts\n");

/***/ }),

/***/ "./src/game/scenes/victory-scene.ts":
/*!******************************************!*\
  !*** ./src/game/scenes/victory-scene.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VictoryScene: () => (/* binding */ VictoryScene)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _event_bus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../event-bus */ \"./src/game/event-bus.ts\");\n/* harmony import */ var _components_input_human_menu_input_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/input/human/menu-input-component */ \"./src/game/components/input/human/menu-input-component.ts\");\n/* harmony import */ var _configs_game_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../configs/game-config */ \"./src/game/configs/game-config.ts\");\n/* harmony import */ var _types_custom_events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../types/custom-events */ \"./src/game/types/custom-events.ts\");\n/* harmony import */ var _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../managers/local-storage-manager */ \"./src/game/managers/local-storage-manager.ts\");\n\n\n\n\n\n\nclass VictoryScene extends (phaser__WEBPACK_IMPORTED_MODULE_0___default().Scene) {\n    constructor(){\n        super({\n            key: \"Victory\"\n        });\n        this.menuItems = [];\n        this.selectedItemIndex = 0;\n        this.lastInputTime = 0;\n        this.inputDelay = 200;\n        this.finalScore = 0;\n        this.bonusScore = 0;\n    }\n    init(data) {\n        this.finalScore = data.score;\n        this.bonusScore = (data.lives || 0) * _configs_game_config__WEBPACK_IMPORTED_MODULE_3__.LIFE_BONUS_VALUE;\n    }\n    create() {\n        // Затемнение игрового фона (50% прозрачности)\n        this.overlay = this.add.rectangle(0, 0, this.scale.width, this.scale.height, 0x000000, 0.5 // Изменили прозрачность на 0.5 (50%)\n        ).setOrigin(0).setDepth(0);\n        // Создаем группу для текущих элементов интерфейса\n        this.currentDisplayGroup = this.add.group();\n        this.showBonusScreen();\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(\"current-scene-ready\", this);\n    }\n    showBonusScreen() {\n        this.clearCurrentDisplay();\n        // Заголовок\n        const title = this.add.text(this.scale.width / 2, 150, \"GAME COMPLETE\", {\n            fontFamily: \"Arial\",\n            fontSize: \"48px\",\n            color: \"#ffcc00\",\n            stroke: \"#000000\",\n            strokeThickness: 4\n        }).setOrigin(0.5).setDepth(1);\n        // Бонус за жизни\n        const bonusText = this.add.text(this.scale.width / 2, 300, \"\", {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5).setDepth(1);\n        // Финальный счет\n        const finalText = this.add.text(this.scale.width / 2, 400, \"\", {\n            fontFamily: \"Arial\",\n            fontSize: \"36px\",\n            color: \"#ffcc00\",\n            stroke: \"#000000\",\n            strokeThickness: 3\n        }).setOrigin(0.5).setAlpha(0).setDepth(1);\n        // Добавляем в группу\n        this.currentDisplayGroup.addMultiple([\n            title,\n            bonusText,\n            finalText\n        ]);\n        // Анимация подсчета бонусов\n        this.tweens.addCounter({\n            from: 0,\n            to: this.bonusScore,\n            duration: 2000,\n            onUpdate: (tween)=>{\n                const value = Math.floor(tween.getValue());\n                bonusText.setText(`LIFE BONUS: ${value}`);\n            },\n            onComplete: ()=>{\n                this.finalScore += this.bonusScore;\n                finalText.setText(`FINAL SCORE: ${this.finalScore}`).setAlpha(1);\n                // Переход к титрам через 3 секунды\n                this.time.delayedCall(3000, ()=>{\n                    this.showCredits();\n                });\n            }\n        });\n    }\n    showCredits() {\n        this.clearCurrentDisplay();\n        _event_bus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit(_types_custom_events__WEBPACK_IMPORTED_MODULE_4__.CUSTOM_EVENTS.CLEANUP_GAME);\n        this.scene.stop(\"GameScene\");\n        // Титры\n        const credits = [\n            \"GAME CREATED BY\",\n            \"Acaride\",\n            \"\",\n            \"SPECIAL THANKS TO\",\n            \"Phaser 3 Framework\",\n            \"OpenGameArt.org\",\n            \"Kenney.nl\",\n            \"Freesound.org\"\n        ];\n        let yPos = 150;\n        const creditTexts = [];\n        credits.forEach((text)=>{\n            const creditText = this.add.text(this.scale.width / 2, yPos, text, {\n                fontFamily: \"Arial\",\n                fontSize: text.includes(\"GAME\") ? \"32px\" : \"24px\",\n                color: \"#ffffff\",\n                stroke: \"#000000\",\n                strokeThickness: 2\n            }).setOrigin(0.5).setDepth(1);\n            creditTexts.push(creditText);\n            yPos += text ? 50 : 30;\n        });\n        this.currentDisplayGroup.addMultiple(creditTexts);\n        // Переход к финальному меню через 6 секунд\n        this.time.delayedCall(6000, ()=>{\n            this.showFinalMenu();\n        });\n    }\n    showFinalMenu() {\n        this.clearCurrentDisplay();\n        // Заголовок\n        const title = this.add.text(this.scale.width / 2, 150, \"GAME CLEARED\", {\n            fontFamily: \"Arial\",\n            fontSize: \"48px\",\n            color: \"#ffcc00\",\n            stroke: \"#000000\",\n            strokeThickness: 4\n        }).setOrigin(0.5).setDepth(1);\n        // Финальный счет\n        const scoreText = this.add.text(this.scale.width / 2, 230, `FINAL SCORE: ${this.finalScore}`, {\n            fontFamily: \"Arial\",\n            fontSize: \"36px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5).setDepth(1);\n        // Пункты меню\n        const saveItem = this.createMenuItem(350, \"SAVE RESULT\", ()=>{\n            if (_managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_5__.LocalStorageManager.isScoreInTop(this.finalScore)) {\n                this.scene.launch(\"InputScene\", {\n                    score: this.finalScore,\n                    level: \"All\"\n                });\n            } else {\n                this.showMessage(\"Score too low for top 10\");\n            }\n        });\n        const menuItem = this.createMenuItem(450, \"MAIN MENU\", ()=>{\n            this.scene.start(\"MainMenu\");\n        });\n        this.menuItems = [\n            saveItem,\n            menuItem\n        ];\n        this.currentDisplayGroup.addMultiple([\n            title,\n            scoreText,\n            saveItem,\n            menuItem\n        ]);\n        this.setupInput();\n        this.selectMenuItem(0);\n    }\n    createMenuItem(y, text, action) {\n        const menuItem = this.add.text(this.scale.width / 2, y, text, {\n            fontFamily: \"Arial\",\n            fontSize: \"32px\",\n            color: \"#ffffff\",\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5).setInteractive().setDepth(1);\n        menuItem.on(\"pointerover\", ()=>{\n            this.selectedItemIndex = this.menuItems.indexOf(menuItem);\n            this.selectMenuItem(this.selectedItemIndex);\n        });\n        menuItem.on(\"pointerout\", ()=>{\n            menuItem.setColor(\"#ffffff\");\n        });\n        menuItem.on(\"pointerdown\", action);\n        return menuItem;\n    }\n    showMessage(text) {\n        // Удаляем предыдущее сообщение, если оно есть\n        const existingMessage = this.children.getByName(\"statusMessage\");\n        if (existingMessage) {\n            existingMessage.destroy();\n        }\n        // Создаем новое сообщение с именем для последующего удаления\n        const message = this.add.text(this.cameras.main.width / 2, this.cameras.main.height / 2, text, {\n            fontFamily: \"Arial\",\n            fontSize: \"28px\",\n            color: \"#ff0000\",\n            backgroundColor: \"#333333\",\n            padding: {\n                left: 20,\n                right: 20,\n                top: 10,\n                bottom: 10\n            },\n            stroke: \"#000000\",\n            strokeThickness: 2\n        }).setOrigin(0.5).setDepth(100) // Устанавливаем высокий depth чтобы было поверх других элементов\n        .setName(\"statusMessage\"); // Даем имя для последующего поиска\n        // Анимация появления\n        message.setAlpha(0);\n        this.tweens.add({\n            targets: message,\n            alpha: 1,\n            duration: 300,\n            ease: \"Linear\"\n        });\n        // Автоматическое исчезновение через 2 секунды с анимацией\n        this.time.delayedCall(2000, ()=>{\n            this.tweens.add({\n                targets: message,\n                alpha: 0,\n                duration: 500,\n                ease: \"Linear\",\n                onComplete: ()=>message.destroy()\n            });\n        });\n    }\n    clearCurrentDisplay() {\n        // Удаляем все объекты из текущей группы отображения\n        this.currentDisplayGroup.clear(true, true);\n        this.menuItems = [];\n        // Отключаем предыдущий ввод\n        if (this.menuInput) {\n            this.menuInput.cleanup();\n        }\n        this.input.off(\"pointermove\");\n    }\n    setupInput() {\n        this.menuInput = new _components_input_human_menu_input_component__WEBPACK_IMPORTED_MODULE_2__.MenuInputComponent(this);\n        this.input.on(\"pointermove\", (pointer)=>{\n            if (!pointer.isDown) return;\n            const item = this.menuItems.find((item)=>item.getBounds().contains(pointer.x, pointer.y));\n            if (item) {\n                this.selectedItemIndex = this.menuItems.indexOf(item);\n                this.selectMenuItem(this.selectedItemIndex);\n                item.emit(\"pointerdown\");\n            }\n        });\n    }\n    update(time) {\n        if (!this.menuInput || this.isInputSceneActive()) return;\n        this.menuInput.update();\n        this.handleNavigation(time);\n        this.handleSelection();\n    }\n    isInputSceneActive() {\n        return this.scene.isActive(\"InputScene\");\n    }\n    handleNavigation(time) {\n        if (time - this.lastInputTime < this.inputDelay) return;\n        if (this.menuInput.downIsDown) {\n            this.changeSelectedItem(1);\n            this.lastInputTime = time;\n        } else if (this.menuInput.upIsDown) {\n            this.changeSelectedItem(-1);\n            this.lastInputTime = time;\n        }\n    }\n    handleSelection() {\n        if (this.menuInput.primaryActionIsDown) {\n            this.menuItems[this.selectedItemIndex].emit(\"pointerdown\");\n        }\n    }\n    changeSelectedItem(direction) {\n        this.selectedItemIndex = (this.selectedItemIndex + direction + this.menuItems.length) % this.menuItems.length;\n        this.selectMenuItem(this.selectedItemIndex);\n    }\n    selectMenuItem(index) {\n        this.menuItems.forEach((item, i)=>{\n            item.setColor(i === index ? \"#ff0\" : \"#fff\");\n            item.setScale(i === index ? 1.1 : 1.0);\n        });\n    }\n    shutdown() {\n        const message = this.children.getByName(\"statusMessage\");\n        if (message) {\n            message.destroy();\n        }\n        this.clearCurrentDisplay();\n        if (this.overlay) {\n            this.overlay.destroy();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUIsbUJBQW1CLEVBQUU7WUFDcEMsSUFBSSxDQUFDckgsU0FBUyxDQUFDLElBQUksQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQ3NCLElBQUksQ0FBQztRQUNoRDtJQUNKO0lBRVE0RixtQkFBbUJHLFNBQWlCLEVBQUU7UUFDMUMsSUFBSSxDQUFDckgsaUJBQWlCLEdBQUcsQ0FBQyxJQUFJLENBQUNBLGlCQUFpQixHQUFHcUgsWUFBWSxJQUFJLENBQUN0SCxTQUFTLENBQUN1SCxNQUFNLElBQUksSUFBSSxDQUFDdkgsU0FBUyxDQUFDdUgsTUFBTTtRQUM3RyxJQUFJLENBQUM5QyxjQUFjLENBQUMsSUFBSSxDQUFDeEUsaUJBQWlCO0lBQzlDO0lBRVF3RSxlQUFlK0MsS0FBYSxFQUFFO1FBQ2xDLElBQUksQ0FBQ3hILFNBQVMsQ0FBQzBELE9BQU8sQ0FBQyxDQUFDOEMsTUFBTWlCO1lBQzFCakIsS0FBS3pCLFFBQVEsQ0FBQzBDLE1BQU1ELFFBQVEsU0FBUztZQUNyQ2hCLEtBQUtrQixRQUFRLENBQUNELE1BQU1ELFFBQVEsTUFBTTtRQUN0QztJQUNKO0lBRUFHLFdBQVc7UUFDUCxNQUFNdkMsVUFBVSxJQUFJLENBQUNILFFBQVEsQ0FBQ0MsU0FBUyxDQUFDO1FBQ3hDLElBQUlFLFNBQVM7WUFDVEEsUUFBUUQsT0FBTztRQUNuQjtRQUVBLElBQUksQ0FBQzNELG1CQUFtQjtRQUN4QixJQUFJLElBQUksQ0FBQ1osT0FBTyxFQUFFO1lBQ2QsSUFBSSxDQUFDQSxPQUFPLENBQUN1RSxPQUFPO1FBQ3hCO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2VuZC1vZi1jb3Vyc2UvLi9zcmMvZ2FtZS9zY2VuZXMvdmljdG9yeS1zY2VuZS50cz9lY2VkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICcuLi9ldmVudC1idXMnO1xyXG5pbXBvcnQgeyBNZW51SW5wdXRDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL2lucHV0L2h1bWFuL21lbnUtaW5wdXQtY29tcG9uZW50JztcclxuaW1wb3J0ICogYXMgQ09ORklHIGZyb20gJy4uL2NvbmZpZ3MvZ2FtZS1jb25maWcnO1xyXG5pbXBvcnQgeyBDVVNUT01fRVZFTlRTIH0gZnJvbSAnLi4vdHlwZXMvY3VzdG9tLWV2ZW50cyc7XHJcbmltcG9ydCB7IExvY2FsU3RvcmFnZU1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycy9sb2NhbC1zdG9yYWdlLW1hbmFnZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZpY3RvcnlTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgICBwcml2YXRlIG1lbnVJbnB1dCE6IE1lbnVJbnB1dENvbXBvbmVudDtcclxuICAgIHByaXZhdGUgbWVudUl0ZW1zOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dFtdID0gW107XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkSXRlbUluZGV4ID0gMDtcclxuICAgIHByaXZhdGUgbGFzdElucHV0VGltZSA9IDA7XHJcbiAgICBwcml2YXRlIGlucHV0RGVsYXkgPSAyMDA7XHJcbiAgICBwcml2YXRlIGZpbmFsU2NvcmUgPSAwO1xyXG4gICAgcHJpdmF0ZSBib251c1Njb3JlID0gMDtcclxuICAgIHByaXZhdGUgY3VycmVudERpc3BsYXlHcm91cCE6IFBoYXNlci5HYW1lT2JqZWN0cy5Hcm91cDtcclxuICAgIHByaXZhdGUgb3ZlcmxheSE6IFBoYXNlci5HYW1lT2JqZWN0cy5SZWN0YW5nbGU7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoeyBrZXk6ICdWaWN0b3J5JyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KGRhdGE6IHsgc2NvcmU6IG51bWJlciwgbGl2ZXM/OiBudW1iZXIgfSkge1xyXG4gICAgICAgIHRoaXMuZmluYWxTY29yZSA9IGRhdGEuc2NvcmU7XHJcbiAgICAgICAgdGhpcy5ib251c1Njb3JlID0gKGRhdGEubGl2ZXMgfHwgMCkgKiBDT05GSUcuTElGRV9CT05VU19WQUxVRTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGUoKSB7XHJcbiAgICAgICAgLy8g0JfQsNGC0LXQvNC90LXQvdC40LUg0LjQs9GA0L7QstC+0LPQviDRhNC+0L3QsCAoNTAlINC/0YDQvtC30YDQsNGH0L3QvtGB0YLQuClcclxuICAgICAgICB0aGlzLm92ZXJsYXkgPSB0aGlzLmFkZC5yZWN0YW5nbGUoXHJcbiAgICAgICAgICAgIDAsIDAsIFxyXG4gICAgICAgICAgICB0aGlzLnNjYWxlLndpZHRoLCBcclxuICAgICAgICAgICAgdGhpcy5zY2FsZS5oZWlnaHQsIFxyXG4gICAgICAgICAgICAweDAwMDAwMCwgXHJcbiAgICAgICAgICAgIDAuNSAgLy8g0JjQt9C80LXQvdC40LvQuCDQv9GA0L7Qt9GA0LDRh9C90L7RgdGC0Ywg0L3QsCAwLjUgKDUwJSlcclxuICAgICAgICApLnNldE9yaWdpbigwKS5zZXREZXB0aCgwKTtcclxuXHJcbiAgICAgICAgLy8g0KHQvtC30LTQsNC10Lwg0LPRgNGD0L/Qv9GDINC00LvRjyDRgtC10LrRg9GJ0LjRhSDRjdC70LXQvNC10L3RgtC+0LIg0LjQvdGC0LXRgNGE0LXQudGB0LBcclxuICAgICAgICB0aGlzLmN1cnJlbnREaXNwbGF5R3JvdXAgPSB0aGlzLmFkZC5ncm91cCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2hvd0JvbnVzU2NyZWVuKCk7XHJcbiAgICAgICAgRXZlbnRCdXMuZW1pdCgnY3VycmVudC1zY2VuZS1yZWFkeScsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0JvbnVzU2NyZWVuKCkge1xyXG4gICAgICAgIHRoaXMuY2xlYXJDdXJyZW50RGlzcGxheSgpO1xyXG5cclxuICAgICAgICAvLyDQl9Cw0LPQvtC70L7QstC+0LpcclxuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMuYWRkLnRleHQoXHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGUud2lkdGgvMiwgMTUwLCBcclxuICAgICAgICAgICAgJ0dBTUUgQ09NUExFVEUnLCBcclxuICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzQ4cHgnLCBcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmY2MwMCcsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVRoaWNrbmVzczogNFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgxKTtcclxuXHJcbiAgICAgICAgLy8g0JHQvtC90YPRgSDQt9CwINC20LjQt9C90LhcclxuICAgICAgICBjb25zdCBib251c1RleHQgPSB0aGlzLmFkZC50ZXh0KFxyXG4gICAgICAgICAgICB0aGlzLnNjYWxlLndpZHRoLzIsIDMwMCwgXHJcbiAgICAgICAgICAgICcnLCBcclxuICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzMycHgnLCBcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZicsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVRoaWNrbmVzczogMlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgxKTtcclxuXHJcbiAgICAgICAgLy8g0KTQuNC90LDQu9GM0L3Ri9C5INGB0YfQtdGCXHJcbiAgICAgICAgY29uc3QgZmluYWxUZXh0ID0gdGhpcy5hZGQudGV4dChcclxuICAgICAgICAgICAgdGhpcy5zY2FsZS53aWR0aC8yLCA0MDAsIFxyXG4gICAgICAgICAgICAnJywgXHJcbiAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxyXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICczNnB4JywgXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNmZmNjMDAnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICkuc2V0T3JpZ2luKDAuNSkuc2V0QWxwaGEoMCkuc2V0RGVwdGgoMSk7XHJcblxyXG4gICAgICAgIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDQsiDQs9GA0YPQv9C/0YNcclxuICAgICAgICB0aGlzLmN1cnJlbnREaXNwbGF5R3JvdXAuYWRkTXVsdGlwbGUoW3RpdGxlLCBib251c1RleHQsIGZpbmFsVGV4dF0pO1xyXG5cclxuICAgICAgICAvLyDQkNC90LjQvNCw0YbQuNGPINC/0L7QtNGB0YfQtdGC0LAg0LHQvtC90YPRgdC+0LJcclxuICAgICAgICB0aGlzLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogMCxcclxuICAgICAgICAgICAgdG86IHRoaXMuYm9udXNTY29yZSxcclxuICAgICAgICAgICAgZHVyYXRpb246IDIwMDAsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiB0d2VlbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IE1hdGguZmxvb3IodHdlZW4uZ2V0VmFsdWUoKSk7XHJcbiAgICAgICAgICAgICAgICBib251c1RleHQuc2V0VGV4dChgTElGRSBCT05VUzogJHt2YWx1ZX1gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5hbFNjb3JlICs9IHRoaXMuYm9udXNTY29yZTtcclxuICAgICAgICAgICAgICAgIGZpbmFsVGV4dC5zZXRUZXh0KGBGSU5BTCBTQ09SRTogJHt0aGlzLmZpbmFsU2NvcmV9YCkuc2V0QWxwaGEoMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g0J/QtdGA0LXRhdC+0LQg0Log0YLQuNGC0YDQsNC8INGH0LXRgNC10LcgMyDRgdC10LrRg9C90LTRi1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDMwMDAsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDcmVkaXRzKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0NyZWRpdHMoKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhckN1cnJlbnREaXNwbGF5KCk7XHJcbiAgICAgICAgRXZlbnRCdXMuZW1pdChDVVNUT01fRVZFTlRTLkNMRUFOVVBfR0FNRSk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5zdG9wKCdHYW1lU2NlbmUnKTtcclxuXHJcbiAgICAgICAgLy8g0KLQuNGC0YDRi1xyXG4gICAgICAgIGNvbnN0IGNyZWRpdHMgPSBbXHJcbiAgICAgICAgICAgICdHQU1FIENSRUFURUQgQlknLFxyXG4gICAgICAgICAgICAnQWNhcmlkZScsXHJcbiAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAnU1BFQ0lBTCBUSEFOS1MgVE8nLFxyXG4gICAgICAgICAgICAnUGhhc2VyIDMgRnJhbWV3b3JrJyxcclxuICAgICAgICAgICAgJ09wZW5HYW1lQXJ0Lm9yZycsXHJcbiAgICAgICAgICAgICdLZW5uZXkubmwnLFxyXG4gICAgICAgICAgICAnRnJlZXNvdW5kLm9yZydcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBsZXQgeVBvcyA9IDE1MDtcclxuICAgICAgICBjb25zdCBjcmVkaXRUZXh0czogUGhhc2VyLkdhbWVPYmplY3RzLlRleHRbXSA9IFtdO1xyXG5cclxuICAgICAgICBjcmVkaXRzLmZvckVhY2godGV4dCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWRpdFRleHQgPSB0aGlzLmFkZC50ZXh0KFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2FsZS53aWR0aC8yLCBcclxuICAgICAgICAgICAgICAgIHlQb3MsIFxyXG4gICAgICAgICAgICAgICAgdGV4dCwgXHJcbiAgICAgICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IHRleHQuaW5jbHVkZXMoJ0dBTUUnKSA/ICczMnB4JyA6ICcyNHB4JywgXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJyxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgxKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNyZWRpdFRleHRzLnB1c2goY3JlZGl0VGV4dCk7XHJcbiAgICAgICAgICAgIHlQb3MgKz0gdGV4dCA/IDUwIDogMzA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudERpc3BsYXlHcm91cC5hZGRNdWx0aXBsZShjcmVkaXRUZXh0cyk7XHJcblxyXG4gICAgICAgIC8vINCf0LXRgNC10YXQvtC0INC6INGE0LjQvdCw0LvRjNC90L7QvNGDINC80LXQvdGOINGH0LXRgNC10LcgNiDRgdC10LrRg9C90LRcclxuICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoNjAwMCwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dGaW5hbE1lbnUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dGaW5hbE1lbnUoKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhckN1cnJlbnREaXNwbGF5KCk7XHJcblxyXG4gICAgICAgIC8vINCX0LDQs9C+0LvQvtCy0L7QulxyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5hZGQudGV4dChcclxuICAgICAgICAgICAgdGhpcy5zY2FsZS53aWR0aC8yLCAxNTAsIFxyXG4gICAgICAgICAgICAnR0FNRSBDTEVBUkVEJywgXHJcbiAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxyXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICc0OHB4JywgXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNmZmNjMDAnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICkuc2V0T3JpZ2luKDAuNSkuc2V0RGVwdGgoMSk7XHJcblxyXG4gICAgICAgIC8vINCk0LjQvdCw0LvRjNC90YvQuSDRgdGH0LXRglxyXG4gICAgICAgIGNvbnN0IHNjb3JlVGV4dCA9IHRoaXMuYWRkLnRleHQoXHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGUud2lkdGgvMiwgMjMwLCBcclxuICAgICAgICAgICAgYEZJTkFMIFNDT1JFOiAke3RoaXMuZmluYWxTY29yZX1gLCBcclxuICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzM2cHgnLCBcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZicsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVRoaWNrbmVzczogMlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgxKTtcclxuXHJcbiAgICAgICAgLy8g0J/Rg9C90LrRgtGLINC80LXQvdGOXHJcbiAgICAgICAgY29uc3Qgc2F2ZUl0ZW0gPSB0aGlzLmNyZWF0ZU1lbnVJdGVtKDM1MCwgJ1NBVkUgUkVTVUxUJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoTG9jYWxTdG9yYWdlTWFuYWdlci5pc1Njb3JlSW5Ub3AodGhpcy5maW5hbFNjb3JlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5sYXVuY2goJ0lucHV0U2NlbmUnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3JlOiB0aGlzLmZpbmFsU2NvcmUsIFxyXG4gICAgICAgICAgICAgICAgICAgIGxldmVsOiAnQWxsJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdTY29yZSB0b28gbG93IGZvciB0b3AgMTAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBtZW51SXRlbSA9IHRoaXMuY3JlYXRlTWVudUl0ZW0oNDUwLCAnTUFJTiBNRU5VJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdNYWluTWVudScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm1lbnVJdGVtcyA9IFtzYXZlSXRlbSwgbWVudUl0ZW1dO1xyXG4gICAgICAgIHRoaXMuY3VycmVudERpc3BsYXlHcm91cC5hZGRNdWx0aXBsZShbdGl0bGUsIHNjb3JlVGV4dCwgc2F2ZUl0ZW0sIG1lbnVJdGVtXSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dXBJbnB1dCgpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0TWVudUl0ZW0oMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVNZW51SXRlbSh5OiBudW1iZXIsIHRleHQ6IHN0cmluZywgYWN0aW9uOiAoKSA9PiB2b2lkKTogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQge1xyXG4gICAgICAgIGNvbnN0IG1lbnVJdGVtID0gdGhpcy5hZGQudGV4dChcclxuICAgICAgICAgICAgdGhpcy5zY2FsZS53aWR0aC8yLCBcclxuICAgICAgICAgICAgeSwgXHJcbiAgICAgICAgICAgIHRleHQsIFxyXG4gICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMzJweCcsIFxyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlVGhpY2tuZXNzOiAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApLnNldE9yaWdpbigwLjUpLnNldEludGVyYWN0aXZlKCkuc2V0RGVwdGgoMSk7XHJcblxyXG4gICAgICAgIG1lbnVJdGVtLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1JbmRleCA9IHRoaXMubWVudUl0ZW1zLmluZGV4T2YobWVudUl0ZW0pO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1lbnVJdGVtKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtZW51SXRlbS5vbigncG9pbnRlcm91dCcsICgpID0+IHtcclxuICAgICAgICAgICAgbWVudUl0ZW0uc2V0Q29sb3IoJyNmZmZmZmYnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbWVudUl0ZW0ub24oJ3BvaW50ZXJkb3duJywgYWN0aW9uKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1lbnVJdGVtO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd01lc3NhZ2UodGV4dDogc3RyaW5nKSB7XHJcbiAgICAgICAgLy8g0KPQtNCw0LvRj9C10Lwg0L/RgNC10LTRi9C00YPRidC10LUg0YHQvtC+0LHRidC10L3QuNC1LCDQtdGB0LvQuCDQvtC90L4g0LXRgdGC0YxcclxuICAgICAgICBjb25zdCBleGlzdGluZ01lc3NhZ2UgPSB0aGlzLmNoaWxkcmVuLmdldEJ5TmFtZSgnc3RhdHVzTWVzc2FnZScpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ01lc3NhZ2UpIHtcclxuICAgICAgICAgICAgZXhpc3RpbmdNZXNzYWdlLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vINCh0L7Qt9C00LDQtdC8INC90L7QstC+0LUg0YHQvtC+0LHRidC10L3QuNC1INGBINC40LzQtdC90LXQvCDQtNC70Y8g0L/QvtGB0LvQtdC00YPRjtGJ0LXQs9C+INGD0LTQsNC70LXQvdC40Y9cclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5hZGQudGV4dChcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4ud2lkdGggLyAyLFxyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi5oZWlnaHQgLyAyLFxyXG4gICAgICAgICAgICB0ZXh0LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxyXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICcyOHB4JyxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmMDAwMCcsXHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMzMzMzMzJyxcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IHsgbGVmdDogMjAsIHJpZ2h0OiAyMCwgdG9wOiAxMCwgYm90dG9tOiAxMCB9LFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgICAuc2V0T3JpZ2luKDAuNSlcclxuICAgICAgICAuc2V0RGVwdGgoMTAwKSAvLyDQo9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDQstGL0YHQvtC60LjQuSBkZXB0aCDRh9GC0L7QsdGLINCx0YvQu9C+INC/0L7QstC10YDRhSDQtNGA0YPQs9C40YUg0Y3Qu9C10LzQtdC90YLQvtCyXHJcbiAgICAgICAgLnNldE5hbWUoJ3N0YXR1c01lc3NhZ2UnKTsgLy8g0JTQsNC10Lwg0LjQvNGPINC00LvRjyDQv9C+0YHQu9C10LTRg9GO0YnQtdCz0L4g0L/QvtC40YHQutCwXHJcblxyXG4gICAgICAgIC8vINCQ0L3QuNC80LDRhtC40Y8g0L/QvtGP0LLQu9C10L3QuNGPXHJcbiAgICAgICAgbWVzc2FnZS5zZXRBbHBoYSgwKTtcclxuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xyXG4gICAgICAgICAgICB0YXJnZXRzOiBtZXNzYWdlLFxyXG4gICAgICAgICAgICBhbHBoYTogMSxcclxuICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcclxuICAgICAgICAgICAgZWFzZTogJ0xpbmVhcidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8g0JDQstGC0L7QvNCw0YLQuNGH0LXRgdC60L7QtSDQuNGB0YfQtdC30L3QvtCy0LXQvdC40LUg0YfQtdGA0LXQtyAyINGB0LXQutGD0L3QtNGLINGBINCw0L3QuNC80LDRhtC40LXQuVxyXG4gICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCgyMDAwLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRzOiBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgYWxwaGE6IDAsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxyXG4gICAgICAgICAgICAgICAgZWFzZTogJ0xpbmVhcicsXHJcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiBtZXNzYWdlLmRlc3Ryb3koKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNsZWFyQ3VycmVudERpc3BsYXkoKSB7XHJcbiAgICAgICAgLy8g0KPQtNCw0LvRj9C10Lwg0LLRgdC1INC+0LHRitC10LrRgtGLINC40Lcg0YLQtdC60YPRidC10Lkg0LPRgNGD0L/Qv9GLINC+0YLQvtCx0YDQsNC20LXQvdC40Y9cclxuICAgICAgICB0aGlzLmN1cnJlbnREaXNwbGF5R3JvdXAuY2xlYXIodHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5tZW51SXRlbXMgPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQntGC0LrQu9GO0YfQsNC10Lwg0L/RgNC10LTRi9C00YPRidC40Lkg0LLQstC+0LRcclxuICAgICAgICBpZiAodGhpcy5tZW51SW5wdXQpIHtcclxuICAgICAgICAgICAgdGhpcy5tZW51SW5wdXQuY2xlYW51cCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlucHV0Lm9mZigncG9pbnRlcm1vdmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldHVwSW5wdXQoKSB7XHJcbiAgICAgICAgdGhpcy5tZW51SW5wdXQgPSBuZXcgTWVudUlucHV0Q29tcG9uZW50KHRoaXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuaW5wdXQub24oJ3BvaW50ZXJtb3ZlJywgKHBvaW50ZXI6IFBoYXNlci5JbnB1dC5Qb2ludGVyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghcG9pbnRlci5pc0Rvd24pIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLm1lbnVJdGVtcy5maW5kKGl0ZW0gPT4gXHJcbiAgICAgICAgICAgICAgICBpdGVtLmdldEJvdW5kcygpLmNvbnRhaW5zKHBvaW50ZXIueCwgcG9pbnRlci55KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggPSB0aGlzLm1lbnVJdGVtcy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNZW51SXRlbSh0aGlzLnNlbGVjdGVkSXRlbUluZGV4KTtcclxuICAgICAgICAgICAgICAgIGl0ZW0uZW1pdCgncG9pbnRlcmRvd24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSh0aW1lOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMubWVudUlucHV0IHx8IHRoaXMuaXNJbnB1dFNjZW5lQWN0aXZlKCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5tZW51SW5wdXQudXBkYXRlKCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVOYXZpZ2F0aW9uKHRpbWUpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0lucHV0U2NlbmVBY3RpdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmUuaXNBY3RpdmUoJ0lucHV0U2NlbmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZU5hdmlnYXRpb24odGltZTogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRpbWUgLSB0aGlzLmxhc3RJbnB1dFRpbWUgPCB0aGlzLmlucHV0RGVsYXkpIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWVudUlucHV0LmRvd25Jc0Rvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VTZWxlY3RlZEl0ZW0oMSk7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdElucHV0VGltZSA9IHRpbWU7XHJcbiAgICAgICAgfSBcclxuICAgICAgICBlbHNlIGlmICh0aGlzLm1lbnVJbnB1dC51cElzRG93bikge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVNlbGVjdGVkSXRlbSgtMSk7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdElucHV0VGltZSA9IHRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlU2VsZWN0aW9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1lbnVJbnB1dC5wcmltYXJ5QWN0aW9uSXNEb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVudUl0ZW1zW3RoaXMuc2VsZWN0ZWRJdGVtSW5kZXhdLmVtaXQoJ3BvaW50ZXJkb3duJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hhbmdlU2VsZWN0ZWRJdGVtKGRpcmVjdGlvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1JbmRleCA9ICh0aGlzLnNlbGVjdGVkSXRlbUluZGV4ICsgZGlyZWN0aW9uICsgdGhpcy5tZW51SXRlbXMubGVuZ3RoKSAlIHRoaXMubWVudUl0ZW1zLmxlbmd0aDtcclxuICAgICAgICB0aGlzLnNlbGVjdE1lbnVJdGVtKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VsZWN0TWVudUl0ZW0oaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMubWVudUl0ZW1zLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcclxuICAgICAgICAgICAgaXRlbS5zZXRDb2xvcihpID09PSBpbmRleCA/ICcjZmYwJyA6ICcjZmZmJyk7XHJcbiAgICAgICAgICAgIGl0ZW0uc2V0U2NhbGUoaSA9PT0gaW5kZXggPyAxLjEgOiAxLjApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNodXRkb3duKCkge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmNoaWxkcmVuLmdldEJ5TmFtZSgnc3RhdHVzTWVzc2FnZScpO1xyXG4gICAgICAgIGlmIChtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jbGVhckN1cnJlbnREaXNwbGF5KCk7XHJcbiAgICAgICAgaWYgKHRoaXMub3ZlcmxheSkge1xyXG4gICAgICAgICAgICB0aGlzLm92ZXJsYXkuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJQaGFzZXIiLCJFdmVudEJ1cyIsIk1lbnVJbnB1dENvbXBvbmVudCIsIkNPTkZJRyIsIkNVU1RPTV9FVkVOVFMiLCJMb2NhbFN0b3JhZ2VNYW5hZ2VyIiwiVmljdG9yeVNjZW5lIiwiU2NlbmUiLCJjb25zdHJ1Y3RvciIsImtleSIsIm1lbnVJdGVtcyIsInNlbGVjdGVkSXRlbUluZGV4IiwibGFzdElucHV0VGltZSIsImlucHV0RGVsYXkiLCJmaW5hbFNjb3JlIiwiYm9udXNTY29yZSIsImluaXQiLCJkYXRhIiwic2NvcmUiLCJsaXZlcyIsIkxJRkVfQk9OVVNfVkFMVUUiLCJjcmVhdGUiLCJvdmVybGF5IiwiYWRkIiwicmVjdGFuZ2xlIiwic2NhbGUiLCJ3aWR0aCIsImhlaWdodCIsInNldE9yaWdpbiIsInNldERlcHRoIiwiY3VycmVudERpc3BsYXlHcm91cCIsImdyb3VwIiwic2hvd0JvbnVzU2NyZWVuIiwiZW1pdCIsImNsZWFyQ3VycmVudERpc3BsYXkiLCJ0aXRsZSIsInRleHQiLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJjb2xvciIsInN0cm9rZSIsInN0cm9rZVRoaWNrbmVzcyIsImJvbnVzVGV4dCIsImZpbmFsVGV4dCIsInNldEFscGhhIiwiYWRkTXVsdGlwbGUiLCJ0d2VlbnMiLCJhZGRDb3VudGVyIiwiZnJvbSIsInRvIiwiZHVyYXRpb24iLCJvblVwZGF0ZSIsInR3ZWVuIiwidmFsdWUiLCJNYXRoIiwiZmxvb3IiLCJnZXRWYWx1ZSIsInNldFRleHQiLCJvbkNvbXBsZXRlIiwidGltZSIsImRlbGF5ZWRDYWxsIiwic2hvd0NyZWRpdHMiLCJDTEVBTlVQX0dBTUUiLCJzY2VuZSIsInN0b3AiLCJjcmVkaXRzIiwieVBvcyIsImNyZWRpdFRleHRzIiwiZm9yRWFjaCIsImNyZWRpdFRleHQiLCJpbmNsdWRlcyIsInB1c2giLCJzaG93RmluYWxNZW51Iiwic2NvcmVUZXh0Iiwic2F2ZUl0ZW0iLCJjcmVhdGVNZW51SXRlbSIsImlzU2NvcmVJblRvcCIsImxhdW5jaCIsImxldmVsIiwic2hvd01lc3NhZ2UiLCJtZW51SXRlbSIsInN0YXJ0Iiwic2V0dXBJbnB1dCIsInNlbGVjdE1lbnVJdGVtIiwieSIsImFjdGlvbiIsInNldEludGVyYWN0aXZlIiwib24iLCJpbmRleE9mIiwic2V0Q29sb3IiLCJleGlzdGluZ01lc3NhZ2UiLCJjaGlsZHJlbiIsImdldEJ5TmFtZSIsImRlc3Ryb3kiLCJtZXNzYWdlIiwiY2FtZXJhcyIsIm1haW4iLCJiYWNrZ3JvdW5kQ29sb3IiLCJwYWRkaW5nIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwic2V0TmFtZSIsInRhcmdldHMiLCJhbHBoYSIsImVhc2UiLCJjbGVhciIsIm1lbnVJbnB1dCIsImNsZWFudXAiLCJpbnB1dCIsIm9mZiIsInBvaW50ZXIiLCJpc0Rvd24iLCJpdGVtIiwiZmluZCIsImdldEJvdW5kcyIsImNvbnRhaW5zIiwieCIsInVwZGF0ZSIsImlzSW5wdXRTY2VuZUFjdGl2ZSIsImhhbmRsZU5hdmlnYXRpb24iLCJoYW5kbGVTZWxlY3Rpb24iLCJpc0FjdGl2ZSIsImRvd25Jc0Rvd24iLCJjaGFuZ2VTZWxlY3RlZEl0ZW0iLCJ1cElzRG93biIsInByaW1hcnlBY3Rpb25Jc0Rvd24iLCJkaXJlY3Rpb24iLCJsZW5ndGgiLCJpbmRleCIsImkiLCJzZXRTY2FsZSIsInNodXRkb3duIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/scenes/victory-scene.ts\n");

/***/ }),

/***/ "./src/game/types/custom-events.ts":
/*!*****************************************!*\
  !*** ./src/game/types/custom-events.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CUSTOM_EVENTS: () => (/* binding */ CUSTOM_EVENTS)\n/* harmony export */ });\nconst CUSTOM_EVENTS = Object.freeze({\n    ENEMY_INIT: \"ENEMY_INIT\",\n    ENEMY_DESTROYED: \"ENEMY_DESTROYED\",\n    ENEMY_HIT: \"ENEMY_HIT\",\n    PLAYER_SPAWN: \"PLAYER_SPAWN\",\n    PLAYER_DESTROYED: \"PLAYER_DESTROYED\",\n    GAME_OVER: \"GAME_OVER\",\n    SHIP_HIT: \"SHIP_HIT\",\n    SHIP_SHOOT: \"SHIP_SHOOT\",\n    START_GAME: \"start-game\",\n    RESTART_GAME: \"restart-game\",\n    CONTINUE_GAME: \"continue-game\",\n    CLEANUP_GAME: \"cleanup-game\",\n    WEAPON_POWER_CHANGED: \"WEAPON_POWER_CHANGED\",\n    WEAPON_CHANGED: \"WEAPON_CHANGED\",\n    PLAYER_BOMB_ACTIVATED: \"player-bomb-activated\",\n    PLAYER_BOMB_DAMAGE_TICK: \"player-bomb-damage-tick\",\n    BOMB_COUNT_CHANGED: \"bomb-count-changed\",\n    POWER_CHANGED: \"power-changed\",\n    SETTINGS_CHANGED: \"SETTINGS_CHANGED\",\n    MAIM_MENU_FROM_GAME_OVER: \"main-menu-from-game-over\",\n    ADD_POWER: \"add-power\",\n    ADD_SCORE: \"add-score\",\n    ADD_BOMB: \"add-bomb\",\n    ADD_LIFE: \"add-life\",\n    START_SPAWNER: \"start-spawner\",\n    STOP_ALL_SPAWNERS: \"stop-all-spawners\",\n    RESET_ALL_SPAWNERS: \"reset-all-spawners\",\n    SPAWN_BOSS: \"spawn-boss\",\n    LEVEL_COMPLETE: \"level-complete\",\n    GAME_COMPLETE: \"game-complete\",\n    PLAYER_READY: \"player-ready\",\n    PAUSE_GAME: \"pause-game\",\n    RESUME_GAME: \"resume-game\",\n    ADD_BONUS_SCORE: \"add-bonus-score\",\n    BOSS_DEFEATED: \"boss-defeated\",\n    BOSS_SPAWNED: \"BOSS_SPAWNED\",\n    BOSS_INIT: \"BOSS_INIT\",\n    BOSS_PHASE_CHANGE: \"BOSS_PHASE_CHANGE\",\n    BOSS_HEALTH_CHANGE: \"BOSS_HEALTH_CHANGE\"\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS90eXBlcy9jdXN0b20tZXZlbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQSxnQkFBZ0JDLE9BQU9DLE1BQU0sQ0FBQztJQUN2Q0MsWUFBWTtJQUNaQyxpQkFBaUI7SUFDakJDLFdBQVc7SUFDWEMsY0FBYztJQUNkQyxrQkFBa0I7SUFDbEJDLFdBQVc7SUFDWEMsVUFBVTtJQUNWQyxZQUFZO0lBQ1pDLFlBQVk7SUFDWkMsY0FBYztJQUNkQyxlQUFlO0lBQ2ZDLGNBQWM7SUFDZEMsc0JBQXNCO0lBQ3RCQyxnQkFBZ0I7SUFDaEJDLHVCQUF1QjtJQUN2QkMseUJBQXlCO0lBQ3pCQyxvQkFBb0I7SUFDcEJDLGVBQWU7SUFDZkMsa0JBQWtCO0lBQ2xCQywwQkFBMEI7SUFFMUJDLFdBQVc7SUFDWEMsV0FBVztJQUNYQyxVQUFVO0lBQ1ZDLFVBQVU7SUFFVkMsZUFBZTtJQUNmQyxtQkFBbUI7SUFDbkJDLG9CQUFvQjtJQUNwQkMsWUFBWTtJQUNaQyxnQkFBZ0I7SUFDaEJDLGVBQWU7SUFDZkMsY0FBYztJQUNkQyxZQUFZO0lBQ1pDLGFBQWE7SUFDYkMsaUJBQWlCO0lBRWpCQyxlQUFlO0lBQ2ZDLGNBQWM7SUFDZEMsV0FBVztJQUNYQyxtQkFBbUI7SUFDbkJDLG9CQUFvQjtBQUN4QixHQUFZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL3R5cGVzL2N1c3RvbS1ldmVudHMudHM/NGMwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgQ1VTVE9NX0VWRU5UUyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgRU5FTVlfSU5JVDogJ0VORU1ZX0lOSVQnLFxyXG4gICAgRU5FTVlfREVTVFJPWUVEOiAnRU5FTVlfREVTVFJPWUVEJyxcclxuICAgIEVORU1ZX0hJVDogJ0VORU1ZX0hJVCcsXHJcbiAgICBQTEFZRVJfU1BBV046ICdQTEFZRVJfU1BBV04nLFxyXG4gICAgUExBWUVSX0RFU1RST1lFRDogJ1BMQVlFUl9ERVNUUk9ZRUQnLFxyXG4gICAgR0FNRV9PVkVSOiAnR0FNRV9PVkVSJyxcclxuICAgIFNISVBfSElUOiAnU0hJUF9ISVQnLFxyXG4gICAgU0hJUF9TSE9PVDogJ1NISVBfU0hPT1QnLFxyXG4gICAgU1RBUlRfR0FNRTogJ3N0YXJ0LWdhbWUnLFxyXG4gICAgUkVTVEFSVF9HQU1FOiAncmVzdGFydC1nYW1lJyxcclxuICAgIENPTlRJTlVFX0dBTUU6ICdjb250aW51ZS1nYW1lJyxcclxuICAgIENMRUFOVVBfR0FNRTogJ2NsZWFudXAtZ2FtZScsXHJcbiAgICBXRUFQT05fUE9XRVJfQ0hBTkdFRDogJ1dFQVBPTl9QT1dFUl9DSEFOR0VEJyxcclxuICAgIFdFQVBPTl9DSEFOR0VEOiAnV0VBUE9OX0NIQU5HRUQnLFxyXG4gICAgUExBWUVSX0JPTUJfQUNUSVZBVEVEOiAncGxheWVyLWJvbWItYWN0aXZhdGVkJyxcclxuICAgIFBMQVlFUl9CT01CX0RBTUFHRV9USUNLOiAncGxheWVyLWJvbWItZGFtYWdlLXRpY2snLFxyXG4gICAgQk9NQl9DT1VOVF9DSEFOR0VEOiAnYm9tYi1jb3VudC1jaGFuZ2VkJyxcclxuICAgIFBPV0VSX0NIQU5HRUQ6ICdwb3dlci1jaGFuZ2VkJyxcclxuICAgIFNFVFRJTkdTX0NIQU5HRUQ6ICdTRVRUSU5HU19DSEFOR0VEJyxcclxuICAgIE1BSU1fTUVOVV9GUk9NX0dBTUVfT1ZFUjogJ21haW4tbWVudS1mcm9tLWdhbWUtb3ZlcicsXHJcblxyXG4gICAgQUREX1BPV0VSOiAnYWRkLXBvd2VyJyxcclxuICAgIEFERF9TQ09SRTogJ2FkZC1zY29yZScsXHJcbiAgICBBRERfQk9NQjogJ2FkZC1ib21iJyxcclxuICAgIEFERF9MSUZFOiAnYWRkLWxpZmUnLFxyXG4gIFxyXG4gICAgU1RBUlRfU1BBV05FUjogJ3N0YXJ0LXNwYXduZXInLFxyXG4gICAgU1RPUF9BTExfU1BBV05FUlM6ICdzdG9wLWFsbC1zcGF3bmVycycsXHJcbiAgICBSRVNFVF9BTExfU1BBV05FUlM6ICdyZXNldC1hbGwtc3Bhd25lcnMnLFxyXG4gICAgU1BBV05fQk9TUzogJ3NwYXduLWJvc3MnLFxyXG4gICAgTEVWRUxfQ09NUExFVEU6ICdsZXZlbC1jb21wbGV0ZScsXHJcbiAgICBHQU1FX0NPTVBMRVRFOiAnZ2FtZS1jb21wbGV0ZScsXHJcbiAgICBQTEFZRVJfUkVBRFk6ICdwbGF5ZXItcmVhZHknLFxyXG4gICAgUEFVU0VfR0FNRTogJ3BhdXNlLWdhbWUnLFxyXG4gICAgUkVTVU1FX0dBTUU6ICdyZXN1bWUtZ2FtZScsXHJcbiAgICBBRERfQk9OVVNfU0NPUkU6ICdhZGQtYm9udXMtc2NvcmUnLFxyXG4gICAgXHJcbiAgICBCT1NTX0RFRkVBVEVEOiAnYm9zcy1kZWZlYXRlZCcsXHJcbiAgICBCT1NTX1NQQVdORUQ6ICdCT1NTX1NQQVdORUQnLFxyXG4gICAgQk9TU19JTklUOiAnQk9TU19JTklUJyxcclxuICAgIEJPU1NfUEhBU0VfQ0hBTkdFOiAnQk9TU19QSEFTRV9DSEFOR0UnLFxyXG4gICAgQk9TU19IRUFMVEhfQ0hBTkdFOiAnQk9TU19IRUFMVEhfQ0hBTkdFJyxcclxufSBhcyBjb25zdCk7XHJcbiAgXHJcbmV4cG9ydCB0eXBlIEN1c3RvbUV2ZW50cyA9IHR5cGVvZiBDVVNUT01fRVZFTlRTW2tleW9mIHR5cGVvZiBDVVNUT01fRVZFTlRTXTsiXSwibmFtZXMiOlsiQ1VTVE9NX0VWRU5UUyIsIk9iamVjdCIsImZyZWV6ZSIsIkVORU1ZX0lOSVQiLCJFTkVNWV9ERVNUUk9ZRUQiLCJFTkVNWV9ISVQiLCJQTEFZRVJfU1BBV04iLCJQTEFZRVJfREVTVFJPWUVEIiwiR0FNRV9PVkVSIiwiU0hJUF9ISVQiLCJTSElQX1NIT09UIiwiU1RBUlRfR0FNRSIsIlJFU1RBUlRfR0FNRSIsIkNPTlRJTlVFX0dBTUUiLCJDTEVBTlVQX0dBTUUiLCJXRUFQT05fUE9XRVJfQ0hBTkdFRCIsIldFQVBPTl9DSEFOR0VEIiwiUExBWUVSX0JPTUJfQUNUSVZBVEVEIiwiUExBWUVSX0JPTUJfREFNQUdFX1RJQ0siLCJCT01CX0NPVU5UX0NIQU5HRUQiLCJQT1dFUl9DSEFOR0VEIiwiU0VUVElOR1NfQ0hBTkdFRCIsIk1BSU1fTUVOVV9GUk9NX0dBTUVfT1ZFUiIsIkFERF9QT1dFUiIsIkFERF9TQ09SRSIsIkFERF9CT01CIiwiQUREX0xJRkUiLCJTVEFSVF9TUEFXTkVSIiwiU1RPUF9BTExfU1BBV05FUlMiLCJSRVNFVF9BTExfU1BBV05FUlMiLCJTUEFXTl9CT1NTIiwiTEVWRUxfQ09NUExFVEUiLCJHQU1FX0NPTVBMRVRFIiwiUExBWUVSX1JFQURZIiwiUEFVU0VfR0FNRSIsIlJFU1VNRV9HQU1FIiwiQUREX0JPTlVTX1NDT1JFIiwiQk9TU19ERUZFQVRFRCIsIkJPU1NfU1BBV05FRCIsIkJPU1NfSU5JVCIsIkJPU1NfUEhBU0VfQ0hBTkdFIiwiQk9TU19IRUFMVEhfQ0hBTkdFIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/types/custom-events.ts\n");

/***/ }),

/***/ "./src/game/utils/graphics-utils.ts":
/*!******************************************!*\
  !*** ./src/game/utils/graphics-utils.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GraphicsUtils: () => (/* binding */ GraphicsUtils)\n/* harmony export */ });\nclass GraphicsUtils {\n    static createBombItem(scene, x, y) {\n        const graphics = scene.add.graphics();\n        // Зеленая звезда 32x32\n        graphics.fillStyle(0x00ff00, 1);\n        graphics.lineStyle(3, 0xffffff, 1); // Более толстая рамка\n        this.drawStar(graphics, x, y, 5, 16, 8 // Внутренний радиус\n        );\n        return graphics;\n    }\n    static createHealthItem(scene, x, y) {\n        const graphics = scene.add.graphics();\n        // Красная звезда 32x32\n        graphics.fillStyle(0xff0000, 1);\n        graphics.lineStyle(3, 0xffffff, 1);\n        this.drawStar(graphics, x, y, 5, 16, 8 // Внутренний радиус\n        );\n        return graphics;\n    }\n    static createPowerItem(scene, x, y) {\n        const size = 16;\n        const graphics = scene.add.graphics();\n        // Красный квадрат 16x16 с толстой внутренней рамкой\n        graphics.fillStyle(0xff0000, 1);\n        graphics.fillRect(-size / 2, -size / 2, size, size);\n        // Толстая белая рамка (3px) внутри квадрата\n        graphics.lineStyle(3, 0xffffff, 1);\n        graphics.strokeRect(-size / 2, -size / 2, size, size);\n        return graphics;\n    }\n    static createScoreItem(scene, x, y) {\n        const size = 16;\n        const graphics = scene.add.graphics();\n        // Синий квадрат 16x16 с толстой внутренней рамкой\n        graphics.fillStyle(0x0000ff, 1);\n        graphics.fillRect(-size / 2, -size / 2, size, size);\n        // Толстая белая рамка (3px) внутри квадрата\n        graphics.lineStyle(3, 0xffffff, 1);\n        graphics.strokeRect(-size / 2, -size / 2, size, size);\n        return graphics;\n    }\n    static createBombIcon(scene, x, y) {\n        const graphics = scene.add.graphics();\n        // Зеленая звезда для иконки бомбы\n        graphics.fillStyle(0x00ff00, 1);\n        graphics.lineStyle(2, 0xffffff, 1);\n        this.drawStar(graphics, x, y, 5, 10, 5 // Внутренний радиус\n        );\n        return graphics;\n    }\n    static drawStar(graphics, x, y, points, outerRadius, innerRadius) {\n        const angle = Math.PI / points;\n        let rotation = Math.PI / 2 * 3;\n        graphics.beginPath();\n        graphics.moveTo(x, y - outerRadius);\n        for(let i = 0; i < points; i++){\n            const outerX = x + Math.cos(rotation) * outerRadius;\n            const outerY = y + Math.sin(rotation) * outerRadius;\n            graphics.lineTo(outerX, outerY);\n            rotation += angle;\n            const innerX = x + Math.cos(rotation) * innerRadius;\n            const innerY = y + Math.sin(rotation) * innerRadius;\n            graphics.lineTo(innerX, innerY);\n            rotation += angle;\n        }\n        graphics.lineTo(x, y - outerRadius);\n        graphics.closePath();\n        graphics.fillPath();\n        graphics.strokePath();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVN4QixJQUFJa0IsS0FBS08sR0FBRyxDQUFDTCxZQUFZTDtZQUN4QyxNQUFNVyxTQUFTekIsSUFBSWlCLEtBQUtTLEdBQUcsQ0FBQ1AsWUFBWUw7WUFDeENiLFNBQVMwQixNQUFNLENBQUNKLFFBQVFFO1lBQ3hCTixZQUFZSDtZQUVaLE1BQU1ZLFNBQVM3QixJQUFJa0IsS0FBS08sR0FBRyxDQUFDTCxZQUFZSjtZQUN4QyxNQUFNYyxTQUFTN0IsSUFBSWlCLEtBQUtTLEdBQUcsQ0FBQ1AsWUFBWUo7WUFDeENkLFNBQVMwQixNQUFNLENBQUNDLFFBQVFDO1lBQ3hCVixZQUFZSDtRQUNoQjtRQUVBZixTQUFTMEIsTUFBTSxDQUFDNUIsR0FBR0MsSUFBSWM7UUFDdkJiLFNBQVM2QixTQUFTO1FBQ2xCN0IsU0FBUzhCLFFBQVE7UUFDakI5QixTQUFTK0IsVUFBVTtJQUN2QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW5kLW9mLWNvdXJzZS8uL3NyYy9nYW1lL3V0aWxzL2dyYXBoaWNzLXV0aWxzLnRzPzYxMjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdyYXBoaWNzVXRpbHMge1xyXG4gICAgc3RhdGljIGNyZWF0ZUJvbWJJdGVtKHNjZW5lOiBQaGFzZXIuU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyKTogUGhhc2VyLkdhbWVPYmplY3RzLkdyYXBoaWNzIHtcclxuICAgICAgICBjb25zdCBncmFwaGljcyA9IHNjZW5lLmFkZC5ncmFwaGljcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCX0LXQu9C10L3QsNGPINC30LLQtdC30LTQsCAzMngzMlxyXG4gICAgICAgIGdyYXBoaWNzLmZpbGxTdHlsZSgweDAwZmYwMCwgMSk7XHJcbiAgICAgICAgZ3JhcGhpY3MubGluZVN0eWxlKDMsIDB4ZmZmZmZmLCAxKTsgLy8g0JHQvtC70LXQtSDRgtC+0LvRgdGC0LDRjyDRgNCw0LzQutCwXHJcbiAgICAgICAgdGhpcy5kcmF3U3RhcihcclxuICAgICAgICAgICAgZ3JhcGhpY3MsXHJcbiAgICAgICAgICAgIHgsIHksXHJcbiAgICAgICAgICAgIDUsICAvLyA1INC70YPRh9C10LlcclxuICAgICAgICAgICAgMTYsIC8vINCS0L3QtdGI0L3QuNC5INGA0LDQtNC40YPRgVxyXG4gICAgICAgICAgICA4ICAgLy8g0JLQvdGD0YLRgNC10L3QvdC40Lkg0YDQsNC00LjRg9GBXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZ3JhcGhpY3M7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZUhlYWx0aEl0ZW0oc2NlbmU6IFBoYXNlci5TY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3Mge1xyXG4gICAgICAgIGNvbnN0IGdyYXBoaWNzID0gc2NlbmUuYWRkLmdyYXBoaWNzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0JrRgNCw0YHQvdCw0Y8g0LfQstC10LfQtNCwIDMyeDMyXHJcbiAgICAgICAgZ3JhcGhpY3MuZmlsbFN0eWxlKDB4ZmYwMDAwLCAxKTtcclxuICAgICAgICBncmFwaGljcy5saW5lU3R5bGUoMywgMHhmZmZmZmYsIDEpO1xyXG4gICAgICAgIHRoaXMuZHJhd1N0YXIoXHJcbiAgICAgICAgICAgIGdyYXBoaWNzLFxyXG4gICAgICAgICAgICB4LCB5LFxyXG4gICAgICAgICAgICA1LCAgLy8gNSDQu9GD0YfQtdC5XHJcbiAgICAgICAgICAgIDE2LCAvLyDQktC90LXRiNC90LjQuSDRgNCw0LTQuNGD0YFcclxuICAgICAgICAgICAgOCAgIC8vINCS0L3Rg9GC0YDQtdC90L3QuNC5INGA0LDQtNC40YPRgVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGdyYXBoaWNzO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVQb3dlckl0ZW0oc2NlbmU6IFBoYXNlci5TY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3Mge1xyXG4gICAgICAgIGNvbnN0IHNpemUgPSAxNjtcclxuICAgICAgICBjb25zdCBncmFwaGljcyA9IHNjZW5lLmFkZC5ncmFwaGljcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCa0YDQsNGB0L3Ri9C5INC60LLQsNC00YDQsNGCIDE2eDE2INGBINGC0L7Qu9GB0YLQvtC5INCy0L3Rg9GC0YDQtdC90L3QtdC5INGA0LDQvNC60L7QuVxyXG4gICAgICAgIGdyYXBoaWNzLmZpbGxTdHlsZSgweGZmMDAwMCwgMSk7XHJcbiAgICAgICAgZ3JhcGhpY3MuZmlsbFJlY3QoLXNpemUvMiwgLXNpemUvMiwgc2l6ZSwgc2l6ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0KLQvtC70YHRgtCw0Y8g0LHQtdC70LDRjyDRgNCw0LzQutCwICgzcHgpINCy0L3Rg9GC0YDQuCDQutCy0LDQtNGA0LDRgtCwXHJcbiAgICAgICAgZ3JhcGhpY3MubGluZVN0eWxlKDMsIDB4ZmZmZmZmLCAxKTtcclxuICAgICAgICBncmFwaGljcy5zdHJva2VSZWN0KC1zaXplLzIsIC1zaXplLzIsIHNpemUsIHNpemUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBncmFwaGljcztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3JlYXRlU2NvcmVJdGVtKHNjZW5lOiBQaGFzZXIuU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyKTogUGhhc2VyLkdhbWVPYmplY3RzLkdyYXBoaWNzIHtcclxuICAgICAgICBjb25zdCBzaXplID0gMTY7XHJcbiAgICAgICAgY29uc3QgZ3JhcGhpY3MgPSBzY2VuZS5hZGQuZ3JhcGhpY3MoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQodC40L3QuNC5INC60LLQsNC00YDQsNGCIDE2eDE2INGBINGC0L7Qu9GB0YLQvtC5INCy0L3Rg9GC0YDQtdC90L3QtdC5INGA0LDQvNC60L7QuVxyXG4gICAgICAgIGdyYXBoaWNzLmZpbGxTdHlsZSgweDAwMDBmZiwgMSk7XHJcbiAgICAgICAgZ3JhcGhpY3MuZmlsbFJlY3QoLXNpemUvMiwgLXNpemUvMiwgc2l6ZSwgc2l6ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0KLQvtC70YHRgtCw0Y8g0LHQtdC70LDRjyDRgNCw0LzQutCwICgzcHgpINCy0L3Rg9GC0YDQuCDQutCy0LDQtNGA0LDRgtCwXHJcbiAgICAgICAgZ3JhcGhpY3MubGluZVN0eWxlKDMsIDB4ZmZmZmZmLCAxKTtcclxuICAgICAgICBncmFwaGljcy5zdHJva2VSZWN0KC1zaXplLzIsIC1zaXplLzIsIHNpemUsIHNpemUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBncmFwaGljcztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3JlYXRlQm9tYkljb24oc2NlbmU6IFBoYXNlci5TY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3Mge1xyXG4gICAgICAgIGNvbnN0IGdyYXBoaWNzID0gc2NlbmUuYWRkLmdyYXBoaWNzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0JfQtdC70LXQvdCw0Y8g0LfQstC10LfQtNCwINC00LvRjyDQuNC60L7QvdC60Lgg0LHQvtC80LHRi1xyXG4gICAgICAgIGdyYXBoaWNzLmZpbGxTdHlsZSgweDAwZmYwMCwgMSk7XHJcbiAgICAgICAgZ3JhcGhpY3MubGluZVN0eWxlKDIsIDB4ZmZmZmZmLCAxKTtcclxuICAgICAgICB0aGlzLmRyYXdTdGFyKFxyXG4gICAgICAgICAgICBncmFwaGljcyxcclxuICAgICAgICAgICAgeCwgeSxcclxuICAgICAgICAgICAgNSwgIC8vIDUg0LvRg9GH0LXQuVxyXG4gICAgICAgICAgICAxMCwgLy8g0JLQvdC10YjQvdC40Lkg0YDQsNC00LjRg9GBXHJcbiAgICAgICAgICAgIDUgICAvLyDQktC90YPRgtGA0LXQvdC90LjQuSDRgNCw0LTQuNGD0YFcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBncmFwaGljcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBkcmF3U3RhcihcclxuICAgICAgICBncmFwaGljczogUGhhc2VyLkdhbWVPYmplY3RzLkdyYXBoaWNzLFxyXG4gICAgICAgIHg6IG51bWJlcixcclxuICAgICAgICB5OiBudW1iZXIsXHJcbiAgICAgICAgcG9pbnRzOiBudW1iZXIsXHJcbiAgICAgICAgb3V0ZXJSYWRpdXM6IG51bWJlcixcclxuICAgICAgICBpbm5lclJhZGl1czogbnVtYmVyXHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGguUEkgLyBwb2ludHM7XHJcbiAgICAgICAgbGV0IHJvdGF0aW9uID0gTWF0aC5QSSAvIDIgKiAzO1xyXG4gICAgXHJcbiAgICAgICAgZ3JhcGhpY3MuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgZ3JhcGhpY3MubW92ZVRvKHgsIHkgLSBvdXRlclJhZGl1cyk7XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50czsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dGVyWCA9IHggKyBNYXRoLmNvcyhyb3RhdGlvbikgKiBvdXRlclJhZGl1cztcclxuICAgICAgICAgICAgY29uc3Qgb3V0ZXJZID0geSArIE1hdGguc2luKHJvdGF0aW9uKSAqIG91dGVyUmFkaXVzO1xyXG4gICAgICAgICAgICBncmFwaGljcy5saW5lVG8ob3V0ZXJYLCBvdXRlclkpO1xyXG4gICAgICAgICAgICByb3RhdGlvbiArPSBhbmdsZTtcclxuICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpbm5lclggPSB4ICsgTWF0aC5jb3Mocm90YXRpb24pICogaW5uZXJSYWRpdXM7XHJcbiAgICAgICAgICAgIGNvbnN0IGlubmVyWSA9IHkgKyBNYXRoLnNpbihyb3RhdGlvbikgKiBpbm5lclJhZGl1cztcclxuICAgICAgICAgICAgZ3JhcGhpY3MubGluZVRvKGlubmVyWCwgaW5uZXJZKTtcclxuICAgICAgICAgICAgcm90YXRpb24gKz0gYW5nbGU7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZ3JhcGhpY3MubGluZVRvKHgsIHkgLSBvdXRlclJhZGl1cyk7XHJcbiAgICAgICAgZ3JhcGhpY3MuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgZ3JhcGhpY3MuZmlsbFBhdGgoKTtcclxuICAgICAgICBncmFwaGljcy5zdHJva2VQYXRoKCk7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiR3JhcGhpY3NVdGlscyIsImNyZWF0ZUJvbWJJdGVtIiwic2NlbmUiLCJ4IiwieSIsImdyYXBoaWNzIiwiYWRkIiwiZmlsbFN0eWxlIiwibGluZVN0eWxlIiwiZHJhd1N0YXIiLCJjcmVhdGVIZWFsdGhJdGVtIiwiY3JlYXRlUG93ZXJJdGVtIiwic2l6ZSIsImZpbGxSZWN0Iiwic3Ryb2tlUmVjdCIsImNyZWF0ZVNjb3JlSXRlbSIsImNyZWF0ZUJvbWJJY29uIiwicG9pbnRzIiwib3V0ZXJSYWRpdXMiLCJpbm5lclJhZGl1cyIsImFuZ2xlIiwiTWF0aCIsIlBJIiwicm90YXRpb24iLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJpIiwib3V0ZXJYIiwiY29zIiwib3V0ZXJZIiwic2luIiwibGluZVRvIiwiaW5uZXJYIiwiaW5uZXJZIiwiY2xvc2VQYXRoIiwiZmlsbFBhdGgiLCJzdHJva2VQYXRoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/utils/graphics-utils.ts\n");

/***/ })

};
;